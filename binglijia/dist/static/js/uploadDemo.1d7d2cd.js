(window.webpackJsonp=window.webpackJsonp||[]).push([[2],{0:function(e,t,i){"use strict";var a=i(2),n=i.n(a),s=i(18),o=i.n(s),r=(i(6),{ajax:function(e){o()({url:e.url,method:e.method||"get",data:e.data,transformRequest:[function(t){if(e.paramJson)return"paramJson="+n()(t)}],headers:{"X-Requested-With":"XMLHttpRequest"}}).then(function(t){e.success&&e.success(t)}).catch(function(t){e.fail&&e.fail(t)})},ajax2:function(e){(e=e||{}).type=(e.type||"GET").toUpperCase(),e.dataType=e.dataType||"json";var t=function(e){var t=[];for(var i in e)t.push(encodeURIComponent(i)+"="+encodeURIComponent(e[i]));return t.push(("v="+Math.random()).replace(".","")),t.join("&")}(e.data),i=new XMLHttpRequest;i.onreadystatechange=function(){if(4==i.readyState){var t=i.status;t>=200&&t<300?e.success&&e.success(JSON.parse(i.responseText),i.responseXML):e.fail&&e.fail(t)}},"GET"==e.type?(i.open("GET",e.url+"?"+t,!0),i.send(null)):"POST"==e.type&&(i.open("POST",e.url,!0),i.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),i.send(t))},cutLine:function(e,t,i,a){var n=[];e&&e.lastIndexOf(t)>-1?n=e.split(t):n.push(e);for(var s="",o=0;o<n.length;o++)n[o]&&(n[o].split(i)[1]?s+=n[o].split(i)[1]+a:s+=n[o]+a);return s.substring(0,s.length-1)},getStrLen:function(e,t){var i="",a=0;if(!e)return"";for(var n=0;n<e.length&&(e.charCodeAt(n)>128?a+=2:a++,a<=t);n++)i=i.concat(e[n]);return a>t&&(i+="..."),i},getByteLen:function(e){var t=0;if(!e)return 0;for(var i=0;i<e.length;i++)e.charCodeAt(i)>128?t+=2:t++;return t},getParamFromUrl:function(e,t){var i=e.split("?"),a=new RegExp("(^|&)"+t+"=([^&]*)(&|$)","i"),n=i[1].match(a);return null!=n?unescape(n[2]):null},getpara:function(e){var t=document.URL,i={},a=void 0;if(t.lastIndexOf(e||"?")>0)for(var n=t.substring(t.lastIndexOf(e||"?")+1,t.length).split("&"),s=0;s<n.length;s++)i[(a=n[s].split("="))[0]]=this.htmlToString(decodeURIComponent(a[1]));return i},isEmptyObject:function(e){for(var t in e)return!1;return!0},hasResponseData:function(e){return!(!(e&&e.responseObject&&e.responseObject.responseData)||this.isEmptyObject(e.responseObject.responseData))},hasResponseData2:function(e){return!(!e||!e.responseData||this.isEmptyObject(e.responseData))},hasResponseMessage:function(e){return!(!(e&&e.responseObject&&e.responseObject.responseMessage)||this.isEmptyObject(e.responseObject.responseMessage))},htmlToString:function(e){var t=(e+"").replace(/[<>&]/g,function(e){return{"<":"&lt;",">":"&gt;","&":"&amp;"}[e]}),i=t.split("&lt;/a&gt;&lt;a");return t=(t=i.length>=2?i.map(function(e,t){var i=e.replace(/\&lt\;a[\s]*href\=\"?(\S*)\"?\&gt\;([\S\s]*)/gi,'<a href="$1">$2');return i=(i=i.replace(/[\s]*href\=\"?(\S*)\"?\&gt\;([\S\s]*)&lt\;\/a\&gt\;/gi,'<a href="$1">$2</a>')).replace(/[\s]*href\=\"?(\S*)\"?\&gt\;([\S\s]*)/gi,'<a href="$1">$2</a>')}).join():(t+"").replace(/\&lt\;a[\s]*href\=\"?(\S*)\"?\&gt\;([\S\s]*)\&lt\;\/a\&gt\;/gi,'<a href="$1">$2</a>')).replace(/@@/g,"@")},symbolToString:function(e){var t=e.replace(/[<>]/g,function(e){return{"<":"&lt;",">":"&gt;"}[e]}),i=t.split("&lt;/a&gt;&lt;a");return t=(t=i.length>=2?i.map(function(e,t){var i=e.replace(/\&lt\;a[\s]*href\=\"?(\S*)\"?\&gt\;([\S\s]*)/gi,'<a href="$1">$2');return i=(i=i.replace(/[\s]*href\=\"?(\S*)\"?\&gt\;([\S\s]*)&lt\;\/a\&gt\;/gi,'<a href="$1">$2</a>')).replace(/[\s]*href\=\"?(\S*)\"?\&gt\;([\S\s]*)/gi,'<a href="$1">$2</a>')}).join():(t+"").replace(/\&lt\;a[\s]*href\=\"?(\S*)\"?\&gt\;([\S\s]*)\&lt\;\/a\&gt\;/gi,'<a href="$1">$2</a>')).replace(/@@/g,"@")},escapeReplace:function(e){return e.replace(/[+/?#&=!%]/g,function(e){return{"+":"%2B","/":"%2F","?":"%3F","#":"%23","&":"%26","=":"%3D","!":"%21","%":"%25"}[e]})},bodyScroll:function(){document.getElementsByTagName("body")[0].style.height="100%",document.getElementsByTagName("html")[0].style.height="100%",document.getElementsByTagName("body")[0].style.overflow="hidden",document.getElementsByTagName("html")[0].style.overflow="hidden"},bodyNoScroll:function(){document.getElementsByTagName("body")[0].style.height="auto",document.getElementsByTagName("html")[0].style.height="auto",document.getElementsByTagName("body")[0].style.overflow="auto",document.getElementsByTagName("html")[0].style.overflow="auto"},browser:{mozilla:/firefox/.test(navigator.userAgent.toLowerCase()),webkit:/webkit/.test(navigator.userAgent.toLowerCase()),opera:/opera/.test(navigator.userAgent.toLowerCase()),msie:/msie/.test(navigator.userAgent.toLowerCase()),versions:function(){var e=navigator.userAgent;navigator.appVersion;return{trident:e.indexOf("Trident")>-1,presto:e.indexOf("Presto")>-1,webKit:e.indexOf("AppleWebKit")>-1,gecko:e.indexOf("Gecko")>-1&&-1==e.indexOf("KHTML"),mobile:!!e.match(/AppleWebKit.*Mobile.*/)||!!e.match(/AppleWebKit/),ios:!!e.match(/\(i[^;]+;( U;)? CPU.+Mac OS X/),android:e.indexOf("Android")>-1||e.indexOf("Linux")>-1,iPhone:e.indexOf("iPhone")>-1||e.indexOf("Mac")>-1,iPad:e.indexOf("iPad")>-1,webApp:-1===e.indexOf("Safari")}}(),language:(navigator.browserLanguage||navigator.language).toLowerCase(),isIe8:function(){var e=navigator.appName,t=navigator.appVersion.split(";"),i=void 0!=t[1]&&""!=t[1]?t[1].replace(/[ ]/g,""):"";return"Microsoft Internet Explorer"===e&&"MSIE8.0"==i},isIe9:function(){var e=navigator.appName,t=navigator.appVersion.split(";"),i=void 0!=t[1]&&""!=t[1]?t[1].replace(/[ ]/g,""):"";return"Microsoft Internet Explorer"===e&&"MSIE9.0"==i},isIeOrEdge:function(){var e=navigator.userAgent,t=e.indexOf("compatible")>-1&&e.indexOf("MSIE")>-1,i=e.indexOf("Edge")>-1&&!t,a=e.indexOf("Trident")>-1&&e.indexOf("rv:11.0")>-1;if(t){new RegExp("MSIE (\\d+\\.\\d+);").test(e);parseFloat(RegExp.$1);return!0}return!!i||!!a},isLessIe10:function(){var e=navigator.userAgent,t=e.indexOf("compatible")>-1&&e.indexOf("MSIE")>-1;e.indexOf("Edge"),e.indexOf("Trident")>-1&&e.indexOf("rv:11.0");if(t){new RegExp("MSIE (\\d+\\.\\d+);").test(e);var i=parseFloat(RegExp.$1);return 7==i||(8==i||(9==i||10==i))}return!1}},cookie:{set:function(e,t,i){var a=new Date,n=i;a.setTime(a.getTime()+24*n*3600*1e3),document.cookie=e+"="+t+";expires="+a+";domain=.allinmd.cn"},get:function(e){for(var t=document.cookie.replace(/[ ]/g,"").split(";"),i=void 0,a=0;a<t.length;a++){var n=t[a].split("=");if(e==n[0]){i=n[1];break}}return i},delete:function(e){this.get(e)&&this.set(e,"",-1)}},checkUser:function(){var e=this.cookie.get("userId"),t=localStorage.getItem("userId");e&&""!=e?e!=t&&location.reload():window.location.href="//www.allinmd.cn?from=emr"}});t.a=r},10:function(e,t,i){},110:function(e,t,i){"use strict";var a=i(72).a,n=(i(193),i(1)),s=Object(n.a)(a,function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("section",{staticClass:"uploadConier ev-uploadConier"},[i("div",{staticClass:"uploadColumnCont"},[i("div",{staticClass:"formSelect formCommon"},[i("p",{staticClass:"articleText"},[e._v(e._s(e.uploadColumn.menuName))]),e._v(" "),i("ul",{staticClass:"uploadColumn uploadImg ev-uploadImgList",on:{click:function(t){return t.stopPropagation(),e.viewBigImg(t)}}},[e._l(e.uploadColumn.ImgList,function(t,a){return i("li",{staticClass:"ev-bigImg",attrs:{listId:Date.parse(new Date)+a,"data-id":t.id}},[i("img",{attrs:{src:t.imgSrc}}),e._v(" "),i("span",{staticClass:"deleteImg"}),e._v(" "),i("div",{ref:"remarkMaskItem",refInFor:!0,staticClass:"remarkMask",class:{remarkMaskReady:!e.checkInvalid(t.remarks)}},[i("i",{staticClass:"remarkMaskIcon"}),e._v(" "),i("article",{staticClass:"remarkMaskTitle"},[e._v("添加备注")]),e._v(" "),i("div",{staticClass:"remarkMaskEditPanel",attrs:{remarkValue:t.remarks}},[i("textarea",{staticClass:"editRemark",attrs:{name:"editRemark",cols:"30",rows:"2"},domProps:{value:t.remarks}}),e._v(" "),i("div",{staticClass:"recordPanel",domProps:{textContent:e._s(t.remarks)}})])])])}),e._v(" "),i("li",{staticClass:"ev-addImg",on:{click:function(t){e.addFile("img")}}},[i("i"),i("p",[e._v("添加图片")])])],2)]),e._v(" "),i("div",{staticClass:"formSelect formCommon formVideo"},[i("p",{staticClass:"articleText"}),e._v(" "),i("ul",{staticClass:"uploadColumn uploadVideo ev-uploadVideoList",on:{click:e.maskVideo}},[e._l(e.uploadColumn.VideoList,function(t,a){return i("li",{staticClass:"ev-video",attrs:{"data-path":t.videoPath,"data-id":t.id}},[i("img",{attrs:{src:t.imgSrc}}),e._v(" "),t.videoPath&&-1==t.imgSrc.indexOf("/default/qiniu196_196.jpg")?i("span",{staticClass:"videoBtn"}):e._e(),e._v(" "),i("span",{staticClass:"deleteImg"}),e._v(" "),i("div",{ref:"remarkMaskItem",refInFor:!0,staticClass:"remarkMask",class:{remarkMaskReady:!e.checkInvalid(t.remarks)}},[i("i",{staticClass:"remarkMaskIcon"}),e._v(" "),i("article",{staticClass:"remarkMaskTitle"},[e._v("添加备注")]),e._v(" "),i("div",{staticClass:"remarkMaskEditPanel",attrs:{remarkValue:t.remarks}},[i("textarea",{staticClass:"editRemark",attrs:{name:"editRemark",cols:"30",rows:"2"},domProps:{value:t.remarks}}),e._v(" "),i("div",{staticClass:"recordPanel",domProps:{textContent:e._s(t.remarks)}})])])])}),e._v(" "),i("li",{staticClass:"ev-addVideo",on:{click:function(t){e.addFile("video")}}},[i("i"),i("p",[e._v("添加视频")])])],2),e._v(" "),i("videoPlayer",{attrs:{path:e.videoPath,beginPlay:e.beginPlay},on:{beginFn:e.beginFn}})],1),e._v(" "),i("div",{staticClass:"formSelect formCommon fromMars"},[i("p",{staticClass:"articleText"},[e._v("备注")]),e._v(" "),i("div",{staticClass:"textarea"},[i("textarea",{directives:[{name:"model",rawName:"v-model",value:e.textModel,expression:"textModel"}],domProps:{value:e.textModel},on:{input:function(t){t.target.composing||(e.textModel=t.target.value)}}}),i("i",[e._v(e._s(e.uploadColumn.textAreaLimt-e.textModel.length))])])])]),e._v(" "),e.isLayer?i("div",{staticClass:"uploadCloud"},[i("div",{staticClass:"uploadLayers"}),e._v(" "),i("div",{staticClass:"layersContent"},[i("div",{staticClass:"layersTitle"},[i("h4",{staticClass:"firstTitle",on:{click:e.backFirst}},[e._v("云资料库")]),e._v(" "),e.isFirst?e._e():i("h4",{staticClass:"secontMenu"},[i("i"),e._v(e._s(e.layerTitle))]),e._v(" "),i("span",{on:{click:e.closeLayer}})]),e._v(" "),i("section",{staticClass:"listContainer"},[e.isFirst?i("ul",{staticClass:"layerList",class:{noFileList:!e.layerList.length&&!e.isLoading}},[e._l(e.layerList,function(t,a){return i("li",{on:{click:function(i){e.openFile(t)}}},[i("img",{attrs:{src:"/static/images/pages/uploadColumn/file.png"}}),i("p",{domProps:{textContent:e._s(e.getStrLen(t.noteName,18))}})])}),e._v(" "),e.layerList.length||e.isLoading?e._e():i("div",{staticClass:"noFile"},[e._m(0),e._v(" "),i("p",[e._v("暂无文件")])])],2):i("ul",{staticClass:"imgList",class:{noImgList:!e.layerImgList.length&&!e.isLoading}},[e._l(e.layerImgList,function(t,a){return i("li",{class:{active:-1!=e.isImgSelect.indexOf(a)},on:{click:function(i){e.selecImg(a,t)}}},[i("img",{attrs:{src:"video"==e.addFileType?t.videoPicAttUrl:t.attUrl}}),e._v(" "),"video"==e.addFileType?i("span",{staticClass:"videoBtn"}):e._e(),e._v(" "),i("i")])}),e._v(" "),e.layerImgList.length||e.isLoading?e._e():i("div",{staticClass:"noImg"},[e._m(1),e._v(" "),i("p",[e._v("暂无资料")])])],2),e._v(" "),i("div",{staticClass:"noContent"})]),e._v(" "),i("div",{staticClass:"layerFooter",class:{layerSet:!e.isFirst}},[i("div",{class:{"ev-uploadImgBtn seletImg":"img"==e.addFileType}},[i("button",{directives:[{name:"show",rawName:"v-show",value:e.isFirst,expression:"isFirst"}],staticClass:"selecFile",class:{"ev-uploadVideoBtn":"video"==e.addFileType},attrs:{id:"video"==e.addFileType?"ev-uploadVideoBtn":""}},[e._v("选择本地文件")])]),e._v(" "),e.isFirst?e._e():i("button",{staticClass:"selecSure",class:{noImgList:!e.layerImgList.length},on:{click:e.selectSure}},[e._v("确定"+e._s(e.isImgSelect.length?"("+e.isImgSelect.length+")":""))])])])]):e._e(),e._v(" "),e.isUplaodError?i("section",{staticClass:"uploadCaseError"},[i("i"),i("span",[e._v(e._s(e.uploadErrorText))])]):e._e(),e._v(" "),e.isLoading?i("loading"):e._e()],1)},[function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"imgCont"},[t("img",{attrs:{src:"/static/images/pages/uploadColumn/empty_file.png"}})])},function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"imgCont"},[t("img",{attrs:{src:"/static/images/pages/uploadColumn/empty_information.png"}})])}],!1,null,null,null);t.a=s.exports},12:function(e,t,i){"use strict";var a={},n=(i(37),i(1)),s=Object(n.a)(a,function(){this.$createElement;this._self._c;return this._m(0)},[function(){var e=this.$createElement,t=this._self._c||e;return t("section",{staticClass:"alEmr-loading"},[t("img",{attrs:{src:"/static/images/common/loading.gif"}})])}],!1,null,null,null);t.a=s.exports},124:function(e,t,i){},125:function(e,t,i){"use strict";(function(e){var a=i(11),n=i.n(a),s=i(21),o=i.n(s),r=i(110),l=i(0);t.a={name:"index-app",data:function(){return{uploadData:{HandleId:"214213424",detailId:"1511494149727",caseId:"1531547831333",structureId:"1531897817989",groupId:"1",ImgList:[{imgSrc:"https://img05.allinmd.cn/public1/M01/13/5A/wKgBMFsrdDeAawYfAALjjAJhig4145_c_p_300_300.png",id:"1212312"},{imgSrc:"https://img05.allinmd.cn/public1/M01/13/5A/wKgBMFsrdDeAawYfAALjjAJhig4145_c_p_300_300.png",id:"1212312"},{imgSrc:"https://img05.allinmd.cn/public1/M01/13/5A/wKgBMFsrdDeAawYfAALjjAJhig4145_c_p_300_300.png",id:"1212312"}],VideoList:[{imgSrc:"https://img05.allinmd.cn/public1/M01/13/5A/wKgBMFsrdDeAawYfAALjjAJhig4145_c_p_300_300.png",id:"1212312",videoPath:""},{imgSrc:"https://img05.allinmd.cn/public1/M01/13/5A/wKgBMFsrdDeAawYfAALjjAJhig4145_c_p_300_300.png",id:"1212312",videoPath:"https://vpro01.allinmd.cn/1528162686448_1280_720.mp4?1528162800"},{imgSrc:"https://img05.allinmd.cn/public1/M01/13/5A/wKgBMFsrdDeAawYfAALjjAJhig4145_c_p_300_300.png",id:"1212312",videoPath:"https://vpro01.allinmd.cn/1528162686448_1280_720.mp4?1528162800"}],textVal:"dfdsfasdafdsfsfs",menuName:"术后X片",textAreaLimt:200}}},components:{uploadColumn:r.a},methods:{uploadBackInfo:function(e){},testJson:function(e){function t(){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}(function(){var t=[],i={};e.each(testJson,function(a,n){!function a(n,s){i[s]=n;t.push(i);i={};n.RadioList&&n.RadioList.length>0&&e.each(n.RadioList,function(t,i){i.associatedComponent&&e.each(i.associatedComponent,function(e,t){a(t,e)})})}(n,a)})}),testJsonD:function(e){function t(){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}(function(){for(var e={},t=0,i=testJsonD.responseObject.responseData.data_list,a=0;a<i.length;a++)i[a].sonList&&4==a&&n(i[a].sonList[0],a);function n(i,a){for(var s=0;s<i.length;s++)if(!l.a.isEmptyObject(i[s].caseFolderDetail)){e[t+"_"+a+"_"+s]=i[s].caseFolderDetail,e[t+"_"+a+"_"+s].caseFolderTemplate=i[s].caseFolderTemplate,t++;var o=parseInt(i[s].caseFolderDetail.structureType);if(1==o||2==o||3==o||4==o)for(var r=i[s].caseFolderTemplateScope,d=i[s].caseFolderDetail.content,c=0;c<r.length;c++)r[c].dictionaryId==d&&r[c].relationMap&&n(r[c].relationMap,s)}}}),testJsonDL:function(){for(var e="",t={},i=0,a=testJsonD.responseObject.responseData.data_list,n=0;n<a.length;n++)a[n].sonList&&4==n&&s(a[n].sonList[0],n,!0);function s(a,n,o){for(var r=0;r<a.length;r++)if(!l.a.isEmptyObject(a[r].caseFolderDetail)){t[i]=e,o&&(i++,e="",e+=a[r].caseFolderTemplate.structureName+"@=@");var d=parseInt(a[r].caseFolderDetail.structureType);if(1==d||2==d||3==d||4==d){e+=a[r].caseFolderDetail.formatContent;for(var c=a[r].caseFolderTemplateScope,p=a[r].caseFolderDetail.content,u=0;u<c.length;u++)c[u].dictionaryId==p&&c[u].relationMap&&s(c[u].relationMap,r,!1)}else t[i]=e,e+=a[r].caseFolderDetail.content}}}},mounted:function(){var e=o()(n.a.mark(function e(){return n.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),metaInfo:{title:"模块3"}}}).call(this,i(6))},193:function(e,t,i){"use strict";var a=i(71);i.n(a).a},23:function(e,t,i){},261:function(e,t,i){"use strict";i.r(t);var a=i(4),n=i.n(a),s=(i(39),i(8)),o=i(34),r=i.n(o),l=i(125).a,d=(i(269),i(1)),c=Object(d.a)(l,function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"alEmr-mainInner newCases"},[t("input",{attrs:{accept:"video/mp4,video/quicktime,video/avi,video/x-ms-wmv,video/x-flv,flv",type:"file"}}),this._v(" "),t("input",{attrs:{accept:"video/mp4,video/quicktime,video/avi,video/x-ms-wmv",type:"file"}}),this._v(" "),t("upload-column",{attrs:{uploadColumn:this.uploadData},on:{uploadBackInfo:this.uploadBackInfo}}),this._v(" "),t("upload-column",{attrs:{uploadColumn:this.uploadData}})],1)},[],!1,null,null,null).exports;s.default.use(r.a),new s.default(n()({},c)).$mount("#app")},269:function(e,t,i){"use strict";var a=i(124);i.n(a).a},37:function(e,t,i){"use strict";var a=i(10);i.n(a).a},39:function(e,t,i){"use strict";i(88),i(85),i(84),i(83)},40:function(e,t,i){"use strict";var a=i(0),n=i(6),s={props:["path","beginPlay","isPopup","codeType"],data:function(){return{Inpath:this.path,isBegin:this.beginPlay,transcodingTxt:"转码中...",codingType:this.codeType?this.codeType:2}},watch:{codeType:function(){var e=this;e.codingType=this.codeType,3==e.codeType?e.transcodingTxt="转码中...":4==e.codeType&&(e.transcodingTxt="转码失败")},beginPlay:function(){var e=this;e.beginPlay&&(e.isBegin=this.beginPlay,(3!=e.codeType&&4!=e.codeType||2==e.codeType)&&(e.Inpath=this.path,setTimeout(function(){n("source").attr("src",e.Inpath),e.pluginCKplayerCode(e.Inpath,e.isPopup)},10)))}},methods:{pluginCKplayerCode:function(e,t){var i=this;t||n("body").addClass("bodyHidden");var s=new AllinmdPlayer("ev-videoArea",{width:600,height:400,poster:"//img10.allinmd.cn/v3/terminal/defaultVideo.jpg",flash:{swf:"//paas.allinmd.cn/modules/allinmdplayer/allinmdplayer.swf"},limitPlayTime:{allow:!1,value:3},setMaxPlayTime:{allow:!1,value:0}},function(){void 0!=s?s.player.play():this.play()});s.player.on("play",function(){a.a.players&&n.each(a.a.players,function(e,t){t.player.pause()})}),s.player.on("ended",function(){setTimeout(function(){n("#ev-BgVideo").length<=0||(t||n("body").removeClass("bodyHidden"),i.isBegin=!1,i.$emit("beginFn",!1),n(".videoPlayerBg").hide(),n("#lightbox").hide(),s.player.dispose(),n("#ev-BgVideo,#bg").remove(),a.a.players&&n.each(a.a.players,function(e,t){t.player.play()}))},1e3)}),n("#videoArea").append('<a class="ev-videoPopUpWindowClose" href="javascript:;" style="display:block;width:42px;height:42px;position:absolute;top:-10px;right:-25px;z-index:12;"><img src="//img00.allinmd.cn/detail/close.png"/></a>').find(".ev-videoPopUpWindowClose").on("click",function(e){n("#ev-BgVideo").length<=0||(t||n("body").removeClass("bodyHidden"),i.isBegin=!1,i.$emit("beginFn",!1),n(".videoPlayerBg").hide(),s.player.dispose(),n("#ev-BgVideo,#bg").remove(),a.a.players&&n.each(a.a.players,function(e,t){t.player.play()}))})},quit:function(){this.isBegin=!1,this.$emit("beginFn",!1),n(".videoPlayerBg").hide(),n("#ev-BgVideo,#bg").remove()}},mounted:function(){}},o=(i(80),i(1)),r=Object(o.a)(s,function(){var e=this,t=e.$createElement,i=e._self._c||t;return e.isBegin?i("div",{staticClass:"videoPlayerBg"},[i("div",{attrs:{id:"ev-BgVideo"}},[i("div",{attrs:{id:"videoArea"}},[i("video",{directives:[{name:"show",rawName:"v-show",value:2==e.codingType,expression:"codingType==2"}],staticClass:"video-js vjs-default-skin vjs-no-flex vjs-big-play-centered",attrs:{id:"ev-videoArea",oncontextmenu:"return false"}},[i("source",{attrs:{src:e.Inpath,type:"video/mp4"}})]),e._v(" "),i("div",{directives:[{name:"show",rawName:"v-show",value:2!=e.codingType,expression:"codingType!=2"}],staticClass:"videoTranscoding"},[i("a",{staticClass:"quitBtn",attrs:{href:"javascript:;"},on:{click:function(t){t.stopPropagation(),e.quit()}}},[i("img",{attrs:{src:"//img00.allinmd.cn/detail/close.png"}})]),e._v(" "),i("span",{domProps:{textContent:e._s(e.transcodingTxt)}})])])]),e._v(" "),i("div",{attrs:{id:"lightbox"}})]):e._e()},[],!1,null,null,null);t.a=r.exports},48:function(e,t,i){"use strict";var a=i(0),n="//www.allinmd.cn/call/",s=i(6);a.a.LightBox={element:null,init:function(){var e,t="100%",i="fixed";a.a.browser.msie&&"6.0"===a.a.browser.version&&!s.support.style&&(t=document.documentElement.clientHeight+"px",i="absolute"),s("#lightbox").remove(),e=a.a.browser.msie?'<div id="lightbox" style="left:0;  background:'+this.color+"; top:0; width:100%; height:"+t+";filter: progid:DXImageTransform.Microsoft.Alpha(opacity=100); filter:alpha(opacity="+this.opacity+"); -moz-opacity:"+this.opacity/100+"; opacity:"+this.opacity/100+";zoom:1; position:"+i+'; z-index:9; " ><iframe src="" marginwidth="0" framespacing="0" marginheight="0" frameborder="0" width="100%" height="100%" style="left:0; background:'+this.color+'; top:0; width:100%; filter:alpha(opacity=0); -moz-opacity: 0; opacity: 0;zoom:1; position:absolute; z-index: 9"></iframe></div>':'<div id="lightbox" style="left:0; background:'+this.color+"; top:0; width:100%; height:"+t+"; filter:alpha(opacity="+this.opacity+"); -moz-opacity: "+this.opacity/100+"; opacity: "+this.opacity/100+";zoom:1; position:"+i+'; z-index:9; " ></div>',this.element=s(e).appendTo(document.body),s("#_lightbox").remove(),this.count=0},getZIndex:function(){return parseInt(this.element.css("zIndex"))||-1},hide:function(){var e=this;e.element&&(a.a.browser.msie&&Number(a.a.browser.version)<9?setTimeout(function(){e.count--,(e.count<=0||e.element.css("zIndex")<=9)&&e.element.hide()},200):(e.count--,(e.count<=0||e.element.css("zIndex")<=9)&&(e.element.hide(),a.a.browser.msie||s("div.SecEditCtrl").css("visibility","visible"))))},resetZIndex:function(){return this.setZIndex("9")},setZIndex:function(e){return this.element||this.init(),this.element.css("zIndex",e||this.element.css("zIndex"))},show:function(e,t){return this.opacity=void 0!==e?e:100,this.color=void 0!==t?t:"#000",this.init(),a.a.browser.msie&&"6.0"===a.a.browser.version&&!s.support.style&&this.element.css("height",CU.getDocumentPracticalHeight()+"px"),this.element.show(),this.setZIndex("9"),this.count<0&&(this.count=0),this.count++,this},zIndexUp:function(){this.element.css("zIndex","+=2"),this.element.css("display","block")},zIndexDown:function(){this.element.css("zIndex","-=2")},showloading:function(){this.loading=(this.loading||s('<div style="position:absolute; top:45%; left:36%;z-index:18; display:none" id="ctrollerLoading"><img src="//img10.allinmd.cn/loading/Loading.png" alt="loading" /></div>').appendTo(document.body)).show(),a.a.setCenter(s("#ctrollerLoading"))},hideloading:function(){this.loading&&this.loading.hide()}},a.a.setImgSize=function(e,t,i,a){var n,s,o=new Image;o.src=i.src;var r=1;o.onload=function(){var l=o.width,d=o.height;s=t/l,n=e/d,0===t&&0===e?r=1:0===t?n<1&&(r=n):0===e?s<1&&(r=s):(s<1||n<1)&&(r=s<=n?s:n),r<1&&(l*=r,d*=r),i.height=d,i.width=l,a&&a()}},s.fn.scrollBox=function(e){var t=s.extend({numToMove:2,liClickHdl:null,rows:1},e),i={config:{},left:0,el:{container:this,prevBtn:this.find(".prev"),nextBtn:this.find(".next"),scrollObj:this.find("ul.scroll"),scrollParent:this.find("ul.scroll").parent()},init:function(){var e=this;e.render(),e.bindBtns(),e.updateBtnStatus(),t.liClickHdl&&e.bindLiClick()},bindLiClick:function(){this.el.scrollObj.find("li").on("click",function(e){t.liClickHdl&&t.liClickHdl(this)})},bindBtns:function(){var e=this;e.el.nextBtn.on("click",function(){e.next()}),e.el.prevBtn.on("click",function(){e.prev()})},render:function(){var e=this,i=e.el.scrollObj.find(">li:eq(0)");e.liWidth=i.outerWidth(!0);var a=e.el.scrollObj.find(">li").size();e.scrollWidth=e.liWidth*Math.ceil(a/t.rows),e.scrollParentWidth=e.el.scrollParent.width(),e.el.scrollObj.css({position:"absolute"}),e.el.scrollParent.css({position:"relative",height:e.el.scrollObj.height()})},next:function(){var e=this,i=e.scrollWidth-e.left-e.scrollParentWidth;i>0&&(i>e.liWidth*t.numToMove?e.left=e.left+e.liWidth*t.numToMove:e.left=e.left+i,e.el.scrollObj.animate({left:-e.left}),e.updateBtnStatus())},prev:function(){var e=this;e.left>0&&(e.left>e.liWidth*t.numToMove?e.left=e.left-e.liWidth*t.numToMove:e.left=0,e.el.scrollObj.animate({left:-e.left}),e.updateBtnStatus())},updateBtnStatus:function(){var e=this;e.scrollWidth-e.left-e.scrollParentWidth<=0?e.el.nextBtn.addClass("disable"):e.el.nextBtn.removeClass("disable"),0===e.left?e.el.prevBtn.addClass("disable"):e.el.prevBtn.removeClass("disable")},nextLi:function(){var e=this;e.el.scrollObj.find(".active").next().size()>0&&e.el.scrollObj.find(".active").removeClass("active").next().addClass("active"),e.scrollWidth-e.left-e.scrollParentWidth>0&&(e.left=e.left+e.liWidth,e.el.scrollObj.animate({left:-e.left}))},prevLi:function(){var e=this;e.el.scrollObj.find(".active").prev().size()>0&&e.el.scrollObj.find(".active").removeClass("active").prev().addClass("active"),e.left>0&&(e.left=e.left-e.liWidth,e.el.scrollObj.animate({left:-e.left}))},resize:function(e){var i=this;i.el.container.css({width:e}),i.scrollParentWidth=e,t.numToMove=e/i.liWidth},destroy:function(){this.el.nextBtn.off("click"),this.el.prevBtn.off("click")}};return i.init(),s.extend(this,{prevLi:function(){i.prevLi()},nextLi:function(){i.nextLi()},resize:function(e){i.resize(e)},destroy:function(){i.destroy()}})};t.a=function(e){var t=s.extend({container:null,typeTitle:"",index:0},e),i=t.container;return{path:{caze:n+"case_attachment/json_list/",topic:n+"topic/attachment/json_list/",review:n+"review/json_list_att/"},el:{originList:i},imgListType:"",picType:"width",template:{main:function(){return'<div class="view_big_img_wrap"><div class="view_big_img">        <div class="view_big_img_content">            <div class="view_big_img_center">                    <div class="view_img_close"><img src="//modules.allinmd.cn/view-big-img/images/closeNew.png" /></div>                <div class="view_img_top" id="vbi-scrollList">                    <div class="view_top_img_left_mr prev"></div>                    <div class="view_img_top_cont">                        <ul class="scroll">                            <li><div class="small_img_mr"></div><img src="//modules.allinmd.cn/view-big-img/images/mr_small_img.png" /></li>                        </ul><div class="view_img_num" id="vbi-imgIndex"><span>2</span> / 7<i></i></div>                    </div>                    <div class="view_top_img_right_hover next"></div>                    <div class="clear"></div>                </div>                <div class="view_big_img_cont_bg">                    <div class="view_img_cont_top">                        <div class="view_img_sh_zt hide"></div>                        <div class="view_img_title font_yahei hide" id="vbi-imgTitle"></div>                        <div class="clear"></div>                    </div>                    <div class="view_img_tp">                        <s class="prev" title="上一张"></s>                        <s class="next" title="下一张"></s>                        <div class="view_img_but view_img_shck font_yahei" id="vbi-setSizeBtn">适合窗口</div>                        <div class="view_img_but view_img_shck font_yahei" id="vbi-rotateBtn">旋转图片</div>                        <div class="view_img_but view_img_view_yt font_yahei" id="vbi-viewOrigImg">查看原图</div>                        <table width="100%" height="100%" class="" >                           <tr><td align="center" valign="middle" style="text-align: center"><img src=""  />                           </td></tr>                        </table>                   </div>                </div>            </div>        </div>    </div></div>'}},init:function(){var e=this;if(e.currentIndex=t.index,e.isPopup=t.isPopup,0!=s(t.container).find("img").length){e.checkImgListType(),e.openDialog(e.isPopup),e.dialog.find(".view_img_top_cont ul li:eq("+e.currentIndex+")").click();var i=s(".view_img_top_cont").width(),a=s(".view_img_top_cont li").width()+15,n=(s(".view_img_top_cont li").length,i/a);if(s(".view_img_top_cont .scroll").width(),s("ul.scroll li.active img"),e.currentIndex+1>=n){var o=e.currentIndex/Math.floor(n);if(o>1)for(var r=0;r<o-1;r++)s("#vbi-scrollList .next").click()}s(document).bind("keyup",function(e){return 37==e.keyCode?s(".view_img_tp .prev").click():39==e.keyCode&&s(".view_img_tp .next").click(),e.preventDefault(),!1})}},checkImgListType:function(){var e=this;e.values={},e.values.caseId=s(t.container).attr("caseId"),e.values.topicId=s(t.container).attr("topicId"),e.values.reviewId=s(t.container).attr("reviewId"),e.values.caseCategoryId=s(t.container).attr("caseCategoryId"),void 0!=e.values.topicId&&(e.imgListType="topic"),void 0!=e.values.reviewId&&(e.imgListType="review"),void 0!=e.values.caseId&&(e.imgListType="caze")},bindBtns:function(e){var t=this;t.dialog.find(".view_img_close").on("click",function(i){i.stopPropagation(),i.preventDefault(),t.close(e)}),t.dialog.find("#vbi-setSizeBtn").on("click",function(){"适合窗口"==s(this).text()?(s(this).text("适合宽度"),t.picType="window",t.setSize(t.picType)):(t.picType="width",s(this).text("适合窗口").show(),t.setSize(t.picType))}),t.angle=0,t.prevHeight=s(".view_img_tp").height(),s(".view_img_tp table").css("position","relative"),t.dialog.find("#vbi-rotateBtn").on("click",function(){t.angle+=90,360==t.angle&&(t.angle=0);var e=s(".view_img_tp img").width(),i=s(".view_img_tp img").height(),a=1,n=0,o=s(".view_img_tp table").width();s(".view_img_tp table").height(),90==t.angle||270==t.angle?(e+148>t.prevHeight?i>o?s(".view_img_tp").css({height:o}):e/i<.5?s(".view_img_tp").css({height:o}):s(".view_img_tp").css({height:e+148}):s(".view_img_tp").css({height:t.prevHeight}),i>o&&(a=o/i*100+"%"),s(".view_img_tp img").css({transform:"rotate("+t.angle+"deg)",zoom:a}).attr({zoomW:i*o/i,zoomH:e*o/i}),n=s(".view_img_tp img").width()-e*o/i,s(".view_img_tp img").css({marginTop:1==a?0:-n})):(i+148>t.prevHeight?s(".view_img_tp").css({height:i}):s(".view_img_tp").css({height:t.prevHeight}),s(".view_img_tp img").css({transform:"rotate("+t.angle+"deg)",zoom:1}),s(".view_img_tp img").css({marginTop:0}))}).on("selectstart",function(){return!1}),t.dialog.find("#vbi-viewOrigImg").on("click",function(){var e="/pages/singlePage/viewOriginalImg/viewOriginalImg.html?"+t.getHrefParam(t.imgListType);t.currentIndex&&(e+="&index="+t.currentIndex),window.open(e)}).on("selectstart",function(){return!1})},changeImg:function(t){var i=this;i.dialog.find("#vbi-imgTitle").html(t.title),i.dialog.find("#vbi-imgIndex span").html(t.index+1),i.angle=0,i.dialog.find(".view_img_tp img").css({transform:"rotate(0deg)",zoom:1,marginTop:0}),e.srcSplit?i.dialog.find(".view_img_tp img").attr("src",/_t_\d{3}_\d{3}/g.test(t.src)?t.src.replace(/_t_\d{3}_\d{3}/g,""):t.src):i.dialog.find(".view_img_tp img").attr("src",t.src),t.uploadTime&&i.dialog.find("#uploadTime").text("上传于："+t.uploadTime.split(".")[0]),i.setSize(i.picType);var a=s("ul.scroll li.active img"),n=a.attr("title");n&&a.attr("title").length>36&&(n=a.attr("title").substring(0,36)+"..."),s("#vbi-imgIndex").find("i").attr({"data-text":a.attr("title")}).html(n),n&&i.subText()},bindWindonResize:function(){var e=this;s(window).on("resize",function(){e.resize()})},unbindWindonResize:function(){s(window).off("resize")},resize:function(){var e=this;e.dialog.css({width:s(window).width(),height:s(window).height()});var t=s(window).width()>1080?1e3:s(window).width()-80,i=e.topContainer.find(".prev").outerWidth(!0)+e.topContainer.find(".next").outerWidth(!0);e.topContainer.find("ul.scroll").width()>t-i&&e.topContainer.find(".view_img_top_cont").width(t-i),void 0!=e.scrollbox&&e.scrollbox.resize(t-i),e.topContainer.width(t),parseInt(e.dialog.find(".view_big_img_cont_bg").css("padding-left")),s(window).width()<1080?e.dialog.find(".view_big_img_center").width(s(window).width()-80):e.dialog.find(".view_big_img_center").width(1e3),"适合宽度"==e.dialog.find("#vbi-setSizeBtn").text()?e.setSize("window"):e.setSize("width")},openDialog:function(){var e=this;e.dialog=s(e.template.main()),0==s(".view_big_img_wrap").length&&s("body").append(e.dialog),e.topContainer=e.dialog.find(".view_img_top"),e.picContainer=e.dialog.find(".view_img_tp"),e.img=e.dialog.find(".view_img_tp img"),a.a.LightBox.count>0?(a.a.LightBox.count++,a.a.LightBox.zIndexUp()):a.a.LightBox.show(60,"#000"),t.imgList?(e.getLocaImgList(),s("#vbi-setSizeBtn").css({right:"10px"}),s("#vbi-viewOrigImg").hide()):e.getImgList(),e.resize(),e.setCss(),e.bindBtns(e.isPopup),e.bindWindonResize(),e.setTypeTitle(),e.dialog.find("#vbi-imgIndex").html("<span></span> / "+e.pictureSize+"<i></i>"),e.initNextPrevBtns()},setTypeTitle:function(){""!==t.typeTitle&&this.dialog.find(".view_img_sh_zt").html(t.typeTitle).show()},subText:function(){s(".view_img_top_cont").hover(function(){var e=s(this).find(".view_img_num"),t="";t=e.find("i").attr("data-text").length>100?e.find("i").attr("data-text").substring(0,100):e.find("i").attr("data-text"),e.find("i").text(t)},function(){var e=s(this).find(".view_img_num"),t="";t=e.find("i").attr("data-text").length>42?e.find("i").attr("data-text").substring(0,36)+"...":e.find("i").attr("data-text"),e.find("i").text(t)})},setCss:function(){var e,t=this;void 0!=t.scrollbox&&s("body").css({position:"relative",overflow:"hidden"}),void 0!==window.pageYOffset?e=window.pageYOffset:void 0!==document.compatMode&&"BackCompat"!=document.compatMode?e=document.documentElement.scrollTop:void 0!==document.body&&(e=document.body.scrollTop),t.dialog.css({position:"absolute",top:e,width:s(window).width(),zIndex:a.a.LightBox.getZIndex()+1,overflowY:"scroll",height:s(window).height()}),t.setSize("width")},initImgList:function(){var e=this,t=s(".view_img_top_cont li").length,i=e.dialog.find(".view_big_img_cont_bg").outerWidth(!0)-e.topContainer.find(".prev").outerWidth(!0)-e.topContainer.find(".next").outerWidth(!0);e.topContainer.find("ul.scroll").width()>i?e.topContainer.find(".view_img_top_cont").width(i):(e.topContainer.find(".view_img_top_cont").width("80%"),e.topContainer.find(".prev,.next").addClass("disable")),e.scrollbox=e.dialog.find("#vbi-scrollList").scrollBox({numToMove:Math.floor(i/99),liClickHdl:function(i){var a=s(i).find("img");e.currentIndex=s(i).index();var n={index:e.currentIndex,src:a.attr("src"),title:a.attr("title"),uploadTime:a.attr("uploadTime"),totalLen:t};s(i).addClass("active").siblings(".active").removeClass("active"),setTimeout(function(){e.changeImg(n)},300)}})},getPicKey:function(e){return{topic:"topicAttUrl",caze:"attUrl",review:"reviewAttUrl"}[e]},getParam:function(e){var t=this,i={};switch(e){case"topic":i={topicId:t.values.topicId,topicAttType:9};break;case"caze":i={caseId:t.values.caseId,caseCategoryId:t.values.caseCategoryId,caseAttType:9};break;case"review":i={reviewId:t.values.reviewId,reviewAttType:9}}return i.attUseFlag=2,"caze"!=e&&(i={paramJson:s.toJSON(i)}),i},getHrefParam:function(e){var t=this,i={};switch(e){case"topic":i="&topicId="+t.values.topicId;break;case"caze":i="&caseId="+t.values.caseId,void 0!=t.values.caseCategoryId&&(i+="&caseCategoryId="+t.values.caseCategoryId);break;case"review":i="&reviewId="+t.values.reviewId}return i},getLocaImgList:function(){var e=this,i=t.imgList,a="";e.pictureSize=i.length,s.each(i,function(e,t){a+="<li listid='"+t.id+"'><div class='small_img_mr'></div>   <img src='"+t.url+"'/></li>"}),e.dialog.find("ul.scroll").html(a),t.id&&e.dialog.find(".scroll li").each(function(i,a){t.id!=s(a).attr("listid")||(e.currentIndex=s(a).index())}),e.liOuterWidth=e.dialog.find("ul.scroll li:eq(0)").outerWidth(!0),e.initImgList(),e.dialog.find("ul.scroll").css({width:99*e.pictureSize+107+15}),e.dialog.find("ul.scroll").css({position:"inherit"}),s(".view_img_top_cont").css({height:"",width:s(".view_img_top_cont").width()-15});var n=e.dialog.find(".view_big_img_cont_bg").outerWidth(!0)-e.topContainer.find(".prev").outerWidth(!0)-e.topContainer.find(".next").outerWidth(!0);e.topContainer.find("ul.scroll").width()>n?e.topContainer.find(".view_img_top_cont").width(n):(e.topContainer.find(".view_img_top_cont").width("80%"),e.topContainer.find(".prev,.next").addClass("disable")),t.id},getImgList:function(){var e=this;s.ajax({url:e.path[e.imgListType],data:e.getParam(e.imgListType),type:"caze"==e.imgListType?"GET":"POST",async:!1,success:function(i){if(!(i&&i.responseObject&&i.responseObject.responseStatus&&i.responseObject.responseData))return s(".view_big_img_wrap").remove(),a.a.LightBox.hide(),!1;var n=i.responseObject.responseData.data_list,o="";if(e.pictureSize=n.length,t.reverse)for(var r=n.length-1;r>=0;r--)o+="<li listid='"+n.id+"'><div class='small_img_mr'></div>   <img src='"+n[r][e.getPicKey(e.imgListType)]+"' title='"+(n[r].caseAttName||"")+"' uploadTime='"+(n[r].uploadTime&&n[r].uploadTime)+"' /></li>";else s.map(n,function(t,i){o+="<li listid='"+t.id+"'><div class='small_img_mr'></div>   <img src='"+t[e.getPicKey(e.imgListType)]+"' title='"+(t.caseAttName||"")+"' uploadTime='"+(t.uploadTime&&t.uploadTime)+"' /></li>"});e.dialog.find("ul.scroll").html(o),t.id&&e.dialog.find(".scroll li").each(function(i,a){t.id!=s(a).attr("listid")||(e.currentIndex=s(a).index())}),e.liOuterWidth=e.dialog.find("ul.scroll li:eq(0)").outerWidth(!0),e.initImgList(),e.dialog.find("ul.scroll").css({width:99*e.pictureSize+107+15}),e.dialog.find("ul.scroll").css({position:"inherit"}),s(".view_img_top_cont").css({height:"",width:s(".view_img_top_cont").width()-15});var l=e.dialog.find(".view_big_img_cont_bg").outerWidth(!0)-e.topContainer.find(".prev").outerWidth(!0)-e.topContainer.find(".next").outerWidth(!0);e.topContainer.find("ul.scroll").width()>l?e.topContainer.find(".view_img_top_cont").width(l):(e.topContainer.find(".view_img_top_cont").width("80%"),e.topContainer.find(".prev,.next").addClass("disable")),t.id&&e.topContainer.find(".next").click()}})},close:function(e){s(document).unbind("keyup"),this.dialog.remove(),a.a.LightBox.count>1?(a.a.LightBox.count--,a.a.LightBox.zIndexDown()):a.a.LightBox.hide(),e||s("body").css({position:"static",overflow:"scroll"}),this.unbindWindonResize()},setSize:function(e){var t,i=this,n=(t=i.dialog.find(".view_big_img_cont_bg")).find(".view_img_cont_top"),o=s(window).height()-2*parseInt(i.dialog.find(".view_big_img_center").css("paddingTop"))-i.dialog.find(".view_img_top").height()-2*parseInt(t.css("paddingTop")),r=o-n.height()-parseInt(n.css("margin-bottom")),l=r,d=t.width();(r=r>100?r:100,d=d>200?d:200,"window"==e&&(t.animate("height",o),90!=i.angle&&270!=i.angle||r<i.img.width()&&(r=i.img.width()+300),a.a.setImgSize(r,d,i.img.get(0)),i.picContainer.height(r)),"width"==e)&&((t=i.dialog.find(".view_big_img_cont_bg")).css("height","auto"),a.a.setImgSize(8e3,d,i.img.get(0),function(){l=l>i.img.height()?l:i.img.height(),90!=i.angle&&270!=i.angle||l<i.img.width()&&(l=i.img.width()+300),i.picContainer.height(l)}))},initNextPrevBtns:function(){var e=this;e.picContainer.find(".prev").on("click",function(){if(0==e.currentIndex)return!1;e.scrollbox.prevLi(),e.currentIndex--,e.topContainer.find(".active").click()}).on("selectstart",function(){return!1}),e.picContainer.find(".next").on("click",function(){if(e.currentIndex==e.dialog.find(".scroll li").length-1)return!1;e.scrollbox.nextLi(),e.currentIndex++,e.topContainer.find(".active").click()}).on("selectstart",function(){return!1})}}.init(),{}}},6:function(e,t){e.exports=jQuery},71:function(e,t,i){},72:function(e,t,i){"use strict";(function(e){var a=i(2),n=i.n(a),s=i(40),o=i(48),r=i(12),l=i(0),d="/call/caseFolder/case_note/getMapList/",c="/call/caseFolder/case_note_attachment/getNoteArrachmentMapList/",p="/call/caseFolder/case_folder_attachment/upload/",u="/call/qiniu/storage/getQiniuToken/",g="/call/qiniu/storage/saveVideoInfo/";t.a={name:"upload-column",props:["uploadColumn"],data:function(){return{remarksHtml:'<div class="remarkMask"><i class="remarkMaskIcon"></i><article class="remarkMaskTitle">添加备注</article><div class="remarkMaskEditPanel">\n                       <textarea name="editRemark" class="editRemark" cols="30" rows="2"></textarea>\n                       <div class="recordPanel"></div>\n                   </div></div>',beginPlay:!1,isFirst:!0,isImgSelect:[],itemList:[],layerTitle:"",layerList:[],layerImgList:[],isLayer:!1,addFileType:"",textModel:this.uploadColumn.textVal,videoPath:"",isUplaodError:!1,uploadErrorText:"",userId:l.a.cookie.get("userId")||"",sortIdImg:1,sortIdVideo:1,selectImgLenth:0,uploadSuc:0,uploadError:0,selecImgSrc:"",selecImNode:"",uploadImgStatus:!0,uploadVideoStatus:!0,uploadStatrus:!0,isLoading:!1,context:"",uploadInfo:{validImg:[],deletImg:[],noteImgid:[],validVideo:[],deletVideo:[],noteVideoId:[],uploadImgStatus:!0,uploadVideoStatus:!0,remarks:this.uploadColumn.textVal,imgErrLength:0,videoErrLength:0,HandleId:this.uploadColumn.HandleId}}},components:{videoPlayer:s.a,loading:r.a},computed:{textVal:function(){return this.uploadColumn.textVal},HandleId:function(){return this.uploadColumn.HandleId}},watch:{textVal:function(e){this.textModel=e,this.uploadInfo.remarks=e},HandleId:function(e){this.uploadInfo.HandleId=e},textModel:function(){this.textModel.length>this.uploadColumn.textAreaLimt&&(this.textModel=this.textModel.substr(0,this.uploadColumn.textAreaLimt)),this.uploadInfo.remarks=this.textModel},uploadInfo:{handler:function(e){this.$emit("uploadBackInfo",[{uploadInfo:e},{uploadImgStatus:this.uploadImgStatus},{uploadVideoStatus:this.uploadVideoStatus}])},deep:!0}},methods:{backFirst:function(){this.isImgSelect=[],this.isFirst=!0,e(".moxie-shim").show()},beginFn:function(e){this.beginPlay=e},maskVideo:function(t){t.stopPropagation(),t.preventDefault();var i=e(t.target).parents(".ev-video"),a=i.attr("data-id"),n=i.attr("data-noteId"),s=i.attr("data-index"),o=i.attr("isError"),r=i.find("img").attr("src"),l=i.attr("data-path");e(t.target).hasClass("deleteImg")?(o&&this.uploadInfo.videoErrLength--,n?this.uploadInfo.deletVideo.push({imgSrc:r,id:a,videoPath:l,nodeId:n}):this.uploadInfo.deletVideo.push({imgSrc:r,id:a,videoPath:l}),i.attr("data-upload")&&(this.deleArr(this.uploadInfo.validVideo,a),this.deleArr(this.uploadInfo.noteVideoId,a,s)),i.remove()):e(t.target).hasClass("remarkMask")||e(t.target).hasClass("remarkMaskIcon")||e(t.target).hasClass("remarkMaskTitle")||e(t.target).hasClass("remarkMaskEditPanel")||e(t.target).hasClass("editRemark")||e(t.target).hasClass("recordPanel")?e(t.target).hasClass("remarkMask")?this.editRemark(e(t.target)):this.editRemark(e(t.target).parents(".remarkMask")):l&&(this.videoPath=l,this.beginPlay=!0)},initRemark:function(){var t=this,i=e(".ev-bigImg,.ev-video");i.hover(function(){var i=e(this);t.checkInvalid(i.attr("data-id"))||t.showRemark(i,1)},function(){var i=e(this);t.showRemark(i,0)})},showRemark:function(t,i){var a=this,n=t.find(".remarkMask");n.each(function(){var t=e(this),n=t.find(".remarkMaskEditPanel").attr("remarkValue"),s=a.checkInvalid(n);parseInt(i,10)?s?(t.find(".recordPanel").html(""),t.hasClass("remarkMaskOnEdit")?t.attr({class:"remarkMask remarkMaskOnEdit"}):t.attr({class:"remarkMask remarkMaskActive"})):(t.hasClass("remarkMaskOnEdit")?t.attr({class:"remarkMask remarkMaskOnEdit"}):t.attr({class:"remarkMask remarkMaskReady"}),e.trim(t.find(".recordPanel").html())!==e.trim(n)&&t.find(".recordPanel").html(n)):s?(t.find(".recordPanel").html(""),t.hasClass("remarkMaskOnEdit")?t.attr({class:"remarkMask remarkMaskOnEdit"}):t.attr({class:"remarkMask"})):(t.hasClass("remarkMaskOnEdit")?t.attr({class:"remarkMask remarkMaskOnEdit"}):t.attr({class:"remarkMask remarkMaskReady"}),e.trim(t.find(".recordPanel").html())!==e.trim(n)&&t.find(".recordPanel").html(n))}),n.each(function(){var t=e(this);t.off("mousedown").on("mousedown",function(){return a.editRemark(t),!1})})},checkInvalid:function(e){return"string"==typeof e&&0==e.length||void 0==e||"undefined"==e||"null"==e||void 0===e||"null"==typeof e||null==e},getStrLen:function(e,t){var i="",a=0;if(!e)return"";for(var n=0;n<e.length&&(e.charCodeAt(n)>128?a+=2:a++,a<=t);n++)i=i.concat(e[n]);return i},editRemark:function(t){var i=this;t.attr({class:"remarkMask remarkMaskOnEdit"});var a=t.find(".editRemark");a.trigger("focus");var n=a.parents("[data-id]"),s=n.attr("data-id"),o=n.attr("data-noteid"),r=n.hasClass("ev-bigImg")?1:2;a.off("input").on("input",function(){var t=e(this);t.val(i.getStrLen(t.val(),32)),t.parent().attr({remarkValue:t.val()}),i.$emit("changeItemRemarks",{id:parseInt(s,10),val:t.val(),noteid:i.checkInvalid(o)?"":parseInt(o,10),attType:r})})},viewBigImg:function(t){t.stopPropagation(),t.preventDefault();var i=[],a=e(t.target).parents(".ev-bigImg"),n=a.attr("listId"),s=a.attr("data-id"),r=a.find("img").attr("src"),l=a.attr("data-noteId"),d=a.attr("isError"),c=a.attr("data-index"),p=e(t.target).parents("ul");e(t.target).hasClass("deleteImg")?(d&&this.uploadInfo.imgErrLength--,l?this.uploadInfo.deletImg.push({imgSrc:r,id:s,nodeId:l}):this.uploadInfo.deletImg.push({imgSrc:r,id:s}),a.attr("data-upload")&&(this.deleArr(this.uploadInfo.validImg,s),this.deleArr(this.uploadInfo.noteImgid,s,c)),a.remove()):e(t.target).hasClass("remarkMask")||e(t.target).hasClass("remarkMaskIcon")||e(t.target).hasClass("remarkMaskTitle")||e(t.target).hasClass("remarkMaskEditPanel")||e(t.target).hasClass("editRemark")||e(t.target).hasClass("recordPanel")?e(t.target).hasClass("remarkMask")?this.editRemark(e(t.target)):this.editRemark(e(t.target).parents(".remarkMask")):n&&(e(".ev-bigImg",p).each(function(t,a){i.push({id:e(a).attr("listid"),url:e(a).find("img").attr("src")})}),Object(o.a)({container:p,typeTitle:"",imgListType:"caze",id:n,imgList:i,srcSplit:!0}))},deleArr:function(e,t,i){if(e.length>0)for(var a=0;a<e.length;a++)if(i){if(e[a].id==t&&i==e[a].index)return e.splice(a,1),e}else if(e[a].id==t)return e.splice(a,1),e},openFile:function(t){this.layerTitle=t.noteName,this.isFirst=!1,e(".moxie-shim").hide(),this.getCaseSecond(t.noteId)},selecImg:function(e,t){var i=this.isImgSelect.indexOf(e);-1!=i?(this.isImgSelect.splice(i,1),this.itemList.splice(i,1)):(this.isImgSelect.push(e),this.itemList.push({id:t.id,noteId:t.noteId,attUrl:t.attUrl,sortId:t.sortId,fileContent:t.fileContent,videoPicAttUrl:t.videoPicAttUrl,extName:t.extName}))},selectSure:function(t){t.stopPropagation(),t.preventDefault();var i=this;if(this.itemList.length)if(this.closeLayer(),"img"==this.addFileType){var a="",n=i.uploadInfo.noteImgid.length;e.each(this.itemList,function(e,t){e=parseInt(n+e,10),a+='<li class="ev-bigImg" listid="'+Date.parse(new Date)+e+'" data-upload="true" data-id="'+t.id+'" data-noteId="'+t.noteId+'" data-index="'+e+'">                        <img src="'+t.attUrl+'">                        <div class="imgPopup" style="display: none">                            <p class="uploadPending">上传中...</p>                            <p class="uploadFail" style="display: none">上传失败<span>点击重试</span></p>                        </div>'+i.remarksHtml+'                        <span class="deleteImg"></span>                      </li>',i.uploadInfo.noteImgid.push({id:t.id,noteId:t.noteId,imgSrc:t.attUrl,index:i.uploadColumn.ImgList.length+i.sortIdImg+e})}),e(".ev-uploadImgList .ev-addImg",e(t.target).parents(".ev-uploadConier")).before(a),i.initRemark()}else{a="";e.each(this.itemList,function(e,t){a+='<li class="ev-video" data-path="'+t.attUrl+'" data-upload="true" data-id="'+t.id+'" data-noteId="'+t.noteId+'" data-index="'+e+'">                        <img src="'+t.videoPicAttUrl+'">                         <span class="videoBtn"></span>                        <div class="imgPopup" style="display: none">                            <p class="uploadPending">上传中...</p>                            <p class="uploadFail" style="display: none">上传失败<span>点击重试</span></p>                        </div>'+i.remarksHtml+'                        <span class="deleteImg"></span>                      </li>',i.uploadInfo.noteVideoId.push({id:t.id,noteId:t.noteId,imgSrc:t.videoPicAttUrl,videoPath:t.attUrl,index:e+i.uploadColumn.VideoList.length+i.sortIdVideo})}),i.sortIdVideo+=this.itemList.length,e(".ev-uploadVideoList .ev-addVideo",e(t.target).parents(".ev-uploadConier")).before(a),i.initRemark()}},addFile:function(e){if(!this.uploadImgStatus&&"video"==e)return this.uplaodErrorTip("图片未上传完毕"),!1;this.isLayer=!0,this.itemList=[],this.selecImgSrc="","img"==e?(this.addFileType="img",this.uploadImg()):(this.addFileType="video",this.uploadVideo()),this.getCaseNode()},closeLayer:function(){this.isLayer=!1,this.isImgSelect=[],this.isFirst=!0,e(".moxie-shim").show()},uploadImg:function(){var t=this;e.getScript(window.paasFilePathObj.js,function(){window.uploadCount=t.sortIdImg||0,e(".ev-uploadImgBtn").each(function(i,a){var n=e(this);n.uploadImg({ajaxData:{url:p},multiple:!0,inputStyle:{width:"148px",height:"44px","z-index":1,opacity:0,top:"30px"},formData:{caseId:t.uploadColumn.caseId||"",structureId:t.uploadColumn.structureId||"",detailId:t.uploadColumn.detailId||"",groupId:t.uploadColumn.groupId||"",sortId:t.sortIdImg||"",attSpec:1,visitSiteId:1,isValid:0},fileChange:function(e){t.selectImgLenth?t.selectImgLenth+=e.files.length:t.selectImgLenth=e.files.length},fileSelected:function(i){var a=i.type;if(!/(jpg)|(jpeg)|(png)$/i.test(a))return t.uplaodErrorTip("格式不支持，请选择jpg、png、jpeg"),e(".ev-uploadImgBtn input").val(""),t.uploadError++,t.uploadImgS(),!1;if(i.size>10485760)return t.uplaodErrorTip("图片过大，请联系在线客服寻求帮助"),e(".ev-uploadImgBtn input").val(""),t.uploadError++,t.uploadImgS(),!1;t.closeLayer();var s=n.parents(".ev-uploadConier").find(".ev-uploadImgList .ev-addImg"),o='<img src="'+t.localURL(i)+'"><div class="imgPopup" style="display: none">  <p class="uploadPending" style="display: none"><i></i><span>0%</span></p>  <p class="uploadFail" style="display: none">上传失败<br/><span>请重新上传</span></p></div>'+t.remarksHtml+'<span class="deleteImg ev-imgDel" style="display:none;"></span>',r={};r.context=e('<li class="ev-bigImg" data-upload="true" data-Img="true"></li>').append(o),s.before(r.context),i.context=r.context,t.uploadInfo.uploadImgStatus=!1,t.uploadImgStatus=!1,t.sortIdImg++,window.uploadCount=t.sortIdImg||0},uploadBefore:function(t){var i=e(t.context);i.find(".imgPopup,.imgPopup .uploadPending").show(),t.progress=0;var a=10,n=90;t.size>4194304?(a=1,n=99):t.size>2097152&&(a=5,n=90),t.timer=setInterval(function(){t.progress<n?(t.progress+=a,i.find(".uploadPending span").text(t.progress+"%")):clearInterval(t.timer)},50)},uploadSuccess:function(i,a){var n=i,s=e(a.context);if(s.find(".uploadPending span").html("100%"),s.find(".imgPopup,.imgPopup .uploadPending").hide(),s.find(".deleteImg").show(),n&&n.responseObject&&n.responseObject.responseStatus){t.uploadSuc++;var o=n.responseObject.responsePk;s.attr("listId",o).attr("data-id",o),t.uploadInfo.validImg=[],e.each(s.parents(".ev-uploadImgList").find("li"),function(i,a){e(a).attr("data-Img")&&t.uploadInfo.validImg.push({id:e(a).attr("data-id"),imgSrc:e(a).find("img").attr("src"),index:i+1})}),t.initRemark()}else s.attr("isError",1),t.uploadError++,t.uploadInfo.imgErrLength++,t.uplaodErrorTip("图片上传失败,请重新上传"),s.find(".imgPopup,.imgPopup .uploadFail").show();t.uploadImgS()},uploadFail:function(i){t.uploadError++;var a=e(i.context);t.uplaodErrorTip("图片上传失败,请重新上传"),t.uploadInfo.imgErrLength++,a.attr("isError",1),a.find(".imgPopup .uploadPending").hide(),a.find(".imgPopup,.imgPopup .uploadFail").show(),a.find(".deleteImg").show(),t.uploadImgS()}})})})},uploadImgS:function(){var e=this;e.uploadSuc+e.uploadError==e.selectImgLenth&&(e.uploadInfo.uploadImgStatus=!0,e.uploadImgStatus=!0,e.uploadSuc=0,e.uploadError=0,e.selectImgLenth=0)},uploadVideo:function(){var t=this;t.context="",e.getScript(window.paasFilePathObj.js,function(){var i=e(".ev-uploadVideoBtn"),a=videoUpload({obj:"#"+i.attr("id"),flash_swf_url:"//paas.allinmd.cn/modules/video_upload/plupload/Moxie.swf",dragdrop:!0,max_file_size:80,uptoken_url:u+"?paramJson=%7B%22waterType%22:0%7D",domain:"//www.allinmd.cn",pluploadEach:function(a){if(t.uploadStatrus){var n='<li class="imagesUploadBtn ev-uploadVideoLi ev-video" data-upload="true"><img src="" class="ev-uploadVideoPath"><div class="imgPopup" style="display: none">  <p class="uploadPending" style="display: none"><i></i><span></span></p>  <p class="uploadFail" style="display: none">上传失败<br/><span>点击重试</span></p></div>'+t.remarksHtml+'<span class="deleteImg ev-imgDel" style="display: none"></span></li>';e(i).parents(".ev-uploadConier").find(".ev-uploadVideoList .ev-addVideo").before(n);var s=e(i).parents(".ev-uploadConier").find(".ev-uploadVideoList li");a.context=s.eq(s.length-2),t.uploadInfo.uploadVideoStatus=!1,t.uploadVideoStatus=!1}},beforeUpload:function(n){t.uploadStatrus=!0;var s=t.getName(n.name),o=s.fileName,r=s.suffixName;if(!/(mp4)|(mov)|(avi)|(wmv)|(flv)$/i.test(r))return t.uplaodErrorTip("格式不支持，请选择mov、mp4、avi、wmv、flv"),a.uploader.removeFile(a.uploader.getFile(n.id)),t.uploadStatrus=!1,!1;t.closeLayer(),e(i).parents(".ev-uploadConier").find(".ev-uploadVideoList .ev-addVideo").hide(),i.data("videoName",o.length>15?o.substring(0,15)+"...."+r:o+"."+r)},uploadProgress:function(i){var a=i.context;t.context=a,e(".imgPopup, .uploadPending",a).show(),e(".uploadPending span",a).text(i.percent+"%"),100==i.percent&&e(".uploadPending,.imgPopup",a).remove()},fileUploaded:function(a,n){var s=n.context;s.attr("key",a.key),e(".ev-uploadVideoPath",s).attr("src","//img10.allinmd.cn/default/qiniu196_196.jpg"),e(s).parents(".ev-uploadConier").find(".ev-uploadVideoList .ev-addVideo").show(),s.find(".ev-imgDel").show(),t.saveVideo({videoName:i.data("videoName"),key:a.key,persistentId:a.persistentId,sortId:t.sortIdVideo,domLi:s,imgSrc:"//img10.allinmd.cn/default/qiniu196_196.jpg"}),t.sortIdVideo++},fileUploadError:function(i){t.uplaodErrorTip("视频上传失败"),t.context&&t.uploadInfo.videoErrLength++,e(".uploadPending,.imgPopup .uploadPending",t.context).remove(),e(t.context).attr("isError",1),e(t.context).find(".ev-imgDel,.uploadFail").show(),e(t.context).parents(".ev-uploadConier").find(".ev-uploadVideoList .ev-addVideo").show(),t.uploadInfo.uploadVideoStatus=!0,t.uploadVideoStatus=!0}})})},uplaodErrorTip:function(e){var t=this;t.isUplaodError=!0,t.uploadErrorText=e,setTimeout(function(){t.isUplaodError=!1},3e3)},getName:function(e){var t=e,i=t.lastIndexOf("/"),a=t.lastIndexOf("\\"),n=Math.max(i,a),s=t.lastIndexOf(".");return{fileName:t.substring(n+1,s),suffixName:t.substring(s+1,t.length)}},localURL:function(e){var t=null;return void 0!=window.createObjectURL?t=window.createObjectURL(e):void 0!=window.URL?t=window.URL.createObjectURL(e):void 0!=window.webkitURL&&(t=window.webkitURL.createObjectURL(e)),t},getCaseNode:function(){var e=this;e.isLoading=!0,e.layerList=[],l.a.ajax2({url:d,type:"GET",data:{paramJson:n()({customerId:e.userId,isValid:1,firstResult:0,maxResult:999,sortType:1})},timeout:3e4,success:function(t){e.isLoading=!1,t&&t.responseObject&&t.responseObject.responseData&&t.responseObject.responseData.data_list&&(e.layerList=t.responseObject.responseData.data_list)}})},getCaseSecond:function(e){var t=this;t.isLoading=!0,t.layerImgList=[],l.a.ajax2({url:c,type:"GET",data:{paramJson:n()({customerId:t.userId,isValid:1,noteId:e,visitSiteId:1,attUseFlag:5,firstResult:0,maxResult:999})},timeout:3e4,success:function(e){if(t.isLoading=!1,e&&e.responseObject&&e.responseObject.responseData&&e.responseObject.responseData.data_list)for(var i=e.responseObject.responseData.data_list,a=0;a<i.length;a++)(1==i[a].attType&&"img"==t.addFileType&&i[a].attUrl||2==i[a].attType&&"video"==t.addFileType&&i[a].attUrl)&&t.layerImgList.push(i[a])}})},saveVideo:function(t){var i=this;l.a.ajax2({url:g,type:"post",data:{paramJson:n()({videoName:t.videoName,key:t.key,persistentId:t.persistentId,refType:12,sortId:t.sortId,caseId:i.uploadColumn.caseId,groupId:i.uploadColumn.groupId,structureId:i.uploadColumn.structureId,detailId:i.uploadColumn.detailId,visitSiteId:1,isValid:0})},timeout:3e4,success:function(a){if(i.uploadInfo.uploadVideoStatus=!0,i.uploadVideoStatus=!0,a&&a.responseObject&&a.responseObject.responsePk){var n=a.responseObject.responsePk;e(t.domLi).attr("data-id",n),i.uploadInfo.validVideo.push({id:n,imgSrc:t.imgSrc,videoPath:"",index:t.sortId+i.uploadColumn.VideoList.length}),i.initRemark()}}})}},updated:function(){this.initRemark()},mounted:function(){var t=this;e("body").on("mousedown",function(i){var a=e(i.target);a.hasClass("remarkMask")||a.hasClass("remarkMaskIcon")||a.hasClass("remarkMaskTitle")||a.hasClass("remarkMaskEditPanel")||a.hasClass("editRemark")||a.hasClass("recordPanel")||e(".remarkMask").each(function(){var i=e(this),a=i.find(".remarkMaskEditPanel").attr("remarkValue"),n=t.checkInvalid(a);i.removeClass("remarkMaskOnEdit"),n||(i.addClass("remarkMaskReady"),i.find(".recordPanel").html(a))})}),t.initRemark()}}}).call(this,i(6))},80:function(e,t,i){"use strict";var a=i(23);i.n(a).a}},[[261,0,1]]]);
//# sourceMappingURL=uploadDemo.1d7d2cd.js.map