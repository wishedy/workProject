(window.webpackJsonp=window.webpackJsonp||[]).push([[5],[function(e,t,a){"use strict";var n=a(2),s=a.n(n),i=a(18),o=a.n(i),r=(a(6),{ajax:function(e){o()({url:e.url,method:e.method||"get",data:e.data,transformRequest:[function(t){if(e.paramJson)return"paramJson="+s()(t)}],headers:{"X-Requested-With":"XMLHttpRequest"}}).then(function(t){e.success&&e.success(t)}).catch(function(t){e.fail&&e.fail(t)})},ajax2:function(e){(e=e||{}).type=(e.type||"GET").toUpperCase(),e.dataType=e.dataType||"json";var t=function(e){var t=[];for(var a in e)t.push(encodeURIComponent(a)+"="+encodeURIComponent(e[a]));return t.push(("v="+Math.random()).replace(".","")),t.join("&")}(e.data),a=new XMLHttpRequest;a.onreadystatechange=function(){if(4==a.readyState){var t=a.status;t>=200&&t<300?e.success&&e.success(JSON.parse(a.responseText),a.responseXML):e.fail&&e.fail(t)}},"GET"==e.type?(a.open("GET",e.url+"?"+t,!0),a.send(null)):"POST"==e.type&&(a.open("POST",e.url,!0),a.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),a.send(t))},cutLine:function(e,t,a,n){var s=[];e&&e.lastIndexOf(t)>-1?s=e.split(t):s.push(e);for(var i="",o=0;o<s.length;o++)s[o]&&(s[o].split(a)[1]?i+=s[o].split(a)[1]+n:i+=s[o]+n);return i.substring(0,i.length-1)},getStrLen:function(e,t){var a="",n=0;if(!e)return"";for(var s=0;s<e.length&&(e.charCodeAt(s)>128?n+=2:n++,n<=t);s++)a=a.concat(e[s]);return n>t&&(a+="..."),a},getByteLen:function(e){var t=0;if(!e)return 0;for(var a=0;a<e.length;a++)e.charCodeAt(a)>128?t+=2:t++;return t},getParamFromUrl:function(e,t){var a=e.split("?"),n=new RegExp("(^|&)"+t+"=([^&]*)(&|$)","i"),s=a[1].match(n);return null!=s?unescape(s[2]):null},getpara:function(e){var t=document.URL,a={},n=void 0;if(t.lastIndexOf(e||"?")>0)for(var s=t.substring(t.lastIndexOf(e||"?")+1,t.length).split("&"),i=0;i<s.length;i++)a[(n=s[i].split("="))[0]]=this.htmlToString(decodeURIComponent(n[1]));return a},isEmptyObject:function(e){for(var t in e)return!1;return!0},hasResponseData:function(e){return!(!(e&&e.responseObject&&e.responseObject.responseData)||this.isEmptyObject(e.responseObject.responseData))},hasResponseData2:function(e){return!(!e||!e.responseData||this.isEmptyObject(e.responseData))},hasResponseMessage:function(e){return!(!(e&&e.responseObject&&e.responseObject.responseMessage)||this.isEmptyObject(e.responseObject.responseMessage))},htmlToString:function(e){var t=(e+"").replace(/[<>&]/g,function(e){return{"<":"&lt;",">":"&gt;","&":"&amp;"}[e]}),a=t.split("&lt;/a&gt;&lt;a");return t=(t=a.length>=2?a.map(function(e,t){var a=e.replace(/\&lt\;a[\s]*href\=\"?(\S*)\"?\&gt\;([\S\s]*)/gi,'<a href="$1">$2');return a=(a=a.replace(/[\s]*href\=\"?(\S*)\"?\&gt\;([\S\s]*)&lt\;\/a\&gt\;/gi,'<a href="$1">$2</a>')).replace(/[\s]*href\=\"?(\S*)\"?\&gt\;([\S\s]*)/gi,'<a href="$1">$2</a>')}).join():(t+"").replace(/\&lt\;a[\s]*href\=\"?(\S*)\"?\&gt\;([\S\s]*)\&lt\;\/a\&gt\;/gi,'<a href="$1">$2</a>')).replace(/@@/g,"@")},symbolToString:function(e){var t=e.replace(/[<>]/g,function(e){return{"<":"&lt;",">":"&gt;"}[e]}),a=t.split("&lt;/a&gt;&lt;a");return t=(t=a.length>=2?a.map(function(e,t){var a=e.replace(/\&lt\;a[\s]*href\=\"?(\S*)\"?\&gt\;([\S\s]*)/gi,'<a href="$1">$2');return a=(a=a.replace(/[\s]*href\=\"?(\S*)\"?\&gt\;([\S\s]*)&lt\;\/a\&gt\;/gi,'<a href="$1">$2</a>')).replace(/[\s]*href\=\"?(\S*)\"?\&gt\;([\S\s]*)/gi,'<a href="$1">$2</a>')}).join():(t+"").replace(/\&lt\;a[\s]*href\=\"?(\S*)\"?\&gt\;([\S\s]*)\&lt\;\/a\&gt\;/gi,'<a href="$1">$2</a>')).replace(/@@/g,"@")},escapeReplace:function(e){return e.replace(/[+/?#&=!%]/g,function(e){return{"+":"%2B","/":"%2F","?":"%3F","#":"%23","&":"%26","=":"%3D","!":"%21","%":"%25"}[e]})},bodyScroll:function(){document.getElementsByTagName("body")[0].style.height="100%",document.getElementsByTagName("html")[0].style.height="100%",document.getElementsByTagName("body")[0].style.overflow="hidden",document.getElementsByTagName("html")[0].style.overflow="hidden"},bodyNoScroll:function(){document.getElementsByTagName("body")[0].style.height="auto",document.getElementsByTagName("html")[0].style.height="auto",document.getElementsByTagName("body")[0].style.overflow="auto",document.getElementsByTagName("html")[0].style.overflow="auto"},browser:{mozilla:/firefox/.test(navigator.userAgent.toLowerCase()),webkit:/webkit/.test(navigator.userAgent.toLowerCase()),opera:/opera/.test(navigator.userAgent.toLowerCase()),msie:/msie/.test(navigator.userAgent.toLowerCase()),versions:function(){var e=navigator.userAgent;navigator.appVersion;return{trident:e.indexOf("Trident")>-1,presto:e.indexOf("Presto")>-1,webKit:e.indexOf("AppleWebKit")>-1,gecko:e.indexOf("Gecko")>-1&&-1==e.indexOf("KHTML"),mobile:!!e.match(/AppleWebKit.*Mobile.*/)||!!e.match(/AppleWebKit/),ios:!!e.match(/\(i[^;]+;( U;)? CPU.+Mac OS X/),android:e.indexOf("Android")>-1||e.indexOf("Linux")>-1,iPhone:e.indexOf("iPhone")>-1||e.indexOf("Mac")>-1,iPad:e.indexOf("iPad")>-1,webApp:-1===e.indexOf("Safari")}}(),language:(navigator.browserLanguage||navigator.language).toLowerCase(),isIe8:function(){var e=navigator.appName,t=navigator.appVersion.split(";"),a=void 0!=t[1]&&""!=t[1]?t[1].replace(/[ ]/g,""):"";return"Microsoft Internet Explorer"===e&&"MSIE8.0"==a},isIe9:function(){var e=navigator.appName,t=navigator.appVersion.split(";"),a=void 0!=t[1]&&""!=t[1]?t[1].replace(/[ ]/g,""):"";return"Microsoft Internet Explorer"===e&&"MSIE9.0"==a},isIeOrEdge:function(){var e=navigator.userAgent,t=e.indexOf("compatible")>-1&&e.indexOf("MSIE")>-1,a=e.indexOf("Edge")>-1&&!t,n=e.indexOf("Trident")>-1&&e.indexOf("rv:11.0")>-1;if(t){new RegExp("MSIE (\\d+\\.\\d+);").test(e);parseFloat(RegExp.$1);return!0}return!!a||!!n},isLessIe10:function(){var e=navigator.userAgent,t=e.indexOf("compatible")>-1&&e.indexOf("MSIE")>-1;e.indexOf("Edge"),e.indexOf("Trident")>-1&&e.indexOf("rv:11.0");if(t){new RegExp("MSIE (\\d+\\.\\d+);").test(e);var a=parseFloat(RegExp.$1);return 7==a||(8==a||(9==a||10==a))}return!1}},cookie:{set:function(e,t,a){var n=new Date,s=a;n.setTime(n.getTime()+24*s*3600*1e3),document.cookie=e+"="+t+";expires="+n+";domain=.allinmd.cn"},get:function(e){for(var t=document.cookie.replace(/[ ]/g,"").split(";"),a=void 0,n=0;n<t.length;n++){var s=t[n].split("=");if(e==s[0]){a=s[1];break}}return a},delete:function(e){this.get(e)&&this.set(e,"",-1)}},checkUser:function(){var e=this.cookie.get("userId"),t=localStorage.getItem("userId");e&&""!=e?e!=t&&location.reload():window.location.href="//www.allinmd.cn?from=emr"}});t.a=r},,,,,function(e,t,a){"use strict";var n={cache:function(e){localStorage.setItem("EasyWayTempCache",e)},getCache:function(){return localStorage.getItem("EasyWayTempCache")},setItem:function(e,t){localStorage.setItem(e,t)},getItem:function(e){var t=localStorage.getItem(e);return e&&"fromPage"==e&&localStorage.removeItem(e),t},removeItem:function(e){return localStorage.removeItem(e)},clear:function(){localStorage.clear()}};t.a=n},function(e,t){e.exports=jQuery},,,function(e,t,a){"use strict";t.a={testNum:function(e){return/^\d+$/g.test(e)},testName:function(e){return/^[\u4e00-\u9fa5\s\.·-]{1,25}$|^[\@A-Za-z_\s\.·-]{1,50}$|^[A-Za-z\u4e00-\u9fa5]{1,20}$|^[\u4e00-\u9fa5A-Za-z]{1,20}$/.test(e)},testPhoneNum:function(e){return/^1\d{10}$/.test(e)},testID:function(e){var t=!0;if(15==(e=e.toUpperCase()).length)t=!1;else if(e&&/^\d{6}(18|19|20)?\d{2}(0[1-9]|1[012])(0[1-9]|[12]\d|3[01])\d{3}(\d|X)$/i.test(e))if({11:"北京",12:"天津",13:"河北",14:"山西",15:"内蒙古",21:"辽宁",22:"吉林",23:"黑龙江 ",31:"上海",32:"江苏",33:"浙江",34:"安徽",35:"福建",36:"江西",37:"山东",41:"河南",42:"湖北 ",43:"湖南",44:"广东",45:"广西",46:"海南",50:"重庆",51:"四川",52:"贵州",53:"云南",54:"西藏 ",61:"陕西",62:"甘肃",63:"青海",64:"宁夏",65:"新疆",71:"台湾",81:"香港",82:"澳门",91:"国外 "}[e.substr(0,2)]){if(18==e.length){e=e.split("");for(var a=[7,9,10,5,8,4,2,1,6,3,7,9,10,5,8,4,2],n=0,s=0;s<17;s++)n+=e[s]*a[s];[1,0,"X",9,8,7,6,5,4,3,2][n%11]!=e[17]&&(t=!1)}}else t=!1;else t=!1;return t},isPInt:function(e){return/^[1-9]*[1-9][0-9]*$/.test(e)},decimals:function(e){return/^\d+(\.\d+)?$/.test(e)},minus:function(e){return/^(\-|\+)?\d+(\.\d+)?$/.test(e)}}},function(e,t,a){},,function(e,t,a){"use strict";var n={},s=(a(37),a(1)),i=Object(s.a)(n,function(){this.$createElement;this._self._c;return this._m(0)},[function(){var e=this.$createElement,t=this._self._c||e;return t("section",{staticClass:"alEmr-loading"},[t("img",{attrs:{src:"/static/images/common/loading.gif"}})])}],!1,null,null,null);t.a=i.exports},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},,function(e,t,a){"use strict";var n=a(0),s={data:function(){return{search:""}},methods:{searchInfo:function(){this.search?"/"!=window.location.pathname?window.location.href="/?q="+this.search:this.$emit("searchVal",this.search):"/"==window.location.pathname&&this.$emit("searchVal",this.search)},keySearch:function(e){13==e.keyCode&&this.searchInfo()}},mounted:function(){var e=n.a.getpara().q;this.search=e}},i=(a(52),a(1)),o=Object(i.a)(s,function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("section",{staticClass:"alEmr-searchInput"},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.search,expression:"search"}],attrs:{type:"text",placeholder:"搜索病历信息"},domProps:{value:e.search},on:{keyup:e.keySearch,input:function(t){t.target.composing||(e.search=t.target.value)}}}),e._v(" "),a("b",{on:{click:e.searchInfo}})])},[],!1,null,null,null);t.a=o.exports},function(e,t,a){"use strict";var n=a(2),s=a.n(n),i=a(0),o=a(5),r=a(25),l={data:function(){return{href:"",userName:"",logoUrl:""}},methods:{getLogo:function(){var e=this;i.a.ajax2({url:"/call/commdata/getLogoUrlList/",type:"post",data:{paramJson:s()({logoType:4,logoSpec:2,logoUseFlag:3,refId:i.a.cookie.get("userId")})},success:function(t){t&&t.responseObject.length>0&&(e.logoUrl=t.responseObject[0].logoUrl.replace("https:",""))}})}},mounted:function(){var e=this;r.a.login({scene:0,callback:function(){e.href="//www.allinmd.cn/pages/personal/personal_contribution.html",e.userName=o.a.getItem("userName"),e.getLogo()}})}},d=(a(50),a(1)),c=Object(d.a)(l,function(){var e=this.$createElement,t=this._self._c||e;return t("section",{staticClass:"alEmr-userLogo"},[t("a",{attrs:{href:this.href}},[t("img",{attrs:{src:this.logoUrl,alt:""}}),this._v(" "),t("span",[this._v(this._s(this.userName))])])])},[],!1,null,null,null);t.a=c.exports},,function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){"use strict";var n=a(2),s=a.n(n),i=a(7),o=a.n(i),r=a(0),l=a(5),d=(a(6),0),c=1,u=2,p=3,m=4,h=5,g=6,f=7,I=11,v=13,C="manufactureLogin",b="auth",y="login",x="reAuth",S={isLoginStatus:!1,isRenZhengStatus:!1,customerAuth:null,customerRole:0,path:{out:"/call/customer/unite/logout/",checkUserStatus:"/call/customer/unite/checkSession/",getPrivData:"/call/customer/role/priv/json_list/",getCustomerUnite:"/call/customer/unite/getCustomerUnite/",getCustomerAuthInfo:"/call/customer/auth/getAuthBycustomerId/"},privDataUtils:{getPrivData:function(){var e=this;return new o.a(function(t,a){l.a.getItem("privData")?(e.privData=JSON.parse(l.a.getItem("privData")),t(e.privData)):e.privData||r.a.ajax2({url:S.path.getPrivData,success:function(a){if(t(),!(a&&a.responseObject&&a.responseObject.responseData))throw"no priv data";e.privData=a.responseObject.responseData,l.a.setItem("privData",s()(e.privData)),t(e.privData)}})})},getAvailableCustomerRole:function(e){var t=this;return new o.a(function(a,n){t.getPrivData().then(function(){if(!t.privData)throw a(),"no priv data";var n=[];t.getPrivData().then(function(t){var s=void 0,i=void 0;for(s in t.customeRole)"1"==(i=t.customeRole[s]).roleOps.charAt(i.roleOps.indexOf(e+"-")+e.toString().length+1)&&n.push(parseInt(s));if(0==n.length)throw"no available role";a(n)})})})},getPrivilegeDetailsOfThisScene:function(e){var t=this;return new o.a(function(a,n){var s={NeedLogin:!1,NeedAuth:!1,NeedSystem:!1,NeedManufacture:!1,CannotOperate:!1,LoginIsEnough:!1};t.getAvailableCustomerRole(e).then(function(e){var t=e;s.NeedLogin=t.indexOf(d)<=-1,s.NeedAuth=t.indexOf(h)<=-1&&t.indexOf(g)>-1,s.LoginIsEnough=t.indexOf(h)>-1,s.NeedManufacture=t.indexOf(p)>-1,s.NeedSystem=t.indexOf(c)>-1,a(s)})})}},login:function(e){var t=this;t.getLoginStatus().then(function(){t.analyzePrivDetails(e).then(function(a){t.privDetails=a,e&&(t.options=e,""===e.scene&&""==e.operateType||null===e.callback||t.checkPriv())})})},getLoginStatus:function(){var e=this;return new o.a(function(t,a){r.a.ajax2({url:e.path.checkUserStatus,dataType:"json",type:"post",success:function(a){t(),a.responseObject.responseStatus?e.isLoginStatus=!0:(e.isLoginStatus=!1,r.a.cookie.delete("userId"),l.a.removeItem("authInfo"))}})})},checkPriv:function(){var e=this;e.privDetails.NeedLogin?e.checkLoginStatus():e.privCheckSuccess()},getCustomerUnite:function(){var e=this,t={};return new o.a(function(a,n){r.a.ajax2({type:"POST",url:e.path.getCustomerUnite,dataType:"json",success:function(n){n&&n.responseObject&&(e.userInfo=t=n.responseObject,null!=t&&void 0!=t&&(l.a.setItem("customerRole",t.customerRole),l.a.setItem("userId",t.customerId),t.mobile&&l.a.setItem("mobile",t.mobile),t.email&&l.a.setItem("email",t.email))),a()},error:function(e,t,a){}})})},privCheckSuccess:function(){var e=this;e.privCheckState=!0,e.getCustomerUnite().then(function(){0==e.userInfo.isValid&&r.a.ajax2({type:"POST",url:e.path.out,dataType:"json",success:function(e){e&&e.responseObject&&e.responseObject.responseStatus&&(window.location.href="//www.allinmd.cn",l.a.clear())}}),void 0!==e.options&&void 0!==e.options.callback&&e.options.callback()})},checkLoginStatus:function(){var e=this;e.isLoginStatus?e.loginSuccess():e.goBackIndex()},analyzePrivDetails:function(e){var t=this;return new o.a(function(a,n){e.scene==y?(t.privDetails={NeedLogin:!0,NeedAuth:!1,LoginIsEnough:!0,NeedManufacture:!1,CannotOperate:!1},a(t.privDetails)):e.scene==b||e.scene==x?(t.privDetails={NeedLogin:!0,NeedAuth:!0,LoginIsEnough:!1,NeedManufacture:!1,CannotOperate:!1},a(t.privDetails)):e.scene==C?(t.privDetails={NeedLogin:!0,NeedAuth:!1,LoginIsEnough:!0,NeedManufacture:!0,CannotOperate:!1},a(t.privDetails)):void 0!==e.scene&&t.privDataUtils.getPrivilegeDetailsOfThisScene(e.scene).then(function(e){t.privDetails=e,a(t.privDetails)})})},loginSuccess:function(){var e=this;e.isLoginStatus=!0,e.getCustomerUnite().then(function(){null!=e.userInfo&&void 0!=e.userInfo&&0==e.userInfo.isValid&&r.a.ajax2({type:"POST",url:e.path.out,dataType:"json",success:function(e){e&&e.responseObject&&e.responseObject.responseStatus&&(r.a.cookie.delete("userId"),l.a.clear(),window.location.href="//www.allinmd.cn")}}),e.getCustomerAuthInfo().then(function(){e.handleCustomerRole()})})},getCustomerAuthInfo:function(){var e=this;return new o.a(function(t,a){r.a.ajax2({url:e.path.getCustomerAuthInfo,dataType:"json",type:"post",success:function(a){if(e.customerAuth=a,null!=a&&""!=a){l.a.setItem("authInfo",s()(a));var n=a.responseObject,i=n.lastName+n.firstName;l.a.setItem("userName",i),r.a.isEmptyObject(a)||2!==n.state&&7!==n.state&&8!==n.state&&9!==n.state||(e.isRenZhengStatus=!0)}else e.isRenZhengStatus=!1;t()}})})},handleCustomerRole:function(){var e=this;switch(e.userInfo.customerRole){case c:e.privDetails.NeedSystem&&e.privCheckSuccess();break;case u:break;case p:e.privDetails.NeedManufacture?e.privCheckSuccess():e.goBackIndex();break;case m:break;case h:e.privDetails.LoginIsEnough?e.privCheckSuccess():e.checkIfNeedAuth();break;case g:case v:case f:case I:e.privDetails.LoginIsEnough?e.privCheckSuccess():e.checkAuthState()}},checkIfNeedAuth:function(){this.privDetails.NeedAuth&&this.checkAuthState()},checkAuthState:function(){var e=this,t=e.customerAuth;if(null===t||""==t||void 0===t.responseObject||r.a.isEmptyObject(t.responseObject)||-1==t.responseObject.state)e.goBackIndex();else{var a=e.customerAuth.responseObject.customerId,n=e.customerAuth.responseObject.state;if(a<=0)return e.goBackIndex(),!1;3===n||-1===n||0===n||1===n?e.goBackIndex():2!==n&&7!==n&&8!==n&&9!==n||(""!=r.a.cookie.get("userId")&&r.a.cookie.get("userId")||(r.a.cookie.set("userId",a,1825),location.reload()),e.options.callback&&e.options.callback())}},goBackIndex:function(){window.location.href="//www.allinmd.cn?from=emr"}};t.a=S},function(e,t,a){"use strict";var n={},s=(a(82),a(1)),i=Object(s.a)(n,function(){this.$createElement;this._self._c;return this._m(0)},[function(){var e=this.$createElement,t=this._self._c||e;return t("section",{staticClass:"alEmr-logo"},[t("a",{attrs:{href:"/"}})])}],!1,null,null,null);t.a=i.exports},function(e,t,a){"use strict";var n={name:"ieAlert",props:["showAlert"],data:function(){return{showAlertStatus:this.showAlert}},watch:{showAlert:function(){this.showAlert&&(this.showAlertStatus=this.showAlert)}},methods:{close:function(){this.showAlertStatus=!this.showAlertStatus},newCaseclick:function(){sessionStorage.removeItem("emrNewCaseCaseId"),sessionStorage.setItem("newCasesSource",window.location.href);var e=this;setTimeout(function(){e.close()},100)}},mounted:function(){}},s=(a(58),a(1)),i=Object(s.a)(n,function(){var e=this,t=e.$createElement,a=e._self._c||t;return e.showAlertStatus?a("section",{staticClass:"browserUpgrade"},[a("aside",{staticClass:"content"},[a("p",{staticClass:"close",on:{click:e.close}},[a("span")]),e._v(" "),e._m(0),e._v(" "),a("p",{staticClass:"upgradeText"},[e._v("您的浏览器版本过低，将无法上传图片或视频，可下载推荐浏览器后再发布")]),e._v(" "),a("ul",{staticClass:"upgradeCont"},[e._m(1),e._v(" "),e._m(2),e._v(" "),a("li",[a("a",{attrs:{href:"../newCases/index.html?edit=0#/baseInfo",target:"_blank"},on:{click:e.newCaseclick}},[a("img",{attrs:{src:"//img10.allinmd.cn/v3/upload_case/nopicture.png"}}),e._v(" "),a("p",[e._v("继续发布无图病历")])])])])])]):e._e()},[function(){var e=this.$createElement,t=this._self._c||e;return t("figure",{staticClass:"upgradeTip"},[t("img",{attrs:{src:"//img10.allinmd.cn/v3/upload_case/unhappy.png"}})])},function(){var e=this.$createElement,t=this._self._c||e;return t("li",[t("a",{attrs:{href:"http://www.microsoft.com/zh-cn/download/Internet-Explorer-11-for-Windows-7-details.aspx",target:"_blank"}},[t("img",{attrs:{src:"//img10.allinmd.cn/v3/upload_case/ie.png"}}),this._v(" "),t("p",[this._v("升级至新版本 IE 浏览器")])])])},function(){var e=this.$createElement,t=this._self._c||e;return t("li",[t("a",{attrs:{href:"https://www.baidu.com/link?url=wkitDqmRRoU8ivb_fGcGfwSYMVqSY3bAP0T7Q8VvuuSHq1hG5gCBLm_BvvA15MdfLWIVxifS0ahk7xNueXChfa&wd=&eqid=e69ae8450002f802000000035b4f1fd5",target:"_blank"}},[t("img",{attrs:{src:"//img10.allinmd.cn/v3/upload_case/Google.png"}}),this._v(" "),t("p",[this._v("使用Google Chrome 浏览器")])])])}],!1,null,null,null);t.a=i.exports},,,,function(e,t,a){},,function(e,t,a){"use strict";var n=a(2),s=a.n(n),i=a(0),o=a(27),r=(a(3),{methods:{}}),l=(a(56),a(1)),d=Object(l.a)(r,function(){var e=this.$createElement,t=this._self._c||e;return t("section",[t("section",{staticClass:"casePopup"},[t("section",{staticClass:"casePopupCont"},[this._t("default")],2)])])},[],!1,null,"7096f432",null).exports,c={props:["sideSetting"],data:function(){return{layerOnOff:!1,redPoint:!1,showAlert:!1,assistantDoctor:13===parseInt(i.a.cookie.get("customerRole"))}},methods:{newCaseclick:function(e){var t=this;if(i.a.browser.isIe9()){e.preventDefault(),this.showAlert=!this.showAlert;var a=this;setTimeout(function(){a.showAlert=!a.showAlert},1e3)}else t.assistantDoctor?i.a.ajax2({url:"/call/caseFolder/team_baseinfo/getMapListByCustomerId/",type:"get",data:{paramJson:s()({customerId:i.a.cookie.get("userId"),teamSelectType:1,visitSiteId:1,isValid:1})},success:function(e){e.responseObject.responseData&&e.responseObject.responseData.data_list&&e.responseObject.responseData.data_list.length>0?(sessionStorage.removeItem("emrNewCaseCaseId"),sessionStorage.setItem("newCasesSource",window.location.href),window.location.href="/newCases/index.html?edit=0#/baseInfo"):t.assistantDoctor?t.layerOnOff=!0:(sessionStorage.removeItem("emrNewCaseCaseId"),sessionStorage.setItem("newCasesSource",window.location.href),window.location.href="/newCases/index.html?edit=0#/baseInfo")}}):(sessionStorage.removeItem("emrNewCaseCaseId"),sessionStorage.setItem("newCasesSource",window.location.href),window.location.href="/newCases/index.html?edit=0#/baseInfo")},goTeamSetting:function(e){var t=this;i.a.ajax2({url:"/call/caseFolder/team_baseinfo/getMapListByCustomerId/",type:"get",data:{paramJson:s()({customerId:i.a.cookie.get("userId"),teamSelectType:1,visitSiteId:1,isValid:1})},success:function(a){a.responseObject.responseData&&a.responseObject.responseData.data_list&&a.responseObject.responseData.data_list.length>0?(window.location.href="/teamSetting/index.html#teamSetting",3==e&&t.$router.push({path:"teamSetting"})):t.assistantDoctor?t.layerOnOff=!0:(window.location.href="/teamSetting/index.html#createTeam",3==e&&t.$router.push({path:"createTeam"}))}})},getRedPoint:function(){var e=this;i.a.ajax2({url:"/call/caseFolder/team_member/getStateCount/",type:"post",data:{paramJson:s()({customerId:i.a.cookie.get("userId"),teamSelectType:2})},success:function(t){t.responseObject.responseData&&t.responseObject.responseData.data_list&&t.responseObject.responseData.data_list.length>0&&t.responseObject.responseData.data_list[0].total_num>0&&(e.redPoint=!0)}})}},components:{ieAlert:o.a,MaskLayer:d},mounted:function(){i.a.cookie.get("userId")&&this.getRedPoint()}},u=(a(54),Object(l.a)(c,function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("section",{staticClass:"alEmr-aside"},[e._m(0),e._v(" "),a("ul",{staticClass:"navSideBarLi"},[a("li",{staticClass:"navLeftNormal"},[a("a",{attrs:{href:"javascript:;",target:"_blank"},on:{click:e.newCaseclick}},[a("i",{staticClass:"caseIcon"}),e._v(" "),a("span",[e._v("新建病历")])])]),e._v(" "),e._m(1),e._v(" "),a("li",{staticClass:"navLeftSpecial",class:{active:1==e.sideSetting.index}},[e._m(2)]),e._v(" "),a("li",{staticClass:"navLeftSpecial",class:{active:2==e.sideSetting.index}},[e._m(3)]),e._v(" "),a("li",{staticClass:"navLeftSpecial position",class:{active:3==e.sideSetting.index}},[a("a",{attrs:{href:"javascript:;"},on:{click:function(t){e.goTeamSetting(e.sideSetting.index)}}},[a("i",{staticClass:"teamIcon"}),e._v(" "),a("span",[e._v("团队设置"),a("i",{directives:[{name:"show",rawName:"v-show",value:e.redPoint,expression:"redPoint"}]})])])])]),e._v(" "),a("ieAlert",{attrs:{showAlert:e.showAlert}}),e._v(" "),e.layerOnOff?a("MaskLayer",[a("section",[a("div",{staticClass:"close",on:{click:function(t){t.stopPropagation(),e.layerOnOff=!1}}},[a("i")]),e._v(" "),a("div",{staticClass:"text"},[a("h3",[a("span",[e._v("您还没有加入过团队")])])]),e._v(" "),a("div",{staticClass:"btn"},[a("a",{staticClass:"blue",on:{click:function(t){t.stopPropagation(),e.layerOnOff=!1}}},[e._v("好的")])])])]):e._e()],1)},[function(){var e=this.$createElement,t=this._self._c||e;return t("section",{staticClass:"alEmr-commlogo"},[t("a",{attrs:{href:"/"}})])},function(){var e=this.$createElement,t=this._self._c||e;return t("li",{staticClass:"navLeftNormal"},[t("a",{attrs:{href:"../choosePatients/index.html",target:"_blank"}},[t("i",{staticClass:"patientsIcon"}),this._v(" "),t("span",[this._v("选择患者")])])])},function(){var e=this.$createElement,t=this._self._c||e;return t("a",{attrs:{href:"/"}},[t("i",{staticClass:"allCaseIcon"}),this._v(" "),t("span",[this._v("全部病历")])])},function(){var e=this.$createElement,t=this._self._c||e;return t("a",{attrs:{href:"../templateLib/index.html"}},[t("i",{staticClass:"templateIcon"}),this._v(" "),t("span",[this._v("模板库")])])}],!1,null,"286e521a",null));t.a=u.exports},,,,function(e,t,a){"use strict";var n=a(10);a.n(n).a},,function(e,t,a){"use strict";a(88),a(85),a(84),a(83)},function(e,t,a){"use strict";var n=a(0),s=a(6),i={props:["path","beginPlay","isPopup","codeType"],data:function(){return{Inpath:this.path,isBegin:this.beginPlay,transcodingTxt:"转码中...",codingType:this.codeType?this.codeType:2}},watch:{codeType:function(){var e=this;e.codingType=this.codeType,3==e.codeType?e.transcodingTxt="转码中...":4==e.codeType&&(e.transcodingTxt="转码失败")},beginPlay:function(){var e=this;e.beginPlay&&(e.isBegin=this.beginPlay,(3!=e.codeType&&4!=e.codeType||2==e.codeType)&&(e.Inpath=this.path,setTimeout(function(){s("source").attr("src",e.Inpath),e.pluginCKplayerCode(e.Inpath,e.isPopup)},10)))}},methods:{pluginCKplayerCode:function(e,t){var a=this;t||s("body").addClass("bodyHidden");var i=new AllinmdPlayer("ev-videoArea",{width:600,height:400,poster:"//img10.allinmd.cn/v3/terminal/defaultVideo.jpg",flash:{swf:"//paas.allinmd.cn/modules/allinmdplayer/allinmdplayer.swf"},limitPlayTime:{allow:!1,value:3},setMaxPlayTime:{allow:!1,value:0}},function(){void 0!=i?i.player.play():this.play()});i.player.on("play",function(){n.a.players&&s.each(n.a.players,function(e,t){t.player.pause()})}),i.player.on("ended",function(){setTimeout(function(){s("#ev-BgVideo").length<=0||(t||s("body").removeClass("bodyHidden"),a.isBegin=!1,a.$emit("beginFn",!1),s(".videoPlayerBg").hide(),s("#lightbox").hide(),i.player.dispose(),s("#ev-BgVideo,#bg").remove(),n.a.players&&s.each(n.a.players,function(e,t){t.player.play()}))},1e3)}),s("#videoArea").append('<a class="ev-videoPopUpWindowClose" href="javascript:;" style="display:block;width:42px;height:42px;position:absolute;top:-10px;right:-25px;z-index:12;"><img src="//img00.allinmd.cn/detail/close.png"/></a>').find(".ev-videoPopUpWindowClose").on("click",function(e){s("#ev-BgVideo").length<=0||(t||s("body").removeClass("bodyHidden"),a.isBegin=!1,a.$emit("beginFn",!1),s(".videoPlayerBg").hide(),i.player.dispose(),s("#ev-BgVideo,#bg").remove(),n.a.players&&s.each(n.a.players,function(e,t){t.player.play()}))})},quit:function(){this.isBegin=!1,this.$emit("beginFn",!1),s(".videoPlayerBg").hide(),s("#ev-BgVideo,#bg").remove()}},mounted:function(){}},o=(a(80),a(1)),r=Object(o.a)(i,function(){var e=this,t=e.$createElement,a=e._self._c||t;return e.isBegin?a("div",{staticClass:"videoPlayerBg"},[a("div",{attrs:{id:"ev-BgVideo"}},[a("div",{attrs:{id:"videoArea"}},[a("video",{directives:[{name:"show",rawName:"v-show",value:2==e.codingType,expression:"codingType==2"}],staticClass:"video-js vjs-default-skin vjs-no-flex vjs-big-play-centered",attrs:{id:"ev-videoArea",oncontextmenu:"return false"}},[a("source",{attrs:{src:e.Inpath,type:"video/mp4"}})]),e._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:2!=e.codingType,expression:"codingType!=2"}],staticClass:"videoTranscoding"},[a("a",{staticClass:"quitBtn",attrs:{href:"javascript:;"},on:{click:function(t){t.stopPropagation(),e.quit()}}},[a("img",{attrs:{src:"//img00.allinmd.cn/detail/close.png"}})]),e._v(" "),a("span",{domProps:{textContent:e._s(e.transcodingTxt)}})])])]),e._v(" "),a("div",{attrs:{id:"lightbox"}})]):e._e()},[],!1,null,null,null);t.a=r.exports},,,,function(e,t,a){"use strict";var n=a(2),s=a.n(n),i=a(8),o=(a(6),a(91));i.default.config.errorHandler=function(e,t,a){var n=function(e){if(e.$root===e)return"root";var t=e._isVue?e.$options&&e.$options.name||e.$options&&e.$options._componentTag:e.name;return(t?"component <"+t+">":"anonymous component")+(e._isVue&&e.$options&&e.$options.__file?" at "+(e.$options&&e.$options.__file):"")}(t),i=t.$options&&t.$options.propsData;o.init({token:"21"}),o.initVueErrorHandle(e,{metaData:{componentName:n,propsData:s()(i),info:a}})}},,function(e,t,a){"use strict";var n=a(19),s=a(20),i={components:{SearchInput:n.a,UserLogo:s.a},methods:{searchVal:function(e){this.$emit("searchVal",e)}}},o=(a(78),a(1)),r=Object(o.a)(i,function(){var e=this.$createElement,t=this._self._c||e;return t("section",{staticClass:"alEmr-header"},[t("section",{staticClass:"alEmr-headerContainer"},[t("section",{staticClass:"alEmr-headerInner"},[t("SearchInput",{on:{searchVal:this.searchVal}}),this._v(" "),t("UserLogo")],1)])])},[],!1,null,"b1b098a8",null);t.a=r.exports},,function(e,t,a){"use strict";var n=a(0),s="//www.allinmd.cn/call/",i=a(6);n.a.LightBox={element:null,init:function(){var e,t="100%",a="fixed";n.a.browser.msie&&"6.0"===n.a.browser.version&&!i.support.style&&(t=document.documentElement.clientHeight+"px",a="absolute"),i("#lightbox").remove(),e=n.a.browser.msie?'<div id="lightbox" style="left:0;  background:'+this.color+"; top:0; width:100%; height:"+t+";filter: progid:DXImageTransform.Microsoft.Alpha(opacity=100); filter:alpha(opacity="+this.opacity+"); -moz-opacity:"+this.opacity/100+"; opacity:"+this.opacity/100+";zoom:1; position:"+a+'; z-index:9; " ><iframe src="" marginwidth="0" framespacing="0" marginheight="0" frameborder="0" width="100%" height="100%" style="left:0; background:'+this.color+'; top:0; width:100%; filter:alpha(opacity=0); -moz-opacity: 0; opacity: 0;zoom:1; position:absolute; z-index: 9"></iframe></div>':'<div id="lightbox" style="left:0; background:'+this.color+"; top:0; width:100%; height:"+t+"; filter:alpha(opacity="+this.opacity+"); -moz-opacity: "+this.opacity/100+"; opacity: "+this.opacity/100+";zoom:1; position:"+a+'; z-index:9; " ></div>',this.element=i(e).appendTo(document.body),i("#_lightbox").remove(),this.count=0},getZIndex:function(){return parseInt(this.element.css("zIndex"))||-1},hide:function(){var e=this;e.element&&(n.a.browser.msie&&Number(n.a.browser.version)<9?setTimeout(function(){e.count--,(e.count<=0||e.element.css("zIndex")<=9)&&e.element.hide()},200):(e.count--,(e.count<=0||e.element.css("zIndex")<=9)&&(e.element.hide(),n.a.browser.msie||i("div.SecEditCtrl").css("visibility","visible"))))},resetZIndex:function(){return this.setZIndex("9")},setZIndex:function(e){return this.element||this.init(),this.element.css("zIndex",e||this.element.css("zIndex"))},show:function(e,t){return this.opacity=void 0!==e?e:100,this.color=void 0!==t?t:"#000",this.init(),n.a.browser.msie&&"6.0"===n.a.browser.version&&!i.support.style&&this.element.css("height",CU.getDocumentPracticalHeight()+"px"),this.element.show(),this.setZIndex("9"),this.count<0&&(this.count=0),this.count++,this},zIndexUp:function(){this.element.css("zIndex","+=2"),this.element.css("display","block")},zIndexDown:function(){this.element.css("zIndex","-=2")},showloading:function(){this.loading=(this.loading||i('<div style="position:absolute; top:45%; left:36%;z-index:18; display:none" id="ctrollerLoading"><img src="//img10.allinmd.cn/loading/Loading.png" alt="loading" /></div>').appendTo(document.body)).show(),n.a.setCenter(i("#ctrollerLoading"))},hideloading:function(){this.loading&&this.loading.hide()}},n.a.setImgSize=function(e,t,a,n){var s,i,o=new Image;o.src=a.src;var r=1;o.onload=function(){var l=o.width,d=o.height;i=t/l,s=e/d,0===t&&0===e?r=1:0===t?s<1&&(r=s):0===e?i<1&&(r=i):(i<1||s<1)&&(r=i<=s?i:s),r<1&&(l*=r,d*=r),a.height=d,a.width=l,n&&n()}},i.fn.scrollBox=function(e){var t=i.extend({numToMove:2,liClickHdl:null,rows:1},e),a={config:{},left:0,el:{container:this,prevBtn:this.find(".prev"),nextBtn:this.find(".next"),scrollObj:this.find("ul.scroll"),scrollParent:this.find("ul.scroll").parent()},init:function(){var e=this;e.render(),e.bindBtns(),e.updateBtnStatus(),t.liClickHdl&&e.bindLiClick()},bindLiClick:function(){this.el.scrollObj.find("li").on("click",function(e){t.liClickHdl&&t.liClickHdl(this)})},bindBtns:function(){var e=this;e.el.nextBtn.on("click",function(){e.next()}),e.el.prevBtn.on("click",function(){e.prev()})},render:function(){var e=this,a=e.el.scrollObj.find(">li:eq(0)");e.liWidth=a.outerWidth(!0);var n=e.el.scrollObj.find(">li").size();e.scrollWidth=e.liWidth*Math.ceil(n/t.rows),e.scrollParentWidth=e.el.scrollParent.width(),e.el.scrollObj.css({position:"absolute"}),e.el.scrollParent.css({position:"relative",height:e.el.scrollObj.height()})},next:function(){var e=this,a=e.scrollWidth-e.left-e.scrollParentWidth;a>0&&(a>e.liWidth*t.numToMove?e.left=e.left+e.liWidth*t.numToMove:e.left=e.left+a,e.el.scrollObj.animate({left:-e.left}),e.updateBtnStatus())},prev:function(){var e=this;e.left>0&&(e.left>e.liWidth*t.numToMove?e.left=e.left-e.liWidth*t.numToMove:e.left=0,e.el.scrollObj.animate({left:-e.left}),e.updateBtnStatus())},updateBtnStatus:function(){var e=this;e.scrollWidth-e.left-e.scrollParentWidth<=0?e.el.nextBtn.addClass("disable"):e.el.nextBtn.removeClass("disable"),0===e.left?e.el.prevBtn.addClass("disable"):e.el.prevBtn.removeClass("disable")},nextLi:function(){var e=this;e.el.scrollObj.find(".active").next().size()>0&&e.el.scrollObj.find(".active").removeClass("active").next().addClass("active"),e.scrollWidth-e.left-e.scrollParentWidth>0&&(e.left=e.left+e.liWidth,e.el.scrollObj.animate({left:-e.left}))},prevLi:function(){var e=this;e.el.scrollObj.find(".active").prev().size()>0&&e.el.scrollObj.find(".active").removeClass("active").prev().addClass("active"),e.left>0&&(e.left=e.left-e.liWidth,e.el.scrollObj.animate({left:-e.left}))},resize:function(e){var a=this;a.el.container.css({width:e}),a.scrollParentWidth=e,t.numToMove=e/a.liWidth},destroy:function(){this.el.nextBtn.off("click"),this.el.prevBtn.off("click")}};return a.init(),i.extend(this,{prevLi:function(){a.prevLi()},nextLi:function(){a.nextLi()},resize:function(e){a.resize(e)},destroy:function(){a.destroy()}})};t.a=function(e){var t=i.extend({container:null,typeTitle:"",index:0},e),a=t.container;return{path:{caze:s+"case_attachment/json_list/",topic:s+"topic/attachment/json_list/",review:s+"review/json_list_att/"},el:{originList:a},imgListType:"",picType:"width",template:{main:function(){return'<div class="view_big_img_wrap"><div class="view_big_img">        <div class="view_big_img_content">            <div class="view_big_img_center">                    <div class="view_img_close"><img src="//modules.allinmd.cn/view-big-img/images/closeNew.png" /></div>                <div class="view_img_top" id="vbi-scrollList">                    <div class="view_top_img_left_mr prev"></div>                    <div class="view_img_top_cont">                        <ul class="scroll">                            <li><div class="small_img_mr"></div><img src="//modules.allinmd.cn/view-big-img/images/mr_small_img.png" /></li>                        </ul><div class="view_img_num" id="vbi-imgIndex"><span>2</span> / 7<i></i></div>                    </div>                    <div class="view_top_img_right_hover next"></div>                    <div class="clear"></div>                </div>                <div class="view_big_img_cont_bg">                    <div class="view_img_cont_top">                        <div class="view_img_sh_zt hide"></div>                        <div class="view_img_title font_yahei hide" id="vbi-imgTitle"></div>                        <div class="clear"></div>                    </div>                    <div class="view_img_tp">                        <s class="prev" title="上一张"></s>                        <s class="next" title="下一张"></s>                        <div class="view_img_but view_img_shck font_yahei" id="vbi-setSizeBtn">适合窗口</div>                        <div class="view_img_but view_img_shck font_yahei" id="vbi-rotateBtn">旋转图片</div>                        <div class="view_img_but view_img_view_yt font_yahei" id="vbi-viewOrigImg">查看原图</div>                        <table width="100%" height="100%" class="" >                           <tr><td align="center" valign="middle" style="text-align: center"><img src=""  />                           </td></tr>                        </table>                   </div>                </div>            </div>        </div>    </div></div>'}},init:function(){var e=this;if(e.currentIndex=t.index,e.isPopup=t.isPopup,0!=i(t.container).find("img").length){e.checkImgListType(),e.openDialog(e.isPopup),e.dialog.find(".view_img_top_cont ul li:eq("+e.currentIndex+")").click();var a=i(".view_img_top_cont").width(),n=i(".view_img_top_cont li").width()+15,s=(i(".view_img_top_cont li").length,a/n);if(i(".view_img_top_cont .scroll").width(),i("ul.scroll li.active img"),e.currentIndex+1>=s){var o=e.currentIndex/Math.floor(s);if(o>1)for(var r=0;r<o-1;r++)i("#vbi-scrollList .next").click()}i(document).bind("keyup",function(e){return 37==e.keyCode?i(".view_img_tp .prev").click():39==e.keyCode&&i(".view_img_tp .next").click(),e.preventDefault(),!1})}},checkImgListType:function(){var e=this;e.values={},e.values.caseId=i(t.container).attr("caseId"),e.values.topicId=i(t.container).attr("topicId"),e.values.reviewId=i(t.container).attr("reviewId"),e.values.caseCategoryId=i(t.container).attr("caseCategoryId"),void 0!=e.values.topicId&&(e.imgListType="topic"),void 0!=e.values.reviewId&&(e.imgListType="review"),void 0!=e.values.caseId&&(e.imgListType="caze")},bindBtns:function(e){var t=this;t.dialog.find(".view_img_close").on("click",function(a){a.stopPropagation(),a.preventDefault(),t.close(e)}),t.dialog.find("#vbi-setSizeBtn").on("click",function(){"适合窗口"==i(this).text()?(i(this).text("适合宽度"),t.picType="window",t.setSize(t.picType)):(t.picType="width",i(this).text("适合窗口").show(),t.setSize(t.picType))}),t.angle=0,t.prevHeight=i(".view_img_tp").height(),i(".view_img_tp table").css("position","relative"),t.dialog.find("#vbi-rotateBtn").on("click",function(){t.angle+=90,360==t.angle&&(t.angle=0);var e=i(".view_img_tp img").width(),a=i(".view_img_tp img").height(),n=1,s=0,o=i(".view_img_tp table").width();i(".view_img_tp table").height(),90==t.angle||270==t.angle?(e+148>t.prevHeight?a>o?i(".view_img_tp").css({height:o}):e/a<.5?i(".view_img_tp").css({height:o}):i(".view_img_tp").css({height:e+148}):i(".view_img_tp").css({height:t.prevHeight}),a>o&&(n=o/a*100+"%"),i(".view_img_tp img").css({transform:"rotate("+t.angle+"deg)",zoom:n}).attr({zoomW:a*o/a,zoomH:e*o/a}),s=i(".view_img_tp img").width()-e*o/a,i(".view_img_tp img").css({marginTop:1==n?0:-s})):(a+148>t.prevHeight?i(".view_img_tp").css({height:a}):i(".view_img_tp").css({height:t.prevHeight}),i(".view_img_tp img").css({transform:"rotate("+t.angle+"deg)",zoom:1}),i(".view_img_tp img").css({marginTop:0}))}).on("selectstart",function(){return!1}),t.dialog.find("#vbi-viewOrigImg").on("click",function(){var e="/pages/singlePage/viewOriginalImg/viewOriginalImg.html?"+t.getHrefParam(t.imgListType);t.currentIndex&&(e+="&index="+t.currentIndex),window.open(e)}).on("selectstart",function(){return!1})},changeImg:function(t){var a=this;a.dialog.find("#vbi-imgTitle").html(t.title),a.dialog.find("#vbi-imgIndex span").html(t.index+1),a.angle=0,a.dialog.find(".view_img_tp img").css({transform:"rotate(0deg)",zoom:1,marginTop:0}),e.srcSplit?a.dialog.find(".view_img_tp img").attr("src",/_t_\d{3}_\d{3}/g.test(t.src)?t.src.replace(/_t_\d{3}_\d{3}/g,""):t.src):a.dialog.find(".view_img_tp img").attr("src",t.src),t.uploadTime&&a.dialog.find("#uploadTime").text("上传于："+t.uploadTime.split(".")[0]),a.setSize(a.picType);var n=i("ul.scroll li.active img"),s=n.attr("title");s&&n.attr("title").length>36&&(s=n.attr("title").substring(0,36)+"..."),i("#vbi-imgIndex").find("i").attr({"data-text":n.attr("title")}).html(s),s&&a.subText()},bindWindonResize:function(){var e=this;i(window).on("resize",function(){e.resize()})},unbindWindonResize:function(){i(window).off("resize")},resize:function(){var e=this;e.dialog.css({width:i(window).width(),height:i(window).height()});var t=i(window).width()>1080?1e3:i(window).width()-80,a=e.topContainer.find(".prev").outerWidth(!0)+e.topContainer.find(".next").outerWidth(!0);e.topContainer.find("ul.scroll").width()>t-a&&e.topContainer.find(".view_img_top_cont").width(t-a),void 0!=e.scrollbox&&e.scrollbox.resize(t-a),e.topContainer.width(t),parseInt(e.dialog.find(".view_big_img_cont_bg").css("padding-left")),i(window).width()<1080?e.dialog.find(".view_big_img_center").width(i(window).width()-80):e.dialog.find(".view_big_img_center").width(1e3),"适合宽度"==e.dialog.find("#vbi-setSizeBtn").text()?e.setSize("window"):e.setSize("width")},openDialog:function(){var e=this;e.dialog=i(e.template.main()),0==i(".view_big_img_wrap").length&&i("body").append(e.dialog),e.topContainer=e.dialog.find(".view_img_top"),e.picContainer=e.dialog.find(".view_img_tp"),e.img=e.dialog.find(".view_img_tp img"),n.a.LightBox.count>0?(n.a.LightBox.count++,n.a.LightBox.zIndexUp()):n.a.LightBox.show(60,"#000"),t.imgList?(e.getLocaImgList(),i("#vbi-setSizeBtn").css({right:"10px"}),i("#vbi-viewOrigImg").hide()):e.getImgList(),e.resize(),e.setCss(),e.bindBtns(e.isPopup),e.bindWindonResize(),e.setTypeTitle(),e.dialog.find("#vbi-imgIndex").html("<span></span> / "+e.pictureSize+"<i></i>"),e.initNextPrevBtns()},setTypeTitle:function(){""!==t.typeTitle&&this.dialog.find(".view_img_sh_zt").html(t.typeTitle).show()},subText:function(){i(".view_img_top_cont").hover(function(){var e=i(this).find(".view_img_num"),t="";t=e.find("i").attr("data-text").length>100?e.find("i").attr("data-text").substring(0,100):e.find("i").attr("data-text"),e.find("i").text(t)},function(){var e=i(this).find(".view_img_num"),t="";t=e.find("i").attr("data-text").length>42?e.find("i").attr("data-text").substring(0,36)+"...":e.find("i").attr("data-text"),e.find("i").text(t)})},setCss:function(){var e,t=this;void 0!=t.scrollbox&&i("body").css({position:"relative",overflow:"hidden"}),void 0!==window.pageYOffset?e=window.pageYOffset:void 0!==document.compatMode&&"BackCompat"!=document.compatMode?e=document.documentElement.scrollTop:void 0!==document.body&&(e=document.body.scrollTop),t.dialog.css({position:"absolute",top:e,width:i(window).width(),zIndex:n.a.LightBox.getZIndex()+1,overflowY:"scroll",height:i(window).height()}),t.setSize("width")},initImgList:function(){var e=this,t=i(".view_img_top_cont li").length,a=e.dialog.find(".view_big_img_cont_bg").outerWidth(!0)-e.topContainer.find(".prev").outerWidth(!0)-e.topContainer.find(".next").outerWidth(!0);e.topContainer.find("ul.scroll").width()>a?e.topContainer.find(".view_img_top_cont").width(a):(e.topContainer.find(".view_img_top_cont").width("80%"),e.topContainer.find(".prev,.next").addClass("disable")),e.scrollbox=e.dialog.find("#vbi-scrollList").scrollBox({numToMove:Math.floor(a/99),liClickHdl:function(a){var n=i(a).find("img");e.currentIndex=i(a).index();var s={index:e.currentIndex,src:n.attr("src"),title:n.attr("title"),uploadTime:n.attr("uploadTime"),totalLen:t};i(a).addClass("active").siblings(".active").removeClass("active"),setTimeout(function(){e.changeImg(s)},300)}})},getPicKey:function(e){return{topic:"topicAttUrl",caze:"attUrl",review:"reviewAttUrl"}[e]},getParam:function(e){var t=this,a={};switch(e){case"topic":a={topicId:t.values.topicId,topicAttType:9};break;case"caze":a={caseId:t.values.caseId,caseCategoryId:t.values.caseCategoryId,caseAttType:9};break;case"review":a={reviewId:t.values.reviewId,reviewAttType:9}}return a.attUseFlag=2,"caze"!=e&&(a={paramJson:i.toJSON(a)}),a},getHrefParam:function(e){var t=this,a={};switch(e){case"topic":a="&topicId="+t.values.topicId;break;case"caze":a="&caseId="+t.values.caseId,void 0!=t.values.caseCategoryId&&(a+="&caseCategoryId="+t.values.caseCategoryId);break;case"review":a="&reviewId="+t.values.reviewId}return a},getLocaImgList:function(){var e=this,a=t.imgList,n="";e.pictureSize=a.length,i.each(a,function(e,t){n+="<li listid='"+t.id+"'><div class='small_img_mr'></div>   <img src='"+t.url+"'/></li>"}),e.dialog.find("ul.scroll").html(n),t.id&&e.dialog.find(".scroll li").each(function(a,n){t.id!=i(n).attr("listid")||(e.currentIndex=i(n).index())}),e.liOuterWidth=e.dialog.find("ul.scroll li:eq(0)").outerWidth(!0),e.initImgList(),e.dialog.find("ul.scroll").css({width:99*e.pictureSize+107+15}),e.dialog.find("ul.scroll").css({position:"inherit"}),i(".view_img_top_cont").css({height:"",width:i(".view_img_top_cont").width()-15});var s=e.dialog.find(".view_big_img_cont_bg").outerWidth(!0)-e.topContainer.find(".prev").outerWidth(!0)-e.topContainer.find(".next").outerWidth(!0);e.topContainer.find("ul.scroll").width()>s?e.topContainer.find(".view_img_top_cont").width(s):(e.topContainer.find(".view_img_top_cont").width("80%"),e.topContainer.find(".prev,.next").addClass("disable")),t.id},getImgList:function(){var e=this;i.ajax({url:e.path[e.imgListType],data:e.getParam(e.imgListType),type:"caze"==e.imgListType?"GET":"POST",async:!1,success:function(a){if(!(a&&a.responseObject&&a.responseObject.responseStatus&&a.responseObject.responseData))return i(".view_big_img_wrap").remove(),n.a.LightBox.hide(),!1;var s=a.responseObject.responseData.data_list,o="";if(e.pictureSize=s.length,t.reverse)for(var r=s.length-1;r>=0;r--)o+="<li listid='"+s.id+"'><div class='small_img_mr'></div>   <img src='"+s[r][e.getPicKey(e.imgListType)]+"' title='"+(s[r].caseAttName||"")+"' uploadTime='"+(s[r].uploadTime&&s[r].uploadTime)+"' /></li>";else i.map(s,function(t,a){o+="<li listid='"+t.id+"'><div class='small_img_mr'></div>   <img src='"+t[e.getPicKey(e.imgListType)]+"' title='"+(t.caseAttName||"")+"' uploadTime='"+(t.uploadTime&&t.uploadTime)+"' /></li>"});e.dialog.find("ul.scroll").html(o),t.id&&e.dialog.find(".scroll li").each(function(a,n){t.id!=i(n).attr("listid")||(e.currentIndex=i(n).index())}),e.liOuterWidth=e.dialog.find("ul.scroll li:eq(0)").outerWidth(!0),e.initImgList(),e.dialog.find("ul.scroll").css({width:99*e.pictureSize+107+15}),e.dialog.find("ul.scroll").css({position:"inherit"}),i(".view_img_top_cont").css({height:"",width:i(".view_img_top_cont").width()-15});var l=e.dialog.find(".view_big_img_cont_bg").outerWidth(!0)-e.topContainer.find(".prev").outerWidth(!0)-e.topContainer.find(".next").outerWidth(!0);e.topContainer.find("ul.scroll").width()>l?e.topContainer.find(".view_img_top_cont").width(l):(e.topContainer.find(".view_img_top_cont").width("80%"),e.topContainer.find(".prev,.next").addClass("disable")),t.id&&e.topContainer.find(".next").click()}})},close:function(e){i(document).unbind("keyup"),this.dialog.remove(),n.a.LightBox.count>1?(n.a.LightBox.count--,n.a.LightBox.zIndexDown()):n.a.LightBox.hide(),e||i("body").css({position:"static",overflow:"scroll"}),this.unbindWindonResize()},setSize:function(e){var t,a=this,s=(t=a.dialog.find(".view_big_img_cont_bg")).find(".view_img_cont_top"),o=i(window).height()-2*parseInt(a.dialog.find(".view_big_img_center").css("paddingTop"))-a.dialog.find(".view_img_top").height()-2*parseInt(t.css("paddingTop")),r=o-s.height()-parseInt(s.css("margin-bottom")),l=r,d=t.width();(r=r>100?r:100,d=d>200?d:200,"window"==e&&(t.animate("height",o),90!=a.angle&&270!=a.angle||r<a.img.width()&&(r=a.img.width()+300),n.a.setImgSize(r,d,a.img.get(0)),a.picContainer.height(r)),"width"==e)&&((t=a.dialog.find(".view_big_img_cont_bg")).css("height","auto"),n.a.setImgSize(8e3,d,a.img.get(0),function(){l=l>a.img.height()?l:a.img.height(),90!=a.angle&&270!=a.angle||l<a.img.width()&&(l=a.img.width()+300),a.picContainer.height(l)}))},initNextPrevBtns:function(){var e=this;e.picContainer.find(".prev").on("click",function(){if(0==e.currentIndex)return!1;e.scrollbox.prevLi(),e.currentIndex--,e.topContainer.find(".active").click()}).on("selectstart",function(){return!1}),e.picContainer.find(".next").on("click",function(){if(e.currentIndex==e.dialog.find(".scroll li").length-1)return!1;e.scrollbox.nextLi(),e.currentIndex++,e.topContainer.find(".active").click()}).on("selectstart",function(){return!1})}}.init(),{}}},,function(e,t,a){"use strict";var n=a(13);a.n(n).a},,function(e,t,a){"use strict";var n=a(14);a.n(n).a},,function(e,t,a){"use strict";var n=a(15);a.n(n).a},,function(e,t,a){"use strict";var n=a(16);a.n(n).a},,function(e,t,a){"use strict";var n=a(17);a.n(n).a},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){"use strict";(function(e){var n=a(2),s=a.n(n),i=a(40),o=a(48),r=a(12),l=a(0),d="/call/caseFolder/case_note/getMapList/",c="/call/caseFolder/case_note_attachment/getNoteArrachmentMapList/",u="/call/caseFolder/case_folder_attachment/upload/",p="/call/qiniu/storage/getQiniuToken/",m="/call/qiniu/storage/saveVideoInfo/";t.a={name:"upload-column",props:["uploadColumn"],data:function(){return{remarksHtml:'<div class="remarkMask"><i class="remarkMaskIcon"></i><article class="remarkMaskTitle">添加备注</article><div class="remarkMaskEditPanel">\n                       <textarea name="editRemark" class="editRemark" cols="30" rows="2"></textarea>\n                       <div class="recordPanel"></div>\n                   </div></div>',beginPlay:!1,isFirst:!0,isImgSelect:[],itemList:[],layerTitle:"",layerList:[],layerImgList:[],isLayer:!1,addFileType:"",textModel:this.uploadColumn.textVal,videoPath:"",isUplaodError:!1,uploadErrorText:"",userId:l.a.cookie.get("userId")||"",sortIdImg:1,sortIdVideo:1,selectImgLenth:0,uploadSuc:0,uploadError:0,selecImgSrc:"",selecImNode:"",uploadImgStatus:!0,uploadVideoStatus:!0,uploadStatrus:!0,isLoading:!1,context:"",uploadInfo:{validImg:[],deletImg:[],noteImgid:[],validVideo:[],deletVideo:[],noteVideoId:[],uploadImgStatus:!0,uploadVideoStatus:!0,remarks:this.uploadColumn.textVal,imgErrLength:0,videoErrLength:0,HandleId:this.uploadColumn.HandleId}}},components:{videoPlayer:i.a,loading:r.a},computed:{textVal:function(){return this.uploadColumn.textVal},HandleId:function(){return this.uploadColumn.HandleId}},watch:{textVal:function(e){this.textModel=e,this.uploadInfo.remarks=e},HandleId:function(e){this.uploadInfo.HandleId=e},textModel:function(){this.textModel.length>this.uploadColumn.textAreaLimt&&(this.textModel=this.textModel.substr(0,this.uploadColumn.textAreaLimt)),this.uploadInfo.remarks=this.textModel},uploadInfo:{handler:function(e){this.$emit("uploadBackInfo",[{uploadInfo:e},{uploadImgStatus:this.uploadImgStatus},{uploadVideoStatus:this.uploadVideoStatus}])},deep:!0}},methods:{backFirst:function(){this.isImgSelect=[],this.isFirst=!0,e(".moxie-shim").show()},beginFn:function(e){this.beginPlay=e},maskVideo:function(t){t.stopPropagation(),t.preventDefault();var a=e(t.target).parents(".ev-video"),n=a.attr("data-id"),s=a.attr("data-noteId"),i=a.attr("data-index"),o=a.attr("isError"),r=a.find("img").attr("src"),l=a.attr("data-path");e(t.target).hasClass("deleteImg")?(o&&this.uploadInfo.videoErrLength--,s?this.uploadInfo.deletVideo.push({imgSrc:r,id:n,videoPath:l,nodeId:s}):this.uploadInfo.deletVideo.push({imgSrc:r,id:n,videoPath:l}),a.attr("data-upload")&&(this.deleArr(this.uploadInfo.validVideo,n),this.deleArr(this.uploadInfo.noteVideoId,n,i)),a.remove()):e(t.target).hasClass("remarkMask")||e(t.target).hasClass("remarkMaskIcon")||e(t.target).hasClass("remarkMaskTitle")||e(t.target).hasClass("remarkMaskEditPanel")||e(t.target).hasClass("editRemark")||e(t.target).hasClass("recordPanel")?e(t.target).hasClass("remarkMask")?this.editRemark(e(t.target)):this.editRemark(e(t.target).parents(".remarkMask")):l&&(this.videoPath=l,this.beginPlay=!0)},initRemark:function(){var t=this,a=e(".ev-bigImg,.ev-video");a.hover(function(){var a=e(this);t.checkInvalid(a.attr("data-id"))||t.showRemark(a,1)},function(){var a=e(this);t.showRemark(a,0)})},showRemark:function(t,a){var n=this,s=t.find(".remarkMask");s.each(function(){var t=e(this),s=t.find(".remarkMaskEditPanel").attr("remarkValue"),i=n.checkInvalid(s);parseInt(a,10)?i?(t.find(".recordPanel").html(""),t.hasClass("remarkMaskOnEdit")?t.attr({class:"remarkMask remarkMaskOnEdit"}):t.attr({class:"remarkMask remarkMaskActive"})):(t.hasClass("remarkMaskOnEdit")?t.attr({class:"remarkMask remarkMaskOnEdit"}):t.attr({class:"remarkMask remarkMaskReady"}),e.trim(t.find(".recordPanel").html())!==e.trim(s)&&t.find(".recordPanel").html(s)):i?(t.find(".recordPanel").html(""),t.hasClass("remarkMaskOnEdit")?t.attr({class:"remarkMask remarkMaskOnEdit"}):t.attr({class:"remarkMask"})):(t.hasClass("remarkMaskOnEdit")?t.attr({class:"remarkMask remarkMaskOnEdit"}):t.attr({class:"remarkMask remarkMaskReady"}),e.trim(t.find(".recordPanel").html())!==e.trim(s)&&t.find(".recordPanel").html(s))}),s.each(function(){var t=e(this);t.off("mousedown").on("mousedown",function(){return n.editRemark(t),!1})})},checkInvalid:function(e){return"string"==typeof e&&0==e.length||void 0==e||"undefined"==e||"null"==e||void 0===e||"null"==typeof e||null==e},getStrLen:function(e,t){var a="",n=0;if(!e)return"";for(var s=0;s<e.length&&(e.charCodeAt(s)>128?n+=2:n++,n<=t);s++)a=a.concat(e[s]);return a},editRemark:function(t){var a=this;t.attr({class:"remarkMask remarkMaskOnEdit"});var n=t.find(".editRemark");n.trigger("focus");var s=n.parents("[data-id]"),i=s.attr("data-id"),o=s.attr("data-noteid"),r=s.hasClass("ev-bigImg")?1:2;n.off("input").on("input",function(){var t=e(this);t.val(a.getStrLen(t.val(),32)),t.parent().attr({remarkValue:t.val()}),a.$emit("changeItemRemarks",{id:parseInt(i,10),val:t.val(),noteid:a.checkInvalid(o)?"":parseInt(o,10),attType:r})})},viewBigImg:function(t){t.stopPropagation(),t.preventDefault();var a=[],n=e(t.target).parents(".ev-bigImg"),s=n.attr("listId"),i=n.attr("data-id"),r=n.find("img").attr("src"),l=n.attr("data-noteId"),d=n.attr("isError"),c=n.attr("data-index"),u=e(t.target).parents("ul");e(t.target).hasClass("deleteImg")?(d&&this.uploadInfo.imgErrLength--,l?this.uploadInfo.deletImg.push({imgSrc:r,id:i,nodeId:l}):this.uploadInfo.deletImg.push({imgSrc:r,id:i}),n.attr("data-upload")&&(this.deleArr(this.uploadInfo.validImg,i),this.deleArr(this.uploadInfo.noteImgid,i,c)),n.remove()):e(t.target).hasClass("remarkMask")||e(t.target).hasClass("remarkMaskIcon")||e(t.target).hasClass("remarkMaskTitle")||e(t.target).hasClass("remarkMaskEditPanel")||e(t.target).hasClass("editRemark")||e(t.target).hasClass("recordPanel")?e(t.target).hasClass("remarkMask")?this.editRemark(e(t.target)):this.editRemark(e(t.target).parents(".remarkMask")):s&&(e(".ev-bigImg",u).each(function(t,n){a.push({id:e(n).attr("listid"),url:e(n).find("img").attr("src")})}),Object(o.a)({container:u,typeTitle:"",imgListType:"caze",id:s,imgList:a,srcSplit:!0}))},deleArr:function(e,t,a){if(e.length>0)for(var n=0;n<e.length;n++)if(a){if(e[n].id==t&&a==e[n].index)return e.splice(n,1),e}else if(e[n].id==t)return e.splice(n,1),e},openFile:function(t){this.layerTitle=t.noteName,this.isFirst=!1,e(".moxie-shim").hide(),this.getCaseSecond(t.noteId)},selecImg:function(e,t){var a=this.isImgSelect.indexOf(e);-1!=a?(this.isImgSelect.splice(a,1),this.itemList.splice(a,1)):(this.isImgSelect.push(e),this.itemList.push({id:t.id,noteId:t.noteId,attUrl:t.attUrl,sortId:t.sortId,fileContent:t.fileContent,videoPicAttUrl:t.videoPicAttUrl,extName:t.extName}))},selectSure:function(t){t.stopPropagation(),t.preventDefault();var a=this;if(this.itemList.length)if(this.closeLayer(),"img"==this.addFileType){var n="",s=a.uploadInfo.noteImgid.length;e.each(this.itemList,function(e,t){e=parseInt(s+e,10),n+='<li class="ev-bigImg" listid="'+Date.parse(new Date)+e+'" data-upload="true" data-id="'+t.id+'" data-noteId="'+t.noteId+'" data-index="'+e+'">                        <img src="'+t.attUrl+'">                        <div class="imgPopup" style="display: none">                            <p class="uploadPending">上传中...</p>                            <p class="uploadFail" style="display: none">上传失败<span>点击重试</span></p>                        </div>'+a.remarksHtml+'                        <span class="deleteImg"></span>                      </li>',a.uploadInfo.noteImgid.push({id:t.id,noteId:t.noteId,imgSrc:t.attUrl,index:a.uploadColumn.ImgList.length+a.sortIdImg+e})}),e(".ev-uploadImgList .ev-addImg",e(t.target).parents(".ev-uploadConier")).before(n),a.initRemark()}else{n="";e.each(this.itemList,function(e,t){n+='<li class="ev-video" data-path="'+t.attUrl+'" data-upload="true" data-id="'+t.id+'" data-noteId="'+t.noteId+'" data-index="'+e+'">                        <img src="'+t.videoPicAttUrl+'">                         <span class="videoBtn"></span>                        <div class="imgPopup" style="display: none">                            <p class="uploadPending">上传中...</p>                            <p class="uploadFail" style="display: none">上传失败<span>点击重试</span></p>                        </div>'+a.remarksHtml+'                        <span class="deleteImg"></span>                      </li>',a.uploadInfo.noteVideoId.push({id:t.id,noteId:t.noteId,imgSrc:t.videoPicAttUrl,videoPath:t.attUrl,index:e+a.uploadColumn.VideoList.length+a.sortIdVideo})}),a.sortIdVideo+=this.itemList.length,e(".ev-uploadVideoList .ev-addVideo",e(t.target).parents(".ev-uploadConier")).before(n),a.initRemark()}},addFile:function(e){if(!this.uploadImgStatus&&"video"==e)return this.uplaodErrorTip("图片未上传完毕"),!1;this.isLayer=!0,this.itemList=[],this.selecImgSrc="","img"==e?(this.addFileType="img",this.uploadImg()):(this.addFileType="video",this.uploadVideo()),this.getCaseNode()},closeLayer:function(){this.isLayer=!1,this.isImgSelect=[],this.isFirst=!0,e(".moxie-shim").show()},uploadImg:function(){var t=this;e.getScript(window.paasFilePathObj.js,function(){window.uploadCount=t.sortIdImg||0,e(".ev-uploadImgBtn").each(function(a,n){var s=e(this);s.uploadImg({ajaxData:{url:u},multiple:!0,inputStyle:{width:"148px",height:"44px","z-index":1,opacity:0,top:"30px"},formData:{caseId:t.uploadColumn.caseId||"",structureId:t.uploadColumn.structureId||"",detailId:t.uploadColumn.detailId||"",groupId:t.uploadColumn.groupId||"",sortId:t.sortIdImg||"",attSpec:1,visitSiteId:1,isValid:0},fileChange:function(e){t.selectImgLenth?t.selectImgLenth+=e.files.length:t.selectImgLenth=e.files.length},fileSelected:function(a){var n=a.type;if(!/(jpg)|(jpeg)|(png)$/i.test(n))return t.uplaodErrorTip("格式不支持，请选择jpg、png、jpeg"),e(".ev-uploadImgBtn input").val(""),t.uploadError++,t.uploadImgS(),!1;if(a.size>10485760)return t.uplaodErrorTip("图片过大，请联系在线客服寻求帮助"),e(".ev-uploadImgBtn input").val(""),t.uploadError++,t.uploadImgS(),!1;t.closeLayer();var i=s.parents(".ev-uploadConier").find(".ev-uploadImgList .ev-addImg"),o='<img src="'+t.localURL(a)+'"><div class="imgPopup" style="display: none">  <p class="uploadPending" style="display: none"><i></i><span>0%</span></p>  <p class="uploadFail" style="display: none">上传失败<br/><span>请重新上传</span></p></div>'+t.remarksHtml+'<span class="deleteImg ev-imgDel" style="display:none;"></span>',r={};r.context=e('<li class="ev-bigImg" data-upload="true" data-Img="true"></li>').append(o),i.before(r.context),a.context=r.context,t.uploadInfo.uploadImgStatus=!1,t.uploadImgStatus=!1,t.sortIdImg++,window.uploadCount=t.sortIdImg||0},uploadBefore:function(t){var a=e(t.context);a.find(".imgPopup,.imgPopup .uploadPending").show(),t.progress=0;var n=10,s=90;t.size>4194304?(n=1,s=99):t.size>2097152&&(n=5,s=90),t.timer=setInterval(function(){t.progress<s?(t.progress+=n,a.find(".uploadPending span").text(t.progress+"%")):clearInterval(t.timer)},50)},uploadSuccess:function(a,n){var s=a,i=e(n.context);if(i.find(".uploadPending span").html("100%"),i.find(".imgPopup,.imgPopup .uploadPending").hide(),i.find(".deleteImg").show(),s&&s.responseObject&&s.responseObject.responseStatus){t.uploadSuc++;var o=s.responseObject.responsePk;i.attr("listId",o).attr("data-id",o),t.uploadInfo.validImg=[],e.each(i.parents(".ev-uploadImgList").find("li"),function(a,n){e(n).attr("data-Img")&&t.uploadInfo.validImg.push({id:e(n).attr("data-id"),imgSrc:e(n).find("img").attr("src"),index:a+1})}),t.initRemark()}else i.attr("isError",1),t.uploadError++,t.uploadInfo.imgErrLength++,t.uplaodErrorTip("图片上传失败,请重新上传"),i.find(".imgPopup,.imgPopup .uploadFail").show();t.uploadImgS()},uploadFail:function(a){t.uploadError++;var n=e(a.context);t.uplaodErrorTip("图片上传失败,请重新上传"),t.uploadInfo.imgErrLength++,n.attr("isError",1),n.find(".imgPopup .uploadPending").hide(),n.find(".imgPopup,.imgPopup .uploadFail").show(),n.find(".deleteImg").show(),t.uploadImgS()}})})})},uploadImgS:function(){var e=this;e.uploadSuc+e.uploadError==e.selectImgLenth&&(e.uploadInfo.uploadImgStatus=!0,e.uploadImgStatus=!0,e.uploadSuc=0,e.uploadError=0,e.selectImgLenth=0)},uploadVideo:function(){var t=this;t.context="",e.getScript(window.paasFilePathObj.js,function(){var a=e(".ev-uploadVideoBtn"),n=videoUpload({obj:"#"+a.attr("id"),flash_swf_url:"//paas.allinmd.cn/modules/video_upload/plupload/Moxie.swf",dragdrop:!0,max_file_size:80,uptoken_url:p+"?paramJson=%7B%22waterType%22:0%7D",domain:"//www.allinmd.cn",pluploadEach:function(n){if(t.uploadStatrus){var s='<li class="imagesUploadBtn ev-uploadVideoLi ev-video" data-upload="true"><img src="" class="ev-uploadVideoPath"><div class="imgPopup" style="display: none">  <p class="uploadPending" style="display: none"><i></i><span></span></p>  <p class="uploadFail" style="display: none">上传失败<br/><span>点击重试</span></p></div>'+t.remarksHtml+'<span class="deleteImg ev-imgDel" style="display: none"></span></li>';e(a).parents(".ev-uploadConier").find(".ev-uploadVideoList .ev-addVideo").before(s);var i=e(a).parents(".ev-uploadConier").find(".ev-uploadVideoList li");n.context=i.eq(i.length-2),t.uploadInfo.uploadVideoStatus=!1,t.uploadVideoStatus=!1}},beforeUpload:function(s){t.uploadStatrus=!0;var i=t.getName(s.name),o=i.fileName,r=i.suffixName;if(!/(mp4)|(mov)|(avi)|(wmv)|(flv)$/i.test(r))return t.uplaodErrorTip("格式不支持，请选择mov、mp4、avi、wmv、flv"),n.uploader.removeFile(n.uploader.getFile(s.id)),t.uploadStatrus=!1,!1;t.closeLayer(),e(a).parents(".ev-uploadConier").find(".ev-uploadVideoList .ev-addVideo").hide(),a.data("videoName",o.length>15?o.substring(0,15)+"...."+r:o+"."+r)},uploadProgress:function(a){var n=a.context;t.context=n,e(".imgPopup, .uploadPending",n).show(),e(".uploadPending span",n).text(a.percent+"%"),100==a.percent&&e(".uploadPending,.imgPopup",n).remove()},fileUploaded:function(n,s){var i=s.context;i.attr("key",n.key),e(".ev-uploadVideoPath",i).attr("src","//img10.allinmd.cn/default/qiniu196_196.jpg"),e(i).parents(".ev-uploadConier").find(".ev-uploadVideoList .ev-addVideo").show(),i.find(".ev-imgDel").show(),t.saveVideo({videoName:a.data("videoName"),key:n.key,persistentId:n.persistentId,sortId:t.sortIdVideo,domLi:i,imgSrc:"//img10.allinmd.cn/default/qiniu196_196.jpg"}),t.sortIdVideo++},fileUploadError:function(a){t.uplaodErrorTip("视频上传失败"),t.context&&t.uploadInfo.videoErrLength++,e(".uploadPending,.imgPopup .uploadPending",t.context).remove(),e(t.context).attr("isError",1),e(t.context).find(".ev-imgDel,.uploadFail").show(),e(t.context).parents(".ev-uploadConier").find(".ev-uploadVideoList .ev-addVideo").show(),t.uploadInfo.uploadVideoStatus=!0,t.uploadVideoStatus=!0}})})},uplaodErrorTip:function(e){var t=this;t.isUplaodError=!0,t.uploadErrorText=e,setTimeout(function(){t.isUplaodError=!1},3e3)},getName:function(e){var t=e,a=t.lastIndexOf("/"),n=t.lastIndexOf("\\"),s=Math.max(a,n),i=t.lastIndexOf(".");return{fileName:t.substring(s+1,i),suffixName:t.substring(i+1,t.length)}},localURL:function(e){var t=null;return void 0!=window.createObjectURL?t=window.createObjectURL(e):void 0!=window.URL?t=window.URL.createObjectURL(e):void 0!=window.webkitURL&&(t=window.webkitURL.createObjectURL(e)),t},getCaseNode:function(){var e=this;e.isLoading=!0,e.layerList=[],l.a.ajax2({url:d,type:"GET",data:{paramJson:s()({customerId:e.userId,isValid:1,firstResult:0,maxResult:999,sortType:1})},timeout:3e4,success:function(t){e.isLoading=!1,t&&t.responseObject&&t.responseObject.responseData&&t.responseObject.responseData.data_list&&(e.layerList=t.responseObject.responseData.data_list)}})},getCaseSecond:function(e){var t=this;t.isLoading=!0,t.layerImgList=[],l.a.ajax2({url:c,type:"GET",data:{paramJson:s()({customerId:t.userId,isValid:1,noteId:e,visitSiteId:1,attUseFlag:5,firstResult:0,maxResult:999})},timeout:3e4,success:function(e){if(t.isLoading=!1,e&&e.responseObject&&e.responseObject.responseData&&e.responseObject.responseData.data_list)for(var a=e.responseObject.responseData.data_list,n=0;n<a.length;n++)(1==a[n].attType&&"img"==t.addFileType&&a[n].attUrl||2==a[n].attType&&"video"==t.addFileType&&a[n].attUrl)&&t.layerImgList.push(a[n])}})},saveVideo:function(t){var a=this;l.a.ajax2({url:m,type:"post",data:{paramJson:s()({videoName:t.videoName,key:t.key,persistentId:t.persistentId,refType:12,sortId:t.sortId,caseId:a.uploadColumn.caseId,groupId:a.uploadColumn.groupId,structureId:a.uploadColumn.structureId,detailId:a.uploadColumn.detailId,visitSiteId:1,isValid:0})},timeout:3e4,success:function(n){if(a.uploadInfo.uploadVideoStatus=!0,a.uploadVideoStatus=!0,n&&n.responseObject&&n.responseObject.responsePk){var s=n.responseObject.responsePk;e(t.domLi).attr("data-id",s),a.uploadInfo.validVideo.push({id:s,imgSrc:t.imgSrc,videoPath:"",index:t.sortId+a.uploadColumn.VideoList.length}),a.initRemark()}}})}},updated:function(){this.initRemark()},mounted:function(){var t=this;e("body").on("mousedown",function(a){var n=e(a.target);n.hasClass("remarkMask")||n.hasClass("remarkMaskIcon")||n.hasClass("remarkMaskTitle")||n.hasClass("remarkMaskEditPanel")||n.hasClass("editRemark")||n.hasClass("recordPanel")||e(".remarkMask").each(function(){var a=e(this),n=a.find(".remarkMaskEditPanel").attr("remarkValue"),s=t.checkInvalid(n);a.removeClass("remarkMaskOnEdit"),s||(a.addClass("remarkMaskReady"),a.find(".recordPanel").html(n))})}),t.initRemark()}}}).call(this,a(6))},function(e,t,a){},,function(e,t,a){"use strict";var n=a(26),s=a(19),i=a(20),o={props:{navName:{type:String,default:""},crumbsTxt:{type:String,default:""},pageType:{type:Number,default:2},saveStatus:{type:Number,default:0}},components:{Logo:n.a,UserLogo:i.a,SearchInput:s.a},watch:{},methods:{saveCaseInfo:function(){this.$emit("quitSaveCaseInfo")}},mounted:function(){}},r=(a(99),a(1)),l=Object(r.a)(o,function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("section",{staticClass:"headerTopNav"},[a("logo"),e._v(" "),a("aside",{staticClass:"crumbs"},[a("span",[e._v(e._s(e.crumbsTxt))]),e._v(" "),a("i",{directives:[{name:"show",rawName:"v-show",value:1==e.pageType,expression:"pageType==1"}]}),e._v(" "),a("span",[e._v(e._s(e.navName))])]),e._v(" "),a("aside",{directives:[{name:"show",rawName:"v-show",value:1==e.pageType,expression:"pageType==1"}],staticClass:"saveBtn"},[a("span",{directives:[{name:"show",rawName:"v-show",value:0==e.saveStatus,expression:"saveStatus==0"}],on:{click:e.saveCaseInfo}},[e._v("保存并退出")]),e._v(" "),a("ul",{directives:[{name:"show",rawName:"v-show",value:1==e.saveStatus,expression:"saveStatus==1"}]},[a("li"),a("li"),a("li")]),e._v(" "),a("i",{directives:[{name:"show",rawName:"v-show",value:2==e.saveStatus,expression:"saveStatus==2"}]})]),e._v(" "),a("section",{directives:[{name:"show",rawName:"v-show",value:2==e.pageType,expression:"pageType==2"}],staticClass:"alEmr-headerContainer"},[a("section",{staticClass:"alEmr-headerInner"},[a("SearchInput"),e._v(" "),a("UserLogo")],1)])],1)},[],!1,null,"6ba4477e",null);t.a=l.exports},,,function(e,t,a){"use strict";var n=a(22);a.n(n).a},,function(e,t,a){"use strict";var n=a(23);a.n(n).a},,function(e,t,a){"use strict";var n=a(24);a.n(n).a},,,,,,,,,,,,,,,,,function(e,t,a){"use strict";var n=a(31);a.n(n).a},,,,,,,,,,,function(e,t,a){"use strict";var n=a(72).a,s=(a(193),a(1)),i=Object(s.a)(n,function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("section",{staticClass:"uploadConier ev-uploadConier"},[a("div",{staticClass:"uploadColumnCont"},[a("div",{staticClass:"formSelect formCommon"},[a("p",{staticClass:"articleText"},[e._v(e._s(e.uploadColumn.menuName))]),e._v(" "),a("ul",{staticClass:"uploadColumn uploadImg ev-uploadImgList",on:{click:function(t){return t.stopPropagation(),e.viewBigImg(t)}}},[e._l(e.uploadColumn.ImgList,function(t,n){return a("li",{staticClass:"ev-bigImg",attrs:{listId:Date.parse(new Date)+n,"data-id":t.id}},[a("img",{attrs:{src:t.imgSrc}}),e._v(" "),a("span",{staticClass:"deleteImg"}),e._v(" "),a("div",{ref:"remarkMaskItem",refInFor:!0,staticClass:"remarkMask",class:{remarkMaskReady:!e.checkInvalid(t.remarks)}},[a("i",{staticClass:"remarkMaskIcon"}),e._v(" "),a("article",{staticClass:"remarkMaskTitle"},[e._v("添加备注")]),e._v(" "),a("div",{staticClass:"remarkMaskEditPanel",attrs:{remarkValue:t.remarks}},[a("textarea",{staticClass:"editRemark",attrs:{name:"editRemark",cols:"30",rows:"2"},domProps:{value:t.remarks}}),e._v(" "),a("div",{staticClass:"recordPanel",domProps:{textContent:e._s(t.remarks)}})])])])}),e._v(" "),a("li",{staticClass:"ev-addImg",on:{click:function(t){e.addFile("img")}}},[a("i"),a("p",[e._v("添加图片")])])],2)]),e._v(" "),a("div",{staticClass:"formSelect formCommon formVideo"},[a("p",{staticClass:"articleText"}),e._v(" "),a("ul",{staticClass:"uploadColumn uploadVideo ev-uploadVideoList",on:{click:e.maskVideo}},[e._l(e.uploadColumn.VideoList,function(t,n){return a("li",{staticClass:"ev-video",attrs:{"data-path":t.videoPath,"data-id":t.id}},[a("img",{attrs:{src:t.imgSrc}}),e._v(" "),t.videoPath&&-1==t.imgSrc.indexOf("/default/qiniu196_196.jpg")?a("span",{staticClass:"videoBtn"}):e._e(),e._v(" "),a("span",{staticClass:"deleteImg"}),e._v(" "),a("div",{ref:"remarkMaskItem",refInFor:!0,staticClass:"remarkMask",class:{remarkMaskReady:!e.checkInvalid(t.remarks)}},[a("i",{staticClass:"remarkMaskIcon"}),e._v(" "),a("article",{staticClass:"remarkMaskTitle"},[e._v("添加备注")]),e._v(" "),a("div",{staticClass:"remarkMaskEditPanel",attrs:{remarkValue:t.remarks}},[a("textarea",{staticClass:"editRemark",attrs:{name:"editRemark",cols:"30",rows:"2"},domProps:{value:t.remarks}}),e._v(" "),a("div",{staticClass:"recordPanel",domProps:{textContent:e._s(t.remarks)}})])])])}),e._v(" "),a("li",{staticClass:"ev-addVideo",on:{click:function(t){e.addFile("video")}}},[a("i"),a("p",[e._v("添加视频")])])],2),e._v(" "),a("videoPlayer",{attrs:{path:e.videoPath,beginPlay:e.beginPlay},on:{beginFn:e.beginFn}})],1),e._v(" "),a("div",{staticClass:"formSelect formCommon fromMars"},[a("p",{staticClass:"articleText"},[e._v("备注")]),e._v(" "),a("div",{staticClass:"textarea"},[a("textarea",{directives:[{name:"model",rawName:"v-model",value:e.textModel,expression:"textModel"}],domProps:{value:e.textModel},on:{input:function(t){t.target.composing||(e.textModel=t.target.value)}}}),a("i",[e._v(e._s(e.uploadColumn.textAreaLimt-e.textModel.length))])])])]),e._v(" "),e.isLayer?a("div",{staticClass:"uploadCloud"},[a("div",{staticClass:"uploadLayers"}),e._v(" "),a("div",{staticClass:"layersContent"},[a("div",{staticClass:"layersTitle"},[a("h4",{staticClass:"firstTitle",on:{click:e.backFirst}},[e._v("云资料库")]),e._v(" "),e.isFirst?e._e():a("h4",{staticClass:"secontMenu"},[a("i"),e._v(e._s(e.layerTitle))]),e._v(" "),a("span",{on:{click:e.closeLayer}})]),e._v(" "),a("section",{staticClass:"listContainer"},[e.isFirst?a("ul",{staticClass:"layerList",class:{noFileList:!e.layerList.length&&!e.isLoading}},[e._l(e.layerList,function(t,n){return a("li",{on:{click:function(a){e.openFile(t)}}},[a("img",{attrs:{src:"/static/images/pages/uploadColumn/file.png"}}),a("p",{domProps:{textContent:e._s(e.getStrLen(t.noteName,18))}})])}),e._v(" "),e.layerList.length||e.isLoading?e._e():a("div",{staticClass:"noFile"},[e._m(0),e._v(" "),a("p",[e._v("暂无文件")])])],2):a("ul",{staticClass:"imgList",class:{noImgList:!e.layerImgList.length&&!e.isLoading}},[e._l(e.layerImgList,function(t,n){return a("li",{class:{active:-1!=e.isImgSelect.indexOf(n)},on:{click:function(a){e.selecImg(n,t)}}},[a("img",{attrs:{src:"video"==e.addFileType?t.videoPicAttUrl:t.attUrl}}),e._v(" "),"video"==e.addFileType?a("span",{staticClass:"videoBtn"}):e._e(),e._v(" "),a("i")])}),e._v(" "),e.layerImgList.length||e.isLoading?e._e():a("div",{staticClass:"noImg"},[e._m(1),e._v(" "),a("p",[e._v("暂无资料")])])],2),e._v(" "),a("div",{staticClass:"noContent"})]),e._v(" "),a("div",{staticClass:"layerFooter",class:{layerSet:!e.isFirst}},[a("div",{class:{"ev-uploadImgBtn seletImg":"img"==e.addFileType}},[a("button",{directives:[{name:"show",rawName:"v-show",value:e.isFirst,expression:"isFirst"}],staticClass:"selecFile",class:{"ev-uploadVideoBtn":"video"==e.addFileType},attrs:{id:"video"==e.addFileType?"ev-uploadVideoBtn":""}},[e._v("选择本地文件")])]),e._v(" "),e.isFirst?e._e():a("button",{staticClass:"selecSure",class:{noImgList:!e.layerImgList.length},on:{click:e.selectSure}},[e._v("确定"+e._s(e.isImgSelect.length?"("+e.isImgSelect.length+")":""))])])])]):e._e(),e._v(" "),e.isUplaodError?a("section",{staticClass:"uploadCaseError"},[a("i"),a("span",[e._v(e._s(e.uploadErrorText))])]):e._e(),e._v(" "),e.isLoading?a("loading"):e._e()],1)},[function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"imgCont"},[t("img",{attrs:{src:"/static/images/pages/uploadColumn/empty_file.png"}})])},function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"imgCont"},[t("img",{attrs:{src:"/static/images/pages/uploadColumn/empty_information.png"}})])}],!1,null,null,null);t.a=i.exports},function(e,t,a){"use strict";var n={props:["text","showToast"],computed:{toastStatus:function(){return!!this.showToast&&this.showToast}}},s=(a(195),a(1)),i=Object(s.a)(n,function(){var e=this.$createElement,t=this._self._c||e;return t("section",{directives:[{name:"show",rawName:"v-show",value:this.toastStatus,expression:"toastStatus"}],staticClass:"alemr-toastTip"},[t("i"),t("span",[this._v(this._s(this.text))])])},[],!1,null,null,null);t.a=i.exports},,function(e,t,a){"use strict";var n=a(11),s=a.n(n),i=a(21),o=a.n(i),r=a(2),l=a.n(r),d=a(75),c=a(33),u=a(46),p=a(12),m={name:"form-radio",props:["data"],data:function(){return{scope:this.data.caseFolderTemplateScope}}},h=(a(191),a(1)),g=Object(h.a)(m,function(){var e=this,t=e.$createElement,a=e._self._c||t;return parseInt(e.data.caseFolderTemplate.isValid)?a("div",{staticClass:"formRadio formCommon"},[a("p",{staticClass:"articleText"},[e.data.isRequire?a("i",[e._v("*")]):e._e(),e._v(e._s(e.data.caseFolderTemplate.structureName))]),e._v(" "),a("div",{staticClass:"radiocontainer",class:{radioListcon:2==e.data.commDataField.fieldType||e.data.caseFolderTemplateScope&&e.data.caseFolderTemplateScope.length>2}},e._l(e.data.caseFolderTemplateScope,function(t,n){return a("div",{staticClass:"radioIconNormal",class:{radioList:2==e.data.commDataField.fieldType||e.data.caseFolderTemplateScope&&e.data.caseFolderTemplateScope.length>2}},[a("i"),e._v(" "),a("span",[e._v(e._s(t.dictionaryName))]),e._v(" "),"其他"==t.dictionaryName&&2==e.data.commDataField.fieldType?a("input",{staticClass:"otherTag",attrs:{placeholder:"请输入",type:"text",readonly:"readonly"}}):e._e()])}))]):e._e()},[],!1,null,"09b8da76",null).exports,f={name:"form-check",props:["data"]},I=(a(189),{name:"form-select",props:["data"],data:function(){return{}},components:{formRadio:g,formCheck:Object(h.a)(f,function(){var e=this,t=e.$createElement,a=e._self._c||t;return parseInt(e.data.caseFolderTemplate.isValid)?a("div",{staticClass:"formRadio formCommon formCheck"},[a("p",{staticClass:"articleText"},[e._v(e._s(e.data.caseFolderTemplate.structureName))]),e._v(" "),a("div",{staticClass:"radioRight"},e._l(e.data.caseFolderTemplateScope,function(t,n){return a("div",{staticClass:"radioIconNormal"},[a("i"),e._v(" "),a("span",[e._v(e._s(t.dictionaryName))]),e._v(" "),"其他"==t.dictionaryName&&4==e.data.commDataField.fieldType?a("input",{staticClass:"otherTag",attrs:{type:"text",placeholder:"请输入",readonly:"readonly"}}):e._e()])}))]):e._e()},[],!1,null,"392c5a36",null).exports}}),v=(a(187),Object(h.a)(I,function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("section",[0!=parseInt(e.data.caseFolderTemplate.isBothSides)&&e.data.caseFolderTemplate.isBothSides.length?a("div",[a("div",{staticClass:"formSelect formCommon"},[1==e.data.caseFolderTemplate.sideType?a("p",{staticClass:"articleText"},[e._v(e._s(e.data.caseFolderTemplate.structureName))]):e._e(),e._v(" "),a("div",{staticClass:"selectConiner"},[a("p",{staticClass:"selectP",domProps:{textContent:e._s(1==e.data.caseFolderTemplate.sideType?"L":"R")}}),e._v(" "),a("div",{staticClass:"selectCont selectInline"},[a("span",{domProps:{textContent:e._s("请选择")}})])])])]):a("div",[e.data.caseFolderTemplateScope&&e.data.caseFolderTemplateScope.length>6&&parseInt(e.data.caseFolderTemplate.isValid)?a("div",{staticClass:"formSelect formCommon"},[a("p",{staticClass:"articleText"},[e._v(e._s(e.data.caseFolderTemplate.structureName))]),e._v(" "),a("div",{staticClass:"selectCont"},[a("span",{domProps:{textContent:e._s("请选择")}})])]):a("div",[1==e.data.commDataField.fieldType||2==e.data.commDataField.fieldType?a("form-radio",{attrs:{data:e.data}}):a("form-check",{attrs:{data:e.data}})],1)])])},[],!1,null,"327766fc",null).exports),C={props:["data"],name:"form-input-age"},b=(a(185),Object(h.a)(C,function(){var e=this,t=e.$createElement,a=e._self._c||t;return parseInt(e.data.caseFolderTemplate.isValid)?a("div",{staticClass:"formInputAge formCommon"},[a("p",{staticClass:"articleText"},[e.data.isRequire?a("i",[e._v("*")]):e._e(),e._v(e._s(e.data.caseFolderTemplate.structureName))]),e._v(" "),e._m(0)]):e._e()},[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"ageInput"},[a("input",{staticClass:"inputText",attrs:{type:"text",readonly:"readonly"}}),e._v(" "),a("span",[e._v("岁")]),e._v(" "),a("input",{staticClass:"inputText",attrs:{type:"text",readonly:"readonly"}}),e._v(" "),a("span",[e._v("月")]),e._v(" "),a("input",{staticClass:"inputText",attrs:{type:"text",readonly:"readonly"}}),e._v(" "),a("span",[e._v("天")])])}],!1,null,null,null).exports),y={name:"surgery-cure",props:["data"],data:function(){return{dataYear:"",dataMonth:"",dataDay:""}},methods:{getNowDate:function(){var e=new Date,t=e.getFullYear(),a=e.getMonth()+1,n=e.getDate();this.dataYear=t,a<10&&(a="0"+a),this.dataMonth=a,n<10&&(n="0"+n),this.dataDay=n}},mounted:function(){this.getNowDate()}},x=(a(183),Object(h.a)(y,function(){var e=this,t=e.$createElement,a=e._self._c||t;return parseInt(e.data.caseFolderTemplate.isValid)?a("aside",{staticClass:"surgeryCure"},[a("div",{staticClass:"formSelectS formCommon"},[a("div",{staticClass:"articleText"},[e._v(e._s(e.data.caseFolderTemplate.structureName))]),e._v(" "),a("div",{staticClass:"cont"},[a("div",{staticClass:"selectCont"},[a("span",[e._v(e._s(e.dataYear))])]),e._v(" "),a("b",[e._v("年")]),e._v(" "),a("div",{staticClass:"selectCont width83"},[a("span",[e._v(e._s(e.dataMonth))])]),e._v(" "),a("b",[e._v("月")]),e._v(" "),a("div",{staticClass:"selectCont width83"},[a("span",[e._v(e._s(e.dataDay))])]),e._v(" "),a("b",[e._v("日")])])])]):e._e()},[],!1,null,"6ff3d171",null).exports),S={name:"form-select-time",props:["data"]},T=(a(181),Object(h.a)(S,function(){var e=this.$createElement,t=this._self._c||e;return parseInt(this.data.caseFolderTemplate.isValid)?t("div",{staticClass:"formSelect formCommon"},[t("p",{staticClass:"articleText"},[this._v(this._s(this.data.caseFolderTemplate.structureName))]),this._v(" "),this._m(0)]):this._e()},[function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"inputSelect"},[t("input",{attrs:{type:"text"}}),this._v(" "),t("div",{staticClass:"SelectCont"},[t("span",[this._v("月")])])])}],!1,null,"83f489fa",null).exports),D={name:"now-medical",props:["data"]},_=(a(179),{name:"form-input",props:["data"],data:function(){return{thresholdValue:this.data.commDataThreshold.thresholdValue}},components:{nowMedical:Object(h.a)(D,function(){var e=this.$createElement,t=this._self._c||e;return parseInt(this.data.caseFolderTemplate.isValid)?t("aside",{staticClass:"nowMedical caseWidth814"},[t("h2",{staticClass:"medicalTitle"},[this._v(this._s(this.data.caseFolderTemplate.structureName))]),this._v(" "),this._m(0)]):this._e()},[function(){var e=this.$createElement,t=this._self._c||e;return t("aside",{staticClass:"caseHistoryMsg"},[t("div",{staticClass:"textarea"},[t("textarea",{attrs:{readonly:"readonly",placeholder:"请输入"}})])])}],!1,null,"47d5af86",null).exports}}),O=(a(177),Object(h.a)(_,function(){var e=this,t=e.$createElement,a=e._self._c||t;return 0!=parseInt(e.data.caseFolderTemplate.isBothSides)&&e.data.caseFolderTemplate.isBothSides.length?a("div",[parseInt(e.data.caseFolderTemplate.isValid)?a("section",[a("div",{staticClass:"formInput formCommon"},[1==e.data.caseFolderTemplate.sideType?a("p",{staticClass:"articleText"},[e._v(e._s(e.data.caseFolderTemplate.structureName))]):e._e(),e._v(" "),a("div",{staticClass:"shortContainer"},[a("p",{staticClass:"selectP",domProps:{textContent:e._s(1==e.data.caseFolderTemplate.sideType?"L":"R")}}),e._v(" "),e._m(0)])])]):e._e()]):a("div",[parseInt(e.data.caseFolderTemplate.isValid)?a("section",[e.data.commDataThreshold.thresholdValue&&e.data.commDataThreshold.thresholdValue.split(",")[1]<=50?a("div",{staticClass:"formInput formCommon"},[a("p",{staticClass:"articleText"},[e.data.isRequire?a("i",[e._v("*")]):e._e(),e._v(e._s(e.data.caseFolderTemplate.structureName))]),e._v(" "),a("div",{staticClass:"inputCont",class:{shortInput:e.data.commDataThreshold.thresholdValue&&e.data.commDataThreshold.thresholdValue.split(",")[1]<=20}},[a("input",{attrs:{type:"text",placeholder:"请输入",readonly:"readonly"}})])]):a("now-medical",{attrs:{data:e.data}})],1):e._e()])},[function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"inputCont shortInput"},[t("input",{attrs:{type:"text",placeholder:"请输入",readonly:"readonly"}})])}],!1,null,"d6ec6846",null).exports),L={name:"form-number",props:["data"],data:function(){return{}}},k=(a(175),Object(h.a)(L,function(){var e=this,t=e.$createElement,a=e._self._c||t;return 0!=parseInt(e.data.caseFolderTemplate.isBothSides)&&e.data.caseFolderTemplate.isBothSides.length?a("div",[parseInt(e.data.caseFolderTemplate.isValid)?a("div",{staticClass:"formNumber formCommon"},[1==e.data.caseFolderTemplate.sideType?a("p",{staticClass:"articleText"},[e._v(e._s(e.data.caseFolderTemplate.structureName))]):e._e(),e._v(" "),e.data.caseFolderTemplateScope&&e.data.caseFolderTemplateScope.length>0?a("div",{staticClass:"selectCont"},[a("span",[e._v("身份证")]),e._v(" "),a("ul",{directives:[{name:"show",rawName:"v-show",value:!1,expression:"false"}],staticClass:"selectOption"})]):e._e(),e._v(" "),a("div",{staticClass:"inputConiner"},[a("p",{staticClass:"selectP",domProps:{textContent:e._s(1==e.data.caseFolderTemplate.sideType?"L":"R")}}),e._v(" "),a("input",{staticClass:"inputCont",class:{inputNumber:e.data.commDataThreshold&&e.data.commDataThreshold.thresholdUnit},attrs:{type:"text",placeholder:e.data.commDataThreshold&&e.data.commDataThreshold.thresholdUnit?"":"请输入",readonly:"readonly"}}),e._v(" "),e.data.commDataThreshold&&e.data.commDataThreshold.thresholdUnit?a("span",{staticClass:"thresholdUnit"},[e._v(e._s(e.data.commDataThreshold&&e.data.commDataThreshold.thresholdUnit))]):e._e()])]):e._e()]):a("div",[parseInt(e.data.caseFolderTemplate.isValid)?a("div",{staticClass:"formNumber formCommon"},[a("p",{staticClass:"articleText"},[e._v(e._s(e.data.caseFolderTemplate.structureName))]),e._v(" "),e.data.caseFolderTemplateScope&&e.data.caseFolderTemplateScope.length>0?a("div",{staticClass:"selectCont"},[a("span",[e._v("身份证")]),e._v(" "),a("ul",{directives:[{name:"show",rawName:"v-show",value:!1,expression:"false"}],staticClass:"selectOption"})]):e._e(),e._v(" "),a("input",{staticClass:"inputCont",class:{inputNumber:e.data.commDataThreshold&&e.data.commDataThreshold.thresholdUnit},attrs:{type:"text",placeholder:e.data.commDataThreshold&&e.data.commDataThreshold.thresholdUnit?"":"请输入",readonly:"readonly"}}),e._v(" "),e.data.commDataThreshold&&e.data.commDataThreshold.thresholdUnit?a("span",{staticClass:"thresholdUnit"},[e._v(e._s(e.data.commDataThreshold&&e.data.commDataThreshold.thresholdUnit))]):e._e()]):e._e()])},[],!1,null,"49dc0196",null).exports),w={props:["data"]},N=(a(173),Object(h.a)(w,function(){var e=this,t=e.$createElement,a=e._self._c||t;return parseInt(e.data.caseFolderTemplate.isValid)?a("section",{staticClass:"alEmr-surgeryIndex"},[a("aside",{staticClass:"surgeryInfluence caseWidth1000"},[a("div",{staticClass:"uploadColumnCont"},[a("div",{staticClass:"formSelect formCommon"},[a("p",{staticClass:"articleText"},[e._v(e._s(e.data.caseFolderTemplate.structureName))]),e._v(" "),e._m(0)]),e._v(" "),e._m(1),e._v(" "),e._m(2)])])]):e._e()},[function(){var e=this.$createElement,t=this._self._c||e;return t("ul",{staticClass:"uploadColumn uploadImg"},[t("li",[t("i"),t("p",[this._v("添加图片")])])])},function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"formSelect formCommon"},[t("p",{staticClass:"articleText"}),this._v(" "),t("ul",{staticClass:"uploadColumn uploadVideo"},[t("li",[t("i"),t("p",[this._v("添加视频")])])])])},function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"formSelect formCommon"},[t("p",{staticClass:"articleText mideoText"},[this._v("备注")]),this._v(" "),t("div",{staticClass:"textarea"},[t("textarea",{attrs:{readonly:"readonly",placeholder:"请输入"}}),t("i")])])}],!1,null,null,null).exports),P=a(0),R={name:"form-tag",props:["olderTag"],data:function(){return{tagList:[],olderList:[],userId:localStorage.getItem("userId")||"1463461611339"}},methods:{searchTagList:function(){var e=this;P.a.ajax2({url:"/call/comm/tag/searchTagList/",type:"GET",data:{paramJson:l()({customerId:e.userId,tagType:1})},timeout:3e4,success:function(t){t&&t.responseObject&&t.responseObject.responseData&&t.responseObject.responseData.sysTagList&&(e.tagList=t.responseObject.responseData.sysTagList,e.olderList=e.tagList,e.$emit("olderTag",e.olderList))}})}},mounted:function(){var e=o()(s.a.mark(function e(){return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:0==this.olderTag.length?this.searchTagList():this.tagList=this.olderTag;case 1:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},j=(a(171),Object(h.a)(R,function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"formTag"},[a("p",{staticClass:"articleText articleTextTag",class:{articleTag:e.tagList.length>0}},[e._v("标签")]),e._v(" "),a("div",{staticClass:"tagCont"},[a("ul",e._l(e.tagList,function(t,n){return a("li",{key:n},[e._v(e._s(t.tagName))])})),e._v(" "),a("div",{staticClass:"tagInput"},[a("div",{staticClass:"tagInputCont"},[a("input",{attrs:{type:"text",placeholder:"输入新标签",readonly:"readonly"}}),a("i",{domProps:{textContent:e._s(10)}})]),e._v(" "),a("p",[e._v("添加")])])])])},[],!1,null,"528b6b4c",null).exports),B="/call/caseFolder/template/getMapList/",F="/call/customer/suggestion/create/",H="/call/caseFolder/template_structure/getTemplateDataList/",E={props:["typeNameCase","crumbsText"],data:function(){return{topics:[],majorName:[],libDateList:[],majorClass:["orderMajor"," jointMajor","spineMajor"],indexActive:0,isCallModule:!1,textVal:"",inputVal:"",isThickness:!1,ismainHide:!1,thickLeftIndex:0,thickLeft:[],thickTitle:"",thickRight:[],submitSuccess:!1,isBtnSubmit:!1,isSelectActive:!1,isSelectIndex:0,isItemIndex:0,userId:P.a.cookie.get("userId")||"",isLoading:!1,templateId:"",locationData:{},setTime:"",olderTagList:[]}},components:{headerTopNav:d.a,NavSideBar:c.a,TopHeader:u.a,formSelect:v,formInputAge:b,surgeryCure:x,formSelectTime:T,formInput:O,formNumber:k,formTag:j,beforeSurgeryView:N,loading:p.a},watch:{textVal:function(){this.textVal.length>500&&(this.textVal=this.textVal.substr(0,500)),this.textVal?this.isBtnSubmit=!0:this.isBtnSubmit=!1}},methods:{styleType:function(e){if(2==e.caseFolderTemplate.sideType&&9==e.commDataField.fieldType&&e.commDataThreshold.thresholdUnit&&P.a.getByteLen(e.commDataThreshold.thresholdUnit)>8)return{display:"block","margin-left":"184px"}},olderTag:function(e){this.olderTagList=e},currentView:function(e){var t="";switch(parseInt(e.commDataField&&e.commDataField.fieldType,10)){case 1:case 2:case 3:case 4:t="formSelect";break;case 5:t="formInputAge";break;case 6:t="surgeryCure";break;case 7:t="formSelectTime";break;case 8:t="formInput";break;case 9:t="formNumber";break;case 10:t="beforeSurgeryView";break;case 11111:t="formTag"}return t},baseInfoBack:function(){this.$router&&(P.a.browser.isIe9()||P.a.browser.isIe8()||history.replaceState(null,null,window.location.href+"hello"),this.$router.push({path:"baseInfo"}))},templateTitle:function(e){return P.a.getStrLen(e,45)},ajaxMajor:function(){var e=this;e.isLoading=!0,P.a.ajax2({url:B,type:"GET",data:{paramJson:l()({customerId:e.userId})},timeout:3e4,success:function(t){e.isLoading=!1,t&&t.responseObject&&t.responseObject.responseData&&t.responseObject.responseData.data_list&&(e.libDateList=[{typeName:"全部"}],e.libDateList=e.libDateList.concat(t.responseObject.responseData.data_list))}})},majorList:function(e){this.indexActive=e},majorColor:function(e){return 0==e?"allMajor":e%3==0?this.majorClass[2]:this.majorClass[e%3-1]},callModule:function(){this.isCallModule?this.closeCall():(this.isCallModule=!0,this.isSelectActive=!1)},btnCancel:function(){this.isCallModule=!1,this.textVal="",this.inputVal="",this.isCallModule=!1,this.submitSuccess=!1,this.setTime&&clearTimeout(this.setTime)},btnSubmit:function(){if(this.isBtnSubmit){this.ajaxCallBtn(this.textVal+"&"+this.inputVal),this.textVal="",this.inputVal="",this.submitSuccess=!0;var e=this;this.setTime=setTimeout(function(){e.isCallModule=!1,e.submitSuccess=!1},3e3)}},ajaxCallBtn:function(e){var t=this;t.isLoading=!0,P.a.ajax2({url:F,type:"post",data:{paramJson:l()({customerId:t.userId,visitSiteId:"1",suggestion:e,suggestionType:11})},timeout:3e4,success:function(e){t.isLoading=!1}})},closeCall:function(){this.btnCancel(),this.typeNameCase&&(this.isSelectActive=!1)},modelItem:function(e,t,a){this.thickTitle=e.templateTitle||e,this.typeNameCase?(this.isSelectActive=!0,this.isSelectIndex=t,this.isItemIndex=a,this.btnCancel(),this.templateId=e.templateId):this.leftMenu(e.templateId)},leftMenu:function(e){if(this.typeNameCase&&!this.isSelectActive)return!1;var t=this;t.isThickness=!0,t.ismainHide=!0,t.isLoading=!0,P.a.ajax2({url:H,type:"GET",data:{paramJson:l()({templateId:e,visitSiteId:"1"})},timeout:3e4,success:function(e){t.isLoading=!1,t.thickLeft=[{caseFolderTemplate:{structureName:"基本信息"}}],e&&e.responseObject&&e.responseObject.responseData&&e.responseObject.responseData.data_list&&(t.thickLeft=t.thickLeft.concat(e.responseObject.responseData.data_list[0])),t.baseInfoMenu()}})},baseInfoMenu:function(){this.thickRight=[{caseFolderTemplate:{structureName:"姓名",isValid:1,isBothSides:0},commDataField:{fieldType:"8"},commDataThreshold:{thresholdValue:"0,20"},isRequire:1},{caseFolderTemplate:{structureName:"性别",isValid:1,isBothSides:0},caseFolderTemplateScope:[{dictionaryName:"男"},{dictionaryName:"女"}],commDataField:{fieldType:"1"},isRequire:1},{caseFolderTemplate:{structureName:"年龄",isValid:1,isBothSides:0},commDataField:{fieldType:"5"},isRequire:1},{caseFolderTemplate:{structureName:"电话",isValid:1,isBothSides:0},commDataField:{fieldType:"9"},caseFolderTemplateScope:[],commDataThreshold:{thresholdValue:"0,50"}},{caseFolderTemplate:{structureName:"编号",isValid:1,isBothSides:0},commDataField:{fieldType:"9"},caseFolderTemplateScope:[{value:""}]},{caseFolderTemplate:{structureName:"归属",isValid:1,isBothSides:0},commDataField:{fieldType:"1"},caseFolderTemplateScope:[{dictionaryName:"共享给团队"},{dictionaryName:"仅自己可见"}]},{caseFolderTemplate:{structureName:"标签",isValid:1,isBothSides:0},commDataField:{fieldType:"11111"}}]},rightMenu:function(e,t){var a=this;a.isLoading=!0,P.a.ajax2({url:H,type:"GET",data:{paramJson:l()({templateId:e.caseFolderTemplate.templateId,parentId:e.caseFolderTemplate.structureId,visitSiteId:1})},timeout:3e4,success:function(e){a.isLoading=!1,e&&e.responseObject&&e.responseObject.responseData&&e.responseObject.responseData.data_list?a.thickRight=e.responseObject.responseData.data_list[0]:a.thickRight=[],a.locationData[t]=a.thickRight}})},selectThick:function(e){this.thickLeftIndex=e,0!=e?this.locationData[e]?this.thickRight=this.locationData[e]:this.rightMenu(this.thickLeft[e],e):this.baseInfoMenu()},closeThick:function(){this.isLoading=!1,this.isThickness=!1,this.ismainHide=!1,this.thickLeftIndex=0,this.locationData={}},useBtn:function(){this.isSelectActive&&(P.a.browser.isIe9()||P.a.browser.isIe8()||history.replaceState(null,null,window.location.href+"hello"),this.$emit("tpUse",this.templateId))}},mounted:function(){var e=o()(s.a.mark(function e(){return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:this.ajaxMajor();case 1:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},M=(a(169),Object(h.a)(E,function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"alEmr-mainInner",class:{mainHide:e.ismainHide,"alEmr-mainCase":e.typeNameCase},on:{click:e.closeCall}},[e.typeNameCase?e._e():a("NavSideBar",{attrs:{sideSetting:{index:2}}}),e._v(" "),e.typeNameCase?e._e():a("TopHeader"),e._v(" "),a("section",{staticClass:"alEmr-mainIndex"},[a("section",{staticClass:"alEmr-innerLeft"},[a("ul",e._l(e.libDateList,function(t,n){return a("li",{class:{active:n==e.indexActive},on:{click:function(t){e.majorList(n)}}},[e._v(e._s(t.typeName))])}))]),e._v(" "),a("section",{staticClass:"alEmr-innerRight"},[e._l(e.libDateList,function(t,n){return e.indexActive==n||0==e.indexActive?a("section",{staticClass:"alEmr-innerAll alEmr-moudel",class:e.majorColor(n)},[0!=n?a("h4",[e._v(e._s(t.typeName))]):e._e(),e._v(" "),e.typeNameCase?a("div",e._l(t.template_list,function(t,s){return 0!=n?a("div",{class:{active:e.isSelectActive&&e.isSelectIndex==s&&e.isItemIndex==n,modelItem:"0"===t.isNew,modelItemNew:"1"===t.isNew},on:{click:function(a){a.stopPropagation(),a.preventDefault(),e.modelItem(t,s,n)}}},[a("span",{staticClass:"modelText"},[e._v(e._s(e.templateTitle(t.templateTitle)))]),a("i")]):e._e()})):a("div",e._l(t.template_list,function(t,s){return 0!=n?a("div",{class:{modelItem:"0"===t.isNew,modelItemNew:"1"===t.isNew},on:{click:function(a){e.modelItem(t)}}},[a("span",{staticClass:"modelText"},[e._v(e._s(e.templateTitle(t.templateTitle)))])]):e._e()}))]):e._e()}),e._v(" "),a("p",{staticClass:"alEmr-innerMore"},[e._v("~更多模板正在准备中，尽请期待~")]),e._v(" "),a("section",{staticClass:"callOur"},[a("section",{staticClass:"callContent",class:{caseCallTop:e.typeNameCase}},[a("span",{staticClass:"callText"},[e._v("没有需要的病历模板？")]),e._v(" "),a("div",{staticClass:"callContainer"},[a("span",{staticClass:"callLink",on:{click:function(t){return t.stopPropagation(),t.preventDefault(),e.callModule(t)}}},[e._v("告诉我们")]),e._v(" "),a("transition",{attrs:{name:"fade"}},[e.isCallModule?a("div",{staticClass:"callModule",on:{click:function(e){e.stopPropagation(),e.preventDefault()}}},[a("span",{staticClass:"closeCall",on:{click:e.btnCancel}}),e._v(" "),e.submitSuccess?a("div",{staticClass:"subSuccess"},[a("div",{staticClass:"subText"},[a("h2",[a("i"),e._v("提交成功")]),e._v(" "),a("p",[e._v("感谢您的宝贵建议，我们会尽快向您反馈处理结果")])])]):a("div",{staticClass:"contentCon"},[a("h4",[e._v("请告诉我们您需要的病历模板")]),e._v(" "),a("div",{staticClass:"textDiv"},[a("textarea",{directives:[{name:"model",rawName:"v-model.trim",value:e.textVal,expression:"textVal",modifiers:{trim:!0}}],attrs:{placeholder:"请简单说明您需要的模板名称、主要内容等"},domProps:{value:e.textVal},on:{input:function(t){t.target.composing||(e.textVal=t.target.value.trim())},blur:function(t){e.$forceUpdate()}}}),e._v(" "),500-e.textVal.length<=20?a("span",[e._v(e._s(500-e.textVal.length))]):e._e()]),e._v(" "),a("h4",[e._v("您的联系方式")]),e._v(" "),a("input",{directives:[{name:"model",rawName:"v-model.trim",value:e.inputVal,expression:"inputVal",modifiers:{trim:!0}}],staticClass:"linkYour",domProps:{value:e.inputVal},on:{input:function(t){t.target.composing||(e.inputVal=t.target.value.trim())},blur:function(t){e.$forceUpdate()}}}),e._v(" "),a("div",{staticClass:"btnModule"},[a("button",{staticClass:"btnSubmit",class:{active:e.isBtnSubmit},on:{click:e.btnSubmit}},[e._v("提交")])])])]):e._e()])],1)]),e._v(" "),e.typeNameCase?a("section",{staticClass:"baseInfoCotainer"},[a("a",{staticClass:"baseInfoBack",attrs:{href:"#"},on:{click:function(t){return t.stopPropagation(),t.preventDefault(),e.baseInfoBack(t)}}},[e._v("返回基本信息")]),e._v(" "),a("div",{staticClass:"btnBase",class:{active:e.isSelectActive},on:{click:function(e){e.stopPropagation(),e.preventDefault()}}},[a("button",{staticClass:"btnReview",on:{click:function(t){e.leftMenu(e.templateId)}}},[e._v("预览")]),e._v(" "),a("button",{staticClass:"BtnUse",on:{click:e.useBtn}},[e._v("使用")])])]):e._e()])],2)]),e._v(" "),e.isThickness?a("section",{staticClass:"alEmr-thickness",on:{click:function(e){e.stopPropagation(),e.preventDefault()}}},[a("section",{staticClass:"thickMaster"}),e._v(" "),a("section",{staticClass:"thickCotainer"},[a("section",{staticClass:"thickTitle"},[a("p",{staticClass:"titleName"},[e._v("模板预览-"+e._s(e.thickTitle))]),e._v(" "),a("p",{staticClass:"titleDesc"},[e._v("可根据需要选择对应的模板"),a("i",{on:{click:e.closeThick}})])]),e._v(" "),a("section",{staticClass:"thickLeft"},[a("ul",e._l(e.thickLeft,function(t,n){return a("li",{class:e.thickLeftIndex==n?"active":"",on:{click:function(t){e.selectThick(n)}}},[e._v(e._s(t.caseFolderTemplate.structureName))])}))]),e._v(" "),a("section",{staticClass:"thickRight"},[a("section",{staticClass:"newCases thickCase"},e._l(e.thickRight,function(t,n){return a("section",{class:{selectType:t.caseFolderTemplate.sideType},style:e.styleType(t)},[a(e.currentView(t),{tag:"div",attrs:{data:t,olderTag:e.olderTagList},on:{olderTag:e.olderTag}})])}))]),e._v(" "),e.typeNameCase?a("section",{staticClass:"thickFooter"},[a("button",{on:{click:e.useBtn}},[e._v("使用")])]):e._e()])]):e._e(),e._v(" "),e.isLoading?a("loading"):e._e()],1)},[],!1,null,null,null));t.a=M.exports},,,,,,,,,,,,,,,,,,function(e,t,a){},function(e,t,a){"use strict";(function(e){var n=a(2),s=a.n(n),i=a(4),o=a.n(i),r=a(110),l=a(3);t.a={props:{reallyIsValid:{default:"1"},labelName:{default:""},maxLen:{default:""},contentDes:{default:""},attVideoList:{default:[]},relatedParentId:{default:0},associatedRole:{default:!1},attPicList:{default:[]},HandleId:{default:0},groupId:{default:""},detailId:{default:""},CaseId:{default:""},componentId:{default:""}},data:function(){return{uploadData:{ImgList:[],VideoList:[],textVal:"",structureId:"",menuName:"",textAreaLimt:500,associatedState:!1,caseId:"",status:!0,HandleId:this.HandleId},copyData:{},associatedState:!1,HandleParentId:""}},computed:o()({},Object(l.c)(["Relationship","globalEvent","clickNum","pageInfo"])),watch:{labelName:function(e){this.uploadData.menuName=e},Relationship:function(e){var t=this;if(e.handleId==t.HandleParentId){for(var a=!1,n=0;n<e.relationId.length;n++)e.relationId[n]==t.HandleId&&(a=!0);t.associatedState=a}},associatedRole:function(e){this.associatedState=!("true"==e)},associatedState:function(e){e||this.resetData()},relatedParentId:function(e){this.HandleParentId=e},maxLen:function(e){this.uploadData.textAreaLimt=e},contentDes:function(e){this.uploadData.textVal=e},attVideoList:function(e){this.uploadData.VideoList=JSON.parse(e)},attPicList:function(e){this.uploadData.ImgList=JSON.parse(e)},CaseId:function(e){this.uploadData.caseId=e}},components:{uploadColumn:r.a},methods:o()({},Object(l.b)(["changeComponentData","changeComponentTestResult","changeUploadState","changeUploadError"]),{resetData:function(){this.uploadData=this.copyData},ensureRelationship:function(){var e=this,t=this.pageInfo.pageData[e.HandleParentId];if(t&&t.checkBoxList){for(var a=t.checkBoxList,n=0;n<a.length;n++)if(a[n].checkOnOff&&a[n].relationId&&a[n].relationId.length>0)for(var s=0;s<a[n].relationId.length;s++)e.HandleId==a[n].relationId[s]&&(e.associatedState=!0)}else if(t&&t.RadioList){var i=t.RadioList,o=t.index;if(-1!=o&&i[o]&&i[o].relationId&&i[o].relationId.length>0)for(var r=0;r<i[o].relationId.length;r++)e.HandleId==i[o].relationId[r]&&(e.associatedState=!0)}},checkInvalid:function(e){return"string"==typeof e&&0==e.length||void 0==e||"undefined"==e||"null"==e||void 0===e||"null"==typeof e||null==e},uploadBackInfo:function(t){var a=this,n=function(e){for(var t=JSON.parse(s()(e)),a=[],n=0;n<t.length;n++)t[n].nodeId||a.push(t[n]);return a},i=function(t){for(var n=JSON.parse(s()(t)),i=0;i<n.length;i++){var o=e("[data-id="+n[i].id+"]").find(".remarkMaskEditPanel").attr("remarkvalue"),r=a.checkInvalid(o)?"":o;a.checkInvalid(n[i].remarks)&&(n[i].remarks=r)}return n};a.changeUploadState({HandleId:t[0].uploadInfo.HandleId,status:t[2].uploadVideoStatus&&t[1].uploadImgStatus}),a.changeUploadError({HandleId:a.HandleId,type:"image",status:t[0].uploadInfo.imgErrLength>0}),a.changeUploadError({HandleId:a.HandleId,type:"video",status:t[0].uploadInfo.videoErrLength>0}),t[2].uploadVideoStatus?(a.status=!t[2].uploadVideoStatus,t[0].uploadInfo.validVideo.length&&a.changeComponentData({HandleId:a.HandleId,handleContent:1,handleList:t[0].uploadInfo.validVideo,handleType:1}),t[0].uploadInfo.deletVideo.length&&a.changeComponentData({HandleId:a.HandleId,handleContent:1,handleList:n(t[0].uploadInfo.deletVideo),handleType:0})):a.status=t[2].uploadVideoStatus,t[0].uploadInfo.noteImgid.length&&a.changeComponentData({HandleId:a.HandleId,handleContent:2,handleList:i(t[0].uploadInfo.noteImgid),handleType:1}),t[0].uploadInfo.noteVideoId.length&&a.changeComponentData({HandleId:a.HandleId,handleContent:3,handleList:i(t[0].uploadInfo.noteVideoId),handleType:1}),t[1].uploadImgStatus?(t[0].uploadInfo.validImg.length&&a.changeComponentData({HandleId:a.HandleId,handleContent:0,handleList:t[0].uploadInfo.validImg,handleType:1}),t[0].uploadInfo.deletImg.length&&a.changeComponentData({HandleId:a.HandleId,handleContent:0,handleList:n(t[0].uploadInfo.deletImg),handleType:0}),a.status=!t[1].uploadImgStatus):a.status=t[1].uploadImgStatus,a.changeComponentData({HandleId:a.HandleId,handleContent:4,contentDes:t[0].uploadInfo.remarks})},changeItemRemarks:function(e){this.changeComponentData({HandleId:this.HandleId,handleContent:5,remarksJson:e})}}),mounted:function(){var e=this;e.uploadData.menuName=e.labelName,e.uploadData.structureId=e.componentId,e.uploadData.textAreaLimt=isNaN(parseInt(e.maxLen,10))?500:e.maxLen,e.uploadData.textVal=e.contentDes,e.uploadData.caseId=e.CaseId,e.uploadData.VideoList=JSON.parse(e.attVideoList),e.uploadData.ImgList=JSON.parse(e.attPicList),e.copyData=JSON.parse(s()(e.uploadData)),this.associatedState=!("true"==this.associatedRole),this.HandleParentId=this.relatedParentId,e.ensureRelationship()}}}).call(this,a(6))},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},,,,,,,,,,,,,,,,,,,,function(e,t,a){"use strict";var n=a(59);a.n(n).a},,function(e,t,a){"use strict";var n=a(60);a.n(n).a},,function(e,t,a){"use strict";var n=a(61);a.n(n).a},,function(e,t,a){"use strict";var n=a(62);a.n(n).a},,function(e,t,a){"use strict";var n=a(63);a.n(n).a},,function(e,t,a){"use strict";var n=a(64);a.n(n).a},,function(e,t,a){"use strict";var n=a(65);a.n(n).a},,function(e,t,a){"use strict";var n=a(66);a.n(n).a},,function(e,t,a){"use strict";var n=a(67);a.n(n).a},,function(e,t,a){"use strict";var n=a(68);a.n(n).a},,function(e,t,a){"use strict";var n=a(69);a.n(n).a},,function(e,t,a){"use strict";var n=a(70);a.n(n).a},,function(e,t,a){"use strict";var n=a(71);a.n(n).a},,function(e,t,a){"use strict";var n=a(73);a.n(n).a},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,a){"use strict";a.r(t);var n=a(4),s=a.n(n),i=(a(39),a(8)),o=a(34),r=a.n(o),l=a(2),d=a.n(l),c=a(11),u=a.n(c),p=a(21),m=a.n(p),h=a(26),g=a(19),f=a(20),I=a(0),v=a(3),C={props:{navName:{type:String,default:""},crumbsTxt:{type:String,default:""},pageType:{type:Number,default:2},saveStatus:{type:Number,default:0}},components:{Logo:h.a,UserLogo:f.a,SearchInput:g.a},watch:{},methods:s()({},Object(v.b)(["clickChangeBtn","checkChangeState","wantChangePageIndex","examineBasePageData","showLayer","toast","operationLog"]),{saveCaseInfo:function(e){var t=this;if(t.imageErrorState||t.videoErrorState){if(t.imageErrorState)return t.toast("图片上传失败"),!1;if(t.videoErrorState)return t.toast("视频上传失败"),!1}else if(t.uploadState){if(t.pageIndex<0){if(t.checkChangeState(0),!t.isEmptyBase&&I.a.isEmptyObject(t.baseInfo))return I.a.ajax2({url:"/call/caseFolder/baseinfo/update/",type:"POST",data:{paramJson:d()({customerId:I.a.cookie.get("userId"),caseId:t.CaseId,updateFlag:0,lockedFlag:0})},success:function(e){e&&e.responseObject&&e.responseObject.responseStatus&&(1302==e.responseObject.responseCode?t.showLayer(2):1301==e.responseObject.responseCode||1303==e.responseObject.responseCode?t.showLayer(3):0==e.responseObject.responseCode&&(t.operationLog(3),localStorage.removeItem("emrNewCaseCaseId"),window.location.href="/"))}}),!1}else t.checkChangeState(1);t.isChangeOnOff?I.a.ajax2({url:"/call/caseFolder/baseinfo/update/",type:"POST",data:{paramJson:d()({customerId:I.a.cookie.get("userId"),caseId:t.CaseId,updateFlag:0,lockedFlag:0})},success:function(e){e&&e.responseObject&&e.responseObject.responseStatus&&(1302==e.responseObject.responseCode?t.showLayer(2):1301==e.responseObject.responseCode||1303==e.responseObject.responseCode?t.showLayer(3):0==e.responseObject.responseCode&&(t.operationLog(3),localStorage.removeItem("emrNewCaseCaseId"),window.location.href="/caseDetails/index.html?caseId="+t.CaseId+"&templateId="+(t.templateId>0?t.templateId:0)))}}):this.$emit("quitSaveCaseInfo",e)}else t.toast("您有内容正在上传中，请稍后")},goRootUrl:function(){var e=this;if(e.imageErrorState||e.videoErrorState){if(e.imageErrorState)return e.toast("图片上传失败"),!1;if(e.videoErrorState)return e.toast("视频上传失败"),!1}else e.uploadState?(e.pageIndex<0?(e.checkChangeState(0),e.isEmptyBase||I.a.ajax2({url:"/call/caseFolder/baseinfo/update/",type:"POST",data:{paramJson:d()({customerId:I.a.cookie.get("userId"),caseId:e.CaseId,updateFlag:0,lockedFlag:0})},success:function(t){t&&t.responseObject&&t.responseObject.responseStatus&&(1302==t.responseObject.responseCode?e.showLayer(2):1301==t.responseObject.responseCode||1303==t.responseObject.responseCode?e.showLayer(3):0==t.responseObject.responseCode&&(localStorage.removeItem("emrNewCaseCaseId"),window.location.href="/"))}})):e.checkChangeState(1),e.isChangeOnOff?I.a.ajax2({url:"/call/caseFolder/baseinfo/update/",type:"POST",data:{paramJson:d()({customerId:I.a.cookie.get("userId"),caseId:e.CaseId,updateFlag:0,lockedFlag:0})},success:function(t){t&&t.responseObject&&t.responseObject.responseStatus&&(1302==t.responseObject.responseCode?e.showLayer(2):1301==t.responseObject.responseCode||1303==t.responseObject.responseCode?e.showLayer(3):0==t.responseObject.responseCode&&(localStorage.removeItem("emrNewCaseCaseId"),window.location.href="/"))}}):(e.wantChangePageIndex(-2),e.examineBasePageData(),e.clickChangeBtn(),e.changePageOnOff&&e.showLayer(5))):e.toast("您有内容正在上传中，请稍后")}}),computed:s()({},Object(v.c)(["pageIndex","isChangeOnOff","changePageOnOff","editType","tabList","uploadState","baseInfo","isEmptyBase","CaseId","imageErrorState","videoErrorState","templateId","isEmptyBase"]),{saveText:function(){var e=this;return 0==e.editType&&0==e.tabList.length&&-1==e.pageIndex||0!=e.saveStatus?"取消":"保存并退出"},outType:function(){var e=this;return 1!=e.saveStatus&&2!=e.saveStatus&&e.CaseId>0}}),mounted:function(){}},b=(a(320),a(1)),y=Object(b.a)(C,function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("section",{staticClass:"headerTopNav"},[a("section",{staticClass:"alEmr-logo",on:{click:function(t){return t.stopPropagation(),e.goRootUrl(t)}}},[a("span")]),e._v(" "),a("aside",{staticClass:"crumbs"},[a("span",[e._v(e._s(e.crumbsTxt))]),e._v(" "),a("i",{directives:[{name:"show",rawName:"v-show",value:1==e.pageType,expression:"pageType==1"}]}),e._v(" "),a("span",[e._v(e._s(e.navName))])]),e._v(" "),a("aside",{directives:[{name:"show",rawName:"v-show",value:1==e.pageType,expression:"pageType==1"}],staticClass:"saveBtn",on:{click:function(t){t.stopPropagation(),e.outType?e.saveCaseInfo(1):e.saveCaseInfo(0)}}},[a("span",{directives:[{name:"show",rawName:"v-show",value:1!=e.saveStatus&&2!=e.saveStatus&&e.CaseId>0,expression:"saveStatus!=1&&saveStatus!=2&&CaseId>0"}]},[e._v("保存并退出")]),e._v(" "),a("span",{directives:[{name:"show",rawName:"v-show",value:!(e.CaseId>0),expression:"!(CaseId>0)"}]},[e._v("取消")]),e._v(" "),a("ul",{directives:[{name:"show",rawName:"v-show",value:1==e.saveStatus,expression:"saveStatus==1"}]},[a("li"),a("li"),a("li")]),e._v(" "),a("i",{directives:[{name:"show",rawName:"v-show",value:2==e.saveStatus,expression:"saveStatus==2"}]})]),e._v(" "),a("section",{directives:[{name:"show",rawName:"v-show",value:2==e.pageType,expression:"pageType==2"}],staticClass:"alEmr-headerContainer"},[a("section",{staticClass:"alEmr-headerInner"},[a("SearchInput"),e._v(" "),a("UserLogo")],1)])])},[],!1,null,"49c7abf6",null).exports,x=a(6),S={components:{Logo:h.a},updated:function(){this.saveNavTopHeight(x(this.$refs.topNav).height())},watch:{tabList:function(e){var t=this;if(t.$route.params.menuId){for(var a=0;a<e.length;a++)if(t.$route.params.menuId==e[a].menuId){t.changeIndex({index:a});break}}else"tplate"===t.$route.path.replace("/","")&&t.changeIndex({index:0})},pageIndex:function(e){var t=this;e>=0?t.$router.push({name:"assemble",params:{menuId:parseInt(t.tabList[parseInt(e)].menuId)}}):t.$router.push({path:"/baseInfo"})}},methods:s()({},Object(v.b)(["saveNavTopHeight","changeIndex","showLayer","examineBasePageData","wantChangePageIndex","clickChangeBtn","checkChangeState","toast","changeHandleType","changeBaseHandleType"]),{jumpPage:function(e){var t=this;if(t.imageErrorState||t.videoErrorState){if(t.imageErrorState)return t.toast("图片上传失败"),!1;if(t.videoErrorState)return t.toast("视频上传失败"),!1}else t.uploadState?(t.pageIndex<0?t.checkChangeState(0):t.checkChangeState(1),t.isChangeOnOff?I.a.ajax2({url:"/call/caseFolder/baseinfo/update/",type:"POST",data:{paramJson:d()({customerId:I.a.cookie.get("userId"),caseId:t.CaseId,updateFlag:0,lockedFlag:1})},success:function(a){var n;a&&a.responseObject&&a.responseObject.responseStatus&&(1302==a.responseObject.responseCode?t.showLayer(2):0==a.responseObject.responseCode&&(t.pageIndex<0?t.changeBaseHandleType(!1):t.changeHandleType({index:parseInt(t.pageIndex,10),onOff:!1}),(n=e.index)<0?t.$router.push({path:"/baseInfo",name:"baseInfo"}):(t.changeHandleType({index:t.pageIndex,onOff:!1}),t.$router.push({path:"/assemble",name:"assemble",params:{menuId:t.tabList[n].menuId}}))))}}):(t.wantChangePageIndex(e.index),t.examineBasePageData(),t.clickChangeBtn(),t.changePageOnOff&&t.showLayer(5))):t.toast("您有内容正在上传中，请稍后")},styleWidth:function(e,t){if(e.length<=9)return{width:100/(e.length+1)+"%"};if(!(e.length>9))return{width:"100%"};var a=parseInt((e.length-9)/10+1),n=(e.length-9)%10;return t+2<10*a?{width:"10%"}:t+2>10*a&&t+2<=10*a+n?{width:100/n+"%"}:void 0}}),computed:s()({},Object(v.c)(["CaseId","tabList","pageIndex","templateId","changePageOnOff","isChangeOnOff","uploadState","imageErrorState","videoErrorState"]))},T=(a(318),Object(b.a)(S,function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("section",{ref:"topNav",staticClass:"caseTopNav"},[a("ul",[a("li",{directives:[{name:"show",rawName:"v-show",value:"tplate"!==e.$route.path.replace("/",""),expression:"$route.path.replace('/','')!=='tplate'"}],class:{active:-1==e.pageIndex},style:e.styleWidth(e.tabList,0),on:{click:function(t){t.stopPropagation(),e.jumpPage({index:-1})}}},[a("span",[e._v("基本信息")])]),e._v(" "),e._l(e.tabList,function(t,n){return a("li",{key:n,class:{active:e.pageIndex==n},style:e.styleWidth(e.tabList,n),on:{click:function(t){t.stopPropagation(),e.jumpPage({index:n})}}},[a("span",{domProps:{textContent:e._s(t.menuName)}})])})],2)])},[],!1,null,"0550feca",null).exports),D={props:["navName"],components:{Logo:h.a},watch:{navName:function(e,t){},subPageData:function(e){},pageIndex:function(e){}},methods:s()({},Object(v.b)(["changeSubIndex","addSubPage","toast"]),{saveCaseInfo:function(){this.$emit("quitSaveCaseInfo")},addSub:function(){var e=this;e.uploadState?e.addSubPage():e.toast("您有内容正在上传中，请稍后")}}),computed:s()({},Object(v.c)(["subPageData","subIndex","titleName","pageIndex","tabList","uploadState"]),{templateOnOff:function(){var e=this;return e.tabList.length>0&&e.tabList[e.pageIndex]&&1==parseInt(e.tabList[e.pageIndex].isAdd)}}),mounted:function(){}},_=(a(316),Object(b.a)(D,function(){var e=this,t=e.$createElement,a=e._self._c||t;return e.templateOnOff?a("section",{staticClass:"caseLeftNav"},[a("div",{staticClass:"addColumn",on:{click:function(t){return t.stopPropagation(),e.addSub(t)}}},[a("i"),a("span",[e._v("添加")])]),e._v(" "),a("ul",e._l(e.subPageData,function(t,n){return a("li",{key:n,class:{active:e.subIndex==n},on:{click:function(t){t.stopPropagation(),e.changeSubIndex({set:!1,index:n})}}},[e._v(e._s(e.titleName)+e._s(e.subPageData.length-n)+"\n            ")])}))]):e._e()},[],!1,null,"964730e8",null).exports),O=a(29),L=a.n(O),k=a(28),w=a.n(k),N=a(35),P=a.n(N),R=function(){function e(t){L()(this,e),this.originalList=t}return w()(e,[{key:"checkInvalid",value:function(e){return"string"==typeof e&&0==e.length||void 0==e||"undefined"==e||"null"==e||void 0===e||"null"==typeof e||null==e}},{key:"isEmpty",value:function(){var e=this,t=P()(e.originalList).length,a=0;for(var n in e.originalList){var s=e.originalList[n];e.itemIsEmpty(s)&&a++}return a==t}},{key:"itemIsEmpty",value:function(e){var t=this,a=!1;switch(parseInt(e.componentType)){case 0:a=t.checkInvalid(e.contentDes);break;case 1:a=e.index<0||t.checkInvalid(e.index);break;case 2:case 3:a=t.checkInvalid(e.contentDes);break;case 4:a=!1;break;case 5:a=t.checkInvalid(e.yearSelect)&&t.checkInvalid(e.monthSelect)&&t.checkInvalid(e.daySelect);break;case 6:1===parseInt(e.needInput,10)?e.index<0&&-2!=e.index&&t.checkInvalid(e.contentDes)&&(a=!0):e.index<0&&-2!=e.index&&(a=!0);break;case 7:for(var n=0,s=0;s<e.checkBoxList.length;s++)!1===e.checkBoxList[s].checkOnOff&&n++;a=1===parseInt(e.needInput,10)?t.checkInvalid(e.contentDes)&&n===e.checkBoxList.length&&0==e.otherCheckOnOff:n===e.checkBoxList.length;break;case 8:a=t.checkInvalid(e.contentDes);break;case 13:a=0==e.attPicList.length&&0==e.attVideoList.length&&0==e.noteImgList.length&&0==e.noteVideoList&&t.checkInvalid(e.contentDes)}return a}}]),e}(),j=a(6),B=function(){function e(t){L()(this,e),this.checkEmpty=new R,this.originalList=JSON.parse(d()(t))}return w()(e,[{key:"checkInvalid",value:function(e){return"string"==typeof e&&0==e.length||void 0==e||"undefined"==e||"null"==e||void 0===e||"null"==typeof e||null==e}},{key:"mergeData",value:function(e){var t=this,a=[],n=t.originalList,s=-1,i=-1,o=function(e){return parseInt(e)>=10?e:"0"+parseInt(e,10)};for(var r in n){var l=n[r];s<0&&l.groupId&&(s=l.groupId),i<0&&l.parentId&&(i=l.parentId);var d=parseInt(l.structureType,10),c={},u="";switch(1!=l.sideType&&2!=l.sideType||(u=l.sideType),d){case 1:c={detailId:l.detailId,fieldId:l.fieldId,content:l.RadioList[l.index]&&l.RadioList[l.index].radioId?l.RadioList[l.index].radioId:"",otherContent:"",structureId:l.componentId,sideType:u,structureType:d,parentId:l.parentId,deleteAttachmentIds:"",validAttachmentIds:"",refNoteAttachmentIds:""};break;case 2:var p="";p=-2==Number(l.index)?l.otherRadioId:l.RadioList[l.index]&&l.RadioList[l.index].radioId?l.RadioList[l.index].radioId:"",c={detailId:l.detailId,fieldId:l.fieldId,content:p,otherContent:l.contentDes,structureId:l.componentId,structureType:d,sideType:u,parentId:l.parentId,deleteAttachmentIds:"",validAttachmentIds:"",refNoteAttachmentIds:""};break;case 3:for(var m="",h=0;h<l.checkBoxList.length;h++){var g=l.checkBoxList[h];g.checkOnOff&&(m+=","+g.checkboxId)}m=m.substring(1,1e6),c={detailId:l.detailId,fieldId:l.fieldId,content:m,otherContent:"",structureId:l.componentId,structureType:d,sideType:u,parentId:l.parentId,deleteAttachmentIds:"",validAttachmentIds:"",refNoteAttachmentIds:""};break;case 4:for(var f="",v=0;v<l.checkBoxList.length;v++){var C=l.checkBoxList[v];C.checkOnOff&&(f+=","+C.checkboxId)}l.otherCheckOnOff&&(f+=","+l.otherCheckId),f=f.substring(1,1e6),c={detailId:l.detailId,fieldId:l.fieldId,content:f,otherContent:l.contentDes,structureId:l.componentId,structureType:d,sideType:u,parentId:l.parentId,deleteAttachmentIds:"",validAttachmentIds:"",refNoteAttachmentIds:""};break;case 5:var b;l.contentYear.length>0&&l.contentMonth.length>0&&0==l.contentYear&&0==l.contentMonth&&t.checkInvalid(l.contentDay)&&(l.contentDay=1),b=(l.contentYear?l.contentYear:"0")+","+(l.contentMonth?o(l.contentMonth):"00")+","+(l.contentDay?o(l.contentDay):"00"),c={detailId:l.detailId,fieldId:l.fieldId,content:b,otherContent:"",structureId:l.componentId,structureType:d,parentId:l.parentId,deleteAttachmentIds:"",validAttachmentIds:"",refNoteAttachmentIds:""};break;case 6:var y="";(l.yearSelect+"").length>0&&(l.monthSelect+"").length>0&&(l.daySelect+"").length>0&&(y=l.yearSelect+","+o(l.monthSelect)+","+o(l.daySelect)),c={detailId:l.detailId,fieldId:l.fieldId,content:y,otherContent:"",structureId:l.componentId,structureType:d,parentId:l.parentId,deleteAttachmentIds:"",validAttachmentIds:"",refNoteAttachmentIds:""};break;case 7:var x="";l.index<0||t.checkInvalid(l.contentDes)||(x=l.contentDes+","+l.InputSelectList[l.index].selectName),c={detailId:l.detailId,fieldId:l.fieldId,content:x,otherContent:"",structureId:l.componentId,structureType:d,parentId:l.parentId,deleteAttachmentIds:"",validAttachmentIds:"",refNoteAttachmentIds:""};break;case 8:c={detailId:l.detailId,fieldId:l.fieldId,content:l.contentDes,otherContent:"",structureId:l.componentId,structureType:d,sideType:u,parentId:l.parentId,deleteAttachmentIds:"",validAttachmentIds:"",refNoteAttachmentIds:""};break;case 9:c={detailId:l.detailId,fieldId:l.fieldId,content:l.contentDes,otherContent:"",sideType:u,structureId:l.componentId,structureType:d,parentId:l.parentId,deleteAttachmentIds:"",validAttachmentIds:"",refNoteAttachmentIds:""};break;case 10:for(var S="",T=0,D=0;D<l.deleteAttPicList.length;D++){S+=","+l.deleteAttPicList[D].id+"@=@"+T,T++}for(var _=0;_<l.deleteAttVideoList.length;_++){var O=l.deleteAttVideoList[_];t.checkInvalid(O.id)||(S+=","+O.id+"@=@"+T,T++)}for(var L="",k=0;k<l.attVideoList.length;k++){var w=l.attVideoList[k],N=j("[data-id="+w.id+"]").length>0;t.checkInvalid(w.id)||!N||t.checkInvalid(w.index)||(t.checkInvalid(w.remarks)?L+=","+w.id+"@=@"+w.index:L+=","+w.remarks+"&=&"+w.id+"@=@"+w.index,0)}for(var P=0;P<l.attPicList.length;P++){var R=l.attPicList[P],B=j("[data-id="+R.id+"]").length>0;t.checkInvalid(R.id)||!B||t.checkInvalid(R.index)||(t.checkInvalid(R.remarks)?L+=","+R.id+"@=@"+R.index:L+=","+R.remarks+"&=&"+R.id+"@=@"+R.index,0)}for(var F="",H=0;H<l.noteImgList.length;H++){var E=l.noteImgList[H],M=j("[data-id="+E.id+"]").length>0;t.checkInvalid(E.noteId)||t.checkInvalid(E.id)||!M||t.checkInvalid(E.index)||(t.checkInvalid(E.remarks)?F+=","+E.noteId+"@=@"+E.id+"@=@"+E.index:F+=","+E.remarks+"&=&"+E.noteId+"@=@"+E.id+"@=@"+E.index,0)}for(var V=0;V<l.noteVideoList.length;V++){var A=l.noteVideoList[V],$=j("[data-id="+A.id+"]").length>0;t.checkInvalid(A.noteId)||t.checkInvalid(A.id)||!$||t.checkInvalid(A.index)||(t.checkInvalid(A.remarks)?F+=","+A.noteId+"@=@"+A.id+"@=@"+A.index:F+=","+A.remarks+"&=&"+A.noteId+"@=@"+A.id+"@=@"+A.index,0)}c={detailId:l.detailId,fieldId:l.fieldId,content:l.contentDes,otherContent:"",structureId:l.componentId,structureType:d,parentId:l.parentId,deleteAttachmentIds:S.substring(1,1e6),validAttachmentIds:L.substring(1,1e6),refNoteAttachmentIds:F.substring(1,1e6)}}l.associatedRole&&t.checkEmpty.itemIsEmpty(l)||0===parseInt(l.reallyIsValid,10)||(I.a.isEmptyObject(c)||a.push(c))}return{lockedFlag:e.quiteType,updateFlag:1,customerId:I.a.cookie.get("userId"),caseId:sessionStorage.getItem("emrNewCaseCaseId"),visitSiteId:"1",isValid:"1",detailList:a,groupId:s<0?"":s,parentStructureId:i<0?"":i}}}]),e}(),F={methods:{}},H=(a(308),Object(b.a)(F,function(){var e=this.$createElement,t=this._self._c||e;return t("section",[t("section",{staticClass:"casePopup"},[t("section",{staticClass:"casePopupCont"},[this._t("default")],2)])])},[],!1,null,"3801cb5b",null).exports),E=a(12),M=a(111),V=a(6),A={name:"index-app",data:function(){return{edit:(I.a.getParamFromUrl(document.URL,"edit")||"0").replace(/[^0-9]/gi,""),topics:[],queryCaseId:(I.a.getParamFromUrl(document.URL,"caseId")||"0").replace(/[^0-9]/gi,""),heightTop:43}},components:{CaseLeftNav:_,headerTopNav:y,caseTopNav:T,MaskLayer:H,Loading:E.a,ToastTip:M.a},created:function(){},mounted:function(){var e=m()(u.a.mark(function e(){var t;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:(t=this).changeTemplateId(!1),t.initUploadState(),t.checkBigImage(),this.saveEditType(this.edit),parseInt(this.queryCaseId,10)>0||parseInt(sessionStorage.getItem("emrNewCaseCaseId"),10)>0?parseInt(this.queryCaseId,10)>0?(this.saveCaseId(this.queryCaseId),this.checkCaseStatus()):(this.saveCaseId(sessionStorage.getItem("emrNewCaseCaseId")),this.checkCaseStatus()):sessionStorage.removeItem("emrNewCaseCaseId"),t.timingLog(),setTimeout(function(){document.title=t.crumbsTxt},1e3);case 8:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),computed:s()({},Object(v.c)(["canSaveBaseData","titleName","navHeight","editType","tabList","pageIndex","CaseId","templateId","teamList","layerIndex","saveBaseInfo","pageInfo","changePageOnOff","isChangeOnOff","CaseDataId","CaseId","loadingOnOff","globalEvent","wantChangeIndex","saveStatus","toastText","toastState","changeTemplateIdType","changeTemplateIdOnOff"]),{checkNavHeight:function(){return"tplate"===this.$route.path.replace("/","")?"":parseInt(this.navHeight+71,10)+"px"},crumbsTxt:function(){return 1==this.editType&&this.CaseId>0?"编辑病历":"新建病历"},templateTopNav:function(){return"tplate"===this.$route.name}}),metaInfo:{title:""},methods:s()({},Object(v.b)(["filtrateBaseData","saveEditType","saveCaseId","getTabList","getBaseCaseInfo","getTeamList","changeIndex","hideLayer","showLayer","saveBasePageInfo","clickChangeBtn","examinePageData","operationLog","examineBasePageData","showLoading","hideLoading","globalEventActions","saveTagId","changeSaveStatus","checkChangeState","saveIndexSubPageData","toast","saveTemplateId","saveCaseDataId","templateIdType","changeTemplateId","initUploadState","changeHandleType","changeBaseHandleType","timingLog"]),{checkCaseStatus:function(){var e=this;e.showLoading(),I.a.ajax2({url:"/call/caseFolder/baseinfo/update/",type:"POST",data:{paramJson:d()({customerId:I.a.cookie.get("userId"),caseId:e.CaseId,updateFlag:0})},success:function(t){if(t&&t.responseObject&&t.responseObject.responseStatus)switch(e.hideLoading(),parseInt(t.responseObject.responseCode)){case 0:break;case 1301:e.showLayer(3);break;case 1302:e.showLayer(4)}}})},outSidePage:function(){var e=this;e.hideLayer();var t;t=e.wantChangeIndex,e.changeIndex({index:t}),-1==t?e.$router.push({path:"/baseInfo",name:"baseInfo"}):-2==t?(sessionStorage.removeItem("emrNewCaseCaseId"),window.location.href="/"):e.$router.push({path:"/assemble",name:"assemble",params:{menuId:e.tabList[t].menuId}})},closeLayer:function(){this.hideLayer(),this.jumpSource()},quitSaveCaseInfo:function(e){var t=this;t.examineBasePageData(),t.clickChangeBtn(),0==e?t.showLayer(1):t.saveInfoQuite()},reloadHref:function(){window.location.reload()},jumpSource:function(){sessionStorage.removeItem("emrNewCaseCaseId"),window.location.href=sessionStorage.getItem("newCasesSource")?sessionStorage.getItem("newCasesSource"):"/"},changeTab:function(){var e=this;e.hideLayer(),e.clickChangeBtn();var t=function(t){e.changeIndex({index:t}),-1==t?e.$router.push({path:"/baseInfo",name:"baseInfo"}):-2==t?(e.operationLog(3),sessionStorage.removeItem("emrNewCaseCaseId"),window.location.href="/"):e.$router.push({path:"/assemble",name:"assemble",params:{menuId:e.tabList[t].menuId}})};e.savePageInfo("tab",function(a){1302==a.responseObject.responseCode?e.showLayer(2):1301==a.responseObject.responseCode?e.showLayer(3):0==a.responseObject.responseCode&&a.responseObject.responseStatus&&(e.changeSaveStatus(2),setTimeout(function(){t(e.wantChangeIndex)},500))},function(a,n){1302==a.responseObject.responseCode?e.showLayer(2):1301==a.responseObject.responseCode?e.showLayer(3):0==a.responseObject.responseCode&&a.responseObject&&a.responseObject.responseStatus&&(e.saveTagId(""),e.CaseId>0||(e.saveCaseId(a.responseObject.responsePk),e.saveCaseDataId(a.responseObject.responseData.id),e.operationLog(1)),e.saveBasePageInfo(n),e.changeSaveStatus(2),setTimeout(function(){t(e.wantChangeIndex)},500))})},savePageInfo:function(e,t,a){var n=this,s=0,i=0;if(n.examineBasePageData(),"tab"==e?(s=0,i=1):(s=0,i=0),n.changePageOnOff)if("assemble"===n.$route.name){n.checkChangeState(1),n.showLoading();var o=new B(n.pageInfo.pageData);n.changeSaveStatus(1),n.isChangeOnOff?I.a.ajax2({url:"/call/caseFolder/baseinfo/update/",type:"POST",data:{paramJson:d()({customerId:I.a.cookie.get("userId"),caseId:n.CaseId,updateFlag:s,lockedFlag:i})},success:function(e){e&&e.responseObject&&e.responseObject.responseStatus&&(n.changeHandleType({index:parseInt(n.pageIndex,10),onOff:!1}),n.saveIndexSubPageData(),n.hideLoading(),t&&t(e))}}):I.a.ajax2({url:"/call/caseFolder/case_folder_detail/createBatch/",type:"POST",data:{paramJson:d()(o.mergeData({quiteType:i}))},success:function(e){e.responseObject.responseStatus&&(n.changeHandleType({index:parseInt(n.pageIndex,10),onOff:!0}),n.saveIndexSubPageData(),n.hideLoading()),t&&t(e)}})}else{n.filtrateBaseData(),n.checkChangeState(0);var r="/call/caseFolder/baseinfo/create/";n.CaseId>0&&(r="/call/caseFolder/baseinfo/update/"),n.changeSaveStatus(1),n.showLoading();var l=JSON.parse(d()(n.canSaveBaseData));l.lockedFlag=i,n.isChangeOnOff?I.a.ajax2({url:"/call/caseFolder/baseinfo/update/",type:"POST",data:{paramJson:d()({customerId:I.a.cookie.get("userId"),caseId:n.CaseId,updateFlag:s,lockedFlag:i})},success:function(e){e&&e.responseObject&&e.responseObject.responseStatus&&(n.hideLoading(),n.changeBaseHandleType(!1),a&&a(e,l))}}):I.a.ajax2({url:r,type:"POST",data:{paramJson:d()(l)},success:function(e){e.responseObject.responseStatus&&(n.changeBaseHandleType(!0),n.hideLoading()),a&&a(e,l)}})}},saveInfoQuite:function(){var e=this;e.hideLayer(),e.clickChangeBtn(),e.savePageInfo("quit",function(t){1302==t.responseObject.responseCode?e.showLayer(2):1301==t.responseObject.responseCode?e.showLayer(3):0==t.responseObject.responseCode&&t.responseObject.responseStatus&&(e.changeSaveStatus(2),e.operationLog(3),setTimeout(function(){sessionStorage.removeItem("emrNewCaseCaseId"),window.location.href="/caseDetails/index.html?caseId="+e.CaseId+"&templateId="+(e.templateId>0?e.templateId:0)},500))},function(t,a){1302==t.responseObject.responseCode?e.showLayer(2):1301==t.responseObject.responseCode?e.showLayer(3):0==t.responseObject.responseCode&&t.responseObject&&t.responseObject.responseStatus&&(e.saveTagId(""),e.CaseId>0||(e.saveCaseId(t.responseObject.responsePk),e.saveCaseDataId(t.responseObject.responseData.id)),e.operationLog(1),e.saveBasePageInfo(a),e.changeSaveStatus(2),setTimeout(function(){sessionStorage.removeItem("emrNewCaseCaseId"),window.location.href="/caseDetails/index.html?caseId="+e.CaseId+"&templateId="+(e.templateId>0?e.templateId:0)},500))})},checkBigImage:function(){V(".alEmr-mainInner").on("mousedown",".ev-bigImg,.detImgMore",function(){setTimeout(function(){V(".view_img_view_yt").off("click mousedown mouseup").on("click",function(){var e=V(".view_img_tp td[align='center'] img").attr("src");window.open(e.replace(/\_c./gi,"."))}),V(".view_img_view_yt").css({display:"inline-block",right:"202px"})},500)})},changeTemplate:function(){var e=this;e.saveTemplateId("-1"),e.templateIdType(0),e.changeTemplateId(!0),e.hideLayer(),e.$router.push({path:"/tplate"})}}),watch:{pageIndex:function(e){-1===e&&this.getBaseCaseInfo()},CaseId:function(e){var t=this;parseInt(e,10)>0&&(1===t.editType?t.getBaseCaseInfo():"baseInfo"!==t.$route.name&&"assemble"!==t.$route.name||t.getBaseCaseInfo())},loadingOnOff:function(e){},$route:function(e,t){"baseInfo"===e.name&&"tplate"===t.name?this.getBaseCaseInfo():"baseInfo"===e.name&&this.changeIndex({index:-1}),setTimeout(function(){V(".alEmr-mainInner").scrollTop(0)},200)},templateId:function(e,t){var a=this;0==a.changeTemplateIdType&&a.CaseDataId>0&&e>0&&(a.showLoading(),I.a.ajax2({type:"POST",url:"/call/caseFolder/template/chooseOrReplaceTemplate/",data:{paramJson:d()({lockedFlag:1,customerId:I.a.cookie.get("userId"),id:a.CaseDataId,caseId:a.CaseId,templateId:e,opType:a.changeTemplateIdOnOff?1:0})},success:function(e){e.responseObject.responseStatus&&a.hideLoading()}})),e>0&&a.getTabList()}}},$=(a(306),Object(b.a)(A,function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("section",{staticClass:"newCases alEmr-mainInner",on:{click:function(t){return t.stopPropagation(),e.globalEventActions(t)}}},[a("headerTopNav",{attrs:{saveStatus:e.saveStatus,crumbsTxt:e.crumbsTxt,pageType:1,navName:e.titleName},on:{quitSaveCaseInfo:e.quitSaveCaseInfo}}),e._v(" "),a("caseTopNav",{directives:[{name:"show",rawName:"v-show",value:!e.templateTopNav,expression:"!templateTopNav"}],ref:"topNavBar"}),e._v(" "),a("caseLeftNav",{directives:[{name:"show",rawName:"v-show",value:parseInt(e.navHeight,10),expression:"parseInt(navHeight,10)"}],style:[{top:e.navHeight+71+"px"}]}),e._v(" "),a("router-view",{style:[{paddingTop:e.checkNavHeight}]}),e._v(" "),0==e.layerIndex?a("MaskLayer",[a("section",[a("div",{staticClass:"close",on:{click:function(t){return t.stopPropagation(),e.hideLayer(t)}}},[a("i")]),e._v(" "),a("div",{staticClass:"text"},[a("i"),a("p",[a("span",[e._v("更换模板将清空全部病历内容，您确认更换么？")])])]),e._v(" "),a("div",{staticClass:"btn"},[a("a",{staticClass:"grey cancel",on:{click:function(t){return t.stopPropagation(),e.hideLayer(t)}}},[e._v("取消")]),e._v(" "),a("a",{staticClass:"grey red",on:{click:function(t){return t.stopPropagation(),e.changeTemplate(t)}}},[e._v("清空并更换")])])])]):e._e(),e._v(" "),1==e.layerIndex?a("MaskLayer",[a("section",[a("div",{staticClass:"close",on:{click:function(t){return t.stopPropagation(),e.hideLayer(t)}}},[a("i")]),e._v(" "),a("div",{staticClass:"text"},[a("i"),a("p",[a("span",[e._v("您要保存当前编辑的病历内容么？")])])]),e._v(" "),a("div",{staticClass:"btn"},[a("a",{staticClass:"grey cancel",on:{click:function(t){return t.stopPropagation(),e.closeLayer(t)}}},[e._v("不保存")]),e._v(" "),a("a",{staticClass:"blue",on:{click:function(t){return t.stopPropagation(),e.saveInfoQuite(t)}}},[e._v("保存")])])])]):e._e(),e._v(" "),2==e.layerIndex?a("MaskLayer",[a("section",[a("div",{staticClass:"close",on:{click:function(t){return t.stopPropagation(),e.reloadHref(t)}}},[a("i")]),e._v(" "),a("div",{staticClass:"text"},[a("i"),a("p",[a("span",[e._v("保存失败")]),a("span",[e._v("长期未保存，当前内容已过期失效请重新录入")])])]),e._v(" "),a("div",{staticClass:"btn"},[a("a",{staticClass:"blue",on:{click:function(t){return t.stopPropagation(),e.reloadHref(t)}}},[e._v("好的")])])])]):e._e(),e._v(" "),3==e.layerIndex?a("MaskLayer",[a("section",[a("div",{staticClass:"close",on:{click:function(t){return t.stopPropagation(),e.jumpSource(t)}}},[a("i")]),e._v(" "),a("div",{staticClass:"text"},[a("i"),a("p",[a("span",[e._v("当前病历正在团队其他成员编辑中\n                    请稍后再试")])])]),e._v(" "),a("div",{staticClass:"btn"},[a("a",{staticClass:"blue",on:{click:function(t){return t.stopPropagation(),e.jumpSource(t)}}},[e._v("知道了")])])])]):e._e(),e._v(" "),4==e.layerIndex?a("MaskLayer",[a("section",[a("div",{staticClass:"close",on:{click:function(t){return t.stopPropagation(),e.jumpSource(t)}}},[a("i")]),e._v(" "),a("div",{staticClass:"text"},[a("i"),a("p",[a("span",[e._v("检测异常退出，当前病历正在保护期请稍后再试\n                    请稍后再试")])])]),e._v(" "),a("div",{staticClass:"btn"},[a("a",{staticClass:"blue",on:{click:function(t){return t.stopPropagation(),e.jumpSource(t)}}},[e._v("知道了")])])])]):e._e(),e._v(" "),5==e.layerIndex?a("MaskLayer",[a("section",[a("div",{staticClass:"close",on:{click:function(t){return t.stopPropagation(),e.hideLayer(t)}}},[a("i")]),e._v(" "),a("div",{staticClass:"text"},[a("i"),a("p",[a("span",[e._v("您要保存当前编辑的病历内容么？")])])]),e._v(" "),a("div",{staticClass:"btn"},[a("a",{staticClass:"grey cancel",on:{click:function(t){return t.stopPropagation(),e.outSidePage(t)}}},[e._v("不保存")]),e._v(" "),a("a",{staticClass:"blue",on:{click:function(t){return t.stopPropagation(),e.changeTab(t)}}},[e._v("保存")])])])]):e._e(),e._v(" "),a("Loading",{directives:[{name:"show",rawName:"v-show",value:e.loadingOnOff,expression:"loadingOnOff"}]}),e._v(" "),a("ToastTip",{attrs:{text:e.toastText,showToast:e.toastState}})],1)},[],!1,null,null,null).exports),U={numberModuleCount:1,handleBaseOnOff:!1,num:0,doctorId:-1,selectIndexJson:{HandleId:0},CaseTemBelongType:0,pushTplate:!1,editType:-1,navHeight:43,CaseId:-1,CaseDataId:-1,changeTemplateIdType:"0",templateId:-1,pageIndex:-1,subIndex:-1,wantChangeIndex:-1,saveStatus:0,teamList:[],uploadState:{},editTypeNum:0,assistantDoctor:13===parseInt(I.a.cookie.get("customerRole")),customerName:decodeURI(I.a.cookie.get("customerName")),ownerCustomerId:0,templateAssemblePageOnOff:!1,teamCustomerId:0,toastText:"",toastState:!1,Relationship:{},tabList:[],tagIdList:"",tagIdSelectList:"",baseInfoTagIdSelectList:"",changePageOnOff:!1,isChangeOnOff:!1,isEmptyBase:!1,clickNum:0,teamId:-1,canSaveBaseData:{},copyModelData:{},layerIndex:-1,CaseBelongType:-1,changeTemplateIdOnOff:!1,imageErrorState:{},videoErrorState:{},temTeamData:{},numberList:{},numberTrigger:0,baseInfo:{},isOwner:!1,globalEvent:0,loadingOnOff:!1,subPageData:[],pageInfo:{pageId:"",pageName:"",pageData:Object},titleName:"填写患者基本信息"},q=function(){function e(t){L()(this,e),this.originalList=t.responseObject.responseData&&t.responseObject.responseData.data_list?JSON.parse(d()(t.responseObject.responseData.data_list)):[],this.tabId=t.responseObject.responseData.templateStructure.structureId}return w()(e,[{key:"randomNum",value:function(e,t){switch(arguments.length){case 1:return parseInt(Math.random()*e+1,10);case 2:return parseInt(Math.random()*(t-e+1)+e,10);default:return 0}}},{key:"correctOtherData",value:function(e){for(var t=JSON.parse(d()(e)),a=[],n={},s=0;s<t.length;s++){var i=t[s];"其他"===i.dictionaryName&&s!==t.length-1?n=i:a.push(i)}return I.a.isEmptyObject(n)||a.push(n),a}},{key:"formatData",value:function(e){var t,a,n=this,s=parseInt(e.commDataField.fieldType,10),i=e.commDataField&&e.commDataField.fieldId?parseInt(e.commDataField.fieldId,10):"",o={},r="",l="",d=0,c=!1,u=function(e){return"string"==typeof e&&0==e.length||void 0==e||"undefined"==e||"null"==e||void 0===e||"null"==typeof e||null==e};switch(t=e.caseFolderTemplate.isBothSides,a=e.caseFolderTemplate.sideType,e.caseFolderDetail&&e.caseFolderDetail.isValid?d=e.caseFolderDetail.isValid:e.caseFolderTemplate&&e.caseFolderTemplate.isValid&&(d=e.caseFolderTemplate.isValid),e.caseFolderDetail&&e.caseFolderDetail.detailId&&(r=e.caseFolderDetail.detailId),e.caseFolderDetail&&e.caseFolderDetail.groupId&&(l=e.caseFolderDetail.groupId),s){case 1:for(var p=[],m=-1,h=0;h<e.caseFolderTemplateScope.length;h++){var g=e.caseFolderTemplateScope[h];e.caseFolderDetail&&!I.a.isEmptyObject(e.caseFolderDetail)&&e.caseFolderDetail.content?g.dictionaryId==e.caseFolderDetail.content&&(m=h):e.caseFolderTemplate&&!I.a.isEmptyObject(e.caseFolderTemplate)&&e.caseFolderTemplate.defaultValue&&g.dictionaryId==e.caseFolderTemplate.defaultValue&&(m=h,c=!0);var f={radioName:g.dictionaryName,radioId:g.dictionaryId,relationId:[]};if(g.relationMap&&!I.a.isEmptyObject(g.relationMap)&&g.relationMap.length){f.associatedComponent={},f.relationId=[];for(var v=0;v<g.relationMap.length;v++){var C=Date.parse(new Date)+n.randomNum(10,1e3)+v;f.associatedComponent[C]=n.formatData(g.relationMap[v]),f.relationId.push(C)}}p.push(f)}o={componentId:e.caseFolderTemplate.structureId,componentType:"6",structureType:s,fieldId:i,isValid:d,parentId:n.tabId,detailId:r,groupId:l,reallyIsValid:e.reallyIsValid,isBothSides:t,sideType:a,labelName:e.caseFolderTemplate.structureName,isRequired:0,needInput:0,RadioList:p,index:m,defaultIndex:c?m:-1,testResult:-1};break;case 2:var b=[],y=-1,x="";e.caseFolderTemplateScope=n.correctOtherData(e.caseFolderTemplateScope);for(var S=0;S<e.caseFolderTemplateScope.length;S++){var T=e.caseFolderTemplateScope[S];e.caseFolderDetail&&!I.a.isEmptyObject(e.caseFolderDetail)&&e.caseFolderDetail.content?T.dictionaryId==e.caseFolderDetail.content&&(y=S):e.caseFolderTemplate&&!I.a.isEmptyObject(e.caseFolderTemplate)&&e.caseFolderTemplate.defaultValue&&T.dictionaryId==e.caseFolderTemplate.defaultValue&&(y=S,c=!0);var D={radioName:T.dictionaryName,radioId:T.dictionaryId,relationId:[]};if(T.relationMap&&!I.a.isEmptyObject(T.relationMap)&&T.relationMap.length){D.associatedComponent={},D.relationId=[];for(var _=0;_<T.relationMap.length;_++){var O=Date.parse(new Date)+n.randomNum(10,1e3)+_;D.associatedComponent[O]=n.formatData(T.relationMap[_]),D.relationId.push(O)}}S!=e.caseFolderTemplateScope.length-1&&(x="、"+T.dictionaryName,b.push(D))}y===e.caseFolderTemplateScope.length-1?(x=e.caseFolderDetail.otherContent,y=-2):x=e.caseFolderDetail&&e.caseFolderDetail.otherContent?e.caseFolderDetail.otherContent:"";var L="",k=e.caseFolderTemplateScope.length-1;e.caseFolderTemplateScope[k]&&e.caseFolderTemplateScope[k].dictionaryName&&(L=e.caseFolderTemplateScope[k].dictionaryName),o={componentId:e.caseFolderTemplate.structureId,componentType:"6",structureType:s,fieldId:i,isValid:d,parentId:n.tabId,isBothSides:t,sideType:a,otherRadioId:e.caseFolderTemplateScope.length>0?e.caseFolderTemplateScope[e.caseFolderTemplateScope.length-1].dictionaryId:"",detailId:r,groupId:l,reallyIsValid:e.reallyIsValid,labelName:e.caseFolderTemplate.structureName,isRequired:0,needInput:1,contentDes:u(x)?"":x,RadioList:b,index:y,defaultIndex:c?y:-1,placeholder:"请输入内容",otherLabel:L,testResult:-1};break;case 3:var w=[],N=[];e.caseFolderDetail&&!I.a.isEmptyObject(e.caseFolderDetail)&&e.caseFolderDetail.content?N=e.caseFolderDetail.content.split(","):e.caseFolderTemplate&&!I.a.isEmptyObject(e.caseFolderTemplate)&&e.caseFolderTemplate.defaultValue&&(c=!0,N=e.caseFolderTemplate.defaultValue.split(","));for(var P=0;P<e.caseFolderTemplateScope.length;P++){for(var R=e.caseFolderTemplateScope[P],j=!1,B=0;B<N.length;B++)R.dictionaryId==N[B]&&(j=!0);var F={checkboxName:R.dictionaryName,checkOnOff:j,checkboxId:R.dictionaryId};if(R.relationMap&&!I.a.isEmptyObject(R.relationMap)&&R.relationMap.length){F.associatedComponent={},F.relationId=[];for(var H=0;H<R.relationMap.length;H++){var E=Date.parse(new Date)+n.randomNum(10,1e3)+H;F.associatedComponent[E]=n.formatData(R.relationMap[H]),F.relationId.push(E)}}w.push(F)}o={componentId:e.caseFolderTemplate.structureId,componentType:"7",structureType:s,fieldId:i,isValid:d,parentId:n.tabId,detailId:r,groupId:l,reallyIsValid:e.reallyIsValid,labelName:e.caseFolderTemplate.structureName,isRequired:0,needInput:0,isBothSides:t,sideType:a,checkBoxList:w,defaultCheckBoxList:c?w:[],testResult:-1};break;case 4:var M=[],V=[],A=e.caseFolderDetail&&e.caseFolderDetail.otherContent?e.caseFolderDetail.otherContent:"";e.caseFolderDetail&&!I.a.isEmptyObject(e.caseFolderDetail)&&e.caseFolderDetail.content?V=e.caseFolderDetail.content.split(","):e.caseFolderTemplate&&!I.a.isEmptyObject(e.caseFolderTemplate)&&e.caseFolderTemplate.defaultValue&&(c=!0,V=e.caseFolderTemplate.defaultValue.split(","));var $=!1;e.caseFolderTemplateScope=n.correctOtherData(e.caseFolderTemplateScope);for(var U=0;U<e.caseFolderTemplateScope.length;U++){for(var q=e.caseFolderTemplateScope[U],J=!1,Y=0;Y<V.length;Y++)q.dictionaryId==V[Y]&&(J=!0,U==e.caseFolderTemplateScope.length-1&&0==A.length&&(A+="、"+q.dictionaryName));var z={checkboxName:q.dictionaryName,checkOnOff:J,checkboxId:q.dictionaryId};if(q.relationMap&&!I.a.isEmptyObject(q.relationMap)&&q.relationMap.length){z.associatedComponent={},z.relationId=[];for(var W=0;W<q.relationMap.length;W++){var G=Date.parse(new Date)+n.randomNum(10,1e3)+W;z.associatedComponent[G]=n.formatData(q.relationMap[W]),z.relationId.push(G)}}U!==e.caseFolderTemplateScope.length-1?M.push(z):$=J}var Z="",K=e.caseFolderTemplateScope.length-1;e.caseFolderTemplateScope[K]&&e.caseFolderTemplateScope[K].dictionaryName&&(Z=e.caseFolderTemplateScope[K].dictionaryName),o={componentId:e.caseFolderTemplate.structureId,componentType:"7",structureType:s,fieldId:i,isValid:d,parentId:n.tabId,detailId:r,groupId:l,reallyIsValid:e.reallyIsValid,otherCheckOnOff:$,otherCheckId:e.caseFolderTemplateScope.length>0?e.caseFolderTemplateScope[e.caseFolderTemplateScope.length-1].dictionaryId:"",labelName:e.caseFolderTemplate.structureName,isRequired:0,needInput:1,isBothSides:t,sideType:a,otherLabel:Z,contentDes:0===A.indexOf("、")?A.substring(1,1e5):A,checkBoxList:M,defaultCheckBoxList:c?M:[],placeholder:"请输入内容",testResult:-1};break;case 5:var X=[];e.caseFolderDetail&&!I.a.isEmptyObject(e.caseFolderDetail)&&e.caseFolderDetail.content?X=e.caseFolderDetail.content.split(","):e.caseFolderTemplate&&!I.a.isEmptyObject(e.caseFolderTemplate)&&e.caseFolderTemplate.defaultValue&&(c=!0,X=e.caseFolderTemplate.defaultValue.split(","));var Q=X[0]&&X[0].length>0&&1*X[0]+"">=0?X[0]:"",ee=X[1]&&X[1].length>0&&1*X[1]+"">=0?X[1]:"",te=X[2]&&X[2].length>0&&1*X[2]+"">=0?X[2]:"";o={componentId:e.caseFolderTemplate.structureId,componentType:"4",structureType:s,fieldId:i,isValid:d,parentId:n.tabId,detailId:r,groupId:l,reallyIsValid:e.reallyIsValid,labelName:e.caseFolderTemplate.structureName,isRequired:0,isBothSides:t,sideType:a,contentYear:Q,defaultContentYear:c?Q:"",contentMonth:ee,defaultContentMonth:c?ee:"",contentDay:te,defaultContentDay:c?te:"",testResult:-1};break;case 6:var ae=[];e.caseFolderDetail&&!I.a.isEmptyObject(e.caseFolderDetail)&&e.caseFolderDetail.content&&e.caseFolderDetail.content.length>0?ae=e.caseFolderDetail.content.split(","):e.caseFolderTemplate&&!I.a.isEmptyObject(e.caseFolderTemplate)&&e.caseFolderTemplate.defaultValue&&e.caseFolderTemplate.defaultValue.length>0&&(c=!0,ae=e.caseFolderTemplate.defaultValue.split(",")),o={componentId:e.caseFolderTemplate.structureId,componentType:"5",structureType:s,fieldId:i,isValid:d,parentId:n.tabId,detailId:r,groupId:l,reallyIsValid:e.reallyIsValid,labelName:e.caseFolderTemplate.structureName,isRequired:0,isBothSides:t,sideType:a,yearSelect:ae[0]?ae[0]:"",defaultYearSelect:c&&ae[0]?ae[0]:"",monthSelect:ae[1]?ae[1]:"",defaultMonthSelect:c&&ae[1]?ae[1]:"",daySelect:ae[2]?ae[2]:"",defaultDaySelect:c&&ae[2]?ae[2]:"",testResult:-1};break;case 7:var ne=[],se=-1;e.caseFolderDetail&&!I.a.isEmptyObject(e.caseFolderDetail)&&e.caseFolderDetail.content?ne=e.caseFolderDetail.content.split(","):e.caseFolderTemplate&&!I.a.isEmptyObject(e.caseFolderTemplate)&&e.caseFolderTemplate.defaultValue&&(c=!0,ne=e.caseFolderTemplate.defaultValue.split(",")),"月"==ne[1]&&(se=0),"周"==ne[1]&&(se=1),"天"==ne[1]&&(se=2),o={componentId:e.caseFolderTemplate.structureId,componentType:"3",structureType:s,fieldId:i,isValid:d,parentId:n.tabId,detailId:r,groupId:l,reallyIsValid:e.reallyIsValid,labelName:e.caseFolderTemplate.structureName,isRequired:0,isBothSides:t,sideType:a,contentDes:ne[0],defaultContentDes:c?ne[0]:"",InputSelectList:[{selectName:"月",testRule:"0,100"},{selectName:"周",testRule:"0,100"},{selectName:"天",testRule:"0,100"}],index:se,defaultIndex:c?se:-1,testResult:-1};break;case 8:var ie=e.commDataThreshold&&e.commDataThreshold.thresholdValue?e.commDataThreshold.thresholdValue.split(",")[1]:"",oe="",re="";e.caseFolderDetail&&!I.a.isEmptyObject(e.caseFolderDetail)&&e.caseFolderDetail.content?re=u(e.caseFolderDetail.content)?"":e.caseFolderDetail.content:e.caseFolderTemplate&&!I.a.isEmptyObject(e.caseFolderTemplate)&&e.caseFolderTemplate.defaultValue&&(c=!0,oe=u(e.caseFolderTemplate.defaultValue)?"":e.caseFolderTemplate.defaultValue),o=ie>50?{componentId:e.caseFolderTemplate.structureId,componentType:"8",structureType:s,fieldId:i,isValid:d,parentId:n.tabId,detailId:r,groupId:l,reallyIsValid:e.reallyIsValid,labelName:e.caseFolderTemplate.structureName,isRequired:0,isBothSides:t,sideType:a,contentDes:re,defaultContentDes:c?re:"",placeholder:oe.length?oe:"请输入内容",maxLen:ie,testRule:"",testResult:-1,titleDes:"",title:"",unitName:u(e.commDataThreshold.thresholdUnit)?"":e.commDataThreshold.thresholdUnit}:{componentId:e.caseFolderTemplate.structureId,componentType:"0",structureType:s,fieldId:i,isValid:d,parentId:n.tabId,detailId:r,groupId:l,reallyIsValid:e.reallyIsValid,labelName:e.caseFolderTemplate.structureName,isRequired:0,isBothSides:t,sideType:a,contentDes:re,defaultContentDes:c?re:"",placeholder:"请输入内容",maxLen:ie,testRule:"",testResult:-1,titleDes:re,title:"文本标题",unitName:u(e.commDataThreshold.thresholdUnit)?"":e.commDataThreshold.thresholdUnit};break;case 9:var le=e.commDataThreshold&&e.commDataThreshold.thresholdValue?e.commDataThreshold.thresholdValue.split(",")[1]:"",de="";e.caseFolderDetail&&!I.a.isEmptyObject(e.caseFolderDetail)&&e.caseFolderDetail.content?de=e.caseFolderDetail.content:e.caseFolderTemplate&&!I.a.isEmptyObject(e.caseFolderTemplate)&&e.caseFolderTemplate.defaultValue&&(c=!0,de=e.caseFolderTemplate.defaultValue),o={componentId:e.caseFolderTemplate.structureId,componentType:"0",structureType:s,fieldId:i,isValid:d,parentId:n.tabId,detailId:r,groupId:l,reallyIsValid:e.reallyIsValid,labelName:e.caseFolderTemplate.structureName,isRequired:0,isBothSides:t,sideType:a,placeholder:"",contentDes:de,defaultContentDes:c?de:"",maxLen:le,testRule:e.commDataThreshold.thresholdValue,unitName:u(e.commDataThreshold.thresholdUnit)?"":e.commDataThreshold.thresholdUnit,testResult:-1};break;case 10:var ce=[],ue=[];if(e.caseFolderDetail&&e.caseFolderDetail.attPicList)for(var pe=0;pe<e.caseFolderDetail.attPicList.length;pe++){var me=e.caseFolderDetail.attPicList[pe],he={imgSrc:me.attUrl,remarks:u(me.remarks)?"":me.remarks,id:me.id,index:""+pe};ce.push(he)}if(e.caseFolderDetail&&e.caseFolderDetail.attVideoList)for(var ge=0;ge<e.caseFolderDetail.attVideoList.length;ge++){var fe=e.caseFolderDetail.attVideoList[ge],Ie={imgSrc:fe.videoPicUrl.length?fe.videoPicUrl:"//img10.allinmd.cn/default/qiniu196_196.jpg",remarks:u(fe.remarks)?"":fe.remarks,videoPath:fe.videoPicUrl.length?fe.attUrl:"",id:fe.id,index:""+ge};ue.push(Ie)}var ve="";e.caseFolderDetail&&e.caseFolderDetail.content&&(ve=e.caseFolderDetail.content);var Ce=e.commDataThreshold&&e.commDataThreshold.thresholdValue?e.commDataThreshold.thresholdValue.split(",")[1]:"";o={detailId:r,CaseId:sessionStorage.getItem("emrNewCaseCaseId"),structureId:e.caseFolderTemplate.structureId,groupId:l,reallyIsValid:e.reallyIsValid,attPicList:ce,deleteAttPicList:[],attVideoList:ue,deleteAttVideoList:[],noteImgList:[],noteVideoList:[],componentId:e.caseFolderTemplate.structureId,componentType:"13",structureType:s,fieldId:i,isValid:d,parentId:n.tabId,labelName:e.caseFolderTemplate.structureName,isRequired:0,isBothSides:t,sideType:a,placeholder:"请输入内容",contentDes:ve,maxLen:Ce,testRule:e.commDataThreshold.thresholdValue,testResult:1}}return o}},{key:"combineData",value:function(e){var t={};return function e(a,n,s){var i=!1;for(var o in 0!==n&&(i=!0),n++,a){if(6==a[o].componentType||7==a[o].componentType){t[o]=a[o];var r=[];r=6==a[o].componentType?a[o].RadioList:a[o].checkBoxList;for(var l=0;l<r.length;l++){var d=r[l];d.associatedComponent&&!I.a.isEmptyObject(d.associatedComponent)&&e(d.associatedComponent,n,o)}}else t[o]=a[o];t[o].associatedRole=i,s>0&&(t[o].relatedParentId=s)}}(JSON.parse(d()(e)),0,0),t}},{key:"splitData",value:function(){for(var e=this,t=[],a=0;a<e.originalList.length;a++){for(var n={},s=e.originalList[a],i=0;i<s.length;i++){var o=s[i],r=0;!I.a.isEmptyObject(o.caseFolderDetail)&&(0==o.caseFolderDetail.isValid||1==o.caseFolderDetail.isValid)&&o.caseFolderDetail.content&&o.caseFolderDetail.content.length>0?r=o.caseFolderDetail.isValid:I.a.isEmptyObject(o.caseFolderTemplate)||0!=o.caseFolderTemplate.isValid&&1!=o.caseFolderTemplate.isValid||(r=o.caseFolderTemplate.isValid);var l=r+"";if(o.caseFolderTemplate.sideType.length>0&&(r=1),o.reallyIsValid=l,0!=r){var d=Date.parse(new Date)+parseInt(i+""+a,10),c=e.formatData(o);n[d]=c}}n=e.combineData(n),t.push(n)}return t}}]),e}(),J=function(){function e(t){L()(this,e),this.nowData=JSON.parse(d()(t.nowData)),this.lastData=JSON.parse(d()(t.lastData))}return w()(e,[{key:"comparisonChange",value:function(){var e=this,t=P()(e.nowData).length,a=0,n=function(e){return"string"==typeof e&&0==e.length||void 0==e||"undefined"==e||"null"==e||void 0===e||"null"==typeof e||null==e?"":e},s=function(e){return"string"==typeof e&&0==e.length||void 0==e||"undefined"==e||"null"==e||void 0===e||"null"==typeof e||null==e};for(var i in e.nowData){var o=e.nowData[i];switch(parseInt(o.componentType)){case 0:n(o.contentDes)==n(e.lastData[i].contentDes)&&a++;break;case 1:o.index==e.lastData[i].index&&a++;break;case 2:case 3:o.index==e.lastData[i].index&&n(o.contentDes)==n(e.lastData[i].contentDes)&&-1==o.defaultIndex&&s(o.defaultContentDes)&&a++;break;case 4:var r=function(e){return e+"".length>0?1*e+"":e},l=r(e.lastData[i].contentYear),d=r(e.lastData[i].contentMonth),c=r(e.lastData[i].contentDay);o.contentYear==l&&o.contentMonth==d&&o.contentDay==c&&s(o.defaultContentYear)&&s(o.defaultContentMonth)&&s(o.defaultContentDay)&&a++;break;case 5:o.yearSelect==e.lastData[i].yearSelect&&o.monthSelect==e.lastData[i].monthSelect&&o.daySelect==e.lastData[i].daySelect&&s(o.defaultYearSelect)&&s(o.defaultMonthSelect)&&s(o.defaultDaySelect)&&a++;break;case 6:o.index==e.lastData[i].index&&n(o.contentDes)==n(e.lastData[i].contentDes)&&-1==o.defaultIndex&&a++;break;case 7:for(var u=0,p=0,m=0;m<o.checkBoxList.length;m++)for(var h=0;h<e.lastData[i].checkBoxList.length;h++)o.checkBoxList[m].checkboxId==e.lastData[i].checkBoxList[h].checkboxId&&o.checkBoxList[m].checkOnOff===e.lastData[i].checkBoxList[h].checkOnOff&&u++;for(var g=0;g<o.defaultCheckBoxList.length;g++)o.defaultCheckBoxList[g].checkOnOff&&p++;u==o.checkBoxList.length&&n(o.contentDes)==n(e.lastData[i].contentDes)&&0==p&&o.otherCheckOnOff==e.lastData[i].otherCheckOnOff&&a++;break;case 8:n(o.contentDes)==n(e.lastData[i].contentDes)&&a++;break;case 13:var f=function(e,t){if(e.length===t.length){for(var a=0,n=0;n<e.length;n++)for(var s=0;s<t.length;s++)e[n].id==t[s].id&&a++;return a===e.length}return!1},I=function(e,t){if(e.length===t.length){for(var a=0,n=0;n<e.length;n++)for(var s=0;s<t.length;s++)e[n].id==t[s].id&&e[n].remarks==t[s].remarks&&a++;return a===e.length}return!1};e.deleteAttPicList||(e.deleteAttPicList=[]),e.deleteAttVideoList||(e.deleteAttVideoList=[]),f(o.attPicList,e.lastData[i].attPicList)&&f(o.attVideoList,e.lastData[i].attVideoList)&&f(o.noteImgList,e.lastData[i].noteImgList)&&f(o.noteVideoList,e.lastData[i].noteVideoList)&&n(o.contentDes)==n(e.lastData[i].contentDes)&&0==e.deleteAttPicList.length&&0==e.deleteAttVideoList.length&&I(o.attPicList,e.lastData[i].attPicList)&&I(o.noteImgList,e.lastData[i].noteImgList)&&I(o.noteVideoList,e.lastData[i].noteVideoList)&&I(o.attVideoList,e.lastData[i].attVideoList)&&a++}}return a===t}}]),e}(),Y=function(e){return"string"==typeof e&&0==e.length||void 0==e||"undefined"==e||"null"==e||void 0===e||"null"==typeof e||null==e},z=function(e){return e.replace(/(^\s*)|(\s*$)/g,"")},W={sendNum:function(e,t){e.num=t},saveNavTopHeight:function(e,t){e.navHeight=t},getBaseCaseInfo:function(e,t){e.loadingOnOff=!0,e.changeTemplateIdType=1,I.a.ajax2({type:"POST",url:"/call/caseFolder/baseinfo/getBaseinfoById/",data:{paramJson:d()({caseId:e.CaseId})},success:function(t){t.responseObject.responseStatus&&(e.loadingOnOff=!1),e.numberList={},e.templateId=t.responseObject&&t.responseObject.responseData&&t.responseObject.responseData.data_list?t.responseObject.responseData.data_list[0].templateId:e.templateId,e.CaseDataId=t.responseObject&&t.responseObject.responseData&&t.responseObject.responseData.data_list?t.responseObject.responseData.data_list[0].id:e.id,e.ownerCustomerId=t.responseObject&&t.responseObject.responseData&&t.responseObject.responseData.data_list?t.responseObject.responseData.data_list[0].customerId:e.customerId,e.doctorId=t.responseObject&&t.responseObject.responseData&&t.responseObject.responseData.data_list?t.responseObject.responseData.data_list[0].doctorId:e.doctorId,e.teamCustomerId=t.responseObject&&t.responseObject.responseData&&t.responseObject.responseData.data_list?t.responseObject.responseData.data_list[0].teamCustomerId:e.teamCustomerId,e.teamId=t.responseObject&&t.responseObject.responseData&&t.responseObject.responseData.data_list[0]?t.responseObject.responseData.data_list[0].teamId:e.teamId,e.CaseBelongType=t.responseObject&&t.responseObject.responseData&&t.responseObject.responseData.data_list[0]?t.responseObject.responseData.data_list[0].belongType:e.CaseBelongType,e.CaseTemBelongType=t.responseObject&&t.responseObject.responseData&&t.responseObject.responseData.data_list[0]?t.responseObject.responseData.data_list[0].belongType:e.CaseTemBelongType,e.baseInfo=t.responseObject&&t.responseObject.responseData&&t.responseObject.responseData.data_list?t.responseObject.responseData.data_list[0]:{}}})},emptyNumberList:function(e){e.numberModuleCount=1,e.numberList={}},saveEditType:function(e,t){e.editType=parseInt(t,10)},setTopNavTitle:function(e,t){e.titleName=t},saveCaseDataId:function(e,t){e.CaseDataId=t},saveCaseId:function(e,t){sessionStorage.removeItem("emrNewCaseCaseId"),sessionStorage.setItem("emrNewCaseCaseId",t),e.CaseId=t},saveTemplateId:function(e,t){e.templateId=t},showLayer:function(e,t){e.layerIndex=t},hideLayer:function(e){e.layerIndex=-1},saveAssembleData:function(e,t){e.loadingOnOff=!0,I.a.ajax2({url:"/call/caseFolder/case_folder_detail/createBatch/",type:"POST",data:{paramJson:d()(t.data)},success:function(a){a.responseObject.responseStatus&&(e.loadingOnOff=!1),t.callBack&&t.callBack(a)}})},changeUploadState:function(e,t){Y(t.HandleId)||(Y(e.uploadState[t.HandleId])?(e.uploadState[t.HandleId]={},e.uploadState[t.HandleId].status=t.status):e.uploadState[t.HandleId].status=t.status)},globalEventActions:function(e){e.globalEvent++},toast:function(e,t){e.toastState=!0,e.toastText=t,setTimeout(function(){e.toastState=!1},3e3)},changeIndex:function(e,t){var a=W,n=function(t){if(I.a.isEmptyObject(e[t]))return!1;var a=P()(e[t]).length,n=0;for(var s in e[t])e[t][s].status||n++;return!(n==a)};if(n("videoErrorState")||n("imageErrorState")){if(e.imageErrorState)return W.toast(e,"图片上传失败"),!1;if(e.videoErrorState)return W.toast(e,"视频上传失败"),!1}else{if(function(){var t=P()(e.uploadState).length,a=0;for(var n in e.uploadState)e.uploadState[n].status&&a++;return a==t}())if(isNaN(t.index)){if(e.changePageOnOff=a.examinePageData(e),W.clickChangeBtn(e),!a.examinePageData(e))return!1;if(W.filtrateBaseData(e),-1==e.pageIndex){var s="/call/caseFolder/baseinfo/create/";e.CaseId>0&&(s="/call/caseFolder/baseinfo/update/"),e.loadingOnOff=!0;var i=JSON.parse(d()(e.canSaveBaseData));i.lockedFlag=1,i.updateFlag=1,W.checkChangeState(e,0),e.isChangeOnOff?I.a.ajax2({url:"/call/caseFolder/baseinfo/update/",type:"POST",data:{paramJson:d()({customerId:I.a.cookie.get("userId"),caseId:e.CaseId,updateFlag:0,lockedFlag:1})},success:function(t){t&&t.responseObject&&t.responseObject.responseStatus&&(1302==t.responseObject.responseCode?e.layerIndex=2:1301==t.responseObject.responseCode||1303==t.responseObject.responseCode?e.layerIndex=3:0==t.responseObject.responseCode&&(W.changeBaseHandleType(e,!1),e.tagIdList="",e.CaseId>0?(a.saveBasePageInfo(e,i),e.templateId>0?e.pageIndex++:e.pushTplate=!0):a.saveBasePageInfo(e,i)))}}):I.a.ajax2({url:s,type:"POST",data:{paramJson:d()(i)},success:function(t){t.responseObject.responseStatus&&(e.loadingOnOff=!1),1302==t.responseObject.responseCode?e.layerIndex=2:1301==t.responseObject.responseCode||1303==t.responseObject.responseCode?e.layerIndex=3:0==t.responseObject.responseCode&&(e.tagIdList="",W.changeBaseHandleType(e,!0),e.CaseId>0?(e.changeTemplateIdType=1,e.templateId=t.responseObject&&t.responseObject.responseData&&t.responseObject.responseData.data_list?t.responseObject.responseData.templateId:e.templateId,e.CaseDataId=t.responseObject&&t.responseObject.responseData&&t.responseObject.responseData.data_list?t.responseObject.responseData.id:e.id,e.ownerCustomerId=t.responseObject&&t.responseObject.responseData&&t.responseObject.responseData.data_list?t.responseObject.responseData.customerId:e.customerId,e.doctorId=t.responseObject&&t.responseObject.responseData&&t.responseObject.responseData.data_list?t.responseObject.responseData.doctorId:e.doctorId,e.teamId=t.responseObject&&t.responseObject.responseData&&t.responseObject.responseData?t.responseObject.responseData.teamId:e.teamId,e.CaseBelongType=t.responseObject&&t.responseObject.responseData&&t.responseObject.responseData?t.responseObject.responseData.belongType:e.belongType,e.CaseTemBelongType=t.responseObject&&t.responseObject.responseData&&t.responseObject.responseData?t.responseObject.responseData.belongType:e.CaseTemBelongType,e.teamCustomerId=t.responseObject&&t.responseObject.responseData&&t.responseObject.responseData?t.responseObject.responseData.teamCustomerId:e.teamCustomerId,a.saveBasePageInfo(e,i),e.templateId>0?e.pageIndex++:e.pushTplate=!0):a.saveBasePageInfo(e,i))}})}else{var o=!1;t.pre&&parseInt(e.pageIndex,10)===e.tabList.length-1&&(o=!0);var r=new B(e.pageInfo.pageData);W.checkChangeState(e,1),e.isChangeOnOff?I.a.ajax2({url:"/call/caseFolder/baseinfo/update/",type:"POST",data:{paramJson:d()({customerId:I.a.cookie.get("userId"),caseId:e.CaseId,updateFlag:0,lockedFlag:o?0:1})},success:function(a){if(a&&a.responseObject&&a.responseObject.responseStatus)switch(W.hideLoading(e),parseInt(a.responseObject.responseCode)){case 0:W.changeHandleType(e,{index:e.pageIndex,onOff:!1}),t.pre?(parseInt(e.pageIndex,10)===e.tabList.length-1&&W.operationLog(e,3),parseInt(e.pageIndex,10)===e.tabList.length-1?window.location.href="/caseDetails/index.html?caseId="+e.CaseId+"&templateId="+e.templateId:e.pageIndex++):-1===parseInt(e.pageIndex,10)?e.pageIndex=-1:e.pageIndex--;break;case 1301:case 1303:e.layerIndex=3;break;case 1302:e.layerIndex=2}}}):W.saveAssembleData(e,{data:r.mergeData({quiteType:o?0:1}),callBack:function(a){1302==a.responseObject.responseCode?e.layerIndex=2:1301==a.responseObject.responseCode||1303==a.responseObject.responseCode?e.layerIndex=3:0==a.responseObject.responseCode&&a.responseObject.responseStatus&&(e.subPageData[e.subIndex]=JSON.parse(d()(e.pageInfo.pageData)),W.changeHandleType(e,{index:e.pageIndex,onOff:!0}),t.pre?(parseInt(e.pageIndex,10)===e.tabList.length-1&&W.operationLog(e,3),parseInt(e.pageIndex,10)===e.tabList.length-1?window.location.href="/caseDetails/index.html?caseId="+e.CaseId+"&templateId="+e.templateId:e.pageIndex++):-1===parseInt(e.pageIndex,10)?e.pageIndex=-1:e.pageIndex--)}})}}else e.pageIndex=t.index;else W.toast(e,"您有内容正在上传中，请稍后")}},templateIdType:function(e,t){e.changeTemplateIdType=t},saveTagId:function(e,t){0===t.length?e.tagIdList="":e.tagIdList+=","+t},changeTemplateId:function(e,t){e.changeTemplateIdOnOff=t},saveIndexSubPageData:function(e){e.subPageData[e.subIndex]=e.pageInfo.pageData},updateTagId:function(e,t){for(var a="",n=e.tagIdList.length>0?e.tagIdList.split(","):[],s=0;s<n.length;s++)n[s]&&n[s]!=t&&(a+=","+n[s]);e.tagIdList=a},savePageData:function(e,t){e.pageInfo.pageData=t},clickChangeBtn:function(e){e.clickNum++},wantChangePageIndex:function(e,t){e.wantChangeIndex=t},examineBasePageData:function(e){e.changePageOnOff=W.examinePageData(e)},examinePageData:function(e){var t=e.pageInfo.pageData,a=!0;for(var n in t){if(0===t[n].testResult){a=!1;break}switch(parseInt(t[n].componentType)){case 0:1===parseInt(t[n].isRequired,10)&&(a=!Y(t[n].contentDes));break;case 1:1===parseInt(t[n].isRequired,10)&&(a=!(-1===Number(t[n].index)));break;case 11:break;case 2:case 3:1===parseInt(t[n].isRequired,10)&&(a=!(-1===Number(t[n].index)&&0===t[n].contentDes.length));break;case 4:1===parseInt(t[n].isRequired,10)&&(a=!(0===t[n].contentYear.length&&0===t[n].contentMonth.length&&0===t[n].contentDay.length));break;case 5:1===parseInt(t[n].isRequired,10)&&(a=!(0===t[n].yearSelect.length&&0===t[n].monthSelect.length)&&0===t[n].daySelect.length);break;case 6:1===parseInt(t[n].isRequired,10)&&(a=1===parseInt(t[n].needInput,10)?0!==t[n].contentDes.length&&!(-1===Number(t[n].index)):!(-1===Number(t[n].index)));break;case 7:for(var s=0,i=0;i<t[n].checkBoxList.length;i++)t[n].checkBoxList[i].checkOnOff&&s++;1===parseInt(t[n].isRequired,10)&&(a=1===parseInt(t[n].needInput,10)?(!t[n].contentDes||0!==t[n].contentDes.length)&&!(0==s):!(0==s));break;case 8:1===parseInt(t[n].isRequired,10)&&(a=!(t[n].contentDes&&0===t[n].contentDes.length));break;case 12:1===parseInt(t[n].isRequired,10)&&((a=t[n].contentDes&&0==t[n].radioIndex)||t[n].contentDes&&1==t[n].radioIndex&&(a=t[n].contentDes&&t[n].selectIndex>=0))}if(!a)break}return e.changePageOnOff=a,a},saveBasePageInfo:function(e,t){e.baseInfo=t},showLoading:function(e){e.loadingOnOff=!0},hideLoading:function(e){e.loadingOnOff=!1},changeSaveStatus:function(e,t){e.saveStatus=t},saveBaseInfoTagIdSelectList:function(e,t){"clear"==t.type?(e.baseInfoTagIdSelectList="",e.tagIdSelectList=""):"add"==t.type&&(e.baseInfoTagIdSelectList.length>0?(e.baseInfoTagIdSelectList+=","+t.tagId,e.tagIdSelectList+=","+t.tagId):(e.baseInfoTagIdSelectList+=t.tagId,e.tagIdSelectList+=t.tagId))},saveTagIdSelectList:function(e,t){var a=e.tagIdSelectList.length>0?JSON.parse(d()(e.tagIdSelectList.split(","))):[];if("delete"===t.type){for(var n="",s=0;s<a.length;s++)a[s]!=t.tagId&&(0==n.length?n+=t.tagId:n+=","+t.tagId);e.tagIdSelectList=n}else e.tagIdSelectList.length>0?e.tagIdSelectList+=","+t.tagId:e.tagIdSelectList+=t.tagId},checkChangeBaseData:function(e){var t=e.pageInfo.pageData,a=e.baseInfo;W.filtrateBaseData(e);var n=e.canSaveBaseData,s=P()(e.pageInfo.pageData).length,i=0,o=0;for(var r in t){var l=!1;if("姓名"==t[r].labelName&&(l=n.patientName==a.patientName,Y(n.patientName)||o++),"年龄"==t[r].labelName){l=n.patientAge==a.patientAge;var d=n.patientAge.split(",");(parseInt(d[0])>0||parseInt(d[1])>0||parseInt(d[2])>0)&&o++}"性别"==t[r].labelName&&(l=n.patientSex==a.patientSex,!n.patientSex<0&&o++),"电话"==t[r].labelName&&(l=n.patientMobile==a.patientMobile,Y(n.patientMobile)||o++);var c=function(e,t){var n=parseInt(e.index+1),s=e.contentDes;return a.numberList&&a.numberList.length>0&&a.numberList[t]?n==a.numberList[t].numberType&&s==a.numberList[t].numberContent:Y(s)};if("编号1"==t[r].labelName&&(l=c(t[r],0),Y(n.numberContent)||o++),"编号2"==t[r].labelName&&(l=c(t[r],1),Y(n.numberContent)||o++),"编号3"==t[r].labelName&&(l=c(t[r],2),Y(n.numberContent)||o++),"编号4"==t[r].labelName&&(l=c(t[r],4),Y(n.numberContent)||o++),"编号5"==t[r].labelName&&(l=c(t[r],5),Y(n.numberContent)||o++),t[r].radioLabelName&&"归属"==t[r].radioLabelName&&(l=0==n.CaseTemBelongType?n.CaseTemBelongType==a.belongType:n.CaseTemBelongType==a.belongType&&n.teamId==a.teamId&&n.doctorId==a.doctorId,Y(n.teamId)||1!=n.belongType||Y(n.doctorId)||o++),11==t[r].componentType){var u;l=0===(u=e.tagIdList.substring(1,1e6).length>0?e.tagIdList.substring(1,1e6).split(","):[]).length&&!W.isTagChange(e),u.length>0&&o++}l&&i++}e.isEmptyBase=o>0,e.isChangeOnOff=i==s},isTagChange:function(e){var t=e.tagIdSelectList.length>0?e.tagIdSelectList.split(","):[],a=e.baseInfoTagIdSelectList.length>0?e.baseInfoTagIdSelectList.split(","):[];if(0!=t.length&&t.length!==a.length)return!0;if(0==t.length&&t.length==a.length)return!1;for(var n=0,s=0;s<t.length;s++){for(var i=!1,o=0;o<a.length;o++)t[s]==a[o]&&(i=!0);i&&n++}return!(n==a.length)},checkChangeState:function(e,t){if(0==t)W.checkChangeBaseData(e);else{var a=new J({nowData:e.pageInfo.pageData,lastData:e.subPageData[e.subIndex]});e.isChangeOnOff=a.comparisonChange()}},filtrateBaseData:function(e){var t=function(e){return parseInt(e)>10?e:"0"+parseInt(e,10)},a={caseId:e.CaseId>0?e.CaseId:"",patientName:"",patientAge:"",patientSex:"",patientMobile:"",numberType:"",numberContent:"",belongType:"",teamId:"",customerId:I.a.cookie.get("userId"),tagIdList:"",visitSiteId:"1",patientId:"",creatorId:I.a.cookie.get("userId"),doctorId:"",updateFlag:1},n=e.pageInfo.pageData,s=[];for(var i in n){if("姓名"==n[i].labelName&&(a.patientName=n[i].contentDes),"年龄"==n[i].labelName&&(n[i].contentYear.length>0&&0==n[i].contentYear&&n[i].contentMonth.length>0&&0==n[i].contentMonth&&Y(n[i].contentDay)&&(n[i].contentDay=1),a.patientAge=(n[i].contentYear?n[i].contentYear:"0")+","+(n[i].contentMonth?t(n[i].contentMonth):"00")+","+(n[i].contentDay?t(n[i].contentDay):"00")),"性别"==n[i].labelName&&(a.patientSex=n[i].index>0?0:1),"电话"==n[i].labelName&&(a.patientMobile=n[i].contentDes?n[i].contentDes:""),"编号1"==n[i].labelName&&(a.numberType=parseInt(n[i].index)+1,a.numberContent=n[i].contentDes),n[i].labelName.indexOf("编号")>-1&&!Y(z(n[i].contentDes))){var o={numberType:parseInt(n[i].index)+1,numberId:Y(n[i].numberId)?"":n[i].numberId,numberContent:z(n[i].contentDes)};s.push(o)}if(n[i].radioLabelName&&"归属"==n[i].radioLabelName&&(a.belongType=n[i].radioIndex,a.doctorId=n[i].doctorId,parseInt(n[i].selectIndex,10)>=0))for(var r=n[i].SelectList,l=0;l<r.length;l++)l==parseInt(n[i].selectIndex,10)&&0!=a.belongType&&(a.teamId=r[l].selectId);11==n[i].componentType&&(e.CaseId>0?a.tagIdList=e.tagIdList.substring(1,1e6):a.tagIdList=e.tagIdSelectList)}return a.numberList=s,e.canSaveBaseData=a,a},changeNumberModuleCount:function(e){e.numberModuleCount<6?e.numberModuleCount++:e.numberModuleCount=5},setNumberModuleCount:function(e,t){e.numberModuleCount=t},changeNumberTrigger:function(e){e.numberTrigger++},changeNumberList:function(e,t){e.numberList[t.HandleId]=t.componentData},changeComponentData:function(e,t){if(e.pageInfo&&e.pageInfo.pageData&&e.pageInfo.pageData[t.HandleId])switch(parseInt(e.pageInfo.pageData[t.HandleId].componentType,10)){case 0:case 8:e.pageInfo.pageData[t.HandleId].contentDes=t.contentDes;break;case 1:e.pageInfo.pageData[t.HandleId].index=t.index;break;case 2:e.pageInfo.pageData[t.HandleId].index=t.index,e.pageInfo.pageData[t.HandleId].contentDes=t.contentDes,!Y(e.pageInfo.pageData[t.HandleId].inBaseInfoPage)&&1===parseInt(e.pageInfo.pageData[t.HandleId].inBaseInfoPage,10)&&W.changeNumberList(e,{HandleId:t.HandleId,componentData:e.pageInfo.pageData[t.HandleId]});break;case 3:e.pageInfo.pageData[t.HandleId].index=t.index,e.pageInfo.pageData[t.HandleId].contentDes=t.contentDes;break;case 4:e.pageInfo.pageData[t.HandleId].contentYear=t.contentYear,e.pageInfo.pageData[t.HandleId].contentMonth=t.contentMonth,e.pageInfo.pageData[t.HandleId].contentDay=t.contentDay;break;case 5:e.pageInfo.pageData[t.HandleId].yearSelect=t.yearSelect,e.pageInfo.pageData[t.HandleId].monthSelect=t.monthSelect,e.pageInfo.pageData[t.HandleId].daySelect=t.daySelect;break;case 6:e.pageInfo.pageData[t.HandleId].index=t.index,e.pageInfo.pageData[t.HandleId].contentDes=t.contentDes;break;case 7:t.checkBoxList&&(e.pageInfo.pageData[t.HandleId].checkBoxList=t.checkBoxList),"boolean"==typeof t.otherCheckOnOff&&(e.pageInfo.pageData[t.HandleId].otherCheckOnOff=t.otherCheckOnOff),e.pageInfo.pageData[t.HandleId].contentDes=t.contentDes;break;case 11:t.contentTagList?e.pageInfo.pageData[t.HandleId].contentTagList=t.contentTagList:t.defaultTagList&&(e.pageInfo.pageData[t.HandleId].defaultTagList=t.defaultTagList);break;case 12:isNaN(t.doctorId)||(e.pageInfo.pageData[t.HandleId].doctorId=t.doctorId),isNaN(t.selectIndex)||(e.pageInfo.pageData[t.HandleId].selectIndex=t.selectIndex),isNaN(t.radioIndex)||(e.pageInfo.pageData[t.HandleId].radioIndex=t.radioIndex),t.SelectList&&(e.pageInfo.pageData[t.HandleId].SelectList=t.SelectList);break;case 13:var a=e.pageInfo.pageData[t.HandleId].attPicList,n=e.pageInfo.pageData[t.HandleId].attVideoList,s=(e.pageInfo.pageData[t.HandleId].noteImgList,e.pageInfo.pageData[t.HandleId].noteVideoList,{}),i=function(e){var t=JSON.parse(d()(e)),a=void 0,n={},s=[],i=t.length;if(i)for(a=0;a<i;a++)t[a]&&!n[t[a].id]&&(n[t[a].id]=1,s.push(t[a]));return s},o=function(e,t,a){var n=JSON.parse(d()(e)),o=[],r=[];if(a){for(var l=0;l<t.length;l++)n.push(t[l]);s={addData:n}}else{for(var c=0;c<n.length;c++){for(var u=!0,p=0;p<t.length;p++)parseInt(t[p].id,10)==parseInt(n[c].id,10)&&(u=!1,o.push(t[p]));u&&r.push(n[c])}s={addData:i(r),deleteData:o}}return s};parseInt(t.handleType,10)?1===parseInt(t.handleContent,10)?e.pageInfo.pageData[t.HandleId].attVideoList=i(o(n,t.handleList,1).addData):0===parseInt(t.handleContent,10)?e.pageInfo.pageData[t.HandleId].attPicList=i(o(a,t.handleList,1).addData):2===parseInt(t.handleContent,10)?e.pageInfo.pageData[t.HandleId].noteImgList=i(t.handleList):3===parseInt(t.handleContent,10)&&(e.pageInfo.pageData[t.HandleId].noteVideoList=i(t.handleList)):1===parseInt(t.handleContent,10)?(e.pageInfo.pageData[t.HandleId].attVideoList=i(o(n,t.handleList,0).addData),e.pageInfo.pageData[t.HandleId].deleteAttVideoList=i(e.pageInfo.pageData[t.HandleId].deleteAttVideoList.concat(o(n,t.handleList,0).deleteData))):0===parseInt(t.handleContent,10)&&(e.pageInfo.pageData[t.HandleId].attPicList=i(o(a,t.handleList,0).addData),e.pageInfo.pageData[t.HandleId].deleteAttPicList=i(e.pageInfo.pageData[t.HandleId].deleteAttPicList.concat(o(a,t.handleList,0).deleteData))),4===parseInt(t.handleContent,10)&&(e.pageInfo.pageData[t.HandleId].contentDes=t.contentDes);var r=function(e,t,a){for(var n=JSON.parse(d()(a)),s=0;s<n.length;s++)parseInt(n[s].id,10)===parseInt(e,10)&&(Y(n[s].remarks)?n[s].remarks=t:n[s].remarks!==t&&(n[s].remarks=t));return n};if(5===parseInt(t.handleContent,10)){var l=t.remarksJson;Y(l.noteid)?1===parseInt(l.attType)?e.pageInfo.pageData[t.HandleId].attPicList=r(l.id,l.val,e.pageInfo.pageData[t.HandleId].attPicList):e.pageInfo.pageData[t.HandleId].attVideoList=r(l.id,l.val,e.pageInfo.pageData[t.HandleId].attVideoList):1===parseInt(l.attType)?e.pageInfo.pageData[t.HandleId].noteImgList=r(l.id,l.val,e.pageInfo.pageData[t.HandleId].noteImgList):e.pageInfo.pageData[t.HandleId].noteVideoList=r(l.id,l.val,e.pageInfo.pageData[t.HandleId].noteVideoList)}}},changeTemTeam:function(e,t){e.temTeamData=t},getTeamList:function(e,t){I.a.ajax2({url:"/call/caseFolder/team_baseinfo/getMapListByCustomerId/",type:"POST",data:{paramJson:d()({customerId:I.a.cookie.get("userId"),doctorId:e.doctorId})},success:function(a){e.teamList=a.responseObject&&a.responseObject.responseData&&a.responseObject.responseData.data_list?a.responseObject.responseData.data_list:[],t&&t()}})},changeComponentTestResult:function(e,t){t.HandleId>0&&e.pageInfo.pageData[t.HandleId]&&(e.pageInfo.pageData[t.HandleId].testResult=t.testResult)},getTabList:function(e){I.a.ajax2({url:"/call/caseFolder/template_structure/getTemplateDataList/",type:"POST",data:{paramJson:d()({templateId:e.templateId,caseId:e.CaseId,visitSiteId:1,customerId:I.a.cookie.get("userId")})},success:function(t){if(t.responseObject&&t.responseObject.responseData&&t.responseObject.responseData.data_list){for(var a=t.responseObject.responseData.data_list[0],n=[],s=0;s<a.length;s++){var i=a[s].caseFolderTemplate,o={id:i.id,treeLevel:i.treeLevel,isAdd:i.isCopy,menuId:i.structureId,clinicalId:i.fullPath,menuName:i.structureName,handleOnOff:!1};n.push(o)}e.tabList=n}}})},changeHandleType:function(e,t){t.index>=0&&(e.tabList[t.index].handleOnOff=t.onOff)},addSubPage:function(e){var t=new R(e.pageInfo.pageData);W.examinePageData(e),e.clickNum++;var a=function(){e.subPageData[e.subIndex]=JSON.parse(d()(e.pageInfo.pageData));e.subPageData=function(e){for(var t=JSON.parse(d()(e)),a=[],n=0;n<t.length;n++)new R(t[n]).isEmpty()||a.push(t[n]);return a}(e.subPageData);var t=new q(e.copyModelData);W.addSubPageData(e,t.splitData()),e.subIndex==e.subPageData.length-1?e.subIndex=e.subPageData.length-1:e.subIndex++,setTimeout(function(){e.subIndex=0},100)};if(!t.isEmpty()&&e.changePageOnOff){W.checkChangeState(e,1);var n=new B(e.pageInfo.pageData);e.isChangeOnOff?I.a.ajax2({url:"/call/caseFolder/baseinfo/update/",type:"POST",data:{paramJson:d()({customerId:I.a.cookie.get("userId"),caseId:e.CaseId,updateFlag:0,lockedFlag:1})},success:function(t){if(t&&t.responseObject&&t.responseObject.responseStatus)switch(W.hideLoading(e),parseInt(t.responseObject.responseCode)){case 0:a();break;case 1301:case 1303:e.layerIndex=3;break;case 1302:e.layerIndex=2}}}):W.saveAssembleData(e,{data:n.mergeData({quiteType:1}),callBack:function(t){1302==t.responseObject.responseCode?e.layerIndex=2:1301==t.responseObject.responseCode||1303==t.responseObject.responseCode?e.layerIndex=3:0==t.responseObject.responseCode&&t.responseObject.responseStatus&&a()}})}},saveSubPageData:function(e,t){e.subPageData=t},saveCopyModelData:function(e,t){e.copyModelData=t},addSubPageData:function(e,t){e.subPageData=t.concat(e.subPageData)},initUploadState:function(e){e.imageErrorState={},e.videoErrorState={}},changeUploadError:function(e,t){"image"===t.type?Y(t.HandleId)||(Y(e.imageErrorState[t.HandleId])?(e.imageErrorState[t.HandleId]={type:"image"},e.imageErrorState[t.HandleId].status=t.status):e.imageErrorState[t.HandleId].status=t.status):Y(t.HandleId)||(Y(e.videoErrorState[t.HandleId])?(e.videoErrorState[t.HandleId]={type:"video"},e.videoErrorState[t.HandleId].status=t.status):e.videoErrorState[t.HandleId].status=t.status)},changeAssemblePage:function(e,t){e.templateAssemblePageOnOff=t},changeSubIndex:function(e,t){if(!(t.index<0))if(t.set)e.subPageData[e.subIndex]=JSON.parse(d()(e.pageInfo.pageData)),e.subIndex=t.index;else if(W.examinePageData(e),W.checkChangeState(e,1),e.clickNum++,e.changePageOnOff){var a=new B(e.pageInfo.pageData);e.isChangeOnOff?I.a.ajax2({url:"/call/caseFolder/baseinfo/update/",type:"POST",data:{paramJson:d()({customerId:I.a.cookie.get("userId"),caseId:e.CaseId,updateFlag:0,lockedFlag:1})},success:function(a){if(a&&a.responseObject&&a.responseObject.responseStatus)switch(W.hideLoading(e),parseInt(a.responseObject.responseCode)){case 0:e.subPageData[e.subIndex]=JSON.parse(d()(e.pageInfo.pageData)),e.subIndex=t.index;break;case 1301:case 1303:e.layerIndex=3;break;case 1302:e.layerIndex=2}}}):W.saveAssembleData(e,{data:a.mergeData({quiteType:1}),callBack:function(a){1302==a.responseObject.responseCode?e.layerIndex=2:1301==a.responseObject.responseCode||1303==a.responseObject.responseCode?e.layerIndex=3:0==a.responseObject.responseCode&&a.responseObject.responseStatus&&(e.subPageData[e.subIndex]=JSON.parse(d()(e.pageInfo.pageData)),e.subIndex=t.index)}})}},checkRelationship:function(e,t){e.Relationship=t},timingLog:function(e){setInterval(function(){W.operationLog(e)},18e5)},operationLog:function(e,t){if(!(e.CaseId<=0)){e.editTypeNum++;var a=1;if(1==e.editTypeNum&&0==e.editType)a=1;else if(e.CaseId>0)a=3;else{if(e.editTypeNum>1)return;a=1}var n="",s="";e.handleBaseOnOff&&(n+=" ",s+="基本信息");for(var i=0;i<e.tabList.length;i++){var o=e.tabList[i];o.handleOnOff&&(n+="；"+o.menuId,s+="；"+o.menuName)}if(3!=a||"基本信息"==s||n.length>0&&s.length>0){var r=function(e){return"；"===e[0]?e.substring(1,1e6):e},l={caseId:e.CaseId,customerId:I.a.cookie.get("userId"),structureId:r(n),structureName:r(s),customerName:localStorage.getItem("userName"),opType:a};I.a.ajax2({url:"/call/caseFolder/log_case_customerOperation/create/",type:"POST",data:{paramJson:d()(l)},success:function(t){if(t.responseObject.responseStatus){e.loadingOnOff=!1,e.handleBaseOnOff=!1;for(var a=0;a<e.tabList.length;a++){e.tabList[a].handleOnOff=!1}}}})}}},changeSelectIndexJson:function(e,t){e.selectIndexJson=t},changeCaseBelong:function(e,t){e.CaseTemBelongType=t},changeCaseBelongCid:function(e,t){e.ownerCustomerId=t},changeBaseHandleType:function(e,t){e.handleBaseOnOff=t},saveDoctorId:function(e,t){e.doctorId=t}},G=W,Z={sendNum:function(e,t){var a=e.commit;e.state,a("sendNum",t)},getBaseCaseInfo:function(e,t){var a=e.commit;e.state,a("getBaseCaseInfo")},setTopNavTitle:function(e,t){var a=e.commit;e.state,a("setTopNavTitle",t)},saveEditType:function(e,t){var a=e.commit;e.state,a("saveEditType",t)},saveNavTopHeight:function(e,t){var a=e.commit;e.state,a("saveNavTopHeight",t)},saveCaseId:function(e,t){var a=e.commit;e.state,a("saveCaseId",t)},addSubPage:function(e){var t=e.commit;e.state,t("addSubPage")},getTeamList:function(e,t){var a=e.commit;e.state,a("getTeamList",t)},changeComponentTestResult:function(e,t){var a=e.commit;e.state,a("changeComponentTestResult",t)},changeTemplateId:function(e,t){var a=e.commit;e.state,a("changeTemplateId",t)},changeBaseHandleType:function(e,t){var a=e.commit;e.state,a("changeBaseHandleType",t)},clickChangeBtn:function(e){var t=e.commit;e.state,t("clickChangeBtn")},initUploadState:function(e){var t=e.commit;e.state,t("initUploadState")},changeUploadError:function(e,t){var a=e.commit;e.state,a("changeUploadError",t)},saveTemplateId:function(e,t){var a=e.commit;e.state,a("saveTemplateId",t)},getTabList:function(e){var t=e.commit;e.state,t("getTabList")},changeHandleType:function(e,t){var a=e.commit;e.state,a("changeHandleType",t)},changeIndex:function(e,t){var a=e.commit;e.state,a("changeIndex",t)},saveBasePageInfo:function(e,t){var a=e.commit;e.state,a("saveBasePageInfo",t)},savePageData:function(e,t){var a=e.commit;e.state,a("savePageData",t)},saveSubPageData:function(e,t){var a=e.commit;e.state,a("saveSubPageData",t)},saveIndexSubPageData:function(e){var t=e.commit;e.state,t("saveIndexSubPageData")},saveCopyModelData:function(e,t){var a=e.commit;e.state,a("saveCopyModelData",t)},addSubPageData:function(e,t){var a=e.commit;e.state,a("addSubPageData",t)},changeSubIndex:function(e,t){var a=e.commit;e.state,a("changeSubIndex",t)},showLayer:function(e,t){var a=e.commit;e.state,a("showLayer",t)},hideLayer:function(e){var t=e.commit;e.state,t("hideLayer")},changeNumberModuleCount:function(e){var t=e.commit;e.state,t("changeNumberModuleCount")},setNumberModuleCount:function(e,t){var a=e.commit;e.state,a("setNumberModuleCount",t)},changeNumberList:function(e,t){var a=e.commit;e.state,a("changeNumberList",t)},changeComponentData:function(e,t){var a=e.commit;e.state,a("changeComponentData",t)},changeNumberTrigger:function(e){var t=e.commit;e.state,t("changeNumberTrigger")},emptyNumberList:function(e){var t=e.commit;e.state,t("emptyNumberList")},changeSelectIndexJson:function(e,t){var a=e.commit;e.state,a("changeSelectIndexJson",t)},saveTagId:function(e,t){var a=e.commit;e.state,a("saveTagId",t)},updateTagId:function(e,t){var a=e.commit;e.state,a("updateTagId",t)},wantChangePageIndex:function(e,t){var a=e.commit;e.state,a("wantChangePageIndex",t)},saveCaseDataId:function(e,t){var a=e.commit;e.state,a("saveCaseDataId",t)},examineBasePageData:function(e){var t=e.commit;e.state,t("examineBasePageData")},checkRelationship:function(e,t){var a=e.commit;e.state,a("checkRelationship",t)},filtrateBaseData:function(e,t){var a=e.commit;e.state,a("filtrateBaseData")},showLoading:function(e){var t=e.commit;e.state,t("showLoading")},hideLoading:function(e){var t=e.commit;e.state,t("hideLoading")},examinePageData:function(e){var t=e.commit;e.state,t("examinePageData")},saveDoctorId:function(e,t){var a=e.commit;e.state,a("saveDoctorId",t)},operationLog:function(e,t){var a=e.commit;e.state,a("operationLog",t)},globalEventActions:function(e){var t=e.commit;e.state,t("globalEventActions")},changeSaveStatus:function(e,t){var a=e.commit;e.state,a("changeSaveStatus",t)},checkChangeState:function(e,t){var a=e.commit;e.state,a("checkChangeState",t)},changeTemTeam:function(e,t){var a=e.commit;e.state,a("changeTemTeam",t)},changeUploadState:function(e,t){var a=e.commit;e.state,a("changeUploadState",t)},changeAssemblePage:function(e,t){var a=e.commit;e.state,a("changeAssemblePage",t)},toast:function(e,t){var a=e.commit;e.state,a("toast",t)},templateIdType:function(e,t){var a=e.commit;e.state,a("templateIdType",t)},changeCaseBelong:function(e,t){var a=e.commit;e.state,a("changeCaseBelong",t)},changeCaseBelongCid:function(e,t){var a=e.commit;e.state,a("changeCaseBelongCid",t)},saveTagIdSelectList:function(e,t){var a=e.commit;e.state,a("saveTagIdSelectList",t)},saveBaseInfoTagIdSelectList:function(e,t){var a=e.commit;e.state,a("saveBaseInfoTagIdSelectList",t)},timingLog:function(e){var t=e.commit;e.state,t("timingLog")}},K={num:function(e){return e.num},baseInfo:function(e){return e.baseInfo},titleName:function(e){return e.titleName},editType:function(e){return e.editType},navHeight:function(e){return e.navHeight},CaseId:function(e){return e.CaseId},CaseTemBelongType:function(e){return e.CaseTemBelongType},numberModuleCount:function(e){return e.numberModuleCount},numberList:function(e){return e.numberList},numberTrigger:function(e){return e.numberTrigger},selectIndexJson:function(e){return e.selectIndexJson},templateId:function(e){return e.templateId},tabList:function(e){return e.tabList},teamId:function(e){return e.teamId},changeTemplateIdOnOff:function(e){return e.changeTemplateIdOnOff},teamList:function(e){return e.teamList},pageIndex:function(e){return e.pageIndex},pageInfo:function(e){return e.pageInfo},subPageData:function(e){return e.subPageData},subIndex:function(e){return e.subIndex},changePageOnOff:function(e){return e.changePageOnOff},clickNum:function(e){return e.clickNum},copyModelData:function(e){return e.copyModelData},Relationship:function(e){return e.Relationship},layerIndex:function(e){return e.layerIndex},canSaveBaseData:function(e){return e.canSaveBaseData},CaseDataId:function(e){return e.CaseDataId},pushTplate:function(e){return e.pushTplate},globalEvent:function(e){return e.globalEvent},loadingOnOff:function(e){return e.loadingOnOff},wantChangeIndex:function(e){return e.wantChangeIndex},saveStatus:function(e){return e.saveStatus},isChangeOnOff:function(e){return e.isChangeOnOff},isOwner:function(e){return e.isOwner},uploadState:function(e){var t=P()(e.uploadState).length,a=0;for(var n in e.uploadState)e.uploadState[n].status&&a++;return a==t},toastText:function(e){return e.toastText},toastState:function(e){return e.toastState},ownerCustomerId:function(e){return e.ownerCustomerId},isEmptyBase:function(e){return e.isEmptyBase},teamCustomerId:function(e){return e.teamCustomerId},changeTemplateIdType:function(e){return e.changeTemplateIdType},CaseBelongType:function(e){return e.CaseBelongType},imageErrorState:function(e){if(I.a.isEmptyObject(e.imageErrorState))return!1;var t=P()(e.imageErrorState).length,a=0;for(var n in e.imageErrorState)e.imageErrorState[n].status||a++;return!(a==t)},videoErrorState:function(e){if(I.a.isEmptyObject(e.imageErrorState))return!1;var t=P()(e.videoErrorState).length,a=0;for(var n in e.videoErrorState)e.videoErrorState[n].status||a++;return!(a==t)},isTagChange:function(e){var t=e.tagIdSelectList.length>0?e.tagIdSelectList.split(","):[],a=e.baseInfoTagIdSelectList.length>0?e.baseInfoTagIdSelectList.split(","):[];if(0!=t.length&&t.length!==a.length)return!0;if(0==t.length&&t.length==a.length)return!1;for(var n=0,s=0;s<t.length;s++)for(var i=0;i<a.length;i++)t[s]==a[i]&&n++;return!(n==a.length)},templateAssemblePageOnOff:function(e){return e.templateAssemblePageOnOff},assistantDoctor:function(e){return e.assistantDoctor},customerName:function(e){return e.customerName},temTeamData:function(e){return e.temTeamData},doctorId:function(e){return e.doctorId}};i.default.use(v.a);var X=new v.a.Store({state:U,mutations:G,actions:Z,getters:K}),Q=a(97),ee=a(9),te={props:{SelectInputList:{type:String},reallyIsValid:{default:"1"},index:{default:"-1"},HandleId:{default:0},isRequired:{type:Boolean,default:!1},labelName:{type:String,default:""},contentDes:{type:String,default:""},relatedParentId:{default:0},associatedRole:{default:!1},placeholder:{type:String,default:""},addOnOff:{default:!1}},data:function(){return{mySelfIndex:0,repetitionError:!1,loadEnd:!1,selectOnOff:!1,inputContent:"",inputFocus:!1,inputStart:!1,selectIndex:-1,testRule:"",testDes:"",associatedState:!1,HandleParentId:"",inputError:!1}},computed:s()({},Object(v.c)(["globalEvent","pageInfo","numberList","numberTrigger","clickNum","selectIndexJson"]),{selectInputData:function(){return JSON.parse(this.SelectInputList)},selectContent:function(){var e=this;return parseInt(e.selectIndex,10)<0?"":e.selectInputData[e.selectIndex]&&e.selectInputData[e.selectIndex].selectName?e.selectInputData[e.selectIndex].selectName:""},passOnOff:function(){var e=this,t=1;if(e.checkMyHandleNumber())t=e.checkMyHandleNumber()?0:1;else{var a=e.trim(this.inputContent);t=this.testRule&&!ee.a[this.testRule](a)&&this.inputStart&&a.length>0?0:1}return t}}),watch:{globalEvent:function(e){this.selectOnOff=!1,this.checkInputStatus()},Relationship:function(e){var t=this;if(e.handleId==t.HandleParentId){for(var a=!1,n=0;n<e.relationId.length;n++)e.relationId[n]==t.HandleId&&(a=!0);t.associatedState=a}},clickNum:function(){this.changeNumberTrigger()},inputContent:function(e){var t=this;"testID"==t.testRule&&e.length>18&&(t.inputContent=t.inputContent.substring(0,18)),!t.inputStart&&(t.inputStart=!0),t.changeComponentData({HandleId:t.HandleId,index:t.selectIndex,contentDes:e}),t.changeComponentTestResult({HandleId:t.HandleId,testResult:t.passOnOff}),t.inputFocus||t.checkInputStatus()},selectIndexJson:function(e){var t=this;t.checkInvalid(d()(e))&&0!==parseInt(e.HandleId)&&e.HandleId!=t.HandleId&&(t.selectOnOff=!1)},numberTrigger:function(e){this.checkInputStatus()},index:function(e){this.selectIndex=e},contentDes:function(e){this.inputContent=this.checkInvalid(e)?e:""},selectIndex:function(e){var t=this;t.changeNumberTrigger(),t.changeComponentData({HandleId:t.HandleId,index:e,contentDes:t.inputContent}),t.testRule=t.selectInputData[e]&&t.selectInputData[e].testRule?t.selectInputData[e].testRule:"",t.changeComponentTestResult({HandleId:t.HandleId,testResult:t.passOnOff})},associatedRole:function(e){this.associatedState=!("true"==e)},associatedState:function(e){e||this.resetData()},relatedParentId:function(e){this.HandleParentId=e},inputError:function(e){this.ensureDes()},inputFocus:function(e){this.checkInputStatus(),e||this.changeNumberTrigger()}},methods:s()({},Object(v.b)(["changeComponentData","changeComponentTestResult","changeNumberTrigger","changeSelectIndexJson"]),{trim:function(e){return e.replace(/(^\s*)|(\s*$)/g,"")},checkMyHandleNumber:function(){var e=!1,t=this.checkNumberList();for(var a in t){var n=t[a];if(n.length>1)for(var s=0;s<n.length;s++)parseInt(this.HandleId,10)===parseInt(n[s].timestamp,10)&&(e=!0)}return e},ensureDes:function(){var e=this;e.inputError?e.checkMyHandleNumber()?e.testDes="编号字段重复请重新选择":e.testRule&&"testPhoneNum"==e.testRule?e.testDes="请输入正确的手机号码":e.testRule&&"testID"==e.testRule?e.testDes="请输入正确的身份证号":e.testRule&&"testNum"==e.testRule?e.testDes="请输入正确的"+e.selectContent:e.testDes="请勿包含数字或特殊字符":e.testDes=""},addSelectInput:function(){this.$emit("addSelectInputItem")},resetData:function(){this.selectIndex=-1,this.inputContent=""},toggleSelect:function(){var e=this;this.selectOnOff=!this.selectOnOff,e.selectOnOff&&e.changeSelectIndexJson({HandleId:e.HandleId})},ensureRelationship:function(){var e=this,t=this.pageInfo.pageData[e.HandleParentId];if(t&&t.checkBoxList){for(var a=t.checkBoxList,n=0;n<a.length;n++)if(a[n].checkOnOff&&a[n].relationId&&a[n].relationId.length>0)for(var s=0;s<a[n].relationId.length;s++)e.HandleId==a[n].relationId[s]&&(e.associatedState=!0)}else if(t&&t.RadioList){var i=t.RadioList,o=t.index;if(-1!=o&&i[o]&&i[o].relationId&&i[o].relationId.length>0)for(var r=0;r<i[o].relationId.length;r++)e.HandleId==i[o].relationId[r]&&(e.associatedState=!0)}},changeSelect:function(e){this.selectIndex=e,this.selectOnOff=!1},checkInvalid:function(e){return("string"!=typeof e||0!=e.length)&&void 0!=e&&"undefined"!=e&&"null"!=e&&void 0!==e&&"null"!=typeof e&&null!=e},checkNumberList:function(){var e=JSON.parse(d()(this.numberList)),t={};for(var a in e){var n=e[a];this.checkInvalid(n.contentDes)&&(t[n.index+""]?(n.timestamp=a,t[n.index+""].push(n)):(t[n.index+""]=[],n.timestamp=a,t[n.index+""].push(n))),0}return t},checkInputStatus:function(){var e=this,t=e.trim(this.inputContent);e.checkMyHandleNumber()?e.inputError=e.checkMyHandleNumber():e.inputError=this.testRule&&!ee.a[this.testRule](t)&&this.inputStart&&t.length>0,e.loadEnd=!0}}),updated:function(){var e=this;e.inputFocus||(e.checkInputStatus(),e.changeNumberTrigger()),e.changeComponentTestResult({HandleId:e.HandleId,testResult:e.passOnOff}),e.ensureDes()},mounted:function(){this.selectIndex=this.index,this.inputContent=this.checkInvalid(this.contentDes)?this.contentDes:"",this.associatedState=!("true"==this.associatedRole),this.HandleParentId=this.relatedParentId,this.ensureRelationship()}},ae=(a(304),Object(b.a)(te,function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{directives:[{name:"show",rawName:"v-show",value:e.associatedState,expression:"associatedState"}],staticClass:"formNumber formCommon",style:{visibility:0===parseInt(e.reallyIsValid,10)?"hidden":""}},[a("p",{staticClass:"articleText",class:{errorText:e.checkMyHandleNumber()?!e.checkMyHandleNumber():e.inputError&&e.loadEnd}},[e.isRequired?a("i",[e._v("*")]):e._e(),e._v(e._s(e.labelName))]),e._v(" "),a("div",{staticClass:"selectCont selectContChange",class:{selectContError:e.testDes.length>0},on:{click:function(t){return t.stopPropagation(),e.toggleSelect(t)}}},[a("span",{staticClass:"formInputSelectItem",domProps:{textContent:e._s(e.selectContent.length?e.selectContent:"请选择")}}),e._v(" "),a("ul",{directives:[{name:"show",rawName:"v-show",value:e.selectOnOff,expression:"selectOnOff"}],staticClass:"selectOption"},e._l(e.selectInputData,function(t,n){return a("li",{key:n,staticClass:"formInputSelectItem",domProps:{textContent:e._s(t&&t.selectName?t.selectName:"")},on:{click:function(t){t.stopPropagation(),e.changeSelect(n)}}})}))]),e._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:e.inputContent,expression:"inputContent"}],staticClass:"inputCont inputContChange",class:{error:e.checkMyHandleNumber()?!e.checkMyHandleNumber():e.inputError&&e.loadEnd,focusBorder:e.inputFocus},attrs:{type:"text",placeholder:"请输入"},domProps:{value:e.inputContent},on:{focus:function(t){t.stopPropagation(),e.inputFocus=!0},blur:function(t){t.stopPropagation(),e.inputFocus=!1},input:function(t){t.target.composing||(e.inputContent=t.target.value)}}}),e._v(" "),e.addOnOff?a("div",{staticClass:"formInputAdd",on:{click:function(t){return t.stopPropagation(),e.addSelectInput(t)}}}):e._e(),e._v(" "),a("p",{staticClass:"formError",domProps:{textContent:e._s(e.testDes)}})])},[],!1,null,null,null).exports),ne=a(6),se={props:{RadioList:{type:String},SelectList:{type:String},radioIndex:{default:"-1"},selectIndex:{default:"0"},HandleId:{default:0},isRequired:{type:Boolean,default:!1},radioLabelName:{type:String,default:""},selectLabelName:{type:String,default:""},selectSecondLabelName:{type:String,default:""}},data:function(){return{cid:I.a.cookie.get("userId"),rIndex:-1,sIndex:0,sMIndex:0,testDes:"",testSecondDes:"",selectOnOff:!1,selectSecondOnOff:!1,selectData:[],hoverContent:"",hoverSecondContent:"",radioListDemo:[],associatedState:!1,HandleParentId:"",teamMember:[],handlerOnOff:!0,loadOnOff:!1,dId:(I.a.getParamFromUrl(document.URL,"doctorId")||"0").replace(/[^0-9]/gi,"")}},computed:s()({},Object(v.c)(["clickNum","globalEvent","teamId","teamList","CaseBelongType","assistantDoctor","customerName","temTeamData","doctorId","teamCustomerId","CaseId"]),{selectContent:function(){var e=this;return parseInt(e.sIndex,10)>=0&&e.selectData.length>0?(parseInt(e.sIndex,10)>=0&&I.a.ajax2({url:"/call/caseFolder/team_member/getDoctorListByTeamId/",type:"POST",data:{paramJson:d()({customerId:I.a.cookie.get("userId"),teamId:e.selectData[e.sIndex].selectId})},success:function(t){e.teamMember=t.responseObject.responseData.data_list,e.checkSmIndex()}}),parseInt(e.sIndex,10)<0?"":e.selectData[e.sIndex]&&e.selectData[e.sIndex].selectName?e.selectData[e.sIndex].selectName:""):""},selectSecondContent:function(){var e=this;return e.assistantDoctor?parseInt(e.sMIndex,10)>=0&&e.teamMember.length>0?(e.changeComponentData({HandleId:e.HandleId,radioIndex:e.rIndex,SelectList:e.selectData,selectIndex:e.sIndex,doctorId:e.teamMember[e.sMIndex].customerId}),parseInt(e.sMIndex,10)<0?"":e.teamMember[e.sMIndex]&&e.teamMember[e.sMIndex].customerName?e.teamMember[e.sMIndex].customerName:""):"":(parseInt(e.rIndex,10)&&(e.changeComponentData({HandleId:e.HandleId,radioIndex:e.rIndex,SelectList:e.selectData,selectIndex:e.sIndex,doctorId:I.a.cookie.get("userId")}),parseInt(e.sIndex,10)>=0&&e.changeComponentTestResult({HandleId:e.HandleId,testResult:1})),e.customerName)},teamUnAble:function(){return 0==this.rIndex&&0==this.selectData.length}}),methods:s()({},Object(v.b)(["changeComponentData","changeComponentTestResult","getTeamList","changeCaseBelong","changeCaseBelongCid","changeTemTeam","saveDoctorId"]),{sureHandler:function(){this.assistantDoctor||parseInt(this.teamCustomerId,10)!==parseInt(this.cid,10)&&parseInt(this.CaseId,10)>1e3&&1===parseInt(this.CaseBelongType,10)&&(this.handlerOnOff=!1)},toggleSelect:function(){this.selectOnOff=!this.selectOnOff},toggleSecondSelect:function(){this.selectSecondOnOff=!this.selectSecondOnOff},selectRadio:function(e){var t=this;t.assistantDoctor||(t.rIndex=0==e?1:0)},changeSelect:function(e){this.sIndex=e,this.selectOnOff=!1},changeSecondSelect:function(e){this.sMIndex=e,this.selectSecondOnOff=!1},checkStatus:function(){var e=this;1==e.rIndex&&e.sIndex<0?e.testDes="请输入归属团队":e.testDes=""},checkSecondStatus:function(){var e=this;parseInt(e.doctorId,10)<=0&&e.checkInvalid(e.selectSecondContent)?e.testSecondDes="请输入主管医生":e.testSecondDes=""},hoverStart:function(e,t){var a=this;ne(".lookMore").css({top:ne(e.target).offset().top-ne(a.$refs.selectBar).offset().top-13+"px"}),I.a.getByteLen(t)>58?a.hoverContent=t:a.hoverContent=""},hoverSecondStart:function(e,t){var a=this;ne(".lookSecondMore").css({top:ne(e.target).offset().top-ne(a.$refs.selectBar).offset().top-13+"px"}),I.a.getByteLen(t)>58?a.hoverSecondContent=t:a.hoverSecondContent=""},hoverEnd:function(){this.hoverContent=""},hoverSecondEnd:function(){this.hoverSecondContent=""},checkSmIndex:function(){for(var e=this,t=0;t<e.teamMember.length;t++)e.teamMember[t].customerId==e.doctorId&&(e.sMIndex=t)},checkInvalid:function(e){return"string"==typeof e&&0==e.length||void 0==e||"undefined"==e||"null"==e||void 0===e||"null"==typeof e||null==e}}),watch:{sMIndex:function(e){var t=this;t.HandleId&&e>=0&&t.changeComponentData({HandleId:t.HandleId,radioIndex:e,SelectList:t.selectData,selectIndex:t.sIndex,doctorId:t.teamMember[e].customerId})},doctorId:function(e){var t=this;0===parseInt(e,10)&&t.changeComponentTestResult({HandleId:t.HandleId,testResult:0}),t.checkSmIndex()},temTeamData:function(e){e&&this.checkInvalid(e.teamId)},rIndex:function(e){var t=this;t.HandleId&&(t.changeComponentData({HandleId:t.HandleId,radioIndex:e,SelectList:t.selectData,selectIndex:t.sIndex}),0==e?(t.changeComponentTestResult({HandleId:t.HandleId,testResult:1}),t.changeComponentData({HandleId:t.HandleId,radioIndex:t.rIndex,SelectList:t.selectData,selectIndex:t.sIndex,doctorId:""})):(1==e&&t.sIndex<0||1==e&&parseInt(t.doctorId,10)<=0)&&t.changeComponentTestResult({HandleId:t.HandleId,testResult:0}),t.changeCaseBelong(e))},CaseBelongType:function(e){var t=this;0===parseInt(e,10)?t.changeCaseBelongCid(I.a.cookie.get("userId")):t.changeTemTeam(t.teamList[0])},teamId:function(e){for(var t=this,a=0;a<t.teamList.length;a++)e==t.teamList[a].teamId&&(t.sIndex=a)},teamList:function(e){for(var t=0;t<e.length;t++)this.teamId==e[t].teamId&&(this.sIndex=t)},RadioList:function(e){this.radioListDemo=JSON.parse(e)},selectIndex:function(e){this.sIndex=e},clickNum:function(e){this.checkStatus(),this.checkSecondStatus()},sIndex:function(e){var t=this;t.changeTemTeam(t.teamList[e]),t.checkStatus(),t.checkSecondStatus(),t.changeComponentData({HandleId:t.HandleId,selectIndex:e,SelectList:t.selectData}),e>=0&&t.changeComponentTestResult({HandleId:t.HandleId,testResult:1})},SelectList:function(e){this.selectData=JSON.parse(e)},selectData:function(e){var t=this;t.changeComponentData({HandleId:t.HandleId,SelectList:e,selectIndex:t.sIndex})},radioIndex:function(e){this.rIndex=e},globalEvent:function(e){this.selectOnOff=!1}},updated:function(){var e=this;e.checkStatus(),e.sureHandler(),e.checkSecondStatus();var t=ne(".lookMore");t.css({top:parseInt(t.css("top"))-ne(e.$refs.hoverContent).height()/2-2})},mounted:function(){var e=this;parseInt(e.dId,10)?e.saveDoctorId(parseInt(e.dId,10)):e.saveDoctorId(""),e.getTeamList(function(){e.loadOnOff=!0}),e.radioListDemo=JSON.parse(e.RadioList),e.selectData=JSON.parse(e.SelectList),e.sIndex=e.selectIndex,e.rIndex=e.radioIndex,setTimeout(function(){0===e.selectData.length&&(e.sIndex=-1)},300)}},ie=Object(b.a)(se,function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("section",[a("div",{directives:[{name:"show",rawName:"v-show",value:e.handlerOnOff,expression:"handlerOnOff"}],staticClass:"formRadio formCommon formRadioFocus",class:{formRow:e.radioListDemo.length>2}},[a("p",{staticClass:"articleText"},[e.isRequired?a("i",[e._v("*")]):e._e(),e._v(e._s(e.radioLabelName))]),e._v(" "),a("div",{staticClass:"radioRight"},e._l(e.radioListDemo,function(t,n){return a("div",{key:n,staticClass:"radioIconNormal",class:{active:n!=e.rIndex},on:{click:function(t){(0!=n||!e.teamUnAble)&&e.selectRadio(n)}}},[a("i"),a("span",{style:{color:0==n&&e.teamUnAble?"#bbb":""},domProps:{textContent:e._s(t.radioName)}})])}))]),e._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:e.rIndex>0&&e.handlerOnOff,expression:"(rIndex>0)&&handlerOnOff"}],staticClass:"formSelect formCommon"},[a("p",{staticClass:"articleText"},[a("i",[e._v("*")]),e._v(e._s(e.selectLabelName))]),e._v(" "),a("div",{ref:"selectBar",staticClass:"selectCont",on:{click:function(t){return t.stopPropagation(),e.toggleSelect(t)}}},[a("span",{staticClass:"formSelectItem",domProps:{textContent:e._s(e.selectContent.length?e.selectContent:"请选择")}}),e._v(" "),a("section",{directives:[{name:"show",rawName:"v-show",value:e.hoverContent.length,expression:"hoverContent.length"}],ref:"hoverContent",staticClass:"lookMore",domProps:{textContent:e._s(e.hoverContent)}}),e._v(" "),a("ul",{directives:[{name:"show",rawName:"v-show",value:e.selectOnOff,expression:"selectOnOff"}],staticClass:"selectOption"},e._l(e.selectData,function(t,n){return a("li",{key:n,domProps:{textContent:e._s(t.selectName)},on:{click:function(t){t.stopPropagation(),e.changeSelect(n)},mouseover:function(a){e.hoverStart(a,t.selectName)},mouseout:e.hoverEnd}})}))]),e._v(" "),a("p",{directives:[{name:"show",rawName:"v-show",value:e.loadOnOff,expression:"loadOnOff"}],staticClass:"formError",domProps:{textContent:e._s(e.testDes)}})]),e._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:e.rIndex>0,expression:"rIndex>0"}],staticClass:"formSelect formCommon"},[a("p",{staticClass:"articleText"},[a("i",[e._v("*")]),e._v(e._s(e.selectSecondLabelName))]),e._v(" "),a("div",{ref:"selectBar",staticClass:"selectCont",on:{click:function(t){return t.stopPropagation(),e.toggleSecondSelect(t)}}},[a("span",{staticClass:"formSelectItem",domProps:{textContent:e._s(e.selectSecondContent.length?e.selectSecondContent:"请选择")}}),e._v(" "),a("section",{directives:[{name:"show",rawName:"v-show",value:e.hoverSecondContent.length,expression:"hoverSecondContent.length"}],ref:"hoverSecondContent",staticClass:"lookMore lookSecondMore",domProps:{textContent:e._s(e.hoverSecondContent)}}),e._v(" "),a("ul",{directives:[{name:"show",rawName:"v-show",value:e.selectSecondOnOff&&e.assistantDoctor&&e.handlerOnOff,expression:"selectSecondOnOff&&assistantDoctor&&handlerOnOff"}],staticClass:"selectOption"},e._l(e.teamMember,function(t,n){return a("li",{key:n,domProps:{textContent:e._s(t.customerName)},on:{click:function(t){t.stopPropagation(),e.changeSecondSelect(n)},mouseover:function(a){e.hoverSecondStart(a,t.customerName)},mouseout:e.hoverSecondEnd}})}))]),e._v(" "),a("p",{staticClass:"formError",domProps:{textContent:e._s(e.testSecondDes)}})])])},[],!1,null,null,null).exports,oe={props:{maxLen:{default:""},reallyIsValid:{default:"1"},HandleId:{default:0},contentDes:{type:String,default:""},isBothSides:{default:0},sideType:{default:1},isRequired:{type:Boolean,default:!1},testRule:{type:String,default:""},labelName:{type:String,default:""},unitName:{type:String,default:""},relatedParentId:{default:0},associatedRole:{default:!1},placeholder:{type:String,default:""}},data:function(){return{inputFocusTime:0,inputStart:!1,inputFocus:!1,inputContent:"",associatedState:!1,HandleParentId:"",inputError:!0,loadEnd:!1}},created:function(){this.inputContent=this.contentDes&&"string"==typeof this.contentDes&&this.contentDes.length>0?this.contentDes:"",this.associatedState=!("true"==this.associatedRole),this.HandleParentId=this.relatedParentId,this.ensureRelationship()},methods:s()({},Object(v.b)(["setTopNavTitle","changeComponentData","changeComponentTestResult"]),{resetData:function(){this.inputContent=""},checkInputStatus:function(){var e=this;if(this.testRule.indexOf(",")>-1){var t=this.testRule.split(","),a=t[0],n=t[1];e.inputError=this.testRule&&!(1*this.inputContent>=a&&1*this.inputContent<=n)&&this.inputStart&&this.inputContent.length>0}else e.inputError=this.testRule&&!ee.a[this.testRule](this.inputContent)&&this.inputStart&&this.inputContent.length>0;e.loadEnd=!0},ensureRelationship:function(){var e=this,t=this.pageInfo.pageData[e.HandleParentId];if(t&&t.checkBoxList){for(var a=t.checkBoxList,n=0;n<a.length;n++)if(a[n].checkOnOff&&a[n].relationId&&a[n].relationId.length>0)for(var s=0;s<a[n].relationId.length;s++)e.HandleId==a[n].relationId[s]&&(e.associatedState=!0)}else if(t&&t.RadioList){var i=t.RadioList,o=t.index;if(-1!=o&&i[o]&&i[o].relationId&&i[o].relationId.length>0)for(var r=0;r<i[o].relationId.length;r++)e.HandleId==i[o].relationId[r]&&(e.associatedState=!0)}}}),computed:s()({},Object(v.c)(["titleName","changePageOnOff","Relationship","clickNum","pageInfo"]),{passOnOff:function(){var e=!1;if(0===this.inputContent.length)return 0;if(this.testRule.indexOf(",")>-1){var t=this.testRule.split(","),a=t[0],n=t[1];e=this.testRule&&!(1*this.inputContent>=a&&1*this.inputContent<=n)&&this.inputStart&&this.inputContent.length>0}else e=this.testRule&&!ee.a[this.testRule](this.inputContent)&&this.inputStart&&this.inputContent.length>0;return e?0:1},testDes:function(){var e=this,t="";if(e.loadEnd)if(e.inputError)if(e.testRule&&"testPhoneNum"==e.testRule)t="请输入正确的手机号码";else if(e.testRule&&"testID"==e.testRule)t="请输入正确的身份证号";else if(e.testRule.indexOf(",")>-1){var a=this.testRule.split(","),n=a[0],s=a[1];t=ee.a.decimals(e.inputContent)||ee.a.testNum(e.inputContent)||ee.a.minus(e.inputContent)?"请输入"+n+"-"+s+"之间的数字":"请输入正确的"+e.labelName}else t=e.testRule&&"testName"==e.testRule?"请勿包含数字或特殊字符":(e.testRule.indexOf(","),"请勿包含数字或特殊字符");else 0===e.inputContent.length?1==e.isRequired&&(t="请输入"+e.labelName):t="";return t}}),watch:{Relationship:function(e){var t=this;if(e.handleId==t.HandleParentId){for(var a=!1,n=0;n<e.relationId.length;n++)e.relationId[n]==t.HandleId&&(a=!0);t.associatedState=a}},associatedState:function(e){e||this.resetData()},inputContent:function(e){var t=this;!t.inputStart&&(t.inputStart=!0),e.length>t.maxLen&&t.maxLen&&(t.inputContent=t.inputContent.substring(0,t.maxLen)),t.changeComponentData({HandleId:t.HandleId,contentDes:e}),t.changeComponentTestResult({HandleId:t.HandleId,testResult:t.passOnOff}),t.inputFocus||t.checkInputStatus(),0===e.length&&t.changeComponentTestResult({HandleId:t.HandleId,testResult:-1})},contentDes:function(e){this.inputContent=e&&"string"==typeof e&&e.length>0?e:""},passOnOff:function(e){},associatedRole:function(e){this.associatedState=!("true"==e)},relatedParentId:function(e){this.HandleParentId=e},clickNum:function(e){var t=this;t.isRequired&&0==t.inputContent.length&&t.checkInputStatus()},testDes:function(e){},inputError:function(e){},inputFocus:function(e){var t=this;e||t.checkInputStatus(),e&&t.inputFocusTime++,1==t.inputFocusTime&&0==t.inputContent.length&&t.placeholder.length>0&&-1==t.placeholder.indexOf("请输入")&&(t.inputContent=t.placeholder)}}},re=(a(302),Object(b.a)(oe,function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{directives:[{name:"show",rawName:"v-show",value:e.associatedState,expression:"associatedState"}],staticClass:"formInput formCommon",class:{formInput112:e.unitName,formContentLr:1==e.isBothSides},style:{visibility:0===parseInt(e.reallyIsValid,10)?"hidden":""}},[a("p",{directives:[{name:"show",rawName:"v-show",value:2!=e.sideType,expression:"sideType!=2"}],staticClass:"articleText",class:{errorText:e.inputError&&e.loadEnd}},[e.isRequired?a("i",[e._v("*")]):e._e(),e._v(e._s(e.labelName))]),e._v(" "),a("div",{staticClass:"inputCont",class:{error:e.inputError&&e.loadEnd,focusBorder:e.inputFocus}},[a("span",{staticClass:"formSelectIcon",domProps:{textContent:e._s(1==e.sideType?"L":"R")}}),e._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:e.inputContent,expression:"inputContent"}],attrs:{type:"text",placeholder:e.placeholder},domProps:{value:e.inputContent},on:{focus:function(t){t.stopPropagation(),e.inputFocus=!0},blur:function(t){t.stopPropagation(),e.inputFocus=!1},input:function(t){t.target.composing||(e.inputContent=t.target.value)}}}),e._v(" "),e.maxLen?a("i",{directives:[{name:"show",rawName:"v-show",value:0===e.unitName.length&&e.maxLen>50,expression:"(unitName.length===0)&&maxLen>50"}],domProps:{textContent:e._s(e.maxLen-e.inputContent.length)}}):e._e()]),e._v(" "),a("span",{directives:[{name:"show",rawName:"v-show",value:e.unitName,expression:"unitName"}],domProps:{textContent:e._s(e.unitName)}}),e._v(" "),a("p",{staticClass:"formError",domProps:{textContent:e._s(e.testDes)}})])},[],!1,null,"66f84bce",null).exports),le={props:{contentYear:{type:String},contentMonth:{default:""},reallyIsValid:{default:"1"},contentDay:{default:""},HandleId:{default:0},isRequired:{type:Boolean,default:!1},testYearRule:{type:String,default:""},testMonthRule:{type:String,default:""},testDayRule:{type:String,default:""},labelName:{type:String,default:""},relatedParentId:{default:0},associatedRole:{default:!1},placeholder:{type:String,default:""}},data:function(){return{maxYear:5,loadEnd:!1,ageYear:"",yearInputStart:!1,ageYearFocus:!1,ageMonth:"",monthInputStart:!1,ageMonthFocus:!1,ageDay:"",dayInputStart:!1,ageDayFocus:!1,associatedState:!1,HandleParentId:"",testDes:"",ageYearError:!0,ageMonthError:!0,ageDayError:!0}},computed:s()({},Object(v.c)(["Relationship","clickNum","pageInfo"]),{passOnOff:function(){return this.checkAgeInput(0)?0:1},mDTemplateOnOff:function(){var e=this;return e.ageYear.length>0&&e.ageYear<=e.maxYear}}),watch:{ageYear:function(e){var t=this;ee.a.isPInt(e)&&e.length>0?this.ageYear=1*e+"":0==e.length&&(this.ageMonth="",this.ageDay=""),t.checkAgeInput(0),t.clearError(),!t.yearInputStart&&(t.yearInputStart=!0),t.changeComponentData({HandleId:t.HandleId,contentYear:e,contentMonth:t.ageMonth,contentDay:t.ageDay}),t.changeComponentTestResult({HandleId:t.HandleId,testResult:t.passOnOff})},ageMonth:function(e){var t=this;ee.a.isPInt(e)&&e.length>0&&(this.ageMonth=1*e+""),t.checkAgeInput(0),t.clearError(),!t.monthInputStart&&(t.monthInputStart=!0),t.changeComponentData({HandleId:t.HandleId,contentYear:t.ageYear,contentMonth:e,contentDay:t.ageDay}),t.changeComponentTestResult({HandleId:t.HandleId,testResult:t.passOnOff})},ageDay:function(e){var t=this;ee.a.isPInt(e)&&e.length>0&&(this.ageDay=1*e+""),!t.dayInputStart&&(t.dayInputStart=!0),t.checkAgeInput(0),t.clearError(),t.changeComponentData({HandleId:t.HandleId,contentYear:t.ageYear,contentMonth:t.ageMonth,contentDay:e}),t.changeComponentTestResult({HandleId:t.HandleId,testResult:t.passOnOff})},contentYear:function(e){this.ageYear=e.length>0&&1*e+"">=0?1*e+"":""},contentMonth:function(e){this.ageMonth=e.length>0&&1*e+"">=0?1*e+"":""},contentDay:function(e){this.ageDay=e.length>0&&1*e+"">=0?1*e+"":""},Relationship:function(e){var t=this;if(e.handleId==t.HandleParentId){for(var a=!1,n=0;n<e.relationId.length;n++)e.relationId[n]==t.HandleId&&(a=!0);t.associatedState=a}},associatedState:function(e){e||this.resetData()},associatedRole:function(e){this.associatedState=!("true"==e)},relatedParentId:function(e){this.HandleParentId=e},ageDayFocus:function(e){if(!e){this.clearError()}},ageMonthFocus:function(e){if(!e){this.clearError()}},ageYearFocus:function(e){if(!e){this.clearError()}},clickNum:function(e){var t=this;t.ageYear||t.ageMonth||t.ageDay||(1==t.isRequired?t.testDes="请输入年龄":t.testDes=""),t.checkAgeInput(1)},mDTemplateOnOff:function(e){e||(this.ageDay="",this.ageMonth="")}},methods:s()({},Object(v.b)(["changeComponentData","changeComponentTestResult"]),{resetData:function(){var e=this;e.ageYear="",e.ageMonth="",e.ageDay=""},clearError:function(){var e=this;e.checkAgeInput(0)||(e.ageYearError=!1,e.ageDayError=!1,e.ageMonthError=!1,e.testDes="")},checkAgeInput:function(e){var t=this,a=!0,n=!0,s=!0;return 0!=t.ageYear.length||0!=t.ageMonth.length||0!=t.ageDay.length||t.isRequired?0==t.ageYear.length&&0==t.ageMonth.length&&0==t.ageDay.length&&t.isRequired?(a=!0,n=!0,s=!0,e&&(t.testDes="请输入"+t.labelName)):t.ageYear.length>0&&0!=t.ageYear&&!ee.a.isPInt(t.ageYear)||t.ageMonth.length>0&&0!=t.ageMonth&&!ee.a.isPInt(t.ageMonth)||t.ageDay.length>0&&0!=t.ageDay&&!ee.a.isPInt(t.ageDay)?(n=t.ageYear.length>0&&!ee.a.isPInt(t.ageYear),s=t.ageMonth.length>0&&!ee.a.isPInt(t.ageMonth),a=t.ageDay.length>0&&!ee.a.isPInt(t.ageDay),t.testDes=a||n||s?"请输入正确的"+t.labelName:""):t.ageYear.length>0&&t.ageMonth.length>0&&t.ageDay.length>0&&0==t.ageYear&&0==t.ageMonth&&0==t.ageDay?(e&&(t.testDes="请输入正确的"+t.labelName),a=!0,n=!0,s=!0):t.ageYear.length>0&&0==t.ageYear&&t.ageMonth.length>0&&0!=t.ageMonth&&0==t.ageDay.length?(a=!1,n=!1,s=t.testContent(t.testMonthRule,t.monthInputStart,t.ageMonth),t.testDes=a||n||s?"请输入正确的"+t.labelName:""):t.ageYear.length>0&&0==t.ageYear&&t.ageMonth.length>0&&0==t.ageMonth&&0==t.ageDay.length?(a=!1,n=!1,s=!1,t.testDes=""):t.ageYear.length>0&&0==t.ageYear&&0==t.ageMonth.length&&0==t.ageDay.length?(a=!0,n=!1,s=!0,e&&(t.testDes="请输入"+t.labelName)):t.ageYear.length>0&&0!=t.ageYear&&t.ageYear<=5&&0==t.ageMonth.length&&0==t.ageDay.length?(a=!1,n=!1,s=!1,t.testDes=""):t.ageYear.length>0&&0!=t.ageYear&&t.ageYear<=5&&(t.ageMonth.length>0||t.ageDay.length>0)?(n=!1,s=0!=t.ageMonth.length&&(0!=t.ageMonth&&t.testContent(t.testMonthRule,t.monthInputStart,t.ageMonth)),a=0!=t.ageDay.length&&(0!=t.ageDay&&t.testContent(t.testDayRule,t.dayInputStart,t.ageDay)),t.testDes=a||n||s?"请输入正确的"+t.labelName:""):t.ageYear.length>0&&0==t.ageYear&&t.ageMonth.length>0&&t.ageDay.length>0?(n=!1,s=0!=t.ageMonth.length&&(0!=t.ageMonth&&t.testContent(t.testMonthRule,t.monthInputStart,t.ageMonth)),a=0!=t.ageDay.length&&(0!=t.ageDay&&t.testContent(t.testDayRule,t.dayInputStart,t.ageDay)),t.testDes=a||n||s?"请输入正确的"+t.labelName:""):t.ageYear.length>0&&0!=t.ageYear&&t.ageYear>5&&0==t.ageMonth.length&&0==t.ageDay.length?(a=!1,n=t.testContent(t.testYearRule,t.yearInputStart,t.ageYear),s=!1,t.testDes=a||n||s?"请输入正确的"+t.labelName:""):t.ageYear.length>0&&0==t.ageYear&&t.ageMonth.length>0&&0==t.ageMonth&&ee.a.isPInt(t.ageDay)?(a=0==t.ageDay||t.testContent(t.testDayRule,t.dayInputStart,t.ageDay),n=!1,s=!1,t.testDes=a||n||s?"请输入正确的"+t.labelName:""):t.ageYear.length>0&&0==t.ageYear&&t.ageDay.length>0&&0==t.ageDay&&ee.a.isPInt(t.ageMonth)&&(s=0==t.ageMonth||t.testContent(t.testMonthRule,t.monthInputStart,t.ageMonth),a=!1,n=!1,t.testDes=a||n||s?"请输入正确的"+t.labelName:""):(a=!1,n=!1,s=!1,t.testDes=""),1==e&&(t.ageDayError=a,t.ageYearError=n,t.ageMonthError=s,t.loadEnd=!0),a||n||s},testContent:function(e,t,a){var n=!1;if(0===a.length)return!1;if(e.indexOf(",")>-1){var s=e.split(","),i=s[0],o=s[1];n=!ee.a.isPInt(a)||e&&!(parseInt(a)>=i&&parseInt(a)<=o)&&t&&a.length>0}else n=!ee.a.isPInt(a)||e&&!ee.a[e](a)&&t&&a.length>0;return n},ensureRelationship:function(){var e=this,t=this.pageInfo.pageData[e.HandleParentId];if(t&&t.checkBoxList){for(var a=t.checkBoxList,n=0;n<a.length;n++)if(a[n].checkOnOff&&a[n].relationId&&a[n].relationId.length>0)for(var s=0;s<a[n].relationId.length;s++)e.HandleId==a[n].relationId[s]&&(e.associatedState=!0)}else if(t&&t.RadioList){var i=t.RadioList,o=t.index;if(-1!=o&&i[o]&&i[o].relationId&&i[o].relationId.length>0)for(var r=0;r<i[o].relationId.length;r++)e.HandleId==i[o].relationId[r]&&(e.associatedState=!0)}}}),updated:function(){var e=this;e.mDTemplateOnOff||(e.ageMonth="",e.ageDay="")},mounted:function(){var e=this;this.ageYear=this.contentYear.length>0&&1*this.contentYear+"">=0?1*this.contentYear+"":"",this.ageMonth=this.contentMonth.length>0&&1*this.contentMonth+"">=0?1*this.contentMonth+"":"",this.ageDay=this.contentDay.length>0&&1*this.contentDay+"">=0?1*this.contentDay+"":"",this.ageYear.length>0&&0==this.ageYear&&this.ageMonth.length>0&&0==this.ageMonth&&this.ageDay.length>0&&0==this.ageDay&&(this.ageYear="",this.ageMonth="",this.ageDay=""),setTimeout(function(){e.mDTemplateOnOff||(e.ageMonth="",e.ageDay="")},300),this.associatedState=!("true"==this.associatedRole),this.HandleParentId=this.relatedParentId,this.ensureRelationship()}},de=(a(300),Object(b.a)(le,function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{directives:[{name:"show",rawName:"v-show",value:e.associatedState,expression:"associatedState"}],staticClass:"formInputAge formCommon",style:{visibility:0===parseInt(e.reallyIsValid,10)?"hidden":""}},[a("p",{staticClass:"articleText",class:{errorText:e.testDes.length>0&&e.checkAgeInput(0)}},[e.isRequired?a("i",[e._v("*")]):e._e(),e._v(e._s(e.labelName?e.labelName:"年龄"))]),e._v(" "),a("div",{staticClass:"ageInput"},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.ageYear,expression:"ageYear"}],staticClass:"inputText",class:{error:e.testDes.length>0||e.ageYearError&&e.loadEnd,focusBorder:e.ageYearFocus},attrs:{type:"text"},domProps:{value:e.ageYear},on:{focus:function(t){t.stopPropagation(),e.ageYearFocus=!0},blur:function(t){t.stopPropagation(),e.ageYearFocus=!1},input:function(t){t.target.composing||(e.ageYear=t.target.value)}}}),e._v(" "),a("span",[e._v("岁")]),e._v(" "),a("input",{directives:[{name:"show",rawName:"v-show",value:e.mDTemplateOnOff,expression:"mDTemplateOnOff"},{name:"model",rawName:"v-model",value:e.ageMonth,expression:"ageMonth"}],staticClass:"inputText",class:{error:e.testDes.length>0||e.ageMonthError&&e.loadEnd,focusBorder:e.ageMonthFocus},attrs:{type:"text"},domProps:{value:e.ageMonth},on:{focus:function(t){t.stopPropagation(),e.ageMonthFocus=!0},blur:function(t){t.stopPropagation(),e.ageMonthFocus=!1},input:function(t){t.target.composing||(e.ageMonth=t.target.value)}}}),e._v(" "),a("span",{directives:[{name:"show",rawName:"v-show",value:e.mDTemplateOnOff,expression:"mDTemplateOnOff"}]},[e._v("月")]),e._v(" "),a("input",{directives:[{name:"show",rawName:"v-show",value:e.mDTemplateOnOff,expression:"mDTemplateOnOff"},{name:"model",rawName:"v-model",value:e.ageDay,expression:"ageDay"}],staticClass:"inputText",class:{error:e.testDes.length>0||e.ageDayError&&e.loadEnd,focusBorder:e.ageDayFocus},attrs:{type:"text"},domProps:{value:e.ageDay},on:{focus:function(t){t.stopPropagation(),e.ageDayFocus=!0},blur:function(t){t.stopPropagation(),e.ageDayFocus=!1},input:function(t){t.target.composing||(e.ageDay=t.target.value)}}}),e._v(" "),a("span",{directives:[{name:"show",rawName:"v-show",value:e.mDTemplateOnOff,expression:"mDTemplateOnOff"}]},[e._v("天")])]),e._v(" "),a("p",{staticClass:"formError",domProps:{textContent:e._s(e.testDes)}})])},[],!1,null,null,null).exports),ce=a(6),ue={props:{contentTagList:{type:String,default:"[]"},labelName:{type:String,default:""},maxLen:{default:""},HandleId:{default:0}},data:function(){return{addOnOff:!1,tagList:[],sortTagList:[],defaultList:[],appendTagName:"",inputFocus:!1,loadEnd:!1}},methods:s()({},Object(v.b)(["changeComponentData","changeComponentTestResult","saveTagId","updateTagId","saveBaseInfoTagIdSelectList","saveTagIdSelectList"]),{saveUserTag:function(e,t,a,n){var s=this;I.a.ajax2({url:"/call/comm/tag/saveUserTag/",type:"POST",data:{paramJson:d()({tagType:e,isDelete:"0",tagName:t,customerId:I.a.cookie.get("userId")})},success:function(i){a&&a(i);var o=i.responseObject.responseData.tagData.tagId;I.a.ajax2({url:"/call/caseFolder/tag/create/",type:"POST",data:{paramJson:d()({caseId:s.CaseId,tagId:i.responseObject.responseData.tagData.tagId,tagType:e,tagName:t,customerId:I.a.cookie.get("userId")})},success:function(e){if(e.responseObject.responseStatus){var t=e.responseObject.responsePk;n?n.id=t:s.tagList[s.tagList.length-1].id=t,s.saveTagIdSelectList({type:"add",tagId:o}),s.saveTagId(t)}}})}})},changeSortState:function(e){var t=this,a=t.sortTagList[e].tagType,n=t.sortTagList[e].tagId,s=0;t.sortTagList[e].selectOnOff=!t.sortTagList[e].selectOnOff;var i=function(e){for(var t=0;t<e.length;t++)if(e[t].tagId==n){s=t;break}};1==a?(i(t.defaultList),t.changeState(s)):(i(t.tagList),t.removeTagList(1,s))},cancelTag:function(e){var t=this;t.CaseId>0&&e.id&&I.a.ajax2({url:"/call/caseFolder/tag/update/",type:"POST",data:{paramJson:d()({isValid:0,id:e.id})},success:function(a){t.updateTagId(e.id),t.saveTagIdSelectList({type:"delete",tagId:e.tagId})}})},appendTagList:function(){var e=this;ce(".tagInputCont input").trigger("blur"),e.Trim(e.appendTagName,"g").length?e.error&&e.saveUserTag(2,e.appendTagName,function(t){if(e.appendTagName.length){var a=t.responseObject.responseData.tagData,n=JSON.parse(d()(a));a.isMe=!0,a.isSelect=!0,n.selectOnOff=!0,e.tagList.push(a),e.sortTagList.push(n),e.appendTagName=""}}):e.appendTagName=""},Trim:function(e,t){var a=void 0;return a=e.replace(/(^\s+)|(\s+$)/g,""),"g"==t.toLowerCase()&&(a=a.replace(/\s/g,"")),a},getTagList:function(){var e=this;e.saveBaseInfoTagIdSelectList({type:"clear"}),I.a.ajax2({url:"/call/comm/tag/searchTagList/",type:"POST",data:{paramJson:d()({tagType:2,customerId:I.a.cookie.get("userId")})},success:function(t){var a=[],n=[],s=[];t&&t.responseObject&&t.responseObject.responseData&&(t.responseObject.responseData.sysTagList&&(a=t.responseObject.responseData.sysTagList),t.responseObject.responseData.userTagList&&(n=t.responseObject.responseData.userTagList),t.responseObject.responseData.sortTagList&&(s=t.responseObject.responseData.sortTagList));for(var i=0;i<n.length;i++)n[i].isMe=!0;for(var o=0;o<a.length;o++)a[o].addTag=!1;e.defaultList=a,e.tagList=e.updateTagList(n,s)}})},changeState:function(e){var t=this;t.defaultList[e].addTag=!t.defaultList[e].addTag;var a=t.defaultList[e].tagId;t.defaultList[e].addTag?t.CaseId>0&&(t.defaultList[e].selectOnOff=!0,I.a.ajax2({url:"/call/caseFolder/tag/create/",type:"POST",data:{paramJson:d()({caseId:t.CaseId,tagId:t.defaultList[e].tagId,tagType:1,tagName:t.defaultList[e].tagName,customerId:I.a.cookie.get("userId")})},success:function(a){a.responseObject.responseStatus&&(t.defaultList[e].id=a.responseObject.responsePk,t.saveTagId(t.defaultList[e].id),t.saveTagIdSelectList({type:"add",tagId:t.defaultList[e].tagId}))}})):(t.defaultList[e].selectOnOff=!1,t.CaseId>0&&t.defaultList[e].id&&I.a.ajax2({url:"/call/caseFolder/tag/update/",type:"POST",data:{paramJson:d()({isValid:0,id:t.defaultList[e].id})},success:function(n){t.updateTagId(t.defaultList[e].id),t.saveTagIdSelectList({type:"delete",tagId:a})}}))},inputTag:function(){this.addOnOff=!this.addOnOff},removeTagList:function(e,t){var a=this,n=0,s="",i="";if(1==e)if(2,n=a.tagList[t].tagId,i=a.tagList[t].tagName,s=a.tagList[t].id,a.tagList[t].isMe)a.tagList[t].isSelect=!a.tagList[t].isSelect,a.tagList[t].isSelect?a.saveUserTag(2,i,function(e){},a.tagList[t]):a.cancelTag({id:s,tagId:n});else{for(var o=0,r=0;r<a.sortTagList.length;r++)if(a.sortTagList[r].tagId==n){o=r;break}a.sortTagList.splice(o,1),a.tagList.splice(t,1),a.cancelTag({id:s,tagId:n})}},updateTagList:function(e,t){for(var a=this,n=JSON.parse(d()(t)),s=0;s<n.length;s++)n[s].selectOnOff=!1;for(var i=!I.a.isEmptyObject(this.baseInfo)&&this.baseInfo.tagList?JSON.parse(d()(this.baseInfo.tagList)):[],o=JSON.parse(d()(e)),r=0;r<i.length;r++)for(var l=0;l<a.defaultList.length;l++)a.defaultList[l].tagId==i[r].tagId&&1==i[r].tagType&&(a.defaultList[l].addTag=!0,a.saveBaseInfoTagIdSelectList({type:"add",tagId:i[r].tagId}),a.defaultList[l].id=i[r].id),a.defaultList[l].selectOnOff=!1;for(var c=0;c<o.length;c++){for(var u=!0,p=0;p<i.length;p++)o[c].tagId==i[p].tagId&&2==i[p].tagType&&(i[p].isMe=!0,i[p].isSelect=!0,a.saveBaseInfoTagIdSelectList({type:"add",tagId:i[p].tagId}),u=!1,o[c]=i[p]);u&&(o[c].isSelect=!1)}for(var m=JSON.parse(d()(o)),h=0;h<i.length;h++){for(var g=!0,f=0;f<m.length;f++)m[f].tagId==i[h].tagId&&2==m[f].tagType&&(g=!1,o[f].isSelect=!0,a.saveBaseInfoTagIdSelectList({type:"add",tagId:i[h].tagId}));2==i[h].tagType&&g&&(i[h].isMe=!1,i[h].isSelect=!0,a.saveBaseInfoTagIdSelectList({type:"add",tagId:i[h].tagId}),o.push(i[h]))}for(var v=0;v<a.defaultList.length;v++)if(a.defaultList[v].addTag)for(var C=0;C<n.length;C++)n[C].tagId==a.defaultList[v].tagId&&1==n[C].tagType&&(n[C].selectOnOff=!0);for(var b=0;b<o.length;b++)if(o[b].isSelect)for(var y=0;y<n.length;y++)n[y].tagId==o[b].tagId&&2==n[y].tagType&&(n[y].selectOnOff=!0);return a.sortTagList=JSON.parse(d()(n)),o}}),watch:{appendTagName:function(e){var t=this;e.length>t.maxLen&&t.maxLen&&(t.appendTagName=t.appendTagName.substring(0,t.maxLen))},contentTagList:function(e){},tagList:{handler:function(e){this.changeComponentData({HandleId:this.HandleId,contentTagList:d()(e)})},deep:!0},baseInfo:function(e){this.getTagList()},defaultList:{handler:function(e){this.changeComponentData({HandleId:this.HandleId,defaultTagList:d()(e)})},deep:!0},error:function(e){var t=this;e?t.changeComponentTestResult({HandleId:t.HandleId,testResult:1}):t.changeComponentTestResult({HandleId:t.HandleId,testResult:0})},inputFocus:function(e){e||(this.loadEnd=!0)}},mounted:function(){this.CaseId>0||this.getTagList()},computed:s()({},Object(v.c)(["baseInfo","CaseId"]),{testDes:function(){var e=this,t="";return e.loadEnd&&(e.error?t="":0===e.appendTagName.length?e.isRequired&&(t="请输入"+e.labelName):t="请勿包含数字或特殊字符"),t},error:function(){return 0==this.appendTagName.length||/^[a-zA-Z\u4e00-\u9fa5]+$/.test(this.appendTagName)}})},pe=(a(298),Object(b.a)(ue,function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"formTag formCommon"},[e.labelName.length?a("p",{staticClass:"articleText",domProps:{textContent:e._s(e.labelName)}}):e._e(),e._v(" "),a("div",{staticClass:"tagCont"},[a("ul",e._l(e.sortTagList,function(t,n){return a("li",{class:{addTag:t.selectOnOff},on:{click:function(t){t.stopPropagation(),e.changeSortState(n)}}},[e._v(e._s(t.tagName))])})),e._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:!e.addOnOff,expression:"!addOnOff"}],staticClass:"addTagBtn",on:{click:e.inputTag}},[a("i")]),e._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:e.addOnOff,expression:"addOnOff"}],staticClass:"tagInput"},[a("div",{staticClass:"tagInputCont"},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.appendTagName,expression:"appendTagName"}],attrs:{type:"text",placeholder:"输入新标签"},domProps:{value:e.appendTagName},on:{focus:function(t){t.stopPropagation(),e.inputFocus=!0},blur:function(t){t.stopPropagation(),e.inputFocus=!1},keydown:function(t){return"button"in t||!e._k(t.keyCode,"enter",13,t.key,"Enter")?e.appendTagList(t):null},input:function(t){t.target.composing||(e.appendTagName=t.target.value)}}}),a("i",{domProps:{textContent:e._s(e.maxLen-e.appendTagName.length)}})]),e._v(" "),a("p",{class:{active:e.appendTagName.length},on:{click:function(t){return t.stopPropagation(),e.appendTagList(t)}}},[e._v("添加")])]),e._v(" "),a("p",{staticClass:"formError",domProps:{textContent:e._s(e.testDes)}})])])},[],!1,null,"314da534",null).exports),me={computed:s()({},Object(v.c)(["canSaveBaseData","pageIndex","pageInfo","tabList","editType","templateId","changePageOnOff","isChangeOnOff","clickNum","teamList","CaseId","pushTplate","uploadState","changeTemplateIdOnOff","imageErrorState","videoErrorState"]),{nextTemplate:function(){return 0===parseInt(this.editType,10)&&0===this.tabList.length&&-1==this.pageIndex}}),methods:s()({},Object(v.b)(["filtrateBaseData","changeIndex","saveCaseId","saveBasePageInfo","clickChangeBtn","examineBasePageData","showLayer","saveCaseDataId","operationLog","showLoading","hideLoading","saveTagId","checkChangeState","changeSaveStatus","toast","changeBaseHandleType"]),{changeTemplate:function(){this.showLayer(0)},changePage:function(e){var t=this;if(t.imageErrorState||t.videoErrorState){if(t.imageErrorState)return t.toast("图片上传失败"),!1;if(t.videoErrorState)return t.toast("视频上传失败"),!1}else if(t.uploadState){if(0===parseInt(this.editType,10)&&0===this.tabList.length&&-1==t.pageIndex)if(t.examineBasePageData(),this.changePageOnOff){t.changeSaveStatus(0),t.filtrateBaseData();var a="/call/caseFolder/baseinfo/create/";t.CaseId>0&&(a="/call/caseFolder/baseinfo/update/"),t.showLoading();var n=JSON.parse(d()(t.canSaveBaseData));n.lockedFlag=1,t.checkChangeState(0),t.isChangeOnOff?I.a.ajax2({url:"/call/caseFolder/baseinfo/update/",type:"POST",data:{paramJson:d()({customerId:I.a.cookie.get("userId"),caseId:t.CaseId,updateFlag:0,lockedFlag:1})},success:function(e){if(e&&e.responseObject&&e.responseObject.responseStatus)switch(t.hideLoading(),parseInt(e.responseObject.responseCode)){case 0:t.changeBaseHandleType(!1),t.saveTagId(""),t.saveBasePageInfo(n),parseInt(t.templateId,10)>0?t.changeIndex({index:0}):t.$router.push({path:"/tplate"});break;case 1301:case 1303:t.showLayer(3);break;case 1302:t.showLayer(2)}}}):I.a.ajax2({url:a,type:"POST",data:{paramJson:d()(n)},success:function(e){e.responseObject.responseStatus&&t.hideLoading(),1302==e.responseObject.responseCode?t.showLayer(2):1301==e.responseObject.responseCode||1303==e.responseObject.responseCode?t.showLayer(3):0==e.responseObject.responseCode&&(t.changeBaseHandleType(!0),t.saveTagId(""),e.responseObject.responseStatus&&(t.CaseId>0||(t.saveCaseId(e.responseObject.responsePk),t.operationLog(1),t.saveCaseDataId(e.responseObject.responseData.id)),t.saveBasePageInfo(n),parseInt(t.templateId,10)>0?t.changeIndex({index:0}):t.$router.push({path:"/tplate"})))}})}else t.clickChangeBtn()}else t.toast("您有内容正在上传中，请稍后")}}),watch:{clickNum:function(){},pushTplate:function(e){e&&this.$router.push({path:"/tplate"})}}},he=(a(296),Object(b.a)(me,function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"caseBottomBtn"},[a("div",{staticClass:"caseBWCont"},[-1!=e.pageIndex?a("p",{staticClass:"casePrevBtn",on:{click:function(t){t.stopPropagation(),e.changeIndex({pre:0})}}},[e._v("上一步")]):e._e(),e._v(" "),a("p",{staticClass:"caseNextBtn",domProps:{textContent:e._s(e.pageIndex!=e.tabList.length-1||-1==e.pageIndex?"下一步":"完成")},on:{click:function(t){t.stopPropagation(),e.nextTemplate?e.changePage():e.changeIndex({pre:1})}}}),e._v(" "),a("span",{directives:[{name:"show",rawName:"v-show",value:"baseInfo"===e.$route.name&&e.templateId>0,expression:"($route.name==='baseInfo')&&templateId>0"}],staticClass:"caseChangeTemplate",on:{click:function(t){return t.stopPropagation(),e.changeTemplate(t)}}},[e._v("更换病历模板")])])])},[],!1,null,"01984fb4",null).exports),ge={methods:{closeDialog:function(){this.$emit("closeDialog")},ensureDialog:function(){this.$emit("submitDialog")}}},fe=(a(294),Object(b.a)(ge,function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("section",{staticClass:"casePopup"},[a("aside",{staticClass:"popupCont newCases"},[a("div",{staticClass:"popupTitle"},[a("i",{on:{click:function(t){return t.stopPropagation(),e.closeDialog(t)}}})]),e._v(" "),a("div",{staticClass:"popupContH"},[e._t("default")],2),e._v(" "),a("div",{staticClass:"formBtn"},[a("button",{on:{click:function(t){return t.stopPropagation(),e.ensureDialog(t)}}},[e._v("确定")])])])])},[],!1,null,"079d832d",null).exports),Ie=a(6),ve={props:{reallyIsValid:{default:"1"},RadioList:{type:String},index:{default:"-1"},isBothSides:{default:0},sideType:{default:1},HandleId:{default:0},isRequired:{type:Boolean,default:!1},labelName:{type:String,default:""},row:{type:Boolean,default:!1},needInput:{type:Boolean,default:!1},testRule:{type:String,default:""},contentDes:{type:String,default:""},relatedParentId:{default:0},associatedRole:{default:!1},placeholder:{type:String,default:""},otherLabel:{type:String,default:""}},data:function(){return{maxItemNum:6,inputStart:!1,inputFocus:!1,radioIndex:-1,inputContent:"",rowOnOff:!1,associatedState:!1,HandleParentId:"",testDes:"",dialogOnOff:!1,restore:{radioIndex:-1,inputContent:""}}},components:{LayerComponent:fe},computed:s()({},Object(v.c)(["Relationship","clickNum","pageInfo"]),{inputError:function(){return this.testRule&&!ee.a[this.testRule](this.inputContent)&&this.inputStart},radioListDemo:function(){return JSON.parse(this.RadioList)},radioContent:function(){var e=this;return e.radioIndex>=0?e.radioListDemo[e.radioIndex].radioName:-2==e.radioIndex?e.checkInvalid(e.inputContent)?"其他":e.inputContent:""}}),watch:{inputFocus:function(e){e&&(this.radioIndex=-2)},Relationship:function(e){var t=this;if(e.handleId==t.HandleParentId){for(var a=!1,n=0;n<e.relationId.length;n++)e.relationId[n]==t.HandleId&&(a=!0);t.associatedState=a}t.ensureRelationship()},inputContent:function(e){var t=this;!t.inputStart&&(t.inputStart=!0),t.changeComponentData({HandleId:t.HandleId,contentDes:e,index:t.radioIndex}),e.length>0&&(t.testDes=""),t.HandleId>0&&(-1==t.radioIndex?t.changeComponentTestResult({HandleId:t.HandleId,testResult:-1}):t.changeComponentTestResult({HandleId:t.HandleId,testResult:1}))},contentDes:function(e){this.inputContent=e},index:function(e){this.radioIndex=e},associatedState:function(e){e||this.resetData()},radioIndex:function(e){var t=this;-2==e&&(t.inputFocus=!0,-2==e&&Ie(this.$refs.inputBar).trigger("focus")),t.changeComponentData({HandleId:t.HandleId,index:e,contentDes:t.inputContent}),t.HandleId>0&&(-1==e?t.changeComponentTestResult({HandleId:t.HandleId,testResult:-1}):t.changeComponentTestResult({HandleId:t.HandleId,testResult:1})),t.changeRelationship(t.radioIndex),e>=0&&(t.testDes="")},templateAssemblePageOnOff:function(e){var t=this;e&&-1!=t.radioIndex&&t.changeRelationship(t.radioIndex)},associatedRole:function(e){this.associatedState=!("true"==e)},relatedParentId:function(e){this.HandleParentId=e},clickNum:function(e){var t=this;t.radioIndex<0&&t.isRequired&&(t.testDes="请输入"+t.labelName)}},methods:s()({},Object(v.b)(["changeComponentData","changeComponentTestResult","checkRelationship"]),{resetData:function(){this.radioIndex=-1,this.inputContent=""},ensureRelationship:function(){var e=this,t=this.pageInfo.pageData[e.HandleParentId];if(t&&t.checkBoxList){for(var a=t.checkBoxList,n=0;n<a.length;n++)if(a[n].checkOnOff&&a[n].relationId&&a[n].relationId.length>0)for(var s=0;s<a[n].relationId.length;s++)e.HandleId==a[n].relationId[s]&&(e.associatedState=!0)}else if(t&&t.RadioList){var i=t.RadioList,o=t.index;if(-1!=o&&i[o]&&i[o].relationId&&i[o].relationId.length>0)for(var r=0;r<i[o].relationId.length;r++)e.HandleId==i[o].relationId[r]&&(e.associatedState=!0)}},checkInvalid:function(e){return"string"==typeof e&&0==e.length||void 0==e||"undefined"==e||"null"==e||void 0===e||"null"==typeof e||null==e},changeRelationship:function(e){var t=this;if(t.radioListDemo[e]&&t.radioListDemo[e].relationId)t.checkRelationship({relationId:t.radioListDemo[e].relationId,handleId:t.HandleId});else if(-2==e){var a=t.radioListDemo.length-1;t.radioListDemo[a]&&t.radioListDemo[a].relationId&&t.checkRelationship({relationId:t.radioListDemo[a].relationId,handleId:t.HandleId})}else-1==e&&t.checkRelationship({relationId:[],handleId:t.HandleId})},restoreData:function(){var e=this;e.radioIndex=e.restore.radioIndex,e.inputContent=e.restore.inputContent},cancelDialog:function(){this.restoreData(),this.hideDialog()},ensureRadio:function(){this.hideDialog()},hideDialog:function(){this.dialogOnOff=!1},showDialog:function(){var e=this;e.restore.radioIndex=e.radioIndex,e.restore.inputContent=e.inputContent,e.dialogOnOff=!0},selectRadio:function(e){"性别"!=this.labelName&&this.radioIndex==e?this.radioIndex=-1:this.radioIndex=e}}),mounted:function(){this.radioIndex=this.index,this.inputContent=this.checkInvalid(this.contentDes)?"":this.contentDes,this.associatedState=!("true"==this.associatedRole),this.HandleParentId=this.relatedParentId,this.ensureRelationship()}},Ce=(a(292),Object(b.a)(ve,function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("section",{staticClass:"formCommonWrap",style:{visibility:0===parseInt(e.reallyIsValid,10)?"hidden":""}},[e.radioListDemo.length<=e.maxItemNum&&!e.needInput&&0==e.isBothSides?a("div",{directives:[{name:"show",rawName:"v-show",value:e.associatedState,expression:"associatedState"}],staticClass:"formRadio formCommon formRadioFocus",class:{formRow:(e.needInput?1:0)+e.radioListDemo.length>2||e.needInput,formContentLr:1==e.isBothSides}},[a("p",{staticClass:"articleText",class:{selectText:(e.needInput?1:0)+e.radioListDemo.length>2||e.needInput}},[e.isRequired?a("i",[e._v("*")]):e._e(),e._v(e._s(e.labelName))]),e._v(" "),a("div",{staticClass:"radioRight"},[e._l(e.radioListDemo,function(t,n){return e.needInput?a("div",{directives:[{name:"show",rawName:"v-show",value:n<e.radioListDemo.length-1,expression:"(index<radioListDemo.length-1)"}],key:n,staticClass:"radioIconNormal",class:{active:n==e.radioIndex},on:{click:function(t){e.selectRadio(n)}}},[a("i"),a("span",{domProps:{textContent:e._s(t.radioName)}})]):e._e()}),e._v(" "),e._l(e.radioListDemo,function(t,n){return e.needInput?e._e():a("div",{key:n,staticClass:"radioIconNormal",class:{active:n==e.radioIndex},on:{click:function(t){e.selectRadio(n)}}},[a("i"),a("span",{domProps:{textContent:e._s(t.radioName)}})])}),e._v(" "),e.needInput?a("div",{key:-2,staticClass:"radioIconNormal",class:{active:-2==e.radioIndex}},[a("i",{on:{click:function(t){e.selectRadio(-2)}}}),a("span",[e._v("其他")]),a("input",{directives:[{name:"model",rawName:"v-model",value:e.inputContent,expression:"inputContent"}],ref:"inputBar",class:{error:e.inputError,focusBorder:e.inputFocus},attrs:{type:"text",placeholder:e.placeholder},domProps:{value:e.inputContent},on:{focus:function(t){t.stopPropagation(),e.inputFocus=!0},keydown:function(t){if(!("button"in t)&&e._k(t.keyCode,"enter",13,t.key,"Enter"))return null;t.stopPropagation(),e.inputFocus=!1},blur:function(t){t.stopPropagation(),e.inputFocus=!1},input:function(t){t.target.composing||(e.inputContent=t.target.value)}}})]):e._e()],2),e._v(" "),a("p",{staticClass:"formError",domProps:{textContent:e._s(e.testDes)}})]):e._e(),e._v(" "),e.radioListDemo.length>e.maxItemNum&&!e.needInput||e.needInput||1==e.isBothSides?a("div",{directives:[{name:"show",rawName:"v-show",value:e.associatedState,expression:"associatedState"}],staticClass:"formInput formCommon",class:{formContentLr:1==e.isBothSides}},[a("p",{directives:[{name:"show",rawName:"v-show",value:2!=e.sideType,expression:"sideType!=2"}],staticClass:"articleText"},[e.isRequired?a("i",[e._v("*")]):e._e(),e._v(e._s(e.labelName))]),e._v(" "),a("div",{staticClass:"inputCont"},[a("span",{staticClass:"formSelectIcon",domProps:{textContent:e._s(1==e.sideType?"L":"R")}}),e._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:e.radioContent,expression:"radioContent"}],attrs:{type:"text",placeholder:"请选择"},domProps:{value:e.radioContent},on:{click:function(t){return t.stopPropagation(),e.showDialog(t)},input:function(t){t.target.composing||(e.radioContent=t.target.value)}}})]),e._v(" "),a("p",{staticClass:"formError",domProps:{textContent:e._s(e.testDes)}}),e._v(" "),a("LayerComponent",{directives:[{name:"show",rawName:"v-show",value:e.dialogOnOff,expression:"dialogOnOff"}],on:{closeDialog:e.cancelDialog,submitDialog:e.ensureRadio}},[a("div",{directives:[{name:"show",rawName:"v-show",value:e.associatedState,expression:"associatedState"}],staticClass:"formRadio formCommon formRadioFocus",class:{formRow:(e.needInput?1:0)+e.radioListDemo.length>2||e.needInput||1==e.isBothSides}},[(e.needInput?1:0)+e.radioListDemo.length>2?e._e():a("p",{staticClass:"articleText marskText",class:{selectText:(e.needInput?1:0)+e.radioListDemo.length>2||e.needInput}},[e.isRequired?a("i",[e._v("*")]):e._e(),e._v(e._s(e.labelName))]),e._v(" "),a("div",{staticClass:"radioRight"},[e._l(e.radioListDemo,function(t,n){return a("div",{key:n,staticClass:"radioIconNormal",class:{active:n==e.radioIndex},on:{click:function(t){e.selectRadio(n)}}},[a("i"),a("span",{domProps:{textContent:e._s(t.radioName)}})])}),e._v(" "),e.needInput?a("div",{key:-2,staticClass:"radioIconNormal",class:{active:-2==e.radioIndex}},[a("i",{on:{click:function(t){e.selectRadio(-2)}}}),a("span",{domProps:{textContent:e._s(e.checkInvalid(e.otherLabel)?"":e.otherLabel)}}),a("input",{directives:[{name:"model",rawName:"v-model",value:e.inputContent,expression:"inputContent"}],ref:"inputBar",class:{error:e.inputError,focusBorder:e.inputFocus},attrs:{type:"text",placeholder:e.placeholder},domProps:{value:e.inputContent},on:{focus:function(t){t.stopPropagation(),e.inputFocus=!0},keydown:function(t){if(!("button"in t)&&e._k(t.keyCode,"enter",13,t.key,"Enter"))return null;t.stopPropagation(),e.inputFocus=!1},blur:function(t){t.stopPropagation(),e.inputFocus=!1},input:function(t){t.target.composing||(e.inputContent=t.target.value)}}})]):e._e()],2),e._v(" "),a("p",{staticClass:"formError formErrorTwo",class:{formErrorThree:!((e.needInput?1:0)+e.radioListDemo.length>2)},domProps:{textContent:e._s(e.testDes)}})])])],1):e._e()])},[],!1,null,"12642a48",null).exports),be=a(6),ye={props:{SelectList:{type:String},reallyIsValid:{default:"1"},index:{default:"-1"},HandleId:{default:""},isRequired:{type:Boolean,default:!1},labelName:{type:String,default:""},testRule:{type:String,default:""},contentDes:{type:String,default:""},relatedParentId:{default:0},associatedRole:{default:!1},placeholder:{type:String,default:""}},data:function(){return{selectOnOff:!1,selectIndex:-1,selectData:"[]",hoverContent:"",associatedState:!1,HandleParentId:"",testDes:""}},computed:s()({},Object(v.c)(["clickNum","globalEvent"]),{selectContent:function(){var e=this;return parseInt(e.selectIndex,10)<0?"":e.selectData[e.selectIndex]&&e.selectData[e.selectIndex].selectName?e.selectData[e.selectIndex].selectName:""}}),updated:function(){var e=be(".lookMore");e.css({top:parseInt(e.css("top"))-be(this.$refs.hoverContent).height()/2-2})},watch:{globalEvent:function(e){this.selectOnOff=!1},Relationship:function(e){var t=this;if(e.handleId==t.HandleParentId){for(var a=!1,n=0;n<e.relationId.length;n++)e.relationId[n]==t.HandleId&&(a=!0);t.associatedState=a}},associatedState:function(e){e||this.resetData()},selectIndex:function(e){var t=this;e>=0&&(e>0&&(t.testDes=""),t.changeComponentData({HandleId:t.HandleId,index:e}),t.changeComponentTestResult({HandleId:t.HandleId,testResult:1}))},hoverContent:function(){},index:function(e){this.selectIndex=e},SelectList:function(e){this.selectData=JSON.parse(e)},associatedRole:function(e){this.associatedState=!("true"==e)},relatedParentId:function(e){this.HandleParentId=e},clickNum:function(){var e=this;e.selectIndex<0&&e.isRequired&&(e.testDes="请输入"+e.labelName)}},methods:s()({},Object(v.b)(["changeComponentData","changeComponentTestResult"]),{resetData:function(){this.selectIndex=-1},toggleSelect:function(){this.selectOnOff=!this.selectOnOff},changeSelect:function(e){this.selectIndex=e,this.selectOnOff=!1},hoverStart:function(e,t){var a=this;be(".lookMore").css({top:be(e.target).offset().top-be(a.$refs.selectBar).offset().top-13+"px"}),t.length>8?a.hoverContent=t:a.hoverContent=""},ensureRelationship:function(){var e=this,t=this.pageInfo.pageData[e.HandleParentId];if(t&&t.checkBoxList){for(var a=t.checkBoxList,n=0;n<a.length;n++)if(a[n].checkOnOff&&a[n].relationId&&a[n].relationId.length>0)for(var s=0;s<a[n].relationId.length;s++)e.HandleId==a[n].relationId[s]&&(e.associatedState=!0)}else if(t&&t.RadioList){var i=t.RadioList,o=t.index;if(-1!=o&&i[o]&&i[o].relationId&&i[o].relationId.length>0)for(var r=0;r<i[o].relationId.length;r++)e.HandleId==i[o].relationId[r]&&(e.associatedState=!0)}},hoverEnd:function(){this.hoverContent=""}}),mounted:function(){this.selectIndex=this.index,this.selectData=JSON.parse(this.SelectList),this.associatedState=!("true"==this.associatedRole),this.HandleParentId=this.relatedParentId}},xe=(a(290),Object(b.a)(ye,function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{directives:[{name:"show",rawName:"v-show",value:e.associatedState,expression:"associatedState"}],staticClass:"formSelect formCommon formContentLr",style:{visibility:0===parseInt(e.reallyIsValid,10)?"hidden":""}},[a("p",{staticClass:"articleText"},[e.isRequired?a("i",[e._v("*")]):e._e(),e._v(e._s(e.labelName))]),e._v(" "),a("div",{ref:"selectBar",staticClass:"selectCont",on:{click:function(t){return t.stopPropagation(),e.toggleSelect(t)}}},[a("span",{staticClass:"formSelectIcon"},[e._v("R")]),e._v(" "),a("span",{staticClass:"formSelectItem",domProps:{textContent:e._s(e.selectContent.length?e.selectContent:"请选择")}}),e._v(" "),a("section",{directives:[{name:"show",rawName:"v-show",value:e.hoverContent.length,expression:"hoverContent.length"}],ref:"hoverContent",staticClass:"lookMore",domProps:{textContent:e._s(e.hoverContent)}}),e._v(" "),a("ul",{directives:[{name:"show",rawName:"v-show",value:e.selectOnOff,expression:"selectOnOff"}],staticClass:"selectOption"},e._l(e.selectData,function(t,n){return a("li",{key:n,domProps:{textContent:e._s(t.selectName)},on:{click:function(t){t.stopPropagation(),e.changeSelect(n)},mouseover:function(a){e.hoverStart(a,t.selectName)},mouseout:e.hoverEnd}})}))]),e._v(" "),a("p",{staticClass:"formError",domProps:{textContent:e._s(e.testDes)}})])},[],!1,null,"2a165aec",null).exports),Se={data:function(){return{cid:I.a.cookie.get("userId"),nameContent:"",numberContent:"",numberContent_0:"",numberContent_1:"",numberContent_2:"",numberContent_3:"",numberContent_4:"",contentYear:"",contentMonth:"",contentDay:"",patientSex:-1,doctorId:0,teamNumberType:0,numberType:-1,numberType_0:0,numberType_1:0,numberType_2:0,numberType_3:0,numberType_4:0,belongType:0,patientMobile:"",nameHandleId:0,ageHandleId:0,sexHandleId:0,phoneNumHandleId:0,numberHandleId:0,numberId_0:"",numberId_1:"",numberId_2:"",numberId_3:"",numberId_4:"",numberHandleId_0:0,numberHandleId_1:0,numberHandleId_2:0,numberHandleId_3:0,numberHandleId_4:0,belongHandleId:0,belongTeamHandleId:0,tagListHandleId:0,teamSelect:{componentId:"",componentType:"1",labelName:"归属团队","isRequired|0-1":0,selectList:"[]","index|0-3":0,testResult:-1},test:11,sexRadioList:d()([{radioName:"男"},{radioName:"女"}]),belongRadioList:d()([{radioName:"共享给团队"},{radioName:"仅自己可见"}]),selectList:d()([{selectName:"住院号",testRule:"testNum"},{selectName:"床位号",testRule:"testNum"},{selectName:"病历号",testRule:"testNum"},{selectName:"身份证号",testRule:"testID"},{selectName:"军官号",testRule:"testNum"}]),teamSelectList:d()([]),tagList:"[]",defaultTagList:"[]"}},mounted:function(){var e=this;e.initUploadState(),e.changeTemplateId(!1),e.changeUploadState(!0),e.changeSaveStatus(0),I.a.isEmptyObject(e.baseInfo)||(e.emptyNumberList(),e.changeTeamPanel()),setTimeout(function(){},5e3)},created:function(){this.setTopNavTitle("填写患者基本信息")},computed:s()({},Object(v.c)(["baseInfo","editType","teamId","titleName","teamList","teamId","ownerCustomerId","CaseId","teamCustomerId","CaseBelongType","numberModuleCount","assistantDoctor"]),{ownerCheck:function(){var e=this;return!(e.CaseId>0&&0!=e.teamId)||(0==e.CaseBelongType?e.ownerCustomerId==e.cid:1==e.CaseBelongType?!!e.assistantDoctor||("string"==typeof e.teamCustomerId&&0==e.teamCustomerId.length||0==e.teamCustomerId||e.teamCustomerId==e.cid):void 0)}}),components:{InputBar:re,AgeInput:de,RadioBar:Ce,SelectInput:ae,TagList:pe,ChangeIndex:he,SelectBar:xe,radioSelectBar:ie},watch:{editType:function(e){0===parseInt(e,10)&&this.initBasePageData()},teamId:function(e){if(e>0){this.changeTeamPanel()}},teamList:function(e){if(e.length>0){this.changeTeamPanel()}},baseInfo:function(e){I.a.isEmptyObject(e)||(this.emptyNumberList(),this.initBasePageData(e))}},methods:s()({},Object(v.b)(["getBaseCaseInfo","setTopNavTitle","savePageData","getTeamList","changeSaveStatus","changeUploadState","changeTemplateId","initUploadState","changeNumberModuleCount","setNumberModuleCount","emptyNumberList"]),{changeTeamPanel:function(){for(var e=this,t=e.teamList,a=[],n=0;n<t.length;n++)a.push({selectName:t[n].teamName,selectId:t[n].teamId}),e.assistantDoctor?e.belongType=1:t[n].teamId==e.baseInfo.teamId&&e.belongType>0&&(e.teamNumberType=n,e.belongType=1);e.teamSelectList=d()(a)},initBasePageData:function(e){var t=this,a={};t.patientAge=e&&e.patientAge&&!I.a.isEmptyObject(e.patientAge)?e.patientAge.split(","):["","",""],t.nameContent=e&&e.patientName&&!I.a.isEmptyObject(e.patientName)?e.patientName:"",t.numberContent=e&&e.numberContent&&!I.a.isEmptyObject(e.numberContent)?e.numberContent:"",t.contentYear=t.patientAge[0].length>0&&1*t.patientAge[0]+"">=0?t.patientAge[0]:"",t.contentMonth=1*t.patientAge[1]+"",t.contentDay=1*t.patientAge[2]+"",e&&e.numberList&&e.numberList.length>0?t.setNumberModuleCount(e.numberList.length):t.setNumberModuleCount(1);var n=function(t,a){if(e&&e.numberList&&e.numberList.length>0&&e.numberList[t]&&!isNaN(e.numberList[t].numberType)){if("numberType"===a)return parseInt(e.numberList[t][a],10)-1;if("numberContent"===a)return e.numberList[t][a];if("numberId"===a)return e.numberList[t][a]+""}else{if("numberType"===a)return 0;if("numberContent"===a)return"";if("numberId"===a)return""}};t.patientSex=e&&!isNaN(e.patientSex)?e.patientSex>0?0:1:-1,t.doctorId=e&&!isNaN(e.doctorId)?e.doctorId:0,t.patientMobile=e&&e.patientMobile&&!I.a.isEmptyObject(e.patientMobile)?e.patientMobile:"",t.numberType_0=n(0,"numberType"),t.numberId_0=n(0,"numberId"),t.numberContent_0=n(0,"numberContent"),t.numberType_1=n(1,"numberType"),t.numberId_1=n(1,"numberId"),t.numberContent_1=n(1,"numberContent"),t.numberType_2=n(2,"numberType"),t.numberId_2=n(2,"numberId"),t.numberContent_2=n(2,"numberContent"),t.numberType_3=n(3,"numberType"),t.numberId_3=n(3,"numberId"),t.numberContent_3=n(3,"numberContent"),t.numberType_4=n(4,"numberType"),t.numberId_4=n(4,"numberId"),t.numberContent_4=n(4,"numberContent"),t.belongType=t.assistantDoctor?1:e&&e.belongType?e.belongType:0;for(var s=[{componentId:"",componentType:"0",labelName:"姓名",isRequired:1,contentDes:t.nameContent,placeholder:"请输入",testRule:"testName",unitName:"",testResult:-1},{componentId:"",componentType:"6",labelName:"性别",isRequired:1,RadioList:[{radioName:"男",radioId:"1"},{radioName:"女",radioId:"0"}],index:parseInt(t.patientSex),testResult:-1},{componentId:"",componentType:"4",labelName:"年龄",isRequired:1,contentYear:t.contentYear,contentMonth:t.contentMonth>=0?t.contentMonth:"",contentDay:t.contentDay>=0?t.contentDay:"",testResult:-1},{componentId:"",componentType:"0",labelName:"电话",isRequired:0,contentDes:t.patientMobile,placeholder:"请输入中国大陆电话号码",testRule:"testPhoneNum",testResult:-1},{componentId:"",componentType:2,labelName:"编号1",isRequired:0,inBaseInfoPage:"1",contentDes:t.numberContent_0,numberId:t.numberId_0,placeholder:"请您输入",SelectInputList:[{selectName:"住院号",selectId:"1",testRule:"testNum"},{selectName:"床位号",selectId:"2",testRule:"testNum"},{selectName:"病历号",selectId:"3",testRule:"testNum"},{selectName:"身份证号",selectId:"4",testRule:"testID"},{selectName:"军官号",selectId:"5",testRule:"testNum"}],index:t.numberType_0,testResult:-1},{componentId:"",componentType:2,labelName:"编号2",isRequired:0,inBaseInfoPage:"1",contentDes:t.numberContent_1,numberId:t.numberId_1,placeholder:"请您输入",SelectInputList:[{selectName:"住院号",selectId:"1",testRule:"testNum"},{selectName:"床位号",selectId:"2",testRule:"testNum"},{selectName:"病历号",selectId:"3",testRule:"testNum"},{selectName:"身份证号",selectId:"4",testRule:"testID"},{selectName:"军官号",selectId:"5",testRule:"testNum"}],index:t.numberType_1,testResult:-1},{componentId:"",componentType:2,labelName:"编号3",isRequired:0,inBaseInfoPage:"1",contentDes:t.numberContent_2,numberId:t.numberId_2,placeholder:"请您输入",SelectInputList:[{selectName:"住院号",selectId:"1",testRule:"testNum"},{selectName:"床位号",selectId:"2",testRule:"testNum"},{selectName:"病历号",selectId:"3",testRule:"testNum"},{selectName:"身份证号",selectId:"4",testRule:"testID"},{selectName:"军官号",selectId:"5",testRule:"testNum"}],index:t.numberType_2,testResult:-1},{componentId:"",componentType:2,labelName:"编号4",isRequired:0,inBaseInfoPage:"1",contentDes:t.numberContent_3,numberId:t.numberId_3,placeholder:"请您输入",SelectInputList:[{selectName:"住院号",selectId:"1",testRule:"testNum"},{selectName:"床位号",selectId:"2",testRule:"testNum"},{selectName:"病历号",selectId:"3",testRule:"testNum"},{selectName:"身份证号",selectId:"4",testRule:"testID"},{selectName:"军官号",selectId:"5",testRule:"testNum"}],index:t.numberType_3,testResult:-1},{componentId:"",componentType:2,labelName:"编号5",isRequired:0,inBaseInfoPage:"1",contentDes:t.numberContent_4,numberId:t.numberId_4,placeholder:"请您输入",SelectInputList:[{selectName:"住院号",selectId:"1",testRule:"testNum"},{selectName:"床位号",selectId:"2",testRule:"testNum"},{selectName:"病历号",selectId:"3",testRule:"testNum"},{selectName:"身份证号",selectId:"4",testRule:"testID"},{selectName:"军官号",selectId:"5",testRule:"testNum"}],index:t.numberType_4,testResult:-1},{labelName:"",componentId:"",componentType:"12",radioLabelName:"归属",isRequired:0,selectLabelName:"归属团队",radioIndex:t.assistantDoctor?1:t.belongType,selectIndex:t.teamNumberType,SelectList:[],doctorId:t.doctorId,RadioList:[{radioName:"个人",radioId:"0"},{radioName:"团队",radioId:"1"}],testResult:-1},{labelName:"标签",componentId:"",componentType:"11",contentTagList:[],defaultTagList:t.defaultTagList,testResult:-1}],i=["nameHandleId","sexHandleId","ageHandleId","phoneNumHandleId","numberHandleId_0","numberHandleId_1","numberHandleId_2","numberHandleId_3","numberHandleId_4","belongHandleId","tagListHandleId"],o=0;o<s.length;o++){var r=s[o],l=Date.parse(new Date)+o;a[l]=r,t[i[o]]=l}t.savePageData(a)}})},Te=(a(288),Object(b.a)(Se,function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("section",{staticClass:"alEmr-indexInner"},[a("section",{staticClass:"navLeftWidth"},[a("h2",{domProps:{textContent:e._s(e.titleName)}}),e._v(" "),a("aside",{staticClass:"casesWidth"},[a("InputBar",{attrs:{testRule:"testName",isRequired:"",labelName:"姓名",placeholder:"请输入",HandleId:e.nameHandleId,contentDes:e.nameContent,maxLen:"20"}}),e._v(" "),a("RadioBar",{attrs:{RadioList:e.sexRadioList,index:e.patientSex,isRequired:"",labelName:"性别",HandleId:e.sexHandleId}}),e._v(" "),a("AgeInput",{attrs:{maxLen:"20",testYearRule:"0,120",testMonthRule:"0,12",testDayRule:"0,30",isRequired:"",labelName:"年龄",HandleId:e.ageHandleId,contentYear:e.contentYear,contentMonth:e.contentMonth,contentDay:e.contentDay,testResult:"-1"}}),e._v(" "),a("InputBar",{attrs:{maxLen:e.test,testRule:"testPhoneNum",labelName:"电话",placeholder:"请输入中国大陆电话号码",unitName:"",contentDes:e.patientMobile,HandleId:e.phoneNumHandleId}}),e._v(" "),e.numberModuleCount>=1?a("SelectInput",{attrs:{SelectInputList:e.selectList,contentDes:e.numberContent_0,index:e.numberType_0,labelName:"编号1",testRule:"testNum",HandleId:e.numberHandleId_0,addOnOff:1===e.numberModuleCount},on:{addSelectInputItem:e.changeNumberModuleCount}}):e._e(),e._v(" "),e.numberModuleCount>=2?a("SelectInput",{attrs:{SelectInputList:e.selectList,contentDes:e.numberContent_1,index:e.numberType_1,labelName:"编号2",testRule:"testNum",HandleId:e.numberHandleId_1,addOnOff:2===e.numberModuleCount},on:{addSelectInputItem:e.changeNumberModuleCount}}):e._e(),e._v(" "),e.numberModuleCount>=3?a("SelectInput",{attrs:{SelectInputList:e.selectList,contentDes:e.numberContent_2,index:e.numberType_2,labelName:"编号3",testRule:"testNum",HandleId:e.numberHandleId_2,addOnOff:3===e.numberModuleCount},on:{addSelectInputItem:e.changeNumberModuleCount}}):e._e(),e._v(" "),e.numberModuleCount>=4?a("SelectInput",{attrs:{SelectInputList:e.selectList,contentDes:e.numberContent_3,index:e.numberType_3,labelName:"编号4",testRule:"testNum",HandleId:e.numberHandleId_3,addOnOff:4===e.numberModuleCount},on:{addSelectInputItem:e.changeNumberModuleCount}}):e._e(),e._v(" "),e.numberModuleCount>=5?a("SelectInput",{attrs:{SelectInputList:e.selectList,contentDes:e.numberContent_4,index:e.numberType_4,labelName:"编号5",testRule:"testNum",HandleId:e.numberHandleId_4,addOnOff:!1},on:{addSelectInputItem:e.changeNumberModuleCount}}):e._e(),e._v(" "),a("radioSelectBar",{directives:[{name:"show",rawName:"v-show",value:e.ownerCheck,expression:"(ownerCheck)"}],attrs:{RadioList:e.belongRadioList,radioLabelName:"归属",selectLabelName:"归属团队",SelectList:e.teamSelectList,selectSecondLabelName:"主管医生",radioIndex:e.belongType,HandleId:e.belongHandleId,selectIndex:e.teamNumberType}}),e._v(" "),a("TagList",{attrs:{contentTagList:e.tagList,maxLen:"20",labelName:"标签",HandleId:e.tagListHandleId}})],1),e._v(" "),a("ChangeIndex")],1)])},[],!1,null,null,null).exports),De=(a(18),a(6),{components:{InputBar:re,RadioBar:Ce},data:function(){return{RadioList:[{radioName:"男"},{radioName:"女"}],SelectInputList:[{selectName:"11111"},{selectName:"22222"}]}},mounted:function(){Date.parse(new Date)},methods:{resetSelect:function(){}}}),_e=Object(b.a)(De,function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("section",{staticClass:"alEmr-indexInner",on:{click:function(t){return t.stopPropagation(),e.resetSelect(t)}}},[a("aside",{staticClass:"casesWidth"})])},[],!1,null,null,null).exports,Oe={props:{InputSelectList:{type:String},reallyIsValid:{default:"1"},index:{default:"-1"},HandleId:{default:0},isRequired:{type:Boolean,default:!1},labelName:{type:String,default:""},needInput:{type:Boolean,default:!1},contentDes:{type:String,default:""},relatedParentId:{default:0},associatedRole:{default:!1},placeholder:{type:String,default:""}},data:function(){return{inputSelectData:"",selectOnOff:!1,inputContent:"",inputFocus:!1,loadEnd:!1,inputStart:!1,selectIndex:-1,testRule:"",associatedState:!1,HandleParentId:"",testDes:"",inputError:!1}},computed:s()({},Object(v.c)(["globalEvent","clickNum","pageInfo","Relationship"]),{selectContent:function(){var e=this;return parseInt(e.selectIndex,10)<0?"":e.inputSelectData[e.selectIndex]&&e.inputSelectData[e.selectIndex].selectName?e.inputSelectData[e.selectIndex].selectName:""},passOnOff:function(){return this.checkError()?0:1}}),watch:{globalEvent:function(e){this.selectOnOff=!1},Relationship:function(e){var t=this;if(e.handleId==t.HandleParentId){for(var a=!1,n=0;n<e.relationId.length;n++)e.relationId[n]==t.HandleId&&(a=!0);t.associatedState=a}},inputContent:function(e){var t=this;t.checkError()||(t.inputError=t.checkError(),t.testDes=""),t.changeComponentData({HandleId:t.HandleId,index:t.selectIndex,contentDes:e}),t.changeComponentTestResult({HandleId:t.HandleId,testResult:t.passOnOff}),!t.inputStart&&(t.inputStart=!0)},associatedState:function(e){e||this.resetData()},InputSelectList:function(e){this.inputSelectData=e},index:function(e){this.selectIndex=e},contentDes:function(e){this.inputContent=this.checkInvalid(e)?"":e},selectIndex:function(e){var t=this;t.changeComponentData({HandleId:t.HandleId,index:e,contentDes:t.inputContent}),t.loadEnd=!0,t.checkError()||(t.inputError=t.checkError(),t.testDes=""),t.testRule=t.inputSelectData[e]&&t.inputSelectData[e].testRule,t.changeComponentTestResult({HandleId:t.HandleId,testResult:t.passOnOff})},associatedRole:function(e){this.associatedState=!("true"==e)},relatedParentId:function(e){this.HandleParentId=e},inputFocus:function(e){var t=this;e||(t.loadEnd=!0,t.checkError()||(t.inputError=t.checkError(),t.testDes=""))},clickNum:function(){var e=this;e.inputError=e.checkError(),e.checkTest()}},methods:s()({},Object(v.b)(["changeComponentData","changeComponentTestResult"]),{resetData:function(){this.selectIndex=-1,this.inputContent=""},toggleSelect:function(){this.selectOnOff=!this.selectOnOff},ensureRelationship:function(){var e=this,t=this.pageInfo.pageData[e.HandleParentId];if(t&&t.checkBoxList){for(var a=t.checkBoxList,n=0;n<a.length;n++)if(a[n].checkOnOff&&a[n].relationId&&a[n].relationId.length>0)for(var s=0;s<a[n].relationId.length;s++)e.HandleId==a[n].relationId[s]&&(e.associatedState=!0)}else if(t&&t.RadioList){var i=t.RadioList,o=t.index;if(-1!=o&&i[o]&&i[o].relationId&&i[o].relationId.length>0)for(var r=0;r<i[o].relationId.length;r++)e.HandleId==i[o].relationId[r]&&(e.associatedState=!0)}},checkError:function(){var e=this;if(e.selectIndex>=0){if(e.testRule&&e.testRule.indexOf(",")>-1){if(0==e.inputContent.length)return!0;var t=e.testRule.split(","),a=t[0],n=t[1];return!ee.a.isPInt(e.inputContent)||e.testRule&&!(parseInt(e.inputContent)>=a&&parseInt(e.inputContent)<=n)&&e.inputStart&&e.inputContent.length>0}return this.testRule&&!ee.a[this.testRule](this.inputContent)&&this.inputStart&&this.inputContent.length>0&&e.selectIndex>=0}return!!e.inputContent.length},checkTest:function(){var e=this,t="";e.inputFocus?t=e.inputError?"请输入正确的"+e.labelName:"":e.inputError&&(t="请输入正确的"+e.labelName),e.testDes=t},changeSelect:function(e){this.selectIndex=e,this.selectOnOff=!1},checkInvalid:function(e){return("string"!=typeof e||0!=e.length)&&void 0!=e&&"undefined"!=e&&"null"!=e&&void 0!==e&&"null"!=typeof e&&null!=e}}),mounted:function(){this.inputSelectData=JSON.parse(this.InputSelectList),this.selectIndex=this.index,this.inputContent=this.checkInvalid(this.contentDes)?this.contentDes:"",this.associatedState=!("true"==this.associatedRole),this.HandleParentId=this.relatedParentId,this.ensureRelationship()}},Le=(a(286),Object(b.a)(Oe,function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{directives:[{name:"show",rawName:"v-show",value:e.associatedState,expression:"associatedState"}],staticClass:"formSelect formCommon",style:{visibility:0===parseInt(e.reallyIsValid,10)?"hidden":""}},[a("p",{staticClass:"articleText",class:{errorText:e.loadEnd&&e.inputError}},[e.isRequired?a("i",[e._v("*")]):e._e(),e._v(e._s(e.labelName))]),e._v(" "),a("div",{staticClass:"inputSelect"},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.inputContent,expression:"inputContent"}],class:{focusBorder:e.inputFocus,error:e.loadEnd&&e.inputError},attrs:{type:"text"},domProps:{value:e.inputContent},on:{focus:function(t){t.stopPropagation(),e.inputFocus=!0},blur:function(t){t.stopPropagation(),e.inputFocus=!1},input:function(t){t.target.composing||(e.inputContent=t.target.value)}}}),e._v(" "),a("div",{staticClass:"SelectCont",on:{click:function(t){return t.stopPropagation(),e.toggleSelect(t)}}},[a("span",{staticClass:"formInputSelectItem",domProps:{textContent:e._s(e.selectContent.length?e.selectContent:"")}}),e._v(" "),a("ul",{directives:[{name:"show",rawName:"v-show",value:e.selectOnOff,expression:"selectOnOff"}],staticClass:"selectOption"},e._l(e.inputSelectData,function(t,n){return a("li",{key:n,staticClass:"formInputSelectItem",domProps:{textContent:e._s(t&&t.selectName?t.selectName:"")},on:{click:function(t){t.stopPropagation(),e.changeSelect(n)}}})}))])]),e._v(" "),a("p",{directives:[{name:"show",rawName:"v-show",value:e.loadEnd&&e.inputError,expression:"loadEnd&&inputError"}],staticClass:"formError",domProps:{textContent:e._s(e.testDes)}})])},[],!1,null,"123807fd",null).exports),ke=function(){function e(){L()(this,e),this.yearTimeBox=[],this.monthTimeBox=[],this.dayTimeBox=[],this.getYearDate()}return w()(e,[{key:"getYearDate",value:function(){for(var e=(new Date).getFullYear();e>1899;e--)this.yearTimeBox.push(e);this.getMonthDate()}},{key:"getMonthDate",value:function(){for(var e=1;e<13;e++)this.monthTimeBox.push(e);var t=new Date;this.getDayDate(t.getFullYear(),t.getMonth()+1)}},{key:"getDayDate",value:function(e,t){var a=e,n=t;this.dayTimeBox=[];for(var s=new Date(a,n,0).getDate(),i=1;i<s+1;i++)this.dayTimeBox.push(i);return this.dayTimeBox}}]),e}(),we={props:{HandleId:{default:0},reallyIsValid:{default:"1"},yearSelect:{default:""},monthSelect:{default:""},daySelect:{default:""},isRequired:{type:Boolean,default:!1},relatedParentId:{default:0},associatedRole:{default:!1},labelName:{type:String,default:""}},computed:s()({},Object(v.c)(["Relationship","globalEvent","clickNum","pageInfo"]),{error:function(){var e=this,t=!0;return""!=e.yearSelectContent&&""!=e.monthSelectContent&&""!=e.daySelectContent||!(e.yearSelectContent>0||e.monthSelectContent>0||e.daySelectContent>0)?(t=!0,e.testDes=""):t=!1,t}}),data:function(){return{yearSelectOnOff:!1,yearSelectContent:"",monthSelectOnOff:!1,monthSelectContent:"",daySelectOnOff:!1,daySelectContent:"",dateData:{dayTimeBox:[],monthTimeBox:[],yearTimeBox:[]},associatedState:!1,HandleParentId:"",testDes:""}},methods:s()({},Object(v.b)(["changeComponentData","changeComponentTestResult"]),{resetData:function(){var e=this;e.yearSelectContent="",e.monthSelectContent="",e.daySelectContent=""},ensureRelationship:function(){var e=this,t=this.pageInfo.pageData[e.HandleParentId];if(t&&t.checkBoxList){for(var a=t.checkBoxList,n=0;n<a.length;n++)if(a[n].checkOnOff&&a[n].relationId&&a[n].relationId.length>0)for(var s=0;s<a[n].relationId.length;s++)e.HandleId==a[n].relationId[s]&&(e.associatedState=!0)}else if(t&&t.RadioList){var i=t.RadioList,o=t.index;if(-1!=o&&i[o]&&i[o].relationId&&i[o].relationId.length>0)for(var r=0;r<i[o].relationId.length;r++)e.HandleId==i[o].relationId[r]&&(e.associatedState=!0)}},toggleSelect:function(e){var t=this;switch(parseInt(e,10)){case 0:t.yearSelectOnOff=!t.yearSelectOnOff;break;case 1:t.monthSelectOnOff=!t.monthSelectOnOff;break;case 2:t.daySelectOnOff=!t.daySelectOnOff}},changeTime:function(e,t){var a=this;switch(e){case 0:a.yearSelectContent=t,a.yearSelectOnOff=!1;break;case 1:a.monthSelectContent=t,a.monthSelectOnOff=!1;break;case 2:a.daySelectContent=t,a.daySelectOnOff=!1}}}),watch:{error:function(e){var t=this;e?t.changeComponentTestResult({HandleId:t.HandleId,testResult:1}):t.changeComponentTestResult({HandleId:t.HandleId,testResult:0})},globalEvent:function(e){var t=this;t.yearSelectOnOff=!1,t.monthSelectOnOff=!1,t.daySelectOnOff=!1},Relationship:function(e){var t=this;if(e.handleId==t.HandleParentId){for(var a=!1,n=0;n<e.relationId.length;n++)e.relationId[n]==t.HandleId&&(a=!0);t.associatedState=a}},clickNum:function(){var e=this;e.error?e.testDes="":e.testDes="请输入正确的"+e.labelName},associatedState:function(e){e||this.resetData()},yearSelectContent:function(e){var t=this;t.dayTimeBox=[],t.dayTimeBox=t.dateData.getDayDate(e,parseInt(t.monthSelectContent,10)),t.daySelectContent="",t.changeComponentData({HandleId:t.HandleId,yearSelect:e,monthSelect:t.monthSelectContent,daySelect:t.daySelectContent})},monthSelectContent:function(e){var t=this;t.dayTimeBox=[],t.dayTimeBox=t.dateData.getDayDate(parseInt(t.yearSelectContent,10),e),t.daySelectContent="",t.changeComponentData({HandleId:t.HandleId,yearSelect:t.yearSelectContent,monthSelect:e,daySelect:t.daySelectContent})},yearSelect:function(e){this.yearSelectContent=e},monthSelect:function(e){this.monthSelectContent=e},daySelect:function(e){this.daySelectContent=e},daySelectContent:function(e){var t=this;t.changeComponentData({HandleId:t.HandleId,yearSelect:t.yearSelectContent,monthSelect:t.monthSelectContent,daySelect:e})},associatedRole:function(e){this.associatedState=!("true"==e)},relatedParentId:function(e){this.HandleParentId=e}},mounted:function(){var e=this;e.dateData=new ke,e.yearSelectContent=e.yearSelect,e.monthSelectContent=e.monthSelect,setTimeout(function(){e.daySelectContent=e.daySelect},500),e.associatedState=!("true"==e.associatedRole),e.HandleParentId=e.relatedParentId,e.ensureRelationship()}},Ne=Object(b.a)(we,function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{directives:[{name:"show",rawName:"v-show",value:e.associatedState,expression:"associatedState"}],staticClass:"formSelectS formCommon",style:{visibility:0===parseInt(e.reallyIsValid,10)?"hidden":""}},[a("p",{staticClass:"articleText"},[e.isRequired?a("i",[e._v("*")]):e._e(),e._v("\n        "+e._s(e.labelName)+"\n    ")]),e._v(" "),a("div",{staticClass:"cont"},[a("div",{staticClass:"selectCont",on:{click:function(t){t.stopPropagation(),e.toggleSelect(0)}}},[a("span",{domProps:{textContent:e._s(e.yearSelectContent)}}),e._v(" "),a("ul",{directives:[{name:"show",rawName:"v-show",value:e.yearSelectOnOff,expression:"yearSelectOnOff"}],staticClass:"selectOption"},e._l(e.dateData.yearTimeBox,function(t,n){return a("li",{key:n,domProps:{textContent:e._s(t)},on:{click:function(a){a.stopPropagation(),e.changeTime(0,t)}}})}))]),e._v(" "),a("b",[e._v("年")]),e._v(" "),a("div",{staticClass:"selectCont width83",on:{click:function(t){t.stopPropagation(),e.toggleSelect(1)}}},[a("span",{domProps:{textContent:e._s(e.monthSelectContent)}}),e._v(" "),a("ul",{directives:[{name:"show",rawName:"v-show",value:e.monthSelectOnOff,expression:"monthSelectOnOff"}],staticClass:"selectOption"},e._l(e.dateData.monthTimeBox,function(t,n){return a("li",{key:n,domProps:{textContent:e._s(t)},on:{click:function(a){a.stopPropagation(),e.changeTime(1,t)}}})}))]),e._v(" "),a("b",[e._v("月")]),e._v(" "),a("div",{staticClass:"selectCont width83",on:{click:function(t){t.stopPropagation(),e.toggleSelect(2)}}},[a("span",{domProps:{textContent:e._s(e.daySelectContent)}}),e._v(" "),a("ul",{directives:[{name:"show",rawName:"v-show",value:e.daySelectOnOff,expression:"daySelectOnOff"}],staticClass:"selectOption"},e._l(e.dateData.dayTimeBox,function(t,n){return a("li",{key:n,domProps:{textContent:e._s(t)},on:{click:function(a){a.stopPropagation(),e.changeTime(2,t)}}})}))]),e._v(" "),a("b",[e._v("日")])]),e._v(" "),a("p",{directives:[{name:"show",rawName:"v-show",value:!e.error,expression:"!error"}],staticClass:"formError",domProps:{textContent:e._s(e.testDes)}})])},[],!1,null,null,null).exports,Pe=a(6),Re={props:{checkBoxList:{type:String},reallyIsValid:{default:"1"},index:{default:"-1"},isBothSides:{default:0},sideType:{default:1},isRequired:{type:Boolean,default:!1},HandleId:{default:0},labelName:{type:String,default:""},row:{type:Boolean,default:!1},needInput:{type:Boolean,default:!1},otherCheckOnOff:{default:!1},testRule:{type:String,default:""},contentDes:{type:String,default:""},relatedParentId:{default:0},associatedRole:{default:!1},placeholder:{type:String,default:""},otherLabel:{type:String,default:""}},data:function(){return{maxItemNum:6,inputStart:!1,inputFocus:!1,inputCheck:!1,inputContent:"",radioListDemo:[],associatedState:!1,HandleParentId:"",dialogOnOff:!1,restore:{radioListDemo:"",inputContent:""}}},computed:s()({},Object(v.c)(["Relationship","clickNum","templateAssemblePageOnOff","pageInfo"]),{inputError:function(){return this.testRule&&!ee.a[this.testRule](this.inputContent)&&this.inputStart},checkContent:function(){for(var e=this,t="",a=0;a<e.radioListDemo.length;a++)e.radioListDemo[a].checkOnOff&&(t+="；"+e.radioListDemo[a].checkboxName);return e.checkInvalid(e.inputContent)?e.inputCheck&&(t+="；其他"):t+="；"+e.inputContent,e.checkStatus(),0==t.indexOf("；")?t.substring(1,1e8):t},testDes:function(){var e=this;if(!e.inputFocus)return e.inputCheck&&e.inputContent.length,""}}),components:{LayerComponent:fe},watch:{Relationship:function(e){var t=this;if(e.handleId==t.HandleParentId){for(var a=!1,n=0;n<e.relationId.length;n++)e.relationId[n]==t.HandleId&&(a=!0);t.associatedState=a}},associatedState:function(e){e||this.resetData()},inputContent:function(e){var t=this;!t.inputStart&&(t.inputStart=!0),t.changeComponentData({HandleId:t.HandleId,contentDes:e})},inputFocus:function(e){e&&(this.inputCheck=!0),this.checkStatus()},checkBoxList:function(e){this.radioListDemo=JSON.parse(e)},otherCheckOnOff:function(e){this.inputCheck="true"===e},contentDes:function(e){this.inputContent=e},templateAssemblePageOnOff:function(e){e&&this.changeRelationship()},radioListDemo:{handler:function(e){var t=this;t.changeComponentData({HandleId:t.HandleId,checkBoxList:e,contentDes:t.inputContent}),t.changeRelationship()},deep:!0},associatedRole:function(e){this.associatedState=!("true"==e)},relatedParentId:function(e){this.HandleParentId=e},clickNum:function(){}},methods:s()({},Object(v.b)(["changeComponentData","changeComponentTestResult","checkRelationship"]),{resetData:function(){for(var e=this,t=0;t<e.radioListDemo.length;t++)e.radioListDemo[t].checkOnOff=!1;e.inputContent="",e.inputCheck=!1},ensureRelationship:function(){var e=this,t=this.pageInfo.pageData[e.HandleParentId];if(t&&t.checkBoxList){for(var a=t.checkBoxList,n=0;n<a.length;n++)if(a[n].checkOnOff&&a[n].relationId&&a[n].relationId.length>0)for(var s=0;s<a[n].relationId.length;s++)e.HandleId==a[n].relationId[s]&&(e.associatedState=!0)}else if(t&&t.RadioList){var i=t.RadioList,o=t.index;if(-1!=o&&i[o]&&i[o].relationId&&i[o].relationId.length>0)for(var r=0;r<i[o].relationId.length;r++)e.HandleId==i[o].relationId[r]&&(e.associatedState=!0)}},changeRelationship:function(){for(var e=this,t=[],a=0;a<e.radioListDemo.length;a++)e.radioListDemo[a].checkOnOff&&e.radioListDemo[a].relationId&&e.radioListDemo[a].relationId.length>0&&(t=t.concat(e.radioListDemo[a].relationId));e.checkRelationship({relationId:t,handleId:e.HandleId})},checkInvalid:function(e){return"string"==typeof e&&0==e.length||void 0==e||"undefined"==e||"null"==e||void 0===e||"null"==typeof e||null==e},selectInput:function(){var e=this;e.inputCheck=!e.inputCheck,e.inputCheck&&Pe(e.$refs.inputBar).trigger("focus"),e.checkStatus(),e.changeComponentData({HandleId:e.HandleId,otherCheckOnOff:e.inputCheck,contentDes:e.inputContent})},selectCheck:function(e){var t=this;t.radioListDemo[e].checkOnOff=!t.radioListDemo[e].checkOnOff,t.checkStatus(),t.changeComponentData({HandleId:t.HandleId,checkBoxList:t.radioListDemo,contentDes:t.inputContent})},cancelDialog:function(){this.restoreData(),this.hideDialog()},restoreData:function(){var e=this;e.radioListDemo=JSON.parse(e.restore.radioListDemo),e.inputContent=e.restore.inputContent},ensureCheck:function(){this.hideDialog()},hideDialog:function(){this.dialogOnOff=!1},showDialog:function(){var e=this;e.restore.radioListDemo=d()(e.radioListDemo),e.restore.inputContent=e.inputContent,e.dialogOnOff=!0},checkStatus:function(){var e=this;e.HandleId&&(e.needInput&&e.inputCheck?e.changeComponentTestResult({HandleId:e.HandleId,testResult:1}):e.changeComponentTestResult({HandleId:e.HandleId,testResult:-1}))}}),mounted:function(){var e=this;this.inputContent=e.checkInvalid(this.contentDes)?"":this.contentDes,this.radioListDemo=JSON.parse(e.checkBoxList),this.inputCheck="true"===e.otherCheckOnOff,this.associatedState=!("true"==this.associatedRole),this.HandleParentId=this.relatedParentId,e.ensureRelationship()}},je=(a(284),Object(b.a)(Re,function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("section",{staticClass:"formCommonWrap",style:{visibility:0===parseInt(e.reallyIsValid,10)?"hidden":""}},[e.radioListDemo.length<=e.maxItemNum&&!e.needInput&&0==e.isBothSides?a("div",{directives:[{name:"show",rawName:"v-show",value:e.associatedState,expression:"associatedState"}],staticClass:"formRadio formCommon formCheck",class:{formRow:(e.needInput?1:0)+e.radioListDemo.length>2||e.needInput,formContentLr:1==e.isBothSides}},[a("p",{staticClass:"articleText"},[e.isRequired?a("i",[e._v("*")]):e._e(),e._v(e._s(e.labelName))]),e._v(" "),a("div",{staticClass:"radioRight"},[e._l(e.radioListDemo,function(t,n){return a("div",{key:n,staticClass:"radioIconNormal",class:{active:t.checkOnOff},on:{click:function(t){t.stopPropagation(),e.selectCheck(n)}}},[a("i"),a("span",{domProps:{textContent:e._s(t.checkboxName)}})])}),e._v(" "),e.needInput?a("div",{key:-2,staticClass:"radioIconNormal",class:{active:e.inputCheck},on:{click:e.selectInput}},[a("i"),a("span",[e._v("其他")]),a("input",{directives:[{name:"model",rawName:"v-model",value:e.inputContent,expression:"inputContent"}],ref:"inputBar",class:{error:e.inputError,focusBorder:e.inputFocus},attrs:{type:"text",placeholder:e.placeholder},domProps:{value:e.inputContent},on:{focus:function(t){e.inputFocus=!0},blur:function(t){e.inputFocus=!1},click:function(t){t.stopPropagation(),e.inputCheck=!0},input:function(t){t.target.composing||(e.inputContent=t.target.value)}}})]):e._e()],2),e._v(" "),a("p",{staticClass:"formError",domProps:{textContent:e._s(e.testDes)}})]):e._e(),e._v(" "),e.radioListDemo.length>e.maxItemNum&&!e.needInput||e.needInput||1==e.isBothSides?a("div",{directives:[{name:"show",rawName:"v-show",value:e.associatedState,expression:"associatedState"}],staticClass:"formInput formCommon",class:{formContentLr:1==e.isBothSides},attrs:{tag:e.associatedState}},[a("p",{directives:[{name:"show",rawName:"v-show",value:2!=e.sideType,expression:"sideType!=2"}],staticClass:"articleText",class:{selectText:e.radioListDemo.length>e.maxItemNum&&!e.needInput||e.needInput}},[e.isRequired?a("i",[e._v("*")]):e._e(),e._v(e._s(e.labelName))]),e._v(" "),a("div",{staticClass:"inputCont"},[a("span",{staticClass:"formSelectIcon",domProps:{textContent:e._s(1==e.sideType?"L":"R")}}),e._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:e.checkContent,expression:"checkContent"}],attrs:{type:"text",placeholder:"请选择"},domProps:{value:e.checkContent},on:{click:function(t){return t.stopPropagation(),e.showDialog(t)},input:function(t){t.target.composing||(e.checkContent=t.target.value)}}})]),e._v(" "),a("p",{staticClass:"formError",domProps:{textContent:e._s(e.testDes)}}),e._v(" "),a("LayerComponent",{directives:[{name:"show",rawName:"v-show",value:e.dialogOnOff,expression:"dialogOnOff"}],on:{closeDialog:e.cancelDialog,submitDialog:e.ensureCheck}},[a("div",{staticClass:"formRadio formCommon formCheck",class:{formRow:(e.needInput?1:0)+e.radioListDemo.length>2||e.needInput||1==e.isBothSides}},[(e.needInput?1:0)+e.radioListDemo.length>2?e._e():a("p",{staticClass:"articleText"},[e.isRequired?a("i",[e._v("*")]):e._e(),e._v(e._s(e.labelName))]),e._v(" "),a("div",{staticClass:"radioRight"},[e._l(e.radioListDemo,function(t,n){return a("div",{key:n,staticClass:"radioIconNormal",class:{active:t.checkOnOff},on:{click:function(t){t.stopPropagation(),e.selectCheck(n)}}},[a("i"),a("span",{domProps:{textContent:e._s(t.checkboxName)}})])}),e._v(" "),e.needInput?a("div",{key:-2,staticClass:"radioIconNormal",class:{active:e.inputCheck},on:{click:e.selectInput}},[a("i"),a("span",{domProps:{textContent:e._s(e.checkInvalid(e.otherLabel)?"":e.otherLabel)}}),a("input",{directives:[{name:"model",rawName:"v-model",value:e.inputContent,expression:"inputContent"}],ref:"inputBar",class:{error:e.inputError,focusBorder:e.inputFocus},attrs:{type:"text",placeholder:e.placeholder},domProps:{value:e.inputContent},on:{focus:function(t){e.inputFocus=!0},blur:function(t){e.inputFocus=!1},click:function(t){t.stopPropagation(),e.inputCheck=!0},input:function(t){t.target.composing||(e.inputContent=t.target.value)}}})]):e._e()],2),e._v(" "),a("p",{staticClass:"formError formErrorTwo",domProps:{textContent:e._s(e.testDes)}})])])],1):e._e()])},[],!1,null,"27ad6288",null).exports),Be={props:{maxLen:{default:""},reallyIsValid:{default:"1"},titleDes:{type:String,default:""},title:{type:String,default:""},HandleId:{default:0},subTitle:{type:String,default:""},contentDes:{type:String,default:""},isBothSides:{default:0},sideType:{default:1},testRule:{type:String,default:""},labelName:{type:String,default:""},relatedParentId:{default:0},associatedRole:{default:!1},placeholder:{type:String,default:""}},data:function(){return{inputStart:!1,inputFocus:!1,inputContent:"",associatedState:!1,HandleParentId:"",inputFocusTime:0}},mounted:function(){this.inputContent=this.contentDes,this.associatedState=!("true"==this.associatedRole),this.HandleParentId=this.relatedParentId,this.ensureRelationship()},methods:s()({},Object(v.b)(["setTopNavTitle","changeComponentData","changeComponentTestResult"]),{ensureRelationship:function(){var e=this,t=this.pageInfo.pageData[e.HandleParentId];if(t&&t.checkBoxList){for(var a=t.checkBoxList,n=0;n<a.length;n++)if(a[n].checkOnOff&&a[n].relationId&&a[n].relationId.length>0)for(var s=0;s<a[n].relationId.length;s++)e.HandleId==a[n].relationId[s]&&(e.associatedState=!0)}else if(t&&t.RadioList){var i=t.RadioList,o=t.index;if(-1!=o&&i[o]&&i[o].relationId&&i[o].relationId.length>0)for(var r=0;r<i[o].relationId.length;r++)e.HandleId==i[o].relationId[r]&&(e.associatedState=!0)}},resetData:function(){this.inputContent=""}}),computed:s()({},Object(v.c)(["titleName","Relationship","pageInfo"]),{inputError:function(){if(this.testRule.indexOf(",")>-1){var e=this.testRule.split(","),t=e[0],a=e[1];return this.testRule&&!(parseInt(this.inputContent)>=t&&parseInt(this.inputContent)<=a)&&this.inputStart}return this.testRule&&!ee.a[this.testRule](this.inputContent)&&this.inputStart},passOnOff:function(){return this.inputError?0:1}}),watch:{Relationship:function(e){var t=this;if(e.handleId==t.HandleParentId){for(var a=!1,n=0;n<e.relationId.length;n++)e.relationId[n]==t.HandleId&&(a=!0);t.associatedState=a}},contentDes:function(e){this.inputContent=e},inputContent:function(e){var t=this;!t.inputStart&&(t.inputStart=!0),e.length>t.maxLen&&(t.inputContent=t.inputContent.substring(0,t.maxLen)),t.changeComponentData({HandleId:t.HandleId,contentDes:e}),t.changeComponentTestResult({HandleId:t.HandleId,testResult:t.passOnOff})},associatedRole:function(e){this.associatedState=!("true"==e)},associatedState:function(e){e||this.resetData()},relatedParentId:function(e){this.HandleParentId=e},inputFocus:function(e){var t=this;e&&t.inputFocusTime++,1==t.inputFocusTime&&0==t.inputContent.length&&t.placeholder.length>0&&-1==t.placeholder.indexOf("请输入")&&(t.inputContent=t.placeholder)}}},Fe=(a(282),Object(b.a)(Be,function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("aside",{directives:[{name:"show",rawName:"v-show",value:e.associatedState,expression:"associatedState"}],staticClass:"caseHistoryMsg formCommon",class:{formContentLr:1==e.isBothSides},style:{visibility:0===parseInt(e.reallyIsValid,10)?"hidden":""}},[e.title.length?a("h3",{domProps:{textContent:e._s(e.title)}}):e._e(),e._v(" "),a("article",{directives:[{name:"show",rawName:"v-show",value:e.titleDes.length,expression:"titleDes.length"}],domProps:{textContent:e._s(e.titleDes)}}),e._v(" "),2!=e.sideType?a("p",{directives:[{name:"show",rawName:"v-show",value:e.labelName.length,expression:"labelName.length"}],staticClass:"articleText",domProps:{textContent:e._s(e.labelName)}}):e._e(),e._v(" "),a("div",{staticClass:"textarea",class:{focusBorder:e.inputFocus}},[a("span",{staticClass:"formSelectIcon",domProps:{textContent:e._s(1==e.sideType?"L":"R")}}),e._v(" "),a("textarea",{directives:[{name:"model",rawName:"v-model",value:e.inputContent,expression:"inputContent"}],attrs:{placeholder:e.placeholder},domProps:{value:e.inputContent},on:{focus:function(t){t.stopPropagation(),e.inputFocus=!0},blur:function(t){t.stopPropagation(),e.inputFocus=!1},input:function(t){t.target.composing||(e.inputContent=t.target.value)}}}),e._v(" "),a("i",{directives:[{name:"show",rawName:"v-show",value:e.maxLen-e.inputContent.length<=20,expression:"maxLen-inputContent.length<=20"}],style:{color:e.maxLen-e.inputContent.length==0?"red":""},domProps:{textContent:e._s(e.maxLen-e.inputContent.length)}})])])},[],!1,null,"745a760a",null).exports),He={props:["labelName"]},Ee=Object(b.a)(He,function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"addColumnBtn"},[t("i"),t("span",{domProps:{textContent:this._s(this.labelName)}})])},[],!1,null,null,null).exports,Me=a(132).a,Ve=Object(b.a)(Me,function(){var e=this.$createElement,t=this._self._c||e;return t("section",{directives:[{name:"show",rawName:"v-show",value:this.associatedState,expression:"associatedState"}],style:{visibility:0===parseInt(this.reallyIsValid,10)?"hidden":""}},[t("upload-column",{attrs:{uploadColumn:this.uploadData},on:{uploadBackInfo:this.uploadBackInfo,changeItemRemarks:this.changeItemRemarks}})],1)},[],!1,null,null,null).exports,Ae=function(){function e(t){L()(this,e);this.pageHtml="",this.pageData=t,this.init()}return w()(e,[{key:"init",value:function(){return{id:"11111111"}}},{key:"htmlStr",value:function(e,t,a,n){var s=e,i="";switch(0!=s.isBothSides&&1!=s.isBothSides?(s.isBothSides=0,s.sideType=0):0==s.sideType.length&&(s.sideType=0),parseInt(s.componentType,10)){case 0:i="\n                          <InputBar  reallyIsValid="+s.reallyIsValid+" sideType="+parseInt(s.sideType)+" isBothSides="+parseInt(s.isBothSides)+" relatedParentId="+(s.relatedParentId?s.relatedParentId:0)+" associatedRole="+s.associatedRole+'  contentDes="'+s.contentDes+'" testRule="'+(s.testRule?s.testRule:"")+'"  HandleId="'+t+'"  '+(1===parseInt(s.isRequired,10)?"isRequired":"")+' labelName="'+s.labelName+'" placeholder="'+s.placeholder+'" unitName="'+s.unitName+'" maxLen="'+(parseInt(s.maxLen)>0?s.maxLen:"")+'"></InputBar>\n                        ';break;case 1:i="\n                          <SelectBar   reallyIsValid="+s.reallyIsValid+"  style='"+a+"'  sideType="+s.sideType+"   isBothSides="+s.isBothSides+" relatedParentId="+(s.relatedParentId?s.relatedParentId:0)+"  associatedRole="+s.associatedRole+"  SelectList='"+d()(s.SelectList)+"'   HandleId=\""+t+'"  index="'+s.index+'" '+(1===parseInt(s.isRequired,10)?"isRequired":"")+' labelName="'+s.labelName+'"></SelectBar>\n                        ';break;case 2:i="\n                          <SelectInput    reallyIsValid="+s.reallyIsValid+" style='"+a+"'   relatedParentId="+(s.relatedParentId?s.relatedParentId:0)+"  associatedRole="+s.associatedRole+"  SelectInputList='"+d()(s.SelectInputList)+"'    HandleId=\""+t+'"  index="'+s.index+'" '+(1===parseInt(s.isRequired,10)?"isRequired":"")+' labelName="'+s.labelName+'"  contentDes="'+s.contentDes+'"  testRule="'+(s.testRule?s.testRule:"")+'" ></SelectInput>\n                        ';break;case 3:i="\n                          <InputSelect    reallyIsValid="+s.reallyIsValid+" style='paddingBottom:"+a+";'   relatedParentId="+(s.relatedParentId?s.relatedParentId:0)+"  associatedRole="+s.associatedRole+"  InputSelectList='"+d()(s.InputSelectList)+"'    HandleId=\""+t+'"  contentDes="'+s.contentDes+'"  index="'+s.index+'" '+(1===parseInt(s.isRequired,10)?"isRequired":"")+' labelName="'+s.labelName+'"  testRule="'+(s.testRule?s.testRule:"")+'" ></InputSelect>\n                        ';break;case 4:i="\n                          <AgeInput     reallyIsValid="+s.reallyIsValid+' testYearRule="0,120" testMonthRule="0,12" testDayRule="0,30" relatedParentId='+(s.relatedParentId?s.relatedParentId:0)+"  associatedRole="+s.associatedRole+"   "+(1===parseInt(s.isRequired,10)?"isRequired":"")+'   HandleId="'+t+'"  labelName="'+s.labelName+'" contentYear="'+s.contentYear+'"  contentMonth="'+s.contentMonth+'"  contentDay="'+s.contentDay+'"></AgeInput>\n                        ';break;case 5:i="\n                          <DatePicker    reallyIsValid="+s.reallyIsValid+" style='"+a+"' relatedParentId="+(s.relatedParentId?s.relatedParentId:0)+"  associatedRole="+s.associatedRole+"  "+(1===parseInt(s.isRequired,10)?"isRequired":"")+'   HandleId="'+t+'"  labelName="'+s.labelName+'"   yearSelect="'+s.yearSelect+'" monthSelect="'+s.monthSelect+'" daySelect="'+s.daySelect+'"></DatePicker>\n                        ';break;case 6:i="\n                        <RadioBar     reallyIsValid="+s.reallyIsValid+" sideType="+parseInt(s.sideType)+" isBothSides="+parseInt(s.isBothSides)+" otherLabel="+(s.otherLabel?s.otherLabel:"undefined")+" relatedParentId="+(s.relatedParentId?s.relatedParentId:0)+"  associatedRole="+s.associatedRole+"  RadioList='"+d()(s.RadioList)+"'     HandleId=\""+t+'"  contentDes="'+s.contentDes+'"  '+(1===parseInt(s.isRequired,10)?"isRequired":"")+" index='"+s.index+"' labelName=\""+s.labelName+'"  '+(1===parseInt(s.row,10)?"row":"")+" "+(1===parseInt(s.needInput,10)?"needInput":"")+' testRule="'+(s.testRule?s.testRule:"")+'" placeholder="'+s.placeholder+'" ></RadioBar>\n                        ';break;case 7:i="\n                          <CheckboxBar  reallyIsValid="+s.reallyIsValid+" sideType="+parseInt(s.sideType)+" isBothSides="+parseInt(s.isBothSides)+" otherLabel="+(s.otherLabel?s.otherLabel:"undefined")+" relatedParentId="+(s.relatedParentId?s.relatedParentId:0)+"  associatedRole="+s.associatedRole+"  checkBoxList='"+d()(s.checkBoxList)+"'    index='"+s.index+"'   HandleId=\""+t+'"  contentDes="'+s.contentDes+'"  '+(1===parseInt(s.isRequired,10)?"isRequired":"")+' labelName="'+s.labelName+'"  '+(1===parseInt(s.row,10)?"row":"")+'  otherCheckOnOff="'+s.otherCheckOnOff+'" '+(1===parseInt(s.needInput,10)?"needInput":"")+' testRule="'+(s.testRule?s.testRule:"")+'" placeholder="'+s.placeholder+'" ></CheckboxBar>\n                        ';break;case 8:i="\n                          <TextAreaBar   reallyIsValid="+s.reallyIsValid+"  sideType="+parseInt(s.sideType)+" isBothSides="+parseInt(s.isBothSides)+" relatedParentId="+(s.relatedParentId?s.relatedParentId:0)+"  associatedRole="+s.associatedRole+"  maxLen="+(parseInt(s.maxLen)>0?s.maxLen:"")+'     HandleId="'+t+'"  contentDes="'+s.contentDes+'"  '+(1===parseInt(s.isRequired,10)?"isRequired":"")+'  title="'+s.title+'"  titleDes="'+s.titleDes+'" placeholder="'+s.placeholder+"\" RadioList='"+d()(s.RadioList)+" 'labelName=\""+s.labelName+'"  testRule="'+(s.testRule?s.testRule:"")+'"  ></TextAreaBar>\n                        ';break;case 13:i="\n                          <UpLoadFile    reallyIsValid="+s.reallyIsValid+"  relatedParentId="+(s.relatedParentId?s.relatedParentId:0)+"  associatedRole="+s.associatedRole+"   HandleId='"+t+"'   contentDes=\""+s.contentDes+'"  detailId="'+s.detailId+'"  componentId="'+s.componentId+'"   groupId="'+s.groupId+'"  '+(1===parseInt(s.isRequired,10)?"isRequired":"")+'   placeholder="'+s.placeholder+'"  labelName="'+s.labelName+'"   testRule="'+(s.testRule?s.testRule:"")+"\"    attPicList='"+d()(s.attPicList)+"'  CaseId=\""+s.CaseId+"\" attVideoList='"+d()(s.attVideoList)+"' maxLen=\""+s.maxLen+'"></UpLoadFile>\n                        '}return i}},{key:"createPageHtml",value:function(){var e=this,t=0,a=P()(e.pageData);for(var n in e.pageData){var s=e.pageData[n],i="";if(a[a.length-1]!=n||1!=s.componentType&&2!=s.componentType&&3!=s.componentType&&5!=s.componentType||(i="200px"),parseInt(s.isValid)>0)if(1==s.isBothSides&&1==s.sideType){var o="",r=a[t+1],l=e.pageData[r];a[a.length-1]!=r||1!=l.componentType&&2!=l.componentType&&3!=l.componentType&&5!=l.componentType||(o="200px"),e.pageHtml+='<section class="formCommonLrContainer">\n                         '+e.htmlStr(s,n,i,!0)+"\n                         "+e.htmlStr(l,r,o,!0)+"\n                     </section>"}else{if(1==s.isBothSides&&2==s.sideType){t++;continue}e.pageHtml+=e.htmlStr(s,n,i)}t++}return e.pageHtml}}]),e}(),$e=function(){function e(t){L()(this,e);this.subIndex=t.templateIndex,this.pageConfigData=JSON.parse(d()(t.data[t.templateIndex])),this.template=new Ae(this.pageConfigData).createPageHtml()}return w()(e,[{key:"createPage",value:function(){var e=this;return new i.default({store:X,template:'<aside id="assemble">'+e.template+"</aside>",data:function(){return{illDurationTimeSelect:!1,illDurationTimeFocus:!1}},computed:s()({},Object(v.c)(["titleName"])),methods:s()({},Object(v.b)(["savePageData","changeSubIndex","changeAssemblePage"]),{toggleSelect:function(){}}),beforeMount:function(){this.changeAssemblePage(!1),this.savePageData(e.pageConfigData),this.changeSubIndex({set:!0,index:e.subIndex})},mounted:function(){this.changeAssemblePage(!0)},components:{InputBar:re,RadioBar:Ce,SelectInput:ae,SelectBar:xe,InputSelect:Le,DatePicker:Ne,TextAreaBar:Fe,AgeInput:de,CheckboxBar:je,AddButton:Ee,TagList:pe,UpLoadFile:Ve}})}}]),e}(),Ue=function(){function e(t){L()(this,e),this.originalData=JSON.parse(d()(t))}return w()(e,[{key:"copyData",value:function(){var e=this,t=e.originalData.responseObject.responseData&&e.originalData.responseObject.responseData.data_list?e.originalData.responseObject.responseData.data_list:[],a=[];return function e(t){for(var a=0;a<t.length;a++){var n=t[a];if(1==n.commDataField.fieldType){delete n.caseFolderDetail;for(var s=0;s<n.caseFolderTemplateScope.length;s++)n.caseFolderTemplateScope[s].relationMap&&e(n.caseFolderTemplateScope[s].relationMap)}else delete n.caseFolderDetail}}(t[0]),a.push(t[0]),e.originalData.responseObject.responseData.data_list=a,e.originalData}}]),e}();a(6);var qe={mounted:function(){var e=this;e.changeTemplateId(!1),e.tabList.length>0&&(e.rectifyIndex(),e.updatePage())},data:function(){return{updateOnOff:!1,containerOnOff:!1,dynamicElement:null}},components:{ChangeIndex:he},watch:{tabList:function(e){var t=this;e.length>0&&(t.rectifyIndex(),t.updateOnOff||t.updatePage())},subIndex:function(e,t){var a=this;-1!=t&&parseInt(e,10)>=0&&a.subPageData[e]&&a.mountPage(e,a.subPageData)},$route:{handler:function(e,t){this.rectifyIndex()},deep:!0},pageIndex:function(e,t){-1!=t&&this.createPage()},pageInfo:{handler:function(){},deep:!0},subPageData:{handler:function(){},deep:!0}},methods:s()({},Object(v.b)(["saveSubPageData","changeSubIndex","setTopNavTitle","saveCaseId","getBaseCaseInfo","saveCopyModelData","addSubPageData","addSubPage","changeIndex","showLoading","hideLoading","changeSaveStatus","changeUploadState","changeTemplateId","initUploadState"]),{mountPage:function(e,t){var a=this,n=new $e({templateIndex:e,data:t});a.dynamicElement=n.createPage(),a.dynamicElement.$mount("#assemble"),a.containerOnOff=!0},rectifyIndex:function(){for(var e=this,t=0,a=0;a<e.tabList.length;a++)parseInt(e.$route.params.menuId,10)===parseInt(e.tabList[a].menuId,10)&&(t=a);e.changeIndex({index:t})},updatePage:function(){var e=this;e.updateOnOff=!0,e.tabList.length>0&&e.CaseId>0?e.createPage():sessionStorage.getItem("emrNewCaseCaseId")?(e.saveCaseId(sessionStorage.getItem("emrNewCaseCaseId")),e.getBaseCaseInfo()):(e.$router.push({path:"/baseInfo"}),e.changeIndex({index:-1}))},createPage:function(){var e=this;e.initUploadState(),e.changeUploadState(!0),e.changeSaveStatus(0),e.saveSubPageData([]),e.changeSubIndex({set:!0,index:-1}),e.setTopNavTitle(e.tabList[e.pageIndex]&&e.tabList[e.pageIndex].menuName?e.tabList[e.pageIndex].menuName:""),e.showLoading(),I.a.ajax2({type:"POST",url:"/call/caseFolder/template_structure/getTemplateDataList/",data:{paramJson:d()({templateId:e.templateId,parentId:e.tabList[e.pageIndex].menuId,caseId:e.CaseId,visitSiteId:"1"})},success:function(t){if(t.responseObject.responseStatus&&e.hideLoading(),t.responseObject&&t.responseObject.responseData&&t.responseObject.responseData.data_list)if(t.responseObject.responseData.data_list.length>1){t.responseObject.responseData.data_list.splice(0,1);var a=new Ue(t);e.saveCopyModelData(a.copyData());var n=new q(t);e.saveSubPageData(n.splitData()),e.mountPage(0,e.subPageData)}else{var s=new Ue(t);e.saveCopyModelData(s.copyData());var i=new q(t);e.saveSubPageData(i.splitData()),e.mountPage(0,e.subPageData)}}})}}),computed:s()({},Object(v.c)(["pageInfo","pageIndex","tabList","subIndex","subPageData","CaseId","titleName","templateId","baseInfo","copyModelData"]),{templateOnOff:function(){var e=this;return e.tabList.length>0&&e.tabList[e.pageIndex]&&1==parseInt(e.tabList[e.pageIndex].isAdd)}})},Je=Object(b.a)(qe,function(){var e=this.$createElement,t=this._self._c||e;return t("section",{directives:[{name:"show",rawName:"v-show",value:this.containerOnOff,expression:"containerOnOff"}],staticClass:"alEmr-indexInner",style:{paddingLeft:this.templateOnOff?"270px":""}},[t("section",{staticClass:"navLeftWidth"},[t("h2",{domProps:{textContent:this._s(this.titleName)}}),this._v(" "),t("aside",{attrs:{id:"assemble"}}),this._v(" "),t("ChangeIndex",{class:{caseBottomBtnW:this.templateOnOff}})],1)])},[],!1,null,null,null).exports,Ye={components:{tpComm:a(113).a},methods:s()({},Object(v.b)(["saveTemplateId","setTopNavTitle","getBaseCaseInfo","templateIdType"]),{useBtn:function(e){this.saveTemplateId(e)}}),computed:s()({},Object(v.c)(["CaseId"])),watch:{CaseId:function(){this.getBaseCaseInfo()}},mounted:function(){var e=this;setTimeout(function(){e.templateIdType(0)},500),e.setTopNavTitle("选择病历模板")}},ze=(a(280),{routes:[{name:"baseInfo",path:"/baseInfo",component:Te},{path:"/comLibrary",component:_e},{path:"/assemble/:menuId",name:"assemble",component:Je},{name:"tplate",path:"/tplate",component:Object(b.a)(Ye,function(){var e=this.$createElement;return(this._self._c||e)("tp-comm",{attrs:{typeNameCase:"newCase",crumbsText:"新建病历"},on:{tpUse:this.useBtn}})},[],!1,null,null,null).exports},{path:"*",redirect:"/baseInfo"}]}),We=(a(44),new Q.a(ze));i.default.use(Q.a),i.default.use(r.a),new i.default(s()({store:X,router:We},$)).$mount("#app")},,,,,,,,,,,,,function(e,t,a){"use strict";var n=a(131);a.n(n).a},,function(e,t,a){"use strict";var n=a(133);a.n(n).a},,function(e,t,a){"use strict";var n=a(134);a.n(n).a},,function(e,t,a){"use strict";var n=a(135);a.n(n).a},,function(e,t,a){"use strict";var n=a(136);a.n(n).a},,function(e,t,a){"use strict";var n=a(137);a.n(n).a},,function(e,t,a){"use strict";var n=a(138);a.n(n).a},,function(e,t,a){"use strict";var n=a(139);a.n(n).a},,function(e,t,a){"use strict";var n=a(140);a.n(n).a},,function(e,t,a){"use strict";var n=a(141);a.n(n).a},,function(e,t,a){"use strict";var n=a(142);a.n(n).a},,function(e,t,a){"use strict";var n=a(143);a.n(n).a},,function(e,t,a){"use strict";var n=a(144);a.n(n).a},,function(e,t,a){"use strict";var n=a(145);a.n(n).a},,function(e,t,a){"use strict";var n=a(146);a.n(n).a},,,,,,,,function(e,t,a){"use strict";var n=a(147);a.n(n).a},,function(e,t,a){"use strict";var n=a(148);a.n(n).a},,function(e,t,a){"use strict";var n=a(149);a.n(n).a}],[[267,0,1]]]);
//# sourceMappingURL=newCases.45a887d.js.map