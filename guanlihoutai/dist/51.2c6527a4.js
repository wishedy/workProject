(window.webpackJsonp=window.webpackJsonp||[]).push([[51],{1004:function(e,t,a){"use strict";a.r(t);var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("section",{staticClass:"main-container"},[a("h2",[t._v("基本信息")]),t._v(" "),a("section",{staticClass:"center-content"},[t.isNoData?a("h2",[t._v("无待审核内容")]):t._e(),t._v(" "),t.isNoData?t._e():a("el-form",{ref:"form",attrs:{model:t.baseList,rules:t.rules,"label-width":"80px"}},[a("el-row",[a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:t.baseList.fullName||!t.baseList.fullName&&!t.baseList.updateFullName?"姓名":""}},[t.baseList.fullName||!t.baseList.fullName&&!t.baseList.updateFullName?a("el-input",{attrs:{readonly:"readonly"},model:{value:t.baseList.fullName,callback:function(e){t.$set(t.baseList,"fullName",e)},expression:"baseList.fullName"}}):t._e()],1)],1),t._v(" "),a("el-col",{attrs:{span:4}},[a("el-form-item",{attrs:{label:t.baseList.sex||!t.baseList.sex&&!t.baseList.updateSex?"性别":""}},[t.baseList.sex||!t.baseList.sex&&!t.baseList.updateSex?a("el-input",{attrs:{readonly:"readonly"},model:{value:t.baseList.sex,callback:function(e){t.$set(t.baseList,"sex",e)},expression:"baseList.sex"}}):t._e()],1)],1),t._v(" "),a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:t.baseList.updateRoleIdShow?"角色":""}},[t.baseList.updateRoleIdShow?a("el-input",{attrs:{readonly:"readonly"},model:{value:t.baseList.updateRoleIdShow,callback:function(e){t.$set(t.baseList,"updateRoleIdShow",e)},expression:"baseList.updateRoleIdShow"}}):t._e()],1)],1),t._v(" "),a("el-col",{attrs:{span:7}},[a("el-form-item",{attrs:{label:t.baseList.medicalTitle||!t.baseList.medicalTitle&&!t.baseList.updateMedicalTitle?"职称":""}},[t.baseList.medicalTitle||!t.baseList.medicalTitle&&!t.baseList.updateMedicalTitle?a("el-input",{attrs:{readonly:"readonly"},model:{value:t.baseList.medicalTitle,callback:function(e){t.$set(t.baseList,"medicalTitle",e)},expression:"baseList.medicalTitle"}}):t._e()],1)],1)],1),t._v(" "),a("el-row",[a("el-col",{class:{update:t.baseList.fullName||t.baseList.updateFullName!=t.baseList.fullName},attrs:{span:6}},[a("el-form-item",{attrs:{label:t.baseList.updateFullName&&t.baseList.updateFullName!=t.baseList.fullName?"姓名":""}},[t.baseList.updateFullName&&t.baseList.updateFullName!=t.baseList.fullName?a("el-input",{attrs:{readonly:"readonly"},model:{value:t.baseList.updateFullName,callback:function(e){t.$set(t.baseList,"updateFullName",e)},expression:"baseList.updateFullName"}}):t._e()],1)],1),t._v(" "),a("el-col",{class:{update:t.baseList.sex||t.baseList.updateSex!=t.baseList.sex},attrs:{span:4}},[a("el-form-item",{attrs:{label:t.baseList.updateSex&&t.baseList.updateSex!=t.baseList.sex?"性别":""}},[t.baseList.updateSex&&t.baseList.updateSex!=t.baseList.sex?a("el-input",{attrs:{readonly:"readonly"},model:{value:t.baseList.updateSex,callback:function(e){t.$set(t.baseList,"updateSex",e)},expression:"baseList.updateSex"}}):t._e()],1)],1),t._v(" "),a("el-col",{attrs:{span:6}},[a("el-form-item")],1),t._v(" "),a("el-col",{class:{update:t.baseList.medicalTitle||t.baseList.updateMedicalTitle!=t.baseList.medicalTitle},attrs:{span:7}},[a("el-form-item",{attrs:{label:t.baseList.updateMedicalTitle&&t.baseList.updateMedicalTitle!=t.baseList.medicalTitle?"职称":"",prop:"medicalTitleShowId"}},[t.baseList.updateMedicalTitle&&t.baseList.updateMedicalTitle!=t.baseList.medicalTitle?a("el-input",{attrs:{readonly:"readonly"},model:{value:t.baseList.updateMedicalTitle,callback:function(e){t.$set(t.baseList,"updateMedicalTitle",e)},expression:"baseList.updateMedicalTitle"}}):t._e()],1)],1)],1),t._v(" "),a("el-row",[a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:t.baseList.workplace||!t.baseList.workplace&&!t.baseList.updateWorkplace?"2"==t.baseList.workplaceType?"学校":"医院":""}},[t.baseList.workplace||!t.baseList.workplace&&!t.baseList.updateWorkplace?a("el-input",{attrs:{readonly:"readonly"},model:{value:t.baseList.workplace,callback:function(e){t.$set(t.baseList,"workplace",e)},expression:"baseList.workplace"}}):t._e()],1)],1)],1),t._v(" "),a("el-row",[a("el-col",{class:{update:t.baseList.workplace||t.baseList.updateWorkplace!=t.baseList.workplace},attrs:{span:8}},[a("el-form-item",{attrs:{label:t.baseList.updateWorkplace&&t.baseList.updateWorkplace!=t.baseList.workplace?"2"==t.baseList.updateWorkplaceType?"学校":"医院":""}},[t.baseList.updateWorkplace&&t.baseList.updateWorkplace!=t.baseList.workplace?a("el-input",{attrs:{readonly:"readonly"},model:{value:t.baseList.updateWorkplace,callback:function(e){t.$set(t.baseList,"updateWorkplace",e)},expression:"baseList.updateWorkplace"}}):t._e()],1)],1)],1)],1),t._v(" "),t.isNoData?t._e():a("CertImgShowHorizon",{attrs:{attList:t.attList,isNeedEdit:!1,customerId:t.customerId,pageName:"memberAuditChangeDetail"}})],1),t._v(" "),t.isNoData?t._e():a("section",{staticClass:"bottomBtn"},[t.btnShowV1?a("el-button",{attrs:{type:"success",round:""},on:{click:function(e){t.updateAuthState(1)}}},[t._v("\n      变更通过\n    ")]):t._e(),t._v(" "),t.btnShowV1&&"12"!==t.baseList.updateRoleId?a("el-button",{attrs:{type:"success",round:""},on:{click:function(e){t.updateAuthState(4)}}},[t._v("\n      V2通过\n    ")]):t._e(),t._v(" "),t.btnShowV1?a("el-button",{attrs:{type:"danger",round:""},on:{click:function(e){t.changeRefuseOnClick(2)}}},[t._v("\n      变更拒绝\n    ")]):t._e(),t._v(" "),t.btnShowV1?t._e():a("el-button",{attrs:{type:"success",round:""},on:{click:function(e){t.updateAuthState(3)}}},[t._v("\n      变更通过\n    ")]),t._v(" "),t.btnShowV1?t._e():a("el-button",{attrs:{type:"danger",round:""},on:{click:function(e){t.changeRefuseOnClick(5)}}},[t._v("\n      变更拒绝\n    ")])],1),t._v(" "),a("RefuseCertDialog",{attrs:{canShow:t.refuseData.canShow,setTitle:t.refuseData.title,contentSelectList:t.refuseData.contentSelectList,questionSelectList:t.refuseData.questionSelectList},on:{closeDialog:function(e){t.refuseData.canShow=!1},confirmHandle:t.refuseConfirmHandle}})],1)};s._withStripped=!0;var i=a(70),n=a.n(i),r=a(105),o=a.n(r),d=a(59),u=a(68),p=a(69),l=a(554),c=a(549),m={name:"memberAuditDetail",data:function(){return{baseList:{fullName:"",updateFullName:"",sex:"",updateSex:"",medicalTitle:"",updateMedicalTitle:"",workplace:"",updateWorkplace:"",workplaceType:"",updateWorkplaceType:"",updateRoleId:"",updateRoleIdShow:""},isNoData:!1,oldAuthMap:{},attList:[],showState:"",btnShowV1:!0,rules:{},opIP:"",customerId:"",resourceId:"",isChange:!1,refuseData:{state:-1,canShow:!1,title:"",contentSelectList:[],questionSelectList:[]},loading:null}},components:{CertImgShowHorizon:l.a,RefuseCertDialog:c.a},methods:{getBaseData:function(){var l=this;u.default.openLoading("加载中..."),Object(d.a)({method:p.a.getCustomerAuthRevise.type,url:p.a.getCustomerAuthRevise.url,params:{customerId:this.customerId,reviseId:this.resourceId}}).then(function(e){if(e&&e.data&&e.data.responseObject&&e.data.responseObject.responseData&&e.data.responseObject.responseData.dataList&&e.data.responseObject.responseData.dataList.baseList&&e.data.responseObject.responseData.dataList.AttList){var t=e.data.responseObject.responseData.dataList,a=t.baseList&&t.baseList[0];a&&(l.baseList.fullName=a.fullName,l.baseList.updateFullName=a.updateFullName,l.baseList.sex=a.sex,l.baseList.updateSex=a.updateSex,l.baseList.medicalTitle=a.medicalTitle,l.baseList.updateMedicalTitle=a.updateMedicalTitle,l.baseList.workplace=a.workplace,l.baseList.updateWorkplace=a.updateWorkplace,l.baseList.workplaceType=a.workplaceType,l.baseList.updateWorkplaceType=a.updateWorkplaceType,l.baseList.updateRoleId=a.updateRoleId,l.baseList.updateRoleIdShow=a.updateRoleIdShow);for(var s=[],i=void 0,n=void 0,r=0;r<t.AttList.length;r++)if((i=t.AttList[r]).isNew=!1,i.isChangePage=!0,s.push(i),i.updateAttCode||i.updateAttFormat||i.updateAttPath||i.updateAttType){for(var o in n={isNew:!0,isChangePage:!0},i)n[o]=i[o];n.attCode===n.updateAttCode&&n.attPath===n.updateAttPath||(n.isNew=!0,s.push(n))}l.attList=s}u.default.closeLoading()}).catch(function(e){u.default.closeLoading()}),this.getRefuseMapList()},getIp:function(){var t=this;Object(d.a)({method:p.a.getIp.type,url:p.a.getIp.url,params:{}}).then(function(e){e.data&&e.data.success&&(t.opIP=e.data.visitorIP.substring(7,e.data.visitorIP.length))})},stateChange:function(){!this.isChange&&(this.isChange=!0)},updateAuthState:function(e,t){var a=this;u.default.openLoading("审核中..."),this.isChange=!1,Object(d.a)({method:p.a.updateAudit.type,url:p.a.updateAudit.url,data:o()({customerId:this.customerId,opIP:this.opIP,visitSiteId:25,updateAuthState:e,resourceId:this.resourceId,auditId:this.auditId,auditor:localStorage.getItem("userLoginName")},t)}).then(function(e){a.getNext(e)})},getNext:function(){var a=this,s=this,e=localStorage.getItem("auditState");s.params.firstResult="1"===e?parseInt(s.params.firstResult):parseInt(s.params.firstResult)+1,s.params.auditRoleList=1,s.params.auditState=1,Object(d.a)({method:p.a.memberAuditList.type,url:p.a.memberAuditList.url,params:this.params}).then(function(e){if(!(e&&e.data&&e.data.responseObject&&e.data.responseObject.responseData&&e.data.responseObject.responseData.dataList))return a.isNoData=!0,u.default.closeLoading(),!1;localStorage.setItem("memberAuditCurrentData",n()({auditType:e.data.responseObject.responseData.dataList[0].auditType,customerId:e.data.responseObject.responseData.dataList[0].customerId,showState:e.data.responseObject.responseData.dataList[0].showState,auditId:e.data.responseObject.responseData.dataList[0].id,resourceId:e.data.responseObject.responseData.dataList[0].resourceId,params:s.params}));var t=e.data.responseObject.responseData.dataList[0].auditType;2!==parseInt(t)?(u.default.closeLoading(),a.$router.push({path:"/memberAuditDetail"})):(a.customerId=e.data.responseObject.responseData.dataList[0].customerId,a.auditType=e.data.responseObject.responseData.dataList[0].auditType,a.resourceId=e.data.responseObject.responseData.dataList[0].resourceId,a.auditId=e.data.responseObject.responseData.dataList[0].id,a.showState=e.data.responseObject.responseData.dataList[0].showState,a.getBaseData())})},getRefuseMapList:function(){var s=this;Object(d.a)({method:p.a.getRefuseMapList.type,url:p.a.getRefuseMapList.url,params:{scene:3,customerId:this.customerId,beforeMedicalTitle:this.baseList.medicalTitle,afterMedicalTitle:this.baseList.updateMedicalTitle}}).then(function(e){var t=e.data.responseObject.responseMessage,a=e.data.responseObject.responseData;!t&&a&&a.dataList&&0<a.dataList.length&&(s.refuseData.questionSelectList=a.dataList)}).catch(function(e){}),Object(d.a)({method:p.a.getRefuseMapList.type,url:p.a.getRefuseMapList.url,params:{scene:2,customerId:this.customerId,beforeMedicalTitle:this.baseList.medicalTitle,afterMedicalTitle:this.baseList.updateMedicalTitle}}).then(function(e){var t=e.data.responseObject.responseMessage,a=e.data.responseObject.responseData;!t&&a&&a.dataList&&0<a.dataList.length&&(s.refuseData.contentSelectList=a.dataList)}).catch(function(e){})},changeRefuseOnClick:function(e){this.refuseData.state=e,this.refuseData.canShow=!0,this.refuseData.title="变更拒绝"},refuseConfirmHandle:function(e){var t=this.refuseData.state;-1!==t&&0<e.refuseList.length&&this.updateAuthState(t,e),this.refuseData.canShow=!1}},watch:{showState:function(e,t){this.btnShowV1=3!==parseInt(e)}},beforeMount:function(){this.customerId=JSON.parse(localStorage.getItem("memberAuditCurrentData"))&&JSON.parse(localStorage.getItem("memberAuditCurrentData")).customerId,this.params=JSON.parse(localStorage.getItem("memberAuditCurrentData"))&&JSON.parse(localStorage.getItem("memberAuditCurrentData")).params,this.auditType=JSON.parse(localStorage.getItem("memberAuditCurrentData"))&&JSON.parse(localStorage.getItem("memberAuditCurrentData")).auditType,this.showState=JSON.parse(localStorage.getItem("memberAuditCurrentData"))&&JSON.parse(localStorage.getItem("memberAuditCurrentData")).showState,this.resourceId=JSON.parse(localStorage.getItem("memberAuditCurrentData"))&&JSON.parse(localStorage.getItem("memberAuditCurrentData")).resourceId,this.auditId=JSON.parse(localStorage.getItem("memberAuditCurrentData"))&&JSON.parse(localStorage.getItem("memberAuditCurrentData")).auditId,this.memberAuditIndex=localStorage.getItem("memberAuditIndex")?localStorage.getItem("memberAuditIndex"):"",this.params.firstResult=parseInt(this.params.firstResult)+parseInt(this.memberAuditIndex),this.params.maxResult=1},mounted:function(){2!==parseInt(this.auditType)&&this.$router.push({path:"/memberAuditDetail"}),this.getBaseData(),this.getIp()}},b=(a(771),a(58)),L=Object(b.a)(m,s,[],!1,null,null,null);L.options.__file="src/views/customRelation/memberAuditChangeDetail.vue";t.default=L.exports},592:function(e,t,a){var s=a(772);"string"==typeof s&&(s=[[e.i,s,""]]);var i={hmr:!0,transform:void 0,insertInto:void 0};a(156)(s,i);s.locals&&(e.exports=s.locals)},771:function(e,t,a){"use strict";var s=a(592);a.n(s).a},772:function(e,t,a){(e.exports=a(155)(!1)).push([e.i,"\n.main-container {\n  width: 1200px;\n  margin: 0 auto;\n}\n.main-container h2 {\n    font-family: PingFangSC-Semibold;\n    font-size: 20px;\n    color: #2C343A;\n    letter-spacing: 0;\n    line-height: 20px;\n    margin: 36px 0 25px;\n    padding: 0 160px;\n}\n.main-container .center-content {\n    width: 880px;\n    margin: 0 auto;\n    background: #FFFFFF;\n    box-shadow: 0 4px 10px 0 rgba(42, 53, 102, 0.04);\n    border-radius: 4px;\n    padding: 30px 0;\n    margin-bottom: 20px;\n}\n.main-container .center-content .update .el-input__inner {\n      border: 4px solid red;\n}\n.main-container .center-content .hospitalState span {\n      display: inline-block;\n      height: 40px;\n      line-height: 40px;\n      padding: 0 16px;\n      opacity: 0.8;\n      background: #E9F7E9;\n      border-radius: 4px;\n      margin-left: 15px;\n      font-family: PingFangSC-Regular;\n      font-size: 14px;\n      color: #52CC64;\n      letter-spacing: 0;\n}\n.main-container .center-content .hospitalState.addHospital span {\n      background: #EDF1FF;\n      color: #4B67D6;\n}\n.main-container .bottomBtn {\n    text-align: right;\n    margin-bottom: 30px;\n}\n.main-container .el-input:not(.attCode) input {\n    background: #F7F9FC;\n    border: 1px solid #E6E6E8;\n    border-radius: 4px;\n}\n",""])}}]);