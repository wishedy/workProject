(window.webpackJsonp=window.webpackJsonp||[]).push([[76],{634:function(e,t,a){var n=a(862);"string"==typeof n&&(n=[[e.i,n,""]]);var o={hmr:!0,transform:void 0,insertInto:void 0};a(156)(n,o);n.locals&&(e.exports=n.locals)},861:function(e,t,a){"use strict";var n=a(634);a.n(n).a},862:function(e,t,a){(e.exports=a(155)(!1)).push([e.i,"\n.codeNum-main-contains {\n  width: 1200px;\n  margin: 20px auto;\n}\n.codeNum-main-contains .code-title {\n    font-family: PingFangSC-Semibold;\n    font-size: 20px;\n    color: #222222;\n    letter-spacing: 0;\n    line-height: 20px;\n    margin: 32px 0 25px;\n}\n.codeNum-main-contains .search-form {\n    background: #fff;\n    padding-top: 15px;\n    margin-bottom: 30px;\n}\n.codeNum-main-contains .search-form .from-row {\n      padding-left: 40px;\n}\n.codeNum-main-contains .search-form .el-input-width {\n      width: auto;\n}\n.codeNum-main-contains .search-form .el-input .el-input__inner {\n      background: #F7F9FC;\n      border: 1px solid #E6E6E8;\n      border-radius: 4px;\n}\n.codeNum-main-contains .search-form .submitBtn-container {\n      margin-right: 10px;\n      float: right;\n}\n.codeNum-main-contains .search-form .el-form-label .el-form-item__label {\n      margin-right: 20px;\n}\n.codeNum-main-contains .search-form .submitBtn button:nth-of-type(1) {\n      border: none;\n}\n.codeNum-main-contains .search-form .submitBtn button:nth-of-type(2) {\n      color: #4B67D6;\n      border: 1px solid #4B67D6;\n      border-radius: 4px;\n}\n.codeNum-main-contains .code-button {\n    margin: 30px 0 30px;\n}\n.codeNum-main-contains .code-button .creat-button {\n      color: #4B67D6;\n      border: 1px solid #4B67D6;\n      border-radius: 3px;\n}\n.codeNum-main-contains .viewBotton {\n    border: 1px solid #4B67D6;\n    border-radius: 3px;\n    color: #4B67D6;\n}\n.codeNum-main-contains .viewBotton.active {\n      border: none;\n}\n",""])},975:function(e,t,a){"use strict";a.r(t);var n=function(){var a=this,e=a.$createElement,n=a._self._c||e;return n("section",{staticClass:"codeNum-main-contains"},[n("h1",{staticClass:"code-title"},[a._v("兑换码码号列表")]),a._v(" "),n("section",{staticClass:"search-form"},[n("el-form",{ref:"codeBatchForm",attrs:{model:a.searchForm}},[n("el-row",{staticClass:"from-row"},[n("el-col",{attrs:{span:7}},[n("el-form-item",{staticClass:"el-form-label",attrs:{label:"兑换码批次号",prop:"redeemCodeBatchCode"}},[n("el-input",{staticClass:"el-input-width",attrs:{placeholder:"兑换码批次号"},model:{value:a.searchForm.redeemCodeBatchCode,callback:function(e){a.$set(a.searchForm,"redeemCodeBatchCode",e)},expression:"searchForm.redeemCodeBatchCode"}})],1)],1),a._v(" "),n("el-col",{attrs:{span:7}},[n("el-form-item",{staticClass:"el-form-label",attrs:{label:"兑换码码号",prop:"redeemCodeDetailCode"}},[n("el-input",{staticClass:"el-input-width",attrs:{placeholder:"兑换码码号"},model:{value:a.searchForm.redeemCodeDetailCode,callback:function(e){a.$set(a.searchForm,"redeemCodeDetailCode",e)},expression:"searchForm.redeemCodeDetailCode"}})],1)],1),a._v(" "),n("el-col",{attrs:{span:7}},[n("el-form-item",{staticClass:"el-form-label",attrs:{label:"批次状态",prop:"useState"}},[n("el-select",{attrs:{placeholder:"未使用"},model:{value:a.searchForm.useState,callback:function(e){a.$set(a.searchForm,"useState",e)},expression:"searchForm.useState"}},[n("el-option",{attrs:{label:"全部",value:""}}),a._v(" "),n("el-option",{attrs:{label:"未使用",value:"0"}}),a._v(" "),n("el-option",{attrs:{label:"已冻结",value:"2"}}),a._v(" "),n("el-option",{attrs:{label:"已使用",value:"1"}}),a._v(" "),n("el-option",{attrs:{label:"已过期",value:"3"}})],1)],1)],1)],1),a._v(" "),n("el-row",[n("el-col",{staticClass:"submitBtn-container",attrs:{span:6}},[n("el-form-item",{staticClass:"submitBtn"},[n("el-button",{on:{click:a.resetForm}},[a._v("清空条件")]),a._v(" "),n("el-button",{on:{click:a.onSubmit}},[a._v("  筛选  ")])],1)],1)],1)],1)],1),a._v(" "),n("section",{staticClass:"code-button"},[n("el-row",[n("el-col",[n("el-button",{staticClass:"el-icon-circle-plus creat-button",on:{click:a.createCodeBtn}},[a._v(" 创建兑换码")])],1)],1)],1),a._v(" "),n("section",{staticClass:"source-list"},[n("el-table",{staticStyle:{width:"100%"},attrs:{data:a.tableData}},[n("el-table-column",{attrs:{prop:"sortNo",label:"序号"}}),a._v(" "),n("el-table-column",{attrs:{prop:"redeemCodeDetailCode",label:"兑换码码号",width:"100"}}),a._v(" "),n("el-table-column",{attrs:{prop:"redeemCodeName",label:"兑换码名称",width:"300"}}),a._v(" "),n("el-table-column",{attrs:{prop:"redeemCodeBatchCode",label:"批次号",width:"130"}}),a._v(" "),n("el-table-column",{attrs:{prop:"productName",label:"兑换商品",width:"300"}}),a._v(" "),n("el-table-column",{attrs:{prop:"productPrice",label:"商品价值(元)",width:"100"}}),a._v(" "),n("el-table-column",{attrs:{label:"有效期",formatter:a.fromTime,width:"200"}}),a._v(" "),n("el-table-column",{attrs:{label:"兑换码状态",width:"100",formatter:a.fromUseState}}),a._v(" "),n("el-table-column",{attrs:{prop:"customerId",label:"兑换者ID",width:"100"}}),a._v(" "),n("el-table-column",{attrs:{prop:"customerName",label:"兑换者姓名",width:"100"}}),a._v(" "),n("el-table-column",{attrs:{prop:"useTime",label:"兑换时间",width:"180"}}),a._v(" "),n("el-table-column",{attrs:{fixed:"right",width:"100",label:"操作",align:"center"},scopedSlots:a._u([{key:"default",fn:function(t){return[n("el-button",{staticClass:"viewBotton",class:{active:1===t.row.useState||3===t.row.useState},on:{click:function(e){a.handleBtn(t.row,t.$index)}}},[a._v("\n            "+a._s(a.handleText(t.row))+"\n          ")])]}}])})],1),a._v(" "),10<a.total?n("el-row",{staticClass:"pagination"},[n("el-col",{attrs:{span:10,offset:5}},[n("el-pagination",{attrs:{"current-page":a.currentPage,"page-sizes":[10,20,30,40],"page-size":a.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:a.total},on:{"size-change":a.handleSizeChange,"current-change":a.handleCurrentChange}})],1)],1):a._e()],1)])};n._withStripped=!0;var o=a(22),r=a.n(o),s=a(59),i=a(69),l=a(68),c={data:function(){return{searchForm:{redeemCodeDetailCode:"",redeemCodeBatchCode:"",useState:"0"},tableData:[],tableParams:{firstResult:0,maxResult:20,useState:"0"},currentPage:1,pageSize:20,total:0}},components:{},methods:{createCodeBtn:function(){var e=this.$router.resolve({path:"/createCode"});window.open(e.href,"_blank")},fromTime:function(e){return e.startTime+"至"+e.endTime},fromUseState:function(e){var t="";switch(e.useState){case 0:t="未使用";break;case 1:t="已使用";break;case 2:t="已冻结";break;case 3:t="已过期"}return t},handleText:function(e){var t="";switch(e.useState){case 0:t="冻结";break;case 1:t="-";break;case 2:t="解冻";break;case 3:t="-"}return t},handleBtn:function(e,t){switch(e.useState){case 0:this.freezeCodeTip(e,t);break;case 2:this.unfreezeCode(e,t)}},freezeCodeTip:function(e,t){var a=this;a.$confirm("冻结后已发放的兑换码无法正常兑换，是否确认？","提示",{confirmButtonText:"确认",cancelButtonText:"取消",type:"warning"}).then(function(){a.freezeCodeApi(e,t,1,function(){a.searchForm.useState.toString()?a.tableData.splice(t,1):a.tableData[t].useState=2,a.$message({type:"success",message:"冻结成功",onClose:function(){}})})}).catch(function(){})},unfreezeCode:function(e,t){var a=this;a.$confirm("是否确认解冻？","提示",{confirmButtonText:"确认",cancelButtonText:"取消",type:"warning"}).then(function(){a.freezeCodeApi(e,t,2,function(){a.searchForm.useState.toString()?a.tableData.splice(t,1):a.tableData[t].useState=0,a.$message({type:"success",message:"解冻成功",onClose:function(){}})})}).catch(function(){})},freezeCodeApi:function(e,t,a,n){var o=this;l.default.openLoading("加载中..."),Object(s.a)({method:i.a.updateRedeemCodeState.type,url:i.a.updateRedeemCodeState.url,data:{id:e.itemId,type:a}}).then(function(e){l.default.closeLoading(),e&&e.data&&e.data.responseObject&&e.data.responseObject.responseStatus?n&&n():1==a?o.$message.error("冻结失败"):o.$message.error("解冻失败")}).catch(function(e){l.default.closeLoading(),1==a?o.$message.error("冻结失败"):o.$message.error("解冻失败")})},getTableData:function(){var a=this;l.default.openLoading("加载中..."),Object(s.a)({method:i.a.getRedeemCodeItemList.type,url:i.a.getRedeemCodeItemList.url,params:this.tableParams}).then(function(e){if(l.default.closeLoading(),e&&e.data&&e.data.responseObject&&e.data.responseObject.responseData){var t=e.data.responseObject.responseData;t.items?(a.tableData=t.items,a.total=t.total):(a.tableData=[],a.total=0)}}).catch(function(e){l.default.closeLoading(),a.$allin_confirm({title:"提示",content:"查询失败",type:"notice"})})},onSubmit:function(){if(!this.searchForm.redeemCodeDetailCode&&!this.searchForm.redeemCodeBatchCode)return this.$alert("请输入批次号或码号查询","",{confirmButtonText:"确定",callback:function(e){}}),!1;var e={};for(var t in this.searchForm)this.searchForm[t].toString()&&(e[t]=this.searchForm[t]);this.tableParams=this.deepExtend({},{firstResult:0,maxResult:20},e),this.pageSize=20,this.currentPage=1,this.getTableData()},resetForm:function(){this.$refs.codeBatchForm.resetFields()},deepExtend:function(e){e=e||{};for(var t=1;t<arguments.length;t++){var a=arguments[t];if(a)for(var n in a)a.hasOwnProperty(n)&&("object"===r()(a[n])?e[n]=this.deepExtend(e[n],a[n]):e[n]=a[n])}return e},handleSizeChange:function(e){this.pageSize=e,this.tableParams.maxResult=this.pageSize,this.tableParams.firstResult=0,this.currentPage=0,this.getTableData()},handleCurrentChange:function(e){this.currentPage=e,this.tableParams.firstResult=(this.currentPage-1)*this.pageSize,this.getTableData()}},mounted:function(){var t=this;this.getTableData(),document.onkeydown=function(e){13===e.keyCode&&(!t.bigImgDialogVisible||t.videoDialogVisible||t.reviewDialogVisible||t.yunYunDetailDialogVisible||t.likeDialogVisible)&&t.onSubmit()}},destroyed:function(){document.onkeydown=null,l.default.goBack()},watch:{}},d=(a(861),a(58)),u=Object(d.a)(c,n,[],!1,null,null,null);u.options.__file="src/views/redeemCode/codeNumber.vue";t.default=u.exports}}]);