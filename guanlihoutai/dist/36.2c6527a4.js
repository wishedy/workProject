(window.webpackJsonp=window.webpackJsonp||[]).push([[36],{641:function(e,t,a){var r=a(876);"string"==typeof r&&(r=[[e.i,r,""]]);var n={hmr:!0,transform:void 0,insertInto:void 0};a(156)(r,n);r.locals&&(e.exports=r.locals)},642:function(e,t,a){var r=a(878);"string"==typeof r&&(r=[[e.i,r,""]]);var n={hmr:!0,transform:void 0,insertInto:void 0};a(156)(r,n);r.locals&&(e.exports=r.locals)},875:function(e,t,a){"use strict";var r=a(641);a.n(r).a},876:function(e,t,a){(e.exports=a(155)(!1)).push([e.i,"\n.el-dialog .dialog-title[data-v-6a727576] {\n  font-family: PingFangSC-Medium;\n  font-size: 20px;\n  color: #222222;\n  letter-spacing: 0;\n  line-height: 24px;\n  font-weight: bolder;\n}\n.el-dialog label[data-v-6a727576] {\n  font-family: PingFangSC-Regular;\n  font-size: 14px;\n  color: #555555;\n  letter-spacing: 0;\n  line-height: 14px;\n}\n",""])},877:function(e,t,a){"use strict";var r=a(642);a.n(r).a},878:function(e,t,a){(e.exports=a(155)(!1)).push([e.i,'\n@charset "UTF-8";\n/* 订单通用列表样式*/\n.order-manager-main-container {\n  width: 1200px;\n  margin: 0 auto;\n  background: #F6F7FA;\n  margin-top: 32px;\n}\n.order-manager-main-container h3 {\n    ont-family: PingFangSC-Semibold;\n    font-size: 20px;\n    color: #2C343A;\n    letter-spacing: 0;\n    line-height: 20px;\n    margin-bottom: 25px;\n}\n.order-manager-main-container .order-manager-search-area {\n    padding: 25px 0 0;\n    background: #ffffff;\n    box-shadow: 0 4px 10px 0 rgba(42, 53, 102, 0.04);\n    border-radius: 4px;\n    margin-bottom: 30px;\n}\n.order-manager-main-container .order-manager-search-area .el-input .el-input__inner {\n      background: #F7F9FC;\n      border: 1px solid #E6E6E8;\n      border-radius: 4px;\n}\n.order-manager-main-container .order-manager-search-area .order-search-submit button:nth-of-type(1) {\n      border: none;\n}\n.order-manager-main-container .order-manager-search-area .order-search-submit button:nth-of-type(2) {\n      color: #4B67D6;\n      border: 1px solid #4B67D6;\n      border-radius: 4px;\n}\n.order-manager-main-container .order-manager-button {\n    margin-bottom: 30px;\n}\n.order-manager-main-container .order-manager-button button {\n      color: #4B67D6;\n      border: 1px solid #4B67D6;\n      border-radius: 3px;\n}\n.order-manager-main-container .order-manager-button button span {\n        padding-right: 2px;\n}\n.order-manager-main-container .order-manager-table {\n    margin-bottom: 30px;\n}\n.order-manager-main-container .order-manager-table .el-table .cell {\n      font-family: PingFangSC-Regular;\n      font-size: 14px;\n      color: #333333;\n      letter-spacing: 0;\n      line-height: 1.5;\n}\n.order-manager-main-container .order-manager-table th.is-leaf {\n      font-weight: bold;\n}\n.order-manager-main-container .order-manager-table button {\n      width: 74px;\n      height: 28px;\n      padding: 0;\n      border: 1px solid #4B67D6;\n      border-radius: 3px;\n      font-family: PingFangSC-Regular;\n      font-size: 13px;\n      color: #4B67D6;\n      letter-spacing: 0;\n}\n.order-manager-main-container .order-manager-table button.changeState {\n        background: #EDF1FF;\n        border: 1px solid #4B67D6;\n        border-radius: 3px;\n        font-family: PingFangSC-Regular;\n        color: #4B67D6;\n        font-size: 13px;\n        letter-spacing: 0;\n        line-height: 1.2;\n}\n.order-manager-main-container .order-manager-table button.changeState.remove {\n          background: #FFEBE3;\n          border: 1px solid #FF7E4D;\n          color: #FF7E4D;\n}\n.order-manager-main-container .order-manager-table .order-table-index-btn {\n      background: #4B67D6;\n      border-radius: 3px;\n      font-family: PingFangSC-Regular;\n      font-size: 13px;\n      color: #FFFFFF;\n      letter-spacing: 0;\n      line-height: 13px;\n}\n.order-manager-main-container .order-manager-pagination {\n    float: right;\n}\n.refund-dialog textarea {\n  font-family: PingFangSC-Regular;\n}\n',""])},971:function(e,t,a){"use strict";a.r(t);var r=function(){var a=this,e=a.$createElement,r=a._self._c||e;return r("section",{staticClass:"order-manager-main-container"},[r("h3",[a._v("知识商品订单")]),a._v(" "),r("section",{staticClass:"order-manager-search-area"},[r("el-form",{attrs:{"label-width":"120px"}},[r("el-row",[r("el-col",{attrs:{span:24}},[r("el-form-item",{attrs:{label:"选择时间"}},[r("el-select",{staticStyle:{"padding-right":"20px"},attrs:{placeholder:"完成时间"},model:{value:a.searchConditionData.timeType,callback:function(e){a.$set(a.searchConditionData,"timeType",e)},expression:"searchConditionData.timeType"}},[r("el-option",{attrs:{label:"创建时间",value:"0"}}),a._v(" "),r("el-option",{attrs:{label:"完成时间",value:"1"}})],1),a._v(" "),r("el-date-picker",{attrs:{type:"daterange","range-separator":"-","start-placeholder":"","end-placeholder":"","value-format":"yyyy-MM-dd HH:mm:ss","default-time":["00:00:00","23:59:59"]},model:{value:a.searchConditionSelectTime,callback:function(e){a.searchConditionSelectTime=e},expression:"searchConditionSelectTime"}})],1)],1)],1),a._v(" "),r("el-row",[r("el-col",{attrs:{span:10}},[r("el-form-item",{attrs:{label:"订单信息"}},[r("el-input",{attrs:{placeholder:"商品订单号/商品名称/支付流水号"},model:{value:a.searchConditionData.orderInfo,callback:function(e){a.$set(a.searchConditionData,"orderInfo",e)},expression:"searchConditionData.orderInfo"}})],1)],1),a._v(" "),r("el-col",{attrs:{span:10}},[r("el-form-item",{attrs:{label:"用户信息"}},[r("el-input",{attrs:{placeholder:"用户ID/用户姓名/手机号"},model:{value:a.searchConditionData.userInfo,callback:function(e){a.$set(a.searchConditionData,"userInfo",e)},expression:"searchConditionData.userInfo"}})],1)],1)],1),a._v(" "),r("el-row",[r("el-col",{attrs:{span:8}},[r("el-form-item",{attrs:{label:"订单类型"}},[r("el-select",{attrs:{placeholder:"全部"},model:{value:a.searchConditionData.orderType,callback:function(e){a.$set(a.searchConditionData,"orderType",e)},expression:"searchConditionData.orderType"}},[r("el-option",{attrs:{label:"全部",value:""}}),a._v(" "),r("el-option",{attrs:{label:"普通订单",value:"0"}}),a._v(" "),r("el-option",{attrs:{label:"优惠券订单",value:"1"}}),a._v(" "),r("el-option",{attrs:{label:"兑换码订单",value:"2"}})],1)],1)],1),a._v(" "),r("el-col",{attrs:{span:8}},[r("el-form-item",{attrs:{label:"支付终端"}},[r("el-select",{attrs:{placeholder:"全部"},model:{value:a.searchConditionData.sourceType,callback:function(e){a.$set(a.searchConditionData,"sourceType",e)},expression:"searchConditionData.sourceType"}},[r("el-option",{attrs:{label:"全部",value:""}}),a._v(" "),r("el-option",{attrs:{label:"APP-IOS",value:"0"}}),a._v(" "),r("el-option",{attrs:{label:"APP-Android",value:"1"}})],1)],1)],1),a._v(" "),r("el-col",{attrs:{span:8}},[r("el-form-item",{attrs:{label:"支付方式"}},[r("el-select",{attrs:{placeholder:"全部"},model:{value:a.searchConditionData.payType,callback:function(e){a.$set(a.searchConditionData,"payType",e)},expression:"searchConditionData.payType"}},[r("el-option",{attrs:{label:"全部",value:""}}),a._v(" "),r("el-option",{attrs:{label:"支付宝APP支付",value:"0"}}),a._v(" "),r("el-option",{attrs:{label:"微信APP支付",value:"1"}}),a._v(" "),r("el-option",{attrs:{label:"苹果IAP支付",value:"2"}})],1)],1)],1)],1),a._v(" "),r("el-row",[r("el-col",{attrs:{span:8}},[r("el-form-item",{attrs:{label:"订单状态"}},[r("el-select",{attrs:{placeholder:"全部"},model:{value:a.searchConditionData.orderState,callback:function(e){a.$set(a.searchConditionData,"orderState",e)},expression:"searchConditionData.orderState"}},[r("el-option",{attrs:{label:"全部",value:""}}),a._v(" "),r("el-option",{attrs:{label:"待付款",value:"0"}}),a._v(" "),r("el-option",{attrs:{label:"待发货",value:"1"}}),a._v(" "),r("el-option",{attrs:{label:"已发货",value:"2"}}),a._v(" "),r("el-option",{attrs:{label:"已关闭",value:"3"}})],1)],1)],1),a._v(" "),r("el-col",{attrs:{span:8}},[r("el-form-item",{attrs:{label:"支付状态"}},[r("el-select",{attrs:{placeholder:"全部"},model:{value:a.searchConditionData.payState,callback:function(e){a.$set(a.searchConditionData,"payState",e)},expression:"searchConditionData.payState"}},[r("el-option",{attrs:{label:"全部",value:""}}),a._v(" "),r("el-option",{attrs:{label:"未支付",value:"0"}}),a._v(" "),r("el-option",{attrs:{label:"已支付",value:"1"}}),a._v(" "),r("el-option",{attrs:{label:"已撤销",value:"2"}}),a._v(" "),r("el-option",{attrs:{label:"已退款",value:"3"}})],1)],1)],1),a._v(" "),r("el-col",{attrs:{span:8}},[r("el-form-item",{attrs:{label:"退款情况"}},[r("el-select",{attrs:{placeholder:"全部"},model:{value:a.searchConditionData.refundState,callback:function(e){a.$set(a.searchConditionData,"refundState",e)},expression:"searchConditionData.refundState"}},[r("el-option",{attrs:{label:"全部",value:""}}),a._v(" "),r("el-option",{attrs:{label:"有退款",value:2}}),a._v(" "),r("el-option",{attrs:{label:"无退款",value:3}})],1)],1)],1)],1),a._v(" "),r("el-row",[r("el-col",[r("el-form-item",{staticClass:"order-search-submit",staticStyle:{float:"right","margin-right":"50px"}},[r("el-button",{on:{click:a.clearBtnOnClick}},[a._v("清空条件")]),a._v(" "),r("el-button",{on:{click:a.filterBtnOnClick}},[a._v("筛选")])],1)],1)],1)],1)],1),a._v(" "),r("section",{staticClass:"order-manager-button"},[r("el-row",[r("el-col",[0<a.tableData.length?r("el-button",[r("span",{staticClass:"el-icon-circle-plus"}),a._v(" "),r("a",{attrs:{href:a.exportOrderUrl,download:"知识商品订单.xlsx"}},[a._v("导出订单")])]):a._e()],1)],1)],1),a._v(" "),r("section",{staticClass:"order-manager-table"},[r("el-table",{staticStyle:{width:"100%"},attrs:{data:a.tableData,fit:!0}},[r("el-table-column",{attrs:{prop:"sortNo",width:"80",label:"序号"}}),a._v(" "),r("el-table-column",{attrs:{prop:"productName",width:"180",label:"商品名称"}}),a._v(" "),r("el-table-column",{attrs:{width:"100",formatter:a.formatterOrderType,prop:"orderType",label:"订单类型"}}),a._v(" "),r("el-table-column",{attrs:{prop:"orderNumber",width:"140",label:"商品订单号"}}),a._v(" "),r("el-table-column",{attrs:{prop:"platformSerialNumber",width:"140",label:"支付流水号"}}),a._v(" "),r("el-table-column",{attrs:{prop:"thirdPartSerialNumber",width:"140",label:"第三方支付流水号"}}),a._v(" "),r("el-table-column",{attrs:{formatter:a.formatterSourceType,prop:"sourceType",width:"140",label:"支付终端"}}),a._v(" "),r("el-table-column",{attrs:{formatter:a.formatterPayType,prop:"payType",width:"100",label:"支付方式"}}),a._v(" "),r("el-table-column",{attrs:{formatter:a.formatterPayAmount,prop:"payAmount",width:"140",label:"订单金额"}}),a._v(" "),r("el-table-column",{attrs:{prop:"customerId",width:"140",label:"用户ID"}}),a._v(" "),r("el-table-column",{attrs:{prop:"receiverName",width:"100",label:"用户姓名"}}),a._v(" "),r("el-table-column",{attrs:{prop:"receiverPhone",width:"140",label:"手机号"}}),a._v(" "),r("el-table-column",{attrs:{formatter:a.formatterPayState,prop:"payState",width:"100",label:"支付状态"}}),a._v(" "),r("el-table-column",{attrs:{formatter:a.formatterOrderState,prop:"orderState",width:"100",label:"订单状态"}}),a._v(" "),r("el-table-column",{attrs:{formatter:a.formatterRefundState,prop:"refundState",width:"100",label:"退款情况"}}),a._v(" "),r("el-table-column",{attrs:{prop:"createTime",width:"160",label:"创建时间"}}),a._v(" "),r("el-table-column",{attrs:{prop:"grantAccessTime",width:"160",label:"完成时间"}}),a._v(" "),r("el-table-column",{attrs:{label:"操作",width:"200",fixed:"right"},scopedSlots:a._u([{key:"default",fn:function(t){return[r("el-button",{on:{click:function(e){a.tableDetailBtnOnClick(t.row)}},nativeOn:{keydown:function(e){e.preventDefault()}}},[a._v("\n            查看\n          ")]),a._v(" "),a.checkRefundState(t.row)?r("el-button",{attrs:{type:"danger",plain:""},on:{click:function(e){a.tableRefundBtnOnClick(t.row)}},nativeOn:{keydown:function(e){e.preventDefault()}}},[a._v("\n            退款\n          ")]):a._e()]}}])})],1)],1),a._v(" "),r("el-row",[r("el-col",[r("section",{staticClass:"order-manager-pagination"},[r("el-pagination",{attrs:{"current-page":a.paginationData.currentPage,total:a.paginationData.total,"page-sizes":[10,20,30,40],"page-size":a.paginationData.pageSize,layout:"total, prev, pager, next, jumper ,sizes"},on:{"size-change":a.handleSizeChange,"current-change":a.handleCurrentChange}})],1)])],1),a._v(" "),r("el-dialog",{staticClass:"refund-dialog",attrs:{visible:a.isRefundDialogShow,width:"400px",center:""},on:{"update:visible":function(e){a.isRefundDialogShow=e}}},[r("div",{staticClass:"dialog-title",attrs:{slot:"title"},slot:"title"},[a._v("申请退款")]),a._v(" "),r("el-form",{ref:"refundForm",attrs:{"label-width":"100px",rules:a.refundRules,model:a.refundFormData}},[r("el-row",[r("el-col",[r("el-form-item",{attrs:{label:"商品订单号",prop:"orderNumber"}},[r("el-input",{attrs:{disabled:!0},model:{value:a.refundFormData.orderNumber,callback:function(e){a.$set(a.refundFormData,"orderNumber",e)},expression:"refundFormData.orderNumber"}})],1)],1)],1),a._v(" "),r("el-row",[r("el-col",[r("el-form-item",{attrs:{label:"退款金额",prop:"orderNumber"}},[r("el-input",{attrs:{disabled:!0},model:{value:a.refundFormData.refundAmount,callback:function(e){a.$set(a.refundFormData,"refundAmount",e)},expression:"refundFormData.refundAmount"}})],1)],1)],1),a._v(" "),r("el-row",[r("el-col",[r("el-form-item",{attrs:{label:"退款理由",prop:"refundReason"}},[r("el-input",{attrs:{type:"textarea",resize:"none",maxlength:"100",placeholder:"请输入退款理由"},model:{value:a.refundFormData.refundReason,callback:function(e){a.$set(a.refundFormData,"refundReason",e)},expression:"refundFormData.refundReason"}})],1)],1)],1),a._v(" "),r("el-row",[r("el-col",{attrs:{span:16,offset:12}},[r("el-button",{on:{click:function(e){a.isRefundDialogShow=!1}}},[a._v("取 消")]),a._v(" "),r("el-button",{attrs:{type:"primary"},on:{click:a.refundConfirmOnClick}},[a._v("确 定")])],1)],1)],1)],1)],1)};r._withStripped=!0;var n=a(70),o=a.n(n),l=a(68),i=a(69),s=a(59),c={name:"commodityOrderList",data:function(){return{tableData:[],searchConditionData:{timeType:"0",startTime:"",endTime:"",orderInfo:"",userInfo:"",orderType:"",sourceType:"",payType:"",orderState:"",payState:"",refundState:""},searchConditionSelectTime:"",paginationData:{currentPage:1,firstResult:0,maxResult:0,pageSize:10,total:0},exportOrderUrl:"",isRefundDialogShow:!1,refundFormData:{orderNumber:"",refundAmount:"",refundReason:""},refundRules:{refundReason:[{required:!0,message:"请输入退款理由",trigger:"blur"},{min:1,max:30,message:"退款理由长度在 1 到 100 个字符",trigger:"blur"}]}}},methods:{getDataList:function(){var a=this;this.paginationData.maxResult=this.paginationData.pageSize,this.paginationData.firstResult=(this.paginationData.currentPage-1)*this.paginationData.pageSize;var r={firstResult:this.paginationData.firstResult,maxResult:this.paginationData.maxResult};for(var e in this.searchConditionData)this.searchConditionData[e]&&(r[e]=this.searchConditionData[e]);l.default.openLoading("加载中..."),Object(s.a)({method:i.a.getShopOrderList.type,url:i.a.getShopOrderList.url,params:r}).then(function(e){if(l.default.closeLoading(),e&&e.data&&e.data.responseObject&&e.data.responseObject.responseData){var t=e.data.responseObject.responseData;a.tableData=t.items,a.paginationData.total=t.total,a.exportOrderUrl=i.a.exportShopOrderList.url+"?queryJson="+encodeURI(o()(r))}else a.tableData=[],a.paginationData.total=0}).catch(function(e){l.default.closeLoading(),a.$allin_confirm({title:"提示",content:"查询失败",type:"notice"})})},saveRefundData:function(){this.isRefundDialogShow=!1},clearBtnOnClick:function(){for(var e in this.searchConditionData)this.searchConditionData[e]="";this.searchConditionData.timeType="0",this.searchConditionSelectTime=""},filterBtnOnClick:function(){Array.isArray(this.searchConditionSelectTime)&&0<this.searchConditionSelectTime.length&&(this.searchConditionData.startTime=this.searchConditionSelectTime[0],this.searchConditionData.endTime=this.searchConditionSelectTime[1]),this.paginationData.currentPage=1,this.paginationData.firstResult=0,this.getDataList()},tableDetailBtnOnClick:function(e){var t=this.$router.resolve({path:"/commodityOrderDetail",query:{orderNumber:e.orderNumber}});window.open(t.href,"_blank")},tableRefundBtnOnClick:function(e){this.refundFormData.orderNumber=e.orderNumber,this.refundFormData.refundAmount=e.payAmount,this.refundFormData.refundReason="",this.isRefundDialogShow=!0},checkRefundState:function(e){return 1===e.payState&&(0===e.payType||1===e.payType)&&0===e.refundState},refundConfirmOnClick:function(){var t=this;this.$refs.refundForm.validate(function(e){if(!e)return!1;t.saveRefundData()})},handleSizeChange:function(e){this.paginationData.pageSize=e,this.getDataList()},handleCurrentChange:function(e){this.paginationData.currentPage=e,this.getDataList()},formatterOrderType:function(e){var t="";switch(e.orderType){case 1:t="普通订单";break;case 2:t="优惠券订单";break;case 3:t="兑换码订单"}return t},formatterSourceType:function(e){var t="";switch(e.sourceType){case 1:t="APP-IOS";break;case 2:t="APP-Android";break;case 3:t="微信公众号";break;case 4:t="微信小程序";break;case 5:t="PC订单";break;case 6:t="线下收款"}return t},formatterPayType:function(e){var t="";switch(e.payType){case 1:t="支付宝";break;case 2:t="微信";break;case 3:t="苹果支付";break;case 4:t="其他支付"}return t},formatterPayState:function(e){var t="";switch(e.payState){case 1:t="未支付";break;case 2:t="已撤销";break;case 3:t="已支付";break;case 6:t="已退款"}return t},formatterOrderState:function(e){var t="";switch(e.orderState){case 1:t="待付款";break;case 2:t="待发货";break;case 3:t="已发货";break;case 4:t="已关闭"}return t},formatterRefundState:function(e){var t="";switch(e.refundState){case 0:t="无退款";break;case 1:t="有退款"}return t},formatterPayAmount:function(e){return"￥"+e.payAmount}},mounted:function(){var t=this;this.getDataList(),document.onkeydown=function(e){13===e.keyCode&&t.getDataList()}},destroyed:function(){document.onkeydown=null,l.default.goBack()}},d=(a(875),a(877),a(58)),u=Object(d.a)(c,r,[],!1,null,"6a727576",null);u.options.__file="src/views/orderManager/commodityOrderList.vue";t.default=u.exports}}]);