(window.webpackJsonp=window.webpackJsonp||[]).push([[13],{523:function(t,e,a){var i=a(534);"string"==typeof i&&(i=[[t.i,i,""]]);var n={hmr:!0,transform:void 0,insertInto:void 0};a(156)(i,n);i.locals&&(t.exports=i.locals)},525:function(t,e,a){"use strict";e.a={fullSpanceVaild:function(t,e,a){""===e.trim()?a(new Error("值不能全为空")):a()},isPositiveInteger:function(t,e,a){/^[0-9]*[1-9][0-9]*$/.test(e)&&"0"!=e?a():a(new Error("必须为正整数"))},liveCustomerIdList:function(t,e,a){if(-1<e.indexOf("，"))return a(new Error("请使用半角逗号分隔")),!1;if(-1<e.indexOf(",")){for(var i=e.split(","),n=0;n<i.length;n++){var o=i[n];if(!/\d{13}/.test(o))return a(new Error("请输入正确的直播用户Id，多个用户Id之间使用逗号分隔")),!1}a()}else{if(!/\d{13}/.test(e))return a(new Error("请输入正确的直播用户Id，多个用户Id之间使用逗号分隔")),!1;a()}}}},527:function(t,e,a){"use strict";var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("section",{staticClass:"column-img-upload"},[a("div",{staticClass:"column-img-upload-container",on:{click:t.uploadImgOnClick}},[t.prevImgUrl?t._e():a("span",{staticClass:"column-img-upload-icon"}),t._v(" "),t.prevImgUrl?a("img",{attrs:{src:t.prevImgUrl}}):t._e(),t._v(" "),a("input",{ref:"column_img_upload_upload",attrs:{type:"file"},on:{change:t.fileChangeHandle}}),t._v(" "),t.uneditable?a("div",{staticClass:"uneditable"}):t._e()]),t._v(" "),t._t("default")],2)};i._withStripped=!0;var n=a(69),o=a(59),r=a(68),l={name:"columnImgUpload",props:{imgUrl:{type:String,require:!0},needClear:{type:Boolean,default:!1},imgFileSizeMaxLimit:{type:Number,require:!1},widthHeightMaxLimit:{type:Array,require:!1},widthHeightMinLimit:{type:Array,require:!1},uneditable:{type:Boolean,default:!1}},data:function(){return{fileData:{},widthHeightCheck:!0,prevImgUrl:this.imgUrl?this.imgUrl:""}},watch:{imgUrl:function(){this.prevImgUrl=this.imgUrl},needClear:function(t){t&&this.clearInput()}},methods:{uploadImgOnClick:function(){return!this.uneditable&&(!this.isLoading&&void this.$refs.column_img_upload_upload.click())},clearInput:function(){this.$refs.column_img_upload_upload.value=null,this.prevImgUrl=""},fileChangeHandle:function(t){var e=this,i=this,n=t.target.files[0];if(!n)return!1;if(!this.formatCheck(n))return this.$refs.column_img_upload_upload.value=null,!1;this.fileData.extName=n.type,this.fileData.file=n;var o=new FileReader;o.onload=function(t){if(e.fileData.fileContent=o.result,e.widthHeightMaxLimit||e.widthHeightMinLimit){var a=new Image;a.src=URL.createObjectURL(n),a.onload=function(){var t=a.width,e=a.height;i.widthHeightCheck=!0,i.widthHeightMaxLimit?t>i.widthHeightMaxLimit[0]?(i.$message.error("上传图片宽度不能超过"+i.widthHeightMaxLimit[0]+"px"),i.widthHeightCheck=!1):e>i.widthHeightMaxLimit[1]&&(i.$message.error("上传图片高度不能超过"+i.widthHeightMaxLimit[1]+"px"),i.widthHeightCheck=!1):i.widthHeightMinLimit&&(t<i.widthHeightMinLimit[0]?(i.$message.error("上传图片宽度不能小于"+i.widthHeightMinLimit[0]+"px"),i.widthHeightCheck=!1):e<i.widthHeightMinLimit[1]&&(i.$message.error("上传图片高度不能小于"+i.widthHeightMinLimit[1]+"px"),i.widthHeightCheck=!1)),i.widthHeightCheck?i.uploadImg():i.$refs.column_img_upload_upload.value=null}}else i.uploadImg()},o.readAsDataURL(n)},formatCheck:function(t){var e=5,a="image/jpeg"===t.type||"image/jpg"===t.type||"image/png"===t.type;this.imgFileSizeMaxLimit&&(e=this.imgFileSizeMaxLimit);var i=t.size/1024/1024<e;return a?!!i||(this.$message.error("上传图片大小不超过"+e+"M"),!1):(this.$message.error("上传图片仅支持JPG/JPEG/PNG格式"),!1)},uploadImg:function(){var i=this,t={fileContent:this.fileData.fileContent.split(",")[1],watermark:1,extName:this.fileData.extName.split("/")[1]};r.default.openLoading("图片上传中..."),Object(o.a)({method:n.a.uploadImg.type,url:n.a.uploadImg.url,data:t}).then(function(t){if(t&&t.data.responseObject&&!0===t.data.responseObject.responseStatus){r.default.closeLoading();var e=t.data.responseObject.responseData.data_list,a={};a.attUrl=e.attUrl,a.attFormat=e.extName,a.navigationAttType=1,a.attSize=e.attSize,a.attHeight=e.attHeight,a.attWidth=e.attWidth,a.attType=e.attType,i.prevImgUrl=URL.createObjectURL(i.fileData.file),i.$emit("uploadSuccess",a)}else r.default.closeLoading(),i.$message.error("图片上传失败！"),i.clearInput()}).catch(function(){r.default.closeLoading(),i.$message.error("图片上传失败！"),i.clearInput()})}},destroyed:function(){r.default.goBack()}},s=(a(533),a(58)),c=Object(s.a)(l,i,[],!1,null,"428cfd07",null);c.options.__file="src/views/columnManager/components/ColumnImgUpload.vue";e.a=c.exports},533:function(t,e,a){"use strict";var i=a(523);a.n(i).a},534:function(t,e,a){(t.exports=a(155)(!1)).push([t.i,'\n.column-img-upload-container[data-v-428cfd07] {\n  width: 150px;\n  height: 100px;\n  background: #EDF1FF;\n  position: relative;\n}\n.column-img-upload-container .uneditable[data-v-428cfd07] {\n    position: absolute;\n    top: 0;\n    left: 0;\n    width: 150px;\n    height: 100px;\n    background: rgba(0, 0, 0, 0.2);\n    z-index: 5;\n}\n.column-img-upload-container .column-img-upload-icon[data-v-428cfd07] {\n    width: 38px;\n    height: 31px;\n    background: url("/static/images/upload/addImg.png") no-repeat;\n    position: absolute;\n    left: 50%;\n    top: 50%;\n    transform: translateX(-50%) translateY(-50%);\n}\n.column-img-upload-container img[data-v-428cfd07] {\n    width: 100%;\n    height: 100%;\n}\n.column-img-upload-container input[data-v-428cfd07] {\n    display: none;\n}\n',""])},651:function(t,e,a){var i=a(896);"string"==typeof i&&(i=[[t.i,i,""]]);var n={hmr:!0,transform:void 0,insertInto:void 0};a(156)(i,n);i.locals&&(t.exports=i.locals)},652:function(t,e,a){},653:function(t,e,a){},654:function(t,e,a){var i=a(900);"string"==typeof i&&(i=[[t.i,i,""]]);var n={hmr:!0,transform:void 0,insertInto:void 0};a(156)(i,n);i.locals&&(t.exports=i.locals)},895:function(t,e,a){"use strict";var i=a(651);a.n(i).a},896:function(t,e,a){(t.exports=a(155)(!1)).push([t.i,"\n.dialog-title[data-v-e07cdfac] {\n  font-family: PingFangSC-Medium;\n  font-size: 20px;\n  color: #222222;\n  letter-spacing: 0;\n  line-height: 24px;\n  font-weight: bolder;\n}\n.column-img-upload p[data-v-e07cdfac] {\n  text-align: center;\n  margin-top: 10px;\n  font-family: PingFangSC-Regular;\n  font-size: 12px;\n  color: #999999;\n  letter-spacing: 0;\n  line-height: 12px;\n}\n.img-upload[data-v-e07cdfac] {\n  display: inline-block;\n}\n.img-upload[data-v-e07cdfac]:nth-child(2) {\n    margin-left: -80px;\n}\n.img-upload[data-v-e07cdfac]:nth-child(3) {\n    margin-left: -80px;\n}\n.el-button[data-v-e07cdfac] {\n  float: right;\n  padding: 10px 56px;\n  background: #3846DC;\n}\n",""])},897:function(t,e,a){"use strict";var i=a(652);a.n(i).a},898:function(t,e,a){"use strict";var i=a(653);a.n(i).a},899:function(t,e,a){"use strict";var i=a(654);a.n(i).a},900:function(t,e,a){(t.exports=a(155)(!1)).push([t.i,'\n@charset "UTF-8";\n/* 栏目后台页通用列表样式*/\n.column-manager-main-container {\n  width: 1200px;\n  margin: 0 auto;\n  background: #F6F7FA;\n  margin-top: 32px;\n}\n.column-manager-main-container h3 {\n    ont-family: PingFangSC-Semibold;\n    font-size: 20px;\n    color: #2C343A;\n    letter-spacing: 0;\n    line-height: 20px;\n    margin-bottom: 25px;\n}\n.column-manager-main-container .column-manager-search-area {\n    padding: 25px 0 0;\n    background: #ffffff;\n    box-shadow: 0 4px 10px 0 rgba(42, 53, 102, 0.04);\n    border-radius: 4px;\n    margin-bottom: 30px;\n}\n.column-manager-main-container .column-manager-search-area .el-input .el-input__inner {\n      background: #F7F9FC;\n      border: 1px solid #E6E6E8;\n      border-radius: 4px;\n}\n.column-manager-main-container .column-manager-search-area .column-search-submit button:nth-of-type(1) {\n      border: none;\n}\n.column-manager-main-container .column-manager-search-area .column-search-submit button:nth-of-type(2) {\n      color: #4B67D6;\n      border: 1px solid #4B67D6;\n      border-radius: 4px;\n}\n.column-manager-main-container .column-manager-button {\n    margin-bottom: 30px;\n}\n.column-manager-main-container .column-manager-button button {\n      color: #4B67D6;\n      border: 1px solid #4B67D6;\n      border-radius: 3px;\n}\n.column-manager-main-container .column-manager-button button span {\n        padding-right: 2px;\n}\n.column-manager-main-container .column-manager-table {\n    margin-bottom: 30px;\n}\n.column-manager-main-container .column-manager-table .el-table .cell {\n      font-family: PingFangSC-Regular;\n      font-size: 14px;\n      color: #333333;\n      letter-spacing: 0;\n      line-height: 1.5;\n}\n.column-manager-main-container .column-manager-table th.is-leaf {\n      font-weight: bold;\n}\n.column-manager-main-container .column-manager-table button {\n      width: 74px;\n      height: 28px;\n      padding: 0;\n      border: 1px solid #4B67D6;\n      border-radius: 3px;\n      font-family: PingFangSC-Regular;\n      font-size: 13px;\n      color: #4B67D6;\n      letter-spacing: 0;\n}\n.column-manager-main-container .column-manager-table button.changeState {\n        background: #EDF1FF;\n        border: 1px solid #4B67D6;\n        border-radius: 3px;\n        font-family: PingFangSC-Regular;\n        color: #4B67D6;\n        font-size: 13px;\n        letter-spacing: 0;\n        line-height: 1.2;\n}\n.column-manager-main-container .column-manager-table button.changeState.remove {\n          background: #FFEBE3;\n          border: 1px solid #FF7E4D;\n          color: #FF7E4D;\n}\n.column-manager-main-container .column-manager-table .column-table-index-btn {\n      background: #4B67D6;\n      border-radius: 3px;\n      font-family: PingFangSC-Regular;\n      font-size: 13px;\n      color: #FFFFFF;\n      letter-spacing: 0;\n      line-height: 13px;\n}\n.column-manager-main-container .column-manager-pagination {\n    float: right;\n}\n',""])},966:function(t,e,a){"use strict";a.r(e);var i=function(){var a=this,t=a.$createElement,i=a._self._c||t;return i("section",{staticClass:"column-manager-main-container"},[i("h3",[a._v("课程管理")]),a._v(" "),i("section",{staticClass:"column-manager-search-area"},[i("el-form",{attrs:{"label-width":"120px"}},[i("el-row",[i("el-col",{attrs:{span:5}},[i("el-form-item",{attrs:{label:"课程ID"}},[i("el-input",{attrs:{placeholder:"输入课程ID"},model:{value:a.searchConditionData.courseId,callback:function(t){a.$set(a.searchConditionData,"courseId",t)},expression:"searchConditionData.courseId"}})],1)],1),a._v(" "),i("el-col",{attrs:{span:5}},[i("el-form-item",{attrs:{label:"课程名称"}},[i("el-input",{attrs:{placeholder:"输入课程名称"},model:{value:a.searchConditionData.courseNameLike,callback:function(t){a.$set(a.searchConditionData,"courseNameLike",t)},expression:"searchConditionData.courseNameLike"}})],1)],1),a._v(" "),i("el-col",{attrs:{span:8}},[i("el-form-item",{attrs:{label:"添加时间"}},[i("el-date-picker",{attrs:{type:"daterange","range-separator":"-","start-placeholder":"不限","end-placeholder":"不限","value-format":"yyyy-MM-dd HH:mm:ss","default-time":["00:00:00","23:59:59"]},model:{value:a.searchConditionCreateTime,callback:function(t){a.searchConditionCreateTime=t},expression:"searchConditionCreateTime"}})],1)],1),a._v(" "),i("el-col",{attrs:{span:5}},[i("el-form-item",{attrs:{label:"状态"}},[i("el-select",{attrs:{placeholder:"不限"},model:{value:a.searchConditionData.isValid,callback:function(t){a.$set(a.searchConditionData,"isValid",t)},expression:"searchConditionData.isValid"}},[i("el-option",{attrs:{label:"不限",value:""}}),a._v(" "),i("el-option",{attrs:{label:"已上架",value:"1"}}),a._v(" "),i("el-option",{attrs:{label:"已下架",value:"0"}})],1)],1)],1)],1),a._v(" "),i("el-row",[i("el-col",{attrs:{span:9}},[i("el-form-item",{attrs:{label:"更新时间"}},[i("el-date-picker",{attrs:{type:"daterange","range-separator":"-","start-placeholder":"不限","end-placeholder":"不限","value-format":"yyyy-MM-dd HH:mm:ss","default-time":["00:00:00","23:59:59"]},model:{value:a.searchConditionUpdateTime,callback:function(t){a.searchConditionUpdateTime=t},expression:"searchConditionUpdateTime"}})],1)],1),a._v(" "),i("el-col",{attrs:{span:6}},[i("el-form-item",{attrs:{label:"专业"}},[i("el-select",{attrs:{placeholder:"不限"},model:{value:a.searchConditionData.areasExpertiseId,callback:function(t){a.$set(a.searchConditionData,"areasExpertiseId",t)},expression:"searchConditionData.areasExpertiseId"}},[i("el-option",{attrs:{label:"不限",value:""}}),a._v(" "),a._l(a.profession,function(t){return i("el-option",{key:t.id,attrs:{value:t.id,label:t.name}})})],2)],1)],1)],1),a._v(" "),i("el-row",[i("el-col",[i("el-form-item",{staticClass:"column-search-submit",staticStyle:{float:"right","margin-right":"50px"}},[i("el-button",{on:{click:a.clearBtnOnClick}},[a._v("清空条件")]),a._v(" "),i("el-button",{on:{click:a.filterBtnOnClick}},[a._v("筛选")])],1)],1)],1)],1)],1),a._v(" "),i("section",{staticClass:"column-manager-button"},[i("el-row",[i("el-col",[i("el-button",{on:{click:a.createCourseBtnOnClick}},[i("span",{staticClass:"el-icon-circle-plus"}),a._v("新增课程")])],1)],1)],1),a._v(" "),i("section",{staticClass:"column-manager-table"},[i("el-table",{staticStyle:{width:"100%"},attrs:{data:a.tableData,fit:!0}},[i("el-table-column",{attrs:{prop:"courseId",width:"140",label:"课程ID"}}),a._v(" "),i("el-table-column",{attrs:{prop:"courseName",width:"180",label:"课程名称"}}),a._v(" "),i("el-table-column",{attrs:{prop:"customerIdList",width:"135",label:"用户ID"}}),a._v(" "),i("el-table-column",{attrs:{prop:"customerNameList",width:"120",label:"用户名字"}}),a._v(" "),i("el-table-column",{attrs:{prop:"sortId",label:"排序"}}),a._v(" "),i("el-table-column",{attrs:{prop:"anthologyNum",label:"选集总数"}}),a._v(" "),i("el-table-column",{attrs:{prop:"columnName",width:"180",label:"栏目"}}),a._v(" "),i("el-table-column",{attrs:{formatter:a.formatterAreasExpertise,prop:"areasExpertiseId",label:"所属专业"}}),a._v(" "),i("el-table-column",{attrs:{formatter:a.formatterDate,prop:"createTime",width:"100",label:"添加时间"}}),a._v(" "),i("el-table-column",{attrs:{formatter:a.formatterDate,prop:"updateTime",width:"100",label:"更新时间"}}),a._v(" "),i("el-table-column",{attrs:{formatter:a.formatterStatus,prop:"isValid",label:"状态"}}),a._v(" "),i("el-table-column",{attrs:{label:"操作",width:"300",fixed:"right"},scopedSlots:a._u([{key:"default",fn:function(e){return[i("el-button",{on:{click:function(t){a.tableEditBtnOnClick(e.row)}},nativeOn:{keydown:function(t){t.preventDefault()}}},[a._v("编辑")]),a._v(" "),0==e.row.isValid?i("el-button",{staticClass:"changeState",on:{click:function(t){a.tableValidBtnOnClick(e.row)}},nativeOn:{keydown:function(t){t.preventDefault()}}},[a._v("\n            上架\n          ")]):i("el-button",{staticClass:"changeState remove",on:{click:function(t){a.tableValidBtnOnClick(e.row)}},nativeOn:{keydown:function(t){t.preventDefault()}}},[a._v("\n            下架\n          ")]),a._v(" "),i("el-button",{on:{click:function(t){a.tableDetailBtnOnClick(e.row)}}},[a._v("查看内容")])]}}])})],1)],1),a._v(" "),i("el-row",[i("el-col",[i("section",{staticClass:"column-manager-pagination"},[i("el-pagination",{attrs:{"current-page":a.paginationData.currentPage,total:a.paginationData.total,"page-sizes":[10,20,30,40],"page-size":a.paginationData.pageSize,layout:"total, prev, pager, next, jumper ,sizes"},on:{"size-change":a.handleSizeChange,"current-change":a.handleCurrentChange}})],1)])],1),a._v(" "),i("courseTypeColumnDialog",{attrs:{dialogShow:a.editDialogData.dialogShow,dialogData:a.editDialogData.dialogData,newDialog:a.editDialogData.newDialog,profession:a.profession},on:{closeDialog:a.closeDialogHandle}})],1)},n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-dialog",{staticClass:"course-type-column-dialog",attrs:{width:"70%",center:"",visible:e.editShow,"before-close":e.handleClose,"close-on-click-modal":!1},on:{"update:visible":function(t){e.editShow=t}}},[a("div",{staticClass:"dialog-title",attrs:{slot:"title"},slot:"title"},[e._v(e._s(e.editTitle))]),e._v(" "),a("el-form",{ref:"courseTypeColumnForm",attrs:{"label-width":"100px",model:e.editData,rules:e.rules}},[a("el-row",[a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:"课程ID"}},[a("el-input",{attrs:{placeholder:"系统分配",disabled:""},model:{value:e.editData.courseId,callback:function(t){e.$set(e.editData,"courseId",t)},expression:"editData.courseId"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:18}},[a("el-form-item",{attrs:{label:"课程名称",prop:"courseName"}},[a("el-input",{attrs:{placeholder:"课程名称"},model:{value:e.editData.courseName,callback:function(t){e.$set(e.editData,"courseName",t)},expression:"editData.courseName"}})],1)],1)],1),e._v(" "),a("el-row",[a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"用户ID"}},[a("el-input",{attrs:{placeholder:"按内容自动读取",disabled:""},model:{value:e.editData.customerIdList,callback:function(t){e.$set(e.editData,"customerIdList",t)},expression:"editData.customerIdList"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"用户姓名"}},[a("el-input",{attrs:{placeholder:"按ID自动读取",disabled:""},model:{value:e.editData.customerNameList,callback:function(t){e.$set(e.editData,"customerNameList",t)},expression:"editData.customerNameList"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:8}},[e.newDialog?e._e():a("el-form-item",{attrs:{label:"顺序号",prop:"sortId"}},[a("el-input",{attrs:{placeholder:"输入序号"},model:{value:e.editData.sortId,callback:function(t){e.$set(e.editData,"sortId",t)},expression:"editData.sortId"}})],1)],1)],1),e._v(" "),a("el-row",[a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"选集总数",prop:"anthologyNum"}},[a("el-input",{attrs:{placeholder:"输入数字"},model:{value:e.editData.anthologyNum,callback:function(t){e.$set(e.editData,"anthologyNum",t)},expression:"editData.anthologyNum"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"专业",prop:"areasExpertiseId"}},[a("el-select",{attrs:{placeholder:"请选择专业"},model:{value:e.editData.areasExpertiseId,callback:function(t){e.$set(e.editData,"areasExpertiseId",t)},expression:"editData.areasExpertiseId"}},e._l(e.profession,function(t){return a("el-option",{key:t.id,attrs:{label:t.name,value:t.id}})}))],1)],1)],1),e._v(" "),a("el-row",[a("el-col",[a("el-form-item",{attrs:{label:"适合人群",prop:"suitCrowd"}},[a("el-input",{attrs:{type:"textarea",rows:3},model:{value:e.editData.suitCrowd,callback:function(t){e.$set(e.editData,"suitCrowd",t)},expression:"editData.suitCrowd"}})],1)],1)],1),e._v(" "),a("el-row",[a("el-col",[a("el-form-item",{attrs:{label:"课程介绍",prop:"courseDesc"}},[a("el-input",{attrs:{type:"textarea",rows:3},model:{value:e.editData.courseDesc,callback:function(t){e.$set(e.editData,"courseDesc",t)},expression:"editData.courseDesc"}})],1)],1)],1),e._v(" "),a("el-row",[a("el-col",[a("el-form-item",{attrs:{label:"讲师介绍",prop:"customerDesc"}},[a("el-input",{attrs:{type:"textarea",rows:3},model:{value:e.editData.customerDesc,callback:function(t){e.$set(e.editData,"customerDesc",t)},expression:"editData.customerDesc"}})],1)],1)],1),e._v(" "),a("div",{staticClass:"column-course-img-list"},[a("el-form-item",{staticClass:"column-course-img-label img-upload",attrs:{label:"配图",prop:"imgListUrl"}},[a("ColumnImgUpload",{attrs:{imgUrl:e.editData.imgListUrl,needClear:!e.editShow},on:{uploadSuccess:e.handleImgListUploadSuccess}},[a("p",[e._v("列表页配图")])])],1),e._v(" "),a("el-form-item",{staticClass:"column-course-img-label img-upload",attrs:{prop:"imgIconUrl"}},[a("ColumnImgUpload",{attrs:{imgUrl:e.editData.imgIconUrl,needClear:!e.editShow},on:{uploadSuccess:e.handleImgIconUploadSuccess}},[a("p",[e._v("落地页头图")])])],1),e._v(" "),a("el-form-item",{staticClass:"img-upload",attrs:{prop:"imgShareUrl"}},[a("ColumnImgUpload",{attrs:{imgUrl:e.editData.imgShareUrl,needClear:!e.editShow},on:{uploadSuccess:e.handleImgShareUploadSuccess}},[a("p",[e._v("分享图")])])],1)],1),e._v(" "),a("el-row",[a("el-col",{attrs:{span:6,offset:18}},[a("el-button",{attrs:{type:"primary"},on:{click:e.submitBtnOnClick}},[e._v("发布")])],1)],1)],1)],1)};n._withStripped=i._withStripped=!0;var o=a(525),r=a(527),l=a(69),s=a(59),c=a(68),d={name:"courseTypeColumnDialog",props:{dialogShow:{type:Boolean,default:!1},newDialog:{type:Boolean,require:!1},dialogData:{type:Object,require:!1},profession:{type:Array,require:!0}},components:{ColumnImgUpload:r.a},data:function(){return{uploadImgUrl:"/call/caseFolder/case_folder_attachment/upload/",editTitle:"",columnId:this.$route.query.columnId,editShow:this.dialogShow,editData:{courseId:"",courseName:"",customerIdList:"",customerNameList:"",sortId:"",anthologyNum:"",areasExpertiseId:"",suitCrowd:"",courseDesc:"",customerDesc:"",imgIconUrl:"",imgShareUrl:"",imgListUrl:"",imgIconData:{},imgShareData:{},imgListData:{}},rules:{courseName:[{required:!0,message:"课程名称不能为空",trigger:"blur"},{max:30,message:"最长30个字"},{validator:o.a.fullSpanceVaild,message:"栏目名称不能全为空格",trigger:"blur"}],sortId:[{required:!0,message:"顺序号不能为空",trigger:"blur"},{validator:o.a.isPositiveInteger,message:"选集序号必须为正整数",trigger:"blur"}],anthologyNum:[{required:!0,message:"选集总数必须为正整数",trigger:"blur"},{validator:o.a.isPositiveInteger,message:"选集总数必须为正整数",trigger:"blur"}],suitCrowd:[{required:!0,message:"适合人群不能为空",trigger:"blur"},{max:500,message:"最长500个字"},{validator:o.a.fullSpanceVaild,message:"适合人群不能为空",trigger:"blur"}],courseDesc:[{required:!0,message:"课程介绍不能为空",trigger:"blur"},{max:500,message:"最长500个字"},{validator:o.a.fullSpanceVaild,message:"课程介绍不能为空",trigger:"blur"}],customerDesc:[{required:!0,message:"讲师介绍不能为空",trigger:"blur"},{max:500,message:"最长500个字"},{validator:o.a.fullSpanceVaild,message:"讲师介绍不能为空",trigger:"blur"}],areasExpertiseId:[{required:!0,message:"专业选项不能为空",trigger:"blur"}],imgListUrl:[{required:!0,message:"请上传列表页配图",trigger:"change"}],imgIconUrl:[{required:!0,message:"请上传落地页头图",trigger:"change"}],imgShareUrl:[{required:!0,message:"请上传分享图"}]}}},watch:{dialogShow:function(t){if(this.editShow=t){for(var e in this.$refs.courseTypeColumnForm&&this.$refs.courseTypeColumnForm.clearValidate(),this.editData)this.editData[e]="";this.newDialog?this.editTitle="新增课程":this.dialogData&&(this.editTitle="编辑课程",this.editData.courseId=this.dialogData.courseId,this.getDetailData())}}},methods:{getDetailData:function(){var n=this;this.editShow=!1,c.default.openLoading("加载中..."),Object(s.a)({method:l.a.getCourseDetailData.type,url:l.a.getCourseDetailData.url,params:{columnId:this.columnId,courseId:this.editData.courseId}}).then(function(t){if(c.default.closeLoading(),n.editShow=!0,t&&t.data&&t.data.responseObject&&t.data.responseObject.responseData){var e=t.data.responseObject.responseData;n.editData.courseName=e.courseName,n.editData.customerIdList=e.customerIdList,n.editData.customerNameList=e.customerNameList,n.editData.sortId=e.sortId,n.editData.anthologyNum=e.anthologyNum,n.editData.areasExpertiseId=parseInt(e.areasExpertiseId),n.editData.suitCrowd=e.suitCrowd,n.editData.courseDesc=e.courseDesc,n.editData.customerDesc=e.customerDesc;for(var a={},i=0;i<e.attList.length;i++)"1"===(a=e.attList[i]).attType?(n.editData.imgIconData=a,n.editData.imgIconUrl=l.a.imgServer_img05.url+a.attUrl):"2"===a.attType?(n.editData.imgShareData=a,n.editData.imgShareUrl=l.a.imgServer_img05.url+a.attUrl):"3"===a.attType&&(n.editData.imgListData=a,n.editData.imgListUrl=l.a.imgServer_img05.url+a.attUrl)}}).catch(function(t){c.default.closeLoading(),n.editShow=!0})},submitData:function(){for(var e=this,t={columnId:this.columnId,visitSiteId:25,courseId:this.editData.courseId,courseName:this.editData.courseName,sortId:this.editData.sortId,anthologyNum:this.editData.anthologyNum,areasExpertiseId:this.editData.areasExpertiseId,suitCrowd:this.editData.suitCrowd,courseDesc:this.editData.courseDesc,customerDesc:this.editData.customerDesc,attList:[this.editData.imgListData,this.editData.imgIconData,this.editData.imgShareData]},a=0;a<t.attList.length;a++)t.attList[a].columnType=1;var i={};for(var n in t)t[n]&&(i[n]=t[n]);t=i;var o=this.newDialog?"新增":"编辑";c.default.openLoading("加载中..."),this.editShow=!1,Object(s.a)({method:l.a.saveColumnCourse.type,url:l.a.saveColumnCourse.url,data:t}).then(function(t){c.default.closeLoading(),t&&t.data.responseObject&&!0===t.data.responseObject.responseStatus?e.$allin_confirm({title:"提示",content:o+"课程成功",type:"notice",done:function(){e.handleClose(!0)}}):e.$allin_confirm({title:"提示",content:o+"课程失败",type:"notice",done:function(){e.handleClose()}})}).catch(function(){c.default.closeLoading(),e.$allin_confirm({title:"提示",content:o+"课程失败",type:"notice",done:function(){e.handleClose()}})})},submitBtnOnClick:function(){var e=this;this.$refs.courseTypeColumnForm.validate(function(t){if(!t)return!1;e.submitData()})},handleClose:function(t){this.$emit("closeDialog",t)},handleImgListUploadSuccess:function(t){var e=this.editData&&this.editData.imgListData&&this.editData.imgListData.id?this.editData.imgListData.id:null;this.editData.imgListData=t,e&&(this.editData.imgListData.id=e),this.editData.imgListData.attType=3,this.editData.imgListUrl=l.a.imgServer_img05.url+t.attUrl,this.$refs.courseTypeColumnForm.validateField("imgListUrl")},handleImgIconUploadSuccess:function(t){var e=this.editData&&this.editData.imgIconData&&this.editData.imgIconData.id?this.editData.imgIconData.id:null;this.editData.imgIconData=t,e&&(this.editData.imgIconData.id=e),this.editData.imgIconData.attType=1,this.editData.imgIconUrl=l.a.imgServer_img05.url+t.attUrl,this.$refs.courseTypeColumnForm.validateField("imgIconUrl")},handleImgShareUploadSuccess:function(t){var e=this.editData&&this.editData.imgShareData&&this.editData.imgShareData.id?this.editData.imgShareData.id:null;this.editData.imgShareData=t,e&&(this.editData.imgShareData.id=e),this.editData.imgShareData.attType=2,this.editData.imgShareUrl=l.a.imgServer_img05.url+t.attUrl,this.$refs.courseTypeColumnForm.validateField("imgShareUrl")}},mounted:function(){}},u=(a(895),a(897),a(58)),m=Object(u.a)(d,n,[],!1,null,"e07cdfac",null);m.options.__file="src/views/columnManager/components/courseTypeColumnDialog.vue";var g={name:"courseTypeColumn",components:{courseTypeColumnDialog:m.exports},data:function(){return{columnName:this.$route.query.columnName,columnId:this.$route.query.columnId,tableData:[],searchConditionData:{courseId:"",courseNameLike:"",createStartTime:"",createEndTime:"",isValid:"",updateStartTime:"",updateEndTime:"",areasExpertiseId:""},profession:[],searchConditionCreateTime:"",searchConditionUpdateTime:"",paginationData:{currentPage:1,firstResult:0,maxResult:0,pageSize:20,total:0},editDialogData:{dialogShow:!1,newDialog:!0,dialogData:{}}}},methods:{getAreasExpertiseData:function(){for(var t=[{id:2,tagName:"关节"},{id:7,tagName:"脊柱"},{id:9,tagName:"创伤"},{id:8,tagName:"运动医学"}],e=void 0,a=0;a<t.length;a++)(e={}).id=t[a].id,e.name=t[a].tagName,this.profession.push(e)},getDataList:function(){var a=this;this.paginationData.maxResult=this.paginationData.pageSize,this.paginationData.firstResult=(this.paginationData.currentPage-1)*this.paginationData.pageSize;var t={firstResult:this.paginationData.firstResult,maxResult:this.paginationData.maxResult,sortType:1,columnId:this.columnId};for(var e in this.searchConditionData)this.searchConditionData[e]&&(t[e]=this.searchConditionData[e]);c.default.openLoading("加载中..."),Object(s.a)({method:l.a.getCourseTableList.type,url:l.a.getCourseTableList.url,params:t}).then(function(t){if(c.default.closeLoading(),t&&t.data.responseObject){var e=t.data.responseObject;a.tableData=e.items,a.paginationData.total=e.total}}).catch(function(t){c.default.closeLoading()})},updateColumnStatus:function(t){var e=this,a="";a=1===t.isValid?"课程下架":"课程上架",c.default.openLoading("加载中..."),Object(s.a)({method:l.a.updateCourseValid.type,url:l.a.updateCourseValid.url,data:{columnId:this.columnId,courseId:t.courseId,isValid:1===t.isValid?0:1}}).then(function(t){c.default.closeLoading(),t&&t.data&&t.data.responseObject&&t.data.responseObject.responseStatus?e.$allin_confirm({title:"提示",content:a+"成功",type:"notice",done:function(){e.getDataList()}}):e.$allin_confirm({title:"提示",content:a+"失败",type:"notice"})}).catch(function(){c.default.closeLoading(),e.$allin_confirm({title:"提示",content:a+"失败",type:"notice"})})},handleSizeChange:function(t){this.paginationData.pageSize=t,this.getDataList()},handleCurrentChange:function(t){this.paginationData.currentPage=t,this.getDataList()},clearBtnOnClick:function(){for(var t in this.searchConditionData)this.searchConditionData[t]="";this.searchConditionCreateTime="",this.searchConditionUpdateTime=""},filterBtnOnClick:function(){Array.isArray(this.searchConditionCreateTime)&&0<this.searchConditionCreateTime.length&&(this.searchConditionData.createStartTime=this.searchConditionCreateTime[0],this.searchConditionData.createEndTime=this.searchConditionCreateTime[1]),Array.isArray(this.searchConditionUpdateTime)&&0<this.searchConditionUpdateTime.length&&(this.searchConditionData.updateStartTime=this.searchConditionUpdateTime[0],this.searchConditionData.updateEndTime=this.searchConditionUpdateTime[1]),this.paginationData.currentPage=1,this.paginationData.firstResult=0,this.getDataList()},createCourseBtnOnClick:function(){this.editDialogData.dialogShow=!0,this.editDialogData.newDialog=!0},closeDialogHandle:function(t){!(this.editDialogData.dialogShow=!1)===t&&this.getDataList()},tableEditBtnOnClick:function(t){this.editDialogData.dialogShow=!0,this.editDialogData.newDialog=!1,this.editDialogData.dialogData=t},tableValidBtnOnClick:function(t){var e=this,a=t.isValid?"确定将此课程下架吗？":"确定将此课程上架吗？";this.$allin_confirm({title:"提示",content:a,done:function(){e.updateColumnStatus(t)}})},tableDetailBtnOnClick:function(t){var e=this.$router.resolve({name:"courseTypeVideoSelect",query:{columnId:this.columnId,courseId:t.courseId,courseName:t.courseName}}).href;window.open(e,"_blank")},formatterStatus:function(){return 0===(arguments.length<=2?void 0:arguments[2])?"已下架":"已上架"},formatterAreasExpertise:function(t){var e="",a=this.profession;if(a)for(var i=0;i<a.length;i++)if(parseInt(t.areasExpertiseId)===parseInt(a[i].id)){e=a[i].name;break}return e},formatterDate:function(){for(var t=arguments.length,e=Array(t),a=0;a<t;a++)e[a]=arguments[a];return e[2].substring(0,e[2].length-2)}},mounted:function(){var e=this;document.onkeydown=function(t){13===t.keyCode&&(e.editDialogData.dialogShow||e.getDataList())}},created:function(){this.getAreasExpertiseData(),this.getDataList()},destroyed:function(){document.onkeydown=null,c.default.goBack()}},p=(a(898),a(899),Object(u.a)(g,i,[],!1,null,"2eeac05d",null));p.options.__file="src/views/columnManager/courseTypeColumn.vue";e.default=p.exports}}]);