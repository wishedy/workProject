(window.webpackJsonp=window.webpackJsonp||[]).push([[70],{625:function(t,e,n){var a=n(844);"string"==typeof a&&(a=[[t.i,a,""]]);var o={hmr:!0,transform:void 0,insertInto:void 0};n(156)(a,o);a.locals&&(t.exports=a.locals)},843:function(t,e,n){"use strict";var a=n(625);n.n(a).a},844:function(t,e,n){(t.exports=n(155)(!1)).push([t.i,"\n.column-manager-main-container[data-v-e4370bb8] {\n  width: 1200px;\n  margin: 0 auto;\n  background: #F6F7FA;\n  margin-top: 32px;\n}\n.column-manager-main-container h3[data-v-e4370bb8] {\n    font-family: PingFangSC-Semibold;\n    font-size: 20px;\n    color: #2C343A;\n    letter-spacing: 0;\n    line-height: 20px;\n    margin-bottom: 25px;\n}\n.column-manager-main-container .course-info[data-v-e4370bb8] {\n    background: #ffffff;\n    padding: 20px;\n    height: 140px;\n    margin-bottom: 20px;\n}\n.column-manager-main-container .course-info .course-pic[data-v-e4370bb8] {\n      float: left;\n      width: 200px;\n      height: 120px;\n      border: 1px solid #eeeeee;\n      margin-right: 20px;\n}\n.column-manager-main-container .course-info .course-detail[data-v-e4370bb8] {\n      margin-left: 220px;\n}\n.column-manager-main-container .course-info .course-detail .left .title[data-v-e4370bb8] {\n        color: #333333;\n        font-size: 14px;\n}\n.column-manager-main-container .course-info .course-detail .left .desc[data-v-e4370bb8] {\n        color: #777777;\n        margin-top: 20px;\n        font-size: 12px;\n}\n.column-manager-main-container .course-info .course-detail .left .course-state[data-v-e4370bb8] {\n        color: #777777;\n        margin-top: 20px;\n        font-size: 12px;\n}\n.column-manager-main-container .course-info .course-detail .right .btns[data-v-e4370bb8] {\n        display: flex;\n        justify-content: flex-end;\n}\n.column-manager-main-container .course-info .course-detail .right .update-state[data-v-e4370bb8] {\n        text-align: right;\n        margin-top: 60px;\n        color: #999999;\n}\n.column-manager-main-container .column-manager-button[data-v-e4370bb8] {\n    margin-bottom: 30px;\n}\n.column-manager-main-container .column-manager-button button[data-v-e4370bb8] {\n      color: #4B67D6;\n      border: 1px solid #4B67D6;\n      border-radius: 3px;\n}\n.column-manager-main-container .column-manager-button button span[data-v-e4370bb8] {\n        padding-right: 2px;\n}\n.column-manager-main-container .column-manager-table[data-v-e4370bb8] {\n    margin-bottom: 30px;\n}\n.column-manager-main-container .column-manager-table .el-table .cell[data-v-e4370bb8] {\n      font-family: PingFangSC-Regular;\n      font-size: 14px;\n      color: #333333;\n      letter-spacing: 0;\n      line-height: 1.5;\n}\n.column-manager-main-container .column-manager-table th.is-leaf[data-v-e4370bb8] {\n      font-weight: bold;\n}\n.column-manager-main-container .column-manager-table button[data-v-e4370bb8] {\n      width: 74px;\n      height: 28px;\n      padding: 0;\n      border: 1px solid #4B67D6;\n      border-radius: 3px;\n      font-family: PingFangSC-Regular;\n      font-size: 13px;\n      color: #4B67D6;\n      letter-spacing: 0;\n}\n.column-manager-main-container .column-manager-table button.changeState[data-v-e4370bb8] {\n        background: #EDF1FF;\n        border: 1px solid #4B67D6;\n        border-radius: 3px;\n        font-family: PingFangSC-Regular;\n        color: #4B67D6;\n        font-size: 13px;\n        letter-spacing: 0;\n        line-height: 1.2;\n}\n.column-manager-main-container .column-manager-table button.changeState.remove[data-v-e4370bb8] {\n          background: #FFEBE3;\n          border: 1px solid #FF7E4D;\n          color: #FF7E4D;\n}\n.column-manager-main-container .column-manager-table .column-table-index-btn[data-v-e4370bb8] {\n      background: #4B67D6;\n      border-radius: 3px;\n      font-family: PingFangSC-Regular;\n      font-size: 13px;\n      color: #FFFFFF;\n      letter-spacing: 0;\n      line-height: 13px;\n}\n.column-manager-main-container .column-manager-pagination[data-v-e4370bb8] {\n    float: right;\n}\n.source-list[data-v-e4370bb8] {\n  margin-top: 20px;\n}\n.source-list .cell[data-v-e4370bb8] {\n    font-family: PingFangSC-Regular;\n    font-size: 14px;\n    color: #333333;\n    letter-spacing: 0;\n    line-height: 1.2;\n}\n.source-list .headerClass[data-v-e4370bb8] {\n    text-align: center;\n}\n.source-list .source-list-btn[data-v-e4370bb8] {\n    width: 74px;\n    height: 28px;\n    padding: 0;\n    border: 1px solid #4B67D6;\n    border-radius: 3px;\n    font-family: PingFangSC-Regular;\n    font-size: 13px;\n    color: #4B67D6;\n    letter-spacing: 0;\n}\n.source-list .source-list-show-type div[data-v-e4370bb8] {\n    color: #4B67D6;\n}\n.source-list .source-list-show-type-title div[data-v-e4370bb8] {\n    color: #333333;\n}\n.edit-dialog .el-dialog__header .el-dialog__title[data-v-e4370bb8] {\n  font-family: PingFangSC-Medium;\n  font-size: 20px;\n  color: #222222;\n  letter-spacing: 0;\n  line-height: 24px;\n  font-weight: bolder;\n}\n.edit-dialog .show-type-unselect[data-v-e4370bb8] {\n  margin-left: 20px;\n  color: #c0c4cc;\n  cursor: pointer;\n}\n.edit-dialog .column-course-img-tips[data-v-e4370bb8] {\n  color: #999999;\n}\n.submitBtn button[data-v-e4370bb8]:nth-of-type(1) {\n  border: none;\n}\n.submitBtn button[data-v-e4370bb8]:nth-of-type(2) {\n  color: #4B67D6;\n  border: 1px solid #4B67D6;\n  border-radius: 4px;\n}\n.dialog-footer[data-v-e4370bb8] {\n  float: right;\n}\n",""])},986:function(t,e,n){"use strict";n.r(e);var a=function(){var n=this,t=n.$createElement,a=n._self._c||t;return a("section",{staticClass:"column-manager-main-container"},[a("h3",[n._v("付费课程内容管理")]),n._v(" "),a("section",{staticClass:"course-info"},[a("div",{staticClass:"course-pic"},[a("img",{staticStyle:{width:"200px",height:"120px"},attrs:{src:n.courseInfo.pcCoverPicUrl,alt:""}})]),n._v(" "),a("div",{staticClass:"course-detail"},[a("el-row",[a("el-col",{staticClass:"left",attrs:{span:16}},[a("div",{staticClass:"title"},[n._v("\n            "+n._s(n.courseInfo.courseName)+"\n          ")]),n._v(" "),a("div",{staticClass:"desc"},[n._v("\n            "+n._s(n.courseInfo.courseDesc)+"\n          ")]),n._v(" "),a("div",{staticClass:"course-state"},[n._v("\n            当前状态:"+n._s(2==n.courseInfo.courseState?"未上架":"已上架")+"\n          ")])]),n._v(" "),a("el-col",{staticClass:"right",attrs:{span:6}},[a("div",{staticClass:"btns"},[a("el-button",{on:{click:n.editCourse}},[n._v("编辑")]),n._v(" "),2==n.courseInfo.courseState?a("el-button",{on:{click:n.onSaleConfirm}},[n._v("上架")]):n._e()],1),n._v(" "),a("div",{staticClass:"update-state"},[n._v("\n            已更新至第"+n._s(n.courseInfo.newestNum)+"讲（持续更新中）\n          ")])])],1)],1)]),n._v(" "),a("section",{staticClass:"column-manager-button"},[a("el-row",[a("el-col",[a("el-button",{on:{click:n.addContent}},[a("span",{staticClass:"el-icon-circle-plus"}),n._v("添加内容")])],1)],1)],1),n._v(" "),a("section",{staticClass:"source-list"},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:n.tableData,"default-sort":{prop:"sortId",order:"descending"},fit:!0,"row-class-name":n.tableRowClassName}},[a("el-table-column",{attrs:{align:"center",label:"序号",prop:"serialId",width:"70"}}),n._v(" "),a("el-table-column",{attrs:{align:"left",label:"内容名称",width:"300"},scopedSlots:n._u([{key:"default",fn:function(t){return[a("div",{staticStyle:{float:"left",width:"60px"}},[a("img",{staticStyle:{width:"52px",height:"40px"},attrs:{src:t.row.videoAttUrl}})]),n._v(" "),a("div",{staticStyle:{float:"left",width:"200px"}},[n._v("\n            "+n._s(t.row.resourceName)+"\n          ")])]}}])}),n._v(" "),a("el-table-column",{attrs:{formatter:n.contentTypeFormatter,align:"center",label:"付费类型",prop:"resourceType",width:"120"}}),n._v(" "),a("el-table-column",{attrs:{formatter:n.payTypeFormatter,align:"center",label:"是否支持试看",prop:"resourceType",width:"120"}}),n._v(" "),a("el-table-column",{attrs:{label:"添加人",prop:"opUser",width:"100"}}),n._v(" "),a("el-table-column",{attrs:{align:"center",label:"添加时间",prop:"createTime",width:"160"}}),n._v(" "),a("el-table-column",{attrs:{fixed:"right",label:"操作",width:"340",align:"center"},scopedSlots:n._u([{key:"default",fn:function(e){return[n.isFirst(e.$index)?n._e():a("el-button",{staticClass:"source-list-btn",on:{click:function(t){n.upSort(e.row)}},nativeOn:{keydown:function(t){t.preventDefault()}}},[n._v("上移")]),n._v(" "),n.isLast(e.$index)?n._e():a("el-button",{staticClass:"source-list-btn",on:{click:function(t){n.downSort(e.row)}},nativeOn:{keydown:function(t){t.preventDefault()}}},[n._v("下移")]),n._v(" "),a("el-button",{staticClass:"source-list-btn",on:{click:function(t){n.confirmRemove(e.row)}},nativeOn:{keydown:function(t){t.preventDefault()}}},[n._v("移除")])]}}])})],1)],1),n._v(" "),a("el-row",{staticClass:"pagination",staticStyle:{margin:"20px 0"}},[a("el-col",{attrs:{offset:5,span:10}},[a("el-pagination",{directives:[{name:"show",rawName:"v-show",value:0<n.paginationData.total,expression:"paginationData.total>0"}],attrs:{"current-page":n.paginationData.currentPage,"page-size":n.paginationData.pageSize,"page-sizes":[10,20,30,40],total:n.paginationData.total,layout:"total,sizes, prev, pager, next, jumper"},on:{"current-change":n.handleCurrentChange,"size-change":n.handleSizeChange}})],1)],1),n._v(" "),n.addContentDialogData.visible?a("el-dialog",{attrs:{center:!0,"lock-scroll":!1,title:n.addContentDialogData.title,visible:n.addContentDialogData.visible,"custom-class":"edit-dialog",top:"10vh",width:"880px"},on:{"update:visible":function(t){n.$set(n.addContentDialogData,"visible",t)}}},[a("section",[a("el-row",[a("el-col",{attrs:{span:12}},[a("el-input",{staticStyle:{width:"100%"},attrs:{type:"text"},model:{value:n.addContentDialogData.keyWord,callback:function(t){n.$set(n.addContentDialogData,"keyWord",t)},expression:"addContentDialogData.keyWord"}})],1),n._v(" "),a("el-col",{attrs:{span:4,offset:1}},[a("el-button",{on:{click:n.searchContent}},[n._v("搜索")])],1)],1),n._v(" "),a("section",{staticClass:"source-list"},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:n.addContentDialogData.rowData,"default-sort":{prop:"sortId",order:"descending"},fit:!0,"row-class-name":n.tableRowClassName},on:{"selection-change":n.handleSelectionChange}},[a("el-table-column",{attrs:{align:"center",label:"选择",prop:"index",width:"80",type:"selection"}}),n._v(" "),a("el-table-column",{attrs:{align:"left",label:"内容名称",width:"410",prop:"resourceName"}}),n._v(" "),a("el-table-column",{attrs:{formatter:n.resourceTypeFormatter,align:"center","header-align":"center",label:"内容类型",prop:"resourceType",width:"100"}}),n._v(" "),a("el-table-column",{attrs:{formatter:n.contentTypeFormatter,align:"center","header-align":"center",label:"付费类型",prop:"payType",width:"100"}}),n._v(" "),a("el-table-column",{attrs:{formatter:n.payTypeFormatter,align:"center","header-align":"center",label:"是否支持试看",prop:"payType",width:"140"}})],1),n._v(" "),a("el-row",{staticClass:"pagination",staticStyle:{margin:"20px 0"}},[a("el-col",{attrs:{span:10}},[a("el-pagination",{directives:[{name:"show",rawName:"v-show",value:0<n.addContentDialogData.paginationData.total,expression:"addContentDialogData.paginationData.total>0"}],attrs:{"current-page":n.addContentDialogData.paginationData.currentPage,"page-size":n.addContentDialogData.paginationData.pageSize,"page-sizes":[10,20,30,40],total:n.addContentDialogData.paginationData.total,layout:"total,sizes, prev, pager, next, jumper"},on:{"current-change":n.handleDialogCurrentChange,"size-change":n.handleDialogSizeChange}})],1)],1)],1)],1),n._v(" "),a("section",{staticStyle:{clear:"both",height:"50px","margin-top":"20px"}},[a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){n.addContentDialogData.visible=!1}}},[n._v("取 消")]),n._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:n.saveContent}},[n._v("确 定")])],1)])]):n._e()],1)};a._withStripped=!0;var o=n(105),i=n.n(o),r=n(59),s=n(69),l=n(68),c={name:"courseContentManage",data:function(){return{id:"",tableData:[],courseInfo:{courseName:"",id:"",pcCoverPicUrl:""},paginationData:{currentPage:1,firstResult:0,maxResult:10,pageSize:10,total:0},addContentDialogData:{title:"添加内容",visible:!1,keyWord:"",rowData:[],multiSelection:[],paginationData:{currentPage:1,firstResult:0,maxResult:10,pageSize:10,total:0}}}},mounted:function(){this.courseInfo.id=this.$route.query.id,this.getCourseContentList(),this.getCourseDetail()},methods:{addContent:function(){this.addContentDialogData.rowData=[],this.addContentDialogData.paginationData.total=0,this.addContentDialogData.visible=!0},getCourseDetail:function(){var e=this;Object(r.a)({url:s.a.getCourseDetail.url+"/"+e.courseInfo.id,type:s.a.getCourseDetail.type}).then(function(t){l.default.closeLoading(),e.courseInfo=i()({},e.courseInfo,t.data.responseObject.responseData),e.getPcCoverPic(t)})},isFirst:function(t){return 0==t},isLast:function(t){return(this.paginationData.currentPage-1)*this.paginationData.pageSize+t+1==this.paginationData.total},getCourseContentList:function(){var e=this,t={firstResult:this.paginationData.firstResult,maxResult:this.paginationData.maxResult,sortType:this.sortType,columnName:this.columnName,courseId:this.courseInfo.id};Object(r.a)({url:s.a.getCourseContentList.url,type:s.a.getCourseContentList.type,params:t}).then(function(t){l.default.closeLoading(),e.tableData=t.data.responseObject.responseData.dataList,e.paginationData.total=t.data.responseObject.responseData.totalCount})},payTypeFormatter:function(t,e,n){return 1==t.payType?"支持试看":"付费后可看"},contentTypeFormatter:function(t,e,n){return 1==t.contentType?"付费":"免费\n"},resourceTypeFormatter:function(t,e,n){return 1==t.resourceType?"视频":""},tableRowClassName:function(t){var e=t.row,n=t.rowIndex;e.index=n+1},handleSizeChange:function(t){this.paginationData.maxResult=t,this.getCourseContentList()},handleCurrentChange:function(t){this.paginationData.currentPage=t,this.paginationData.firstResult=(t-1)*this.paginationData.maxResult,this.getCourseContentList()},handleDialogSizeChange:function(t){this.addContentDialogData.paginationData.maxResult=t,this.searchContent()},handleDialogCurrentChange:function(t){this.addContentDialogData.paginationData.currentPage=t,this.addContentDialogData.paginationData.firstResult=(t-1)*this.paginationData.maxResult,this.searchContent()},upSort:function(t){var e=this,n={resourceList:[{id:t.id,sortId:t.sortId,courseId:e.courseInfo.id,sortType:1}]};Object(r.a)({url:s.a.updateCourseContentState.url,method:s.a.updateCourseContentState.type,data:n}).then(function(t){l.default.closeLoading(),e.getCourseContentList()})},downSort:function(t){var e=this,n={resourceList:[{id:t.id,sortId:t.sortId,courseId:e.courseInfo.id,sortType:2}]};Object(r.a)({url:s.a.updateCourseContentState.url,method:s.a.updateCourseContentState.type,data:n}).then(function(t){l.default.closeLoading(),e.getCourseContentList()})},confirmRemove:function(e){var n=this;1!=n.courseInfo.courseState||1!=n.courseInfo.newestNum?this.$allin_confirm({title:"提示",content:"移除后，购买此课程用户将无法查看此视频，是否确认？",done:function(){var t={resourceList:[{id:e.id,isValid:!1,courseId:n.courseInfo.id}]};Object(r.a)({url:s.a.updateCourseContentState.url,method:s.a.updateCourseContentState.type,data:t}).then(function(t){l.default.closeLoading(),n.getCourseContentList(),n.getCourseDetail()})}}):this.$allin_confirm({title:"提示",content:" 当前视频为关联付费课程下唯一商品，不支持删除",type:"notice",done:function(){}})},searchContent:function(){var e=this,t={resourceName:e.addContentDialogData.keyWord,visitSiteId:25,firstResult:e.addContentDialogData.paginationData.firstResult,maxResult:e.addContentDialogData.paginationData.maxResult};Object(r.a)({url:s.a.searchContentList.url,type:s.a.searchContentList.type,params:t}).then(function(t){l.default.closeLoading(),e.addContentDialogData.rowData=t.data.responseObject.responseData.dataList,e.addContentDialogData.paginationData.total=t.data.responseObject.responseData.totalCount})},saveContent:function(){var n=this,a=[],o=1;if(this.addContentDialogData.multiSelection.map(function(t,e){a.push({resourceName:t.resourceName,resourceType:t.resourceType,resourceId:t.videoId,sortId:o++,courseId:n.courseInfo.id,opUser:localStorage.getItem("userLoginName")})}),0!=a.length)if(a.length>n.courseInfo.totalNum-n.courseInfo.newestNum)this.$allin_confirm({title:"提示",content:"选中的内容数量超出可添加的数量！",type:"notice",done:function(){}});else{var t={resourceList:a};Object(r.a)({url:s.a.updateCourseContentState.url,method:s.a.updateCourseContentState.type,data:t}).then(function(t){l.default.closeLoading(),n.addContentDialogData.visible=!1,n.getCourseContentList(),n.getCourseDetail()})}else this.$allin_confirm({title:"提示",content:"请选择要加入课程的内容",type:"notice",done:function(){}})},handleSelectionChange:function(t){this.addContentDialogData.multiSelection=t},editCourse:function(){window.open("/#/payCourseEdit?action=edit&id="+this.courseInfo.id)},onSaleConfirm:function(){var e=this;if(2==this.courseInfo.courseType&&0==this.courseInfo.newestNum)return this.$allin_confirm({title:"提示",content:"当前付费课程内容为空，请先关联内容",type:"notice",done:function(){window.location.reload()}}),!1;var t="上架后该专栏课程将对外销售，是否上架？";1==e.courseInfo.courseType&&(t="上架后该专栏课程仅对外展示无法销售，是否上架？"),this.$allin_confirm({title:"提示",content:t,type:"confirm",done:function(){var t={id:e.courseInfo.id,courseState:1,courseType:e.courseInfo.courseType};Object(r.a)({url:s.a.updateCourseState.url,method:s.a.updateCourseState.type,data:t}).then(function(t){l.default.closeLoading(),e.tableData=t.data.responseObject.responseData.dataList,e.paginationData.total=t.data.responseObject.totalCount})}})},getPcCoverPic:function(t){0<t.data.responseObject.responseData.pcCoverPic.length?this.courseInfo.pcCoverPicUrl=s.a.imgServer_img05.url+t.data.responseObject.responseData.pcCoverPic[0].attUrl:this.courseInfo.pcCoverPicUrl=""}}},u=(n(843),n(58)),d=Object(u.a)(c,a,[],!1,null,"e4370bb8",null);d.options.__file="src/views/payCourses/payCoursesContent.vue";e.default=d.exports}}]);