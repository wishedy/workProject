(window.webpackJsonp=window.webpackJsonp||[]).push([[26],{1006:function(t,a,e){"use strict";e.r(a);var i=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("section",{staticClass:"column-manager-main-container"},[i("h3",[e._v("活动/专题管理")]),e._v(" "),i("section",{staticClass:"column-manager-search-area"},[i("el-form",{ref:"activitySearchForm",attrs:{"label-width":"120px"},on:{keydown:function(t){return"button"in t||!e._k(t.keyCode,"enter",13,t.key,"Enter")?e.getTableData(t):null}}},[i("el-row",[i("el-col",{staticClass:"search-area-anthology-name",attrs:{span:8}},[i("el-form-item",{attrs:{label:"活动/专题名称："}},[i("el-input",{model:{value:e.searchConditionData.anthologyNameLike,callback:function(t){e.$set(e.searchConditionData,"anthologyNameLike",t)},expression:"searchConditionData.anthologyNameLike"}})],1)],1),e._v(" "),i("el-col",{attrs:{span:6}},[i("el-form-item",{attrs:{label:"分组："}},[i("el-select",{attrs:{placeholder:"请选择分组"},model:{value:e.searchConditionData.groupValue,callback:function(t){e.$set(e.searchConditionData,"groupValue",t)},expression:"searchConditionData.groupValue"}},[i("el-option",{attrs:{label:"全部",value:""}}),e._v(" "),e._l(e.groupValueList,function(t){return i("el-option",{key:t.id,attrs:{label:t.groupName,value:t.groupValue}})})],2)],1)],1),e._v(" "),i("el-col",{attrs:{span:6}},[i("el-form-item",{attrs:{label:"状态："}},[i("el-select",{attrs:{placeholder:"请选择处理状态",required:"",value:""},model:{value:e.searchConditionData.isValid,callback:function(t){e.$set(e.searchConditionData,"isValid",t)},expression:"searchConditionData.isValid"}},[i("el-option",{attrs:{label:"全部",value:""}}),e._v(" "),i("el-option",{attrs:{label:"已上架",value:"1"}}),e._v(" "),i("el-option",{attrs:{label:"已下架",value:"0"}})],1)],1)],1),e._v(" "),i("el-col",{attrs:{span:9}},[i("el-form-item",{attrs:{label:"更新时间："}},[i("el-date-picker",{attrs:{"default-time":["00:00:00","23:59:59"],"end-placeholder":"结束日期","range-separator":"至","start-placeholder":"开始日期",type:"daterange","value-format":"yyyy-MM-dd HH:mm:ss"},model:{value:e.searchConditionUpdateTime,callback:function(t){e.searchConditionUpdateTime=t},expression:"searchConditionUpdateTime"}})],1)],1)],1),e._v(" "),i("el-row",[i("el-col",[i("el-form-item",{staticClass:"submitBtn",staticStyle:{float:"right","margin-right":"50px"}},[i("el-button",{on:{click:e.resetForm}},[e._v("清空条件")]),e._v(" "),i("el-button",{on:{click:e.onSubmit}},[e._v("筛选")])],1)],1)],1)],1)],1),e._v(" "),i("section",{staticClass:"column-manager-button"},[i("el-row",[i("el-col",[i("el-button",{on:{click:e.addActivity}},[i("span",{staticClass:"el-icon-circle-plus"}),e._v("新增活动")])],1)],1)],1),e._v(" "),i("section",{staticClass:"source-list"},[i("el-table",{staticStyle:{width:"100%"},attrs:{data:e.tableData,"default-sort":{prop:"sortId",order:"descending"},fit:!0,"row-class-name":e.tableRowClassName},on:{"sort-change":e.tableChange}},[i("el-table-column",{attrs:{align:"center",label:"序号",prop:"index",width:"70"}}),e._v(" "),i("el-table-column",{attrs:{align:"center",label:"ID",prop:"refId",width:"150"}}),e._v(" "),i("el-table-column",{attrs:{align:"left","header-align":"center",label:"活动/专题名称",prop:"anthologyName",width:"260"}}),e._v(" "),i("el-table-column",{attrs:{formatter:e.groupValueFormatter,align:"left","header-align":"center",label:"分组",prop:"groupValue",width:"100"}}),e._v(" "),i("el-table-column",{attrs:{align:"left","header-align":"center",label:"活动url（h5）",prop:"activityMobileUrl",width:"260"}}),e._v(" "),i("el-table-column",{attrs:{align:"center",label:"顺序号",prop:"sortId",sortable:"custom",width:"100"}}),e._v(" "),i("el-table-column",{attrs:{formatter:e.dateFormatter,align:"center",label:"更新时间",prop:"updateTime",sortable:"custom",width:"180"}}),e._v(" "),i("el-table-column",{attrs:{formatter:e.sourceTypeFormatter,label:"搭建方式",prop:"videoName",width:"100"}}),e._v(" "),i("el-table-column",{attrs:{formatter:e.isValidFormatter,align:"center",label:"状态",prop:"isValid",width:"100"}}),e._v(" "),i("el-table-column",{attrs:{formatter:e.showTypeFormatter,align:"center","class-name":"source-list-show-type",label:"首页显示","label-class-name":"source-list-show-type-title",prop:"showType",width:"100"}}),e._v(" "),i("el-table-column",{attrs:{fixed:"right",label:"操作",width:"120"},scopedSlots:e._u([{key:"default",fn:function(a){return[i("el-button",{staticClass:"source-list-btn",on:{click:function(t){e.editActivity(a.row)}},nativeOn:{keydown:function(t){t.preventDefault()}}},[e._v("编辑")])]}}])})],1)],1),e._v(" "),i("el-row",{staticClass:"pagination",staticStyle:{margin:"20px 0"}},[i("el-col",{attrs:{offset:5,span:10}},[i("el-pagination",{directives:[{name:"show",rawName:"v-show",value:0<e.paginationData.total,expression:"paginationData.total>0"}],attrs:{"current-page":e.paginationData.currentPage,"page-size":e.paginationData.pageSize,"page-sizes":[10,20,30,40],total:e.paginationData.total,layout:"total,sizes, prev, pager, next, jumper"},on:{"current-change":e.handleCurrentChange,"size-change":e.handleSizeChange}})],1)],1),e._v(" "),e.editDialogData.visible?i("el-dialog",{attrs:{center:!0,"lock-scroll":!1,title:e.editDialogData.title,visible:e.editDialogData.visible,"custom-class":"edit-dialog",top:"18vh",width:"770px"},on:{"update:visible":function(t){e.$set(e.editDialogData,"visible",t)}}},[i("el-form",{ref:"editDialogForm",attrs:{model:e.editDialogData.rowData,rules:e.rules,"label-width":"90px"}},[i("el-row",[i("el-col",{attrs:{span:16}},[i("el-form-item",{attrs:{label:"名称",prop:"anthologyName"}},[i("el-input",{attrs:{disabled:e.editDialogData.rowData.groupValue!=e.Default_Group_Value,placeholder:"输入活动名称"},model:{value:e.editDialogData.rowData.anthologyName,callback:function(t){e.$set(e.editDialogData.rowData,"anthologyName","string"==typeof t?t.trim():t)},expression:"editDialogData.rowData.anthologyName"}})],1)],1),e._v(" "),i("el-col",{attrs:{span:8}},[i("el-form-item",{attrs:{label:"分组",prop:"groupValue"}},[i("el-input",{attrs:{disabled:""},model:{value:e.editDialogData.rowData.groupData.groupName,callback:function(t){e.$set(e.editDialogData.rowData.groupData,"groupName",t)},expression:"editDialogData.rowData.groupData.groupName"}})],1)],1)],1),e._v(" "),i("el-row",[i("el-col",{attrs:{span:16}},[i("el-form-item",{attrs:{label:"链接",prop:"activityMobileUrl"}},[i("el-input",{attrs:{disabled:e.editDialogData.rowData.groupValue!=e.Default_Group_Value,placeholder:"填写h5链接"},model:{value:e.editDialogData.rowData.activityMobileUrl,callback:function(t){e.$set(e.editDialogData.rowData,"activityMobileUrl","string"==typeof t?t.trim():t)},expression:"editDialogData.rowData.activityMobileUrl"}})],1)],1)],1),e._v(" "),i("el-row",[i("el-col",{attrs:{span:8}},[i("el-form-item",{attrs:{label:"顺序号",prop:"sortId"}},[i("el-input",{attrs:{disabled:e.editDialogData.sortIdDisabled,placeholder:e.editDialogData.sortIdPlaceHolder},model:{value:e.editDialogData.rowData.sortId,callback:function(t){e.$set(e.editDialogData.rowData,"sortId",e._n(t))},expression:"editDialogData.rowData.sortId"}})],1)],1)],1),e._v(" "),i("el-row",[i("el-col",{attrs:{span:16}},[i("el-form-item",{attrs:{label:"创建人",prop:"userName"}},[i("el-input",{attrs:{disabled:""},model:{value:e.editDialogData.rowData.userName,callback:function(t){e.$set(e.editDialogData.rowData,"userName",t)},expression:"editDialogData.rowData.userName"}})],1)],1)],1),e._v(" "),i("el-row",[i("el-col",{attrs:{span:16}},[i("el-form-item",{attrs:{label:"状态"}},[i("el-radio-group",{attrs:{disabled:!e.editDialogData.canCancelShowType},model:{value:e.editDialogData.rowData.isValid,callback:function(t){e.$set(e.editDialogData.rowData,"isValid",t)},expression:"editDialogData.rowData.isValid"}},[i("el-radio",{attrs:{label:1}},[e._v("上架")]),e._v(" "),i("el-radio",{attrs:{label:0}},[e._v("下架")])],1)],1)],1)],1),e._v(" "),i("el-row",[i("el-col",{attrs:{span:16}},[i("el-form-item",{attrs:{label:"上首页"}},[i("el-radio-group",{attrs:{disabled:0==e.editDialogData.rowData.isValid},model:{value:e.editDialogData.rowData.showType,callback:function(t){e.$set(e.editDialogData.rowData,"showType",t)},expression:"editDialogData.rowData.showType"}},[i("el-radio",{attrs:{label:1}},[e._v("首位")]),e._v(" "),i("el-radio",{attrs:{label:2}},[e._v("第二位")]),e._v(" "),i("el-radio",{attrs:{label:3}},[e._v("第三位")])],1),e._v(" "),i("span",{directives:[{name:"show",rawName:"v-show",value:e.editDialogData.canCancelShowType,expression:"editDialogData.canCancelShowType"}],staticClass:"show-type-unselect",on:{click:e.showTypeUnselectClickHandle}},[e._v("取消选择")])],1)],1)],1),e._v(" "),i("el-row",[i("el-col",{attrs:{span:24}},[i("div",{staticClass:"column-course-img-list"},[i("el-form-item",{staticClass:"column-course-img-label img-upload",attrs:{label:"配图",prop:"imgUrl"}},[i("ColumnImgUpload",{attrs:{imgUrl:e.editDialogData.rowData.imgUrl,widthHeightMinLimit:[498,270]},on:{uploadSuccess:e.handleImgUploadSuccess}}),e._v(" "),i("p",{staticClass:"column-course-img-tips"},[e._v("提示：活动图 498*270 、专题图 498*270")])],1)],1)])],1),e._v(" "),i("el-row",[i("el-col",{attrs:{span:24}},[i("el-form-item",{staticStyle:{float:"right"}},[i("el-button",{staticStyle:{width:"150px"},attrs:{size:"small",type:"primary"},on:{click:e.saveActivity}},[e._v("发布")])],1)],1)],1)],1)],1):e._e()],1)};i._withStripped=!0;var o=e(105),n=e.n(o),l=e(525),r=e(59),s=e(69),u=e(68),d={name:"activityColumn",components:{ColumnImgUpload:e(527).a},data:function(){var t={ADD:"新增",EDIT:"编辑"};return{Edit_Dialog_Type:{ADD:0,EDIT:1},Edit_Dialog_Title:t,Default_Group_Value:100,columnName:this.$route.query.columnName,columnId:this.$route.query.columnId,searchConditionData:{anthologyNameLike:"",updateStartTime:"",updateEndTime:"",isValid:"",groupValue:""},groupValueList:[],searchConditionUpdateTime:"",sortType:2,paginationData:{currentPage:1,firstResult:0,maxResult:10,pageSize:10,total:0},tableData:[],editDialogData:{title:t.ADD,visible:!1,sortIdPlaceHolder:"",sortIdDisabled:"disabled",rowData:{anthologyName:"",sortId:0,imgUrl:"",activityMobileUrl:"",isValid:0,attList:[{attUrl:""}],groupData:{groupValue:100,groupName:"热门活动"},showType:0},attListTmp:null,canCancelShowType:!0},rules:{anthologyName:[{required:!0,message:"活动名称不能为空",trigger:"blur"},{min:2,max:30,message:"长度在 2 到 30 个字符",trigger:"blur"}],sortId:[{required:!0,message:"顺序号不能为空",trigger:"blur"},{validator:l.a.fullSpanceVaild,message:"顺序号不能为空",trigger:"blur"}],activityMobileUrl:[{required:!0,message:"链接不能为空",trigger:"blur"}],imgUrl:[{required:!0,message:"配图不能为空",trigger:"blur"}]}}},mounted:function(){var a=this;this.getGroupData(),this.getTableData(),document.onkeydown=function(t){13==t.keyCode&&(a.editDialogData.visible||a.getTableData())}},destroyed:function(){document.onkeydown=null,u.default.goBack()},methods:{getGroupData:function(){var a=this;Object(r.a)({url:s.a.getActivityGroupList.url,type:s.a.getActivityGroupList.type}).then(function(t){t&&t.data&&t.data.responseObject&&t.data.responseObject.responseData&&t.data.responseObject.responseData.dataList&&(a.groupValueList=t.data.responseObject.responseData.dataList)})},getTableData:function(){var a=this,t={firstResult:this.paginationData.firstResult,maxResult:this.paginationData.maxResult,sortType:this.sortType,columnName:this.columnName,columnId:this.columnId};for(var e in this.searchConditionData)this.searchConditionData[e]&&(t[e]=this.searchConditionData[e]);0===this.searchConditionData.groupValue&&(t.groupValue=0),u.default.openLoading("加载中..."),Object(r.a)({url:s.a.getActivityList.url,type:s.a.getActivityList.type,params:t}).then(function(t){u.default.closeLoading(),a.tableData=t.data.responseObject.items,a.paginationData.total=t.data.responseObject.total})},resetForm:function(){for(var t in this.searchConditionData)this.searchConditionData[t]="";this.searchConditionUpdateTime=""},tableRowClassName:function(t){var a=t.row,e=t.rowIndex;a.index=e+1},onSubmit:function(){Array.isArray(this.searchConditionUpdateTime)&&0<this.searchConditionUpdateTime.length?(this.searchConditionData.updateStartTime=this.searchConditionUpdateTime[0],this.searchConditionData.updateEndTime=this.searchConditionUpdateTime[1]):(this.searchConditionData.updateStartTime="",this.searchConditionData.updateEndTime=""),this.paginationData.currentPage=1,this.paginationData.firstResult=0,this.getTableData()},handleImgUploadSuccess:function(t){var a=void 0;a=this.editDialogData.action==this.Edit_Dialog_Type.EDIT&&0<this.editDialogData.rowData.attList.length?this.editDialogData.rowData.attList[0].id:"",this.editDialogData.rowData.attList=[],this.editDialogData.rowData.attList.push({id:a,columnType:4,attFormat:t.extName,navigationAttType:1,attSize:t.attSize,attHeight:t.attHeight,attWidth:t.attWidth,attUrl:t.attUrl}),this.editDialogData.action!=this.Edit_Dialog_Type.ADD&&""!=a||delete this.editDialogData.rowData.attList[0].id,this.editDialogData.rowData.imgUrl=s.a.imgServer_img05.url+t.attUrl,this.$refs.editDialogForm.validateField("imgUrl")},handleSizeChange:function(t){this.paginationData.maxResult=t,this.getTableData()},handleCurrentChange:function(t){this.paginationData.currentPage=t,this.paginationData.firstResult=(t-1)*this.paginationData.maxResult,this.getTableData()},tableChange:function(t){this.paginationData.currentPage=1,"updateTime"===t.prop?this.sortType="ascending"===t.order?3:4:"sortId"===t.prop?this.sortType="ascending"===t.order?1:2:this.sortType=2,this.getTableData()},sourceTypeFormatter:function(t,a,e){var i="";switch(parseInt(t.sourceType)){case 1:i="网页";break;case 2:i="活动搭建";break;default:i=""}return i},isValidFormatter:function(t,a,e){var i="";switch(parseInt(t.isValid)){case 0:i="已下架";break;case 1:i="已上架";break;default:i=""}return i},dateFormatter:function(){for(var t=arguments.length,a=Array(t),e=0;e<t;e++)a[e]=arguments[e];return a[2].substring(0,a[2].length-2)},groupValueFormatter:function(){for(var t=0;t<this.groupValueList.length;t++)if((arguments.length<=2?void 0:arguments[2])===this.groupValueList[t].groupValue)return this.groupValueList[t].groupName},showTypeFormatter:function(){var t="";switch(arguments.length<=2?void 0:arguments[2]){case 1:t="首位";break;case 2:t="第二位";break;case 3:t="第三位";break;default:t=""}return t},addActivity:function(){this.$refs.editDialogForm&&this.$refs.editDialogForm.resetFields(),this.$set(this.rules,"sortId",null),this.$set(this.rules,"anthologyName",[{required:!0,message:"活动名称不能为空",trigger:"blur"},{min:2,max:30,message:"长度在 2 到 30 个字符",trigger:"blur"}]),this.$set(this.rules,"activityMobileUrl",[{required:!0,message:"链接不能为空",trigger:"blur"}]),this.editDialogData.action=this.Edit_Dialog_Type.ADD,this.editDialogData.title=this.Edit_Dialog_Title.ADD,this.editDialogData.visible=!0,this.editDialogData.rowData.imgUrl="",this.editDialogData.sortIdDisabled=!0,this.editDialogData.rowData={activityMobileUrl:"",anthologyName:"",attList:[{}],isValid:0,imgUrl:"",groupData:{groupValue:this.Default_Group_Value,groupName:this.getGroupNameByGroupValue(this.Default_Group_Value)},showType:0,groupValue:this.Default_Group_Value,userName:localStorage.getItem("userLoginName")},this.editDialogData.canCancelShowType=!0},editActivity:function(e){var i=this;this.$set(this.rules,"sortId",[{required:!0,message:"顺序号不能为空",trigger:"blur"}]),e.groupValue==this.Default_Group_Value?(this.$set(this.rules,"anthologyName",[{required:!0,message:"活动名称不能为空",trigger:"blur"},{min:2,max:30,message:"长度在 2 到 30 个字符",trigger:"blur"}]),this.$set(this.rules,"activityMobileUrl",[{required:!0,message:"链接不能为空",trigger:"blur"}])):(this.$set(this.rules,"anthologyName",null),this.$set(this.rules,"activityMobileUrl",null)),this.$refs.editDialogForm&&this.$refs.editDialogForm.resetFields();var t={columnId:this.columnId,refId:e.refId,groupValue:e.groupValue};this.editDialogData.action=this.Edit_Dialog_Type.EDIT,this.editDialogData.title=this.Edit_Dialog_Title.EDIT,this.editDialogData.sortIdDisabled=!1,this.editDialogData.rowData.refId=e.refId,u.default.openLoading("加载中..."),Object(r.a)({method:s.a.getActivityDetail.type,url:s.a.getActivityDetail.url,params:t}).then(function(t){var a=t.data.responseObject.responseData;u.default.closeLoading(),i.editDialogData.visible=!0,i.editDialogData.rowData.anthologyName=a.anthologyName,i.editDialogData.rowData.activityMobileUrl=a.activityMobileUrl,i.$set(i.editDialogData.rowData,"userName",a.userName),i.editDialogData.rowData.id=a.id,i.$set(i.editDialogData.rowData,"sortId",a.sortId),a.attList?(i.editDialogData.rowData.attList=a.attList,i.editDialogData.rowData.imgUrl=i.editDialogData.rowData.attList[0].attUrl,i.attListTmp=a.attList):(i.editDialogData.rowData.attList=[],i.editDialogData.rowData.imgUrl=""),i.editDialogData.rowData.isValid=parseInt(e.isValid),i.editDialogData.rowData.showType=e.showType,1==e.showType||2==e.showType||3==e.showType?i.editDialogData.canCancelShowType=!1:i.editDialogData.canCancelShowType=!0,i.editDialogData.rowData.groupValue=e.groupValue,i.editDialogData.rowData.groupData={groupValue:e.groupValue,groupName:i.getGroupNameByGroupValue(e.groupValue)}})},saveActivity:function(){var a=this;this.editDialogData.rowData.columnId=this.columnId,this.editDialogData.rowData.columnType="4";var e=n()({},this.editDialogData.rowData);e.userName=localStorage.getItem("userLoginName"),delete e.groupData,delete e.imgUrl,0==e.isValid&&delete e.showType,this.attListTmp===e.attList&&delete e.attList,this.$refs.editDialogForm.validate(function(t){if(!t)return!1;u.default.openLoading("加载中..."),Object(r.a)({method:s.a.saveActivity.type,url:s.a.saveActivity.url,data:e}).then(function(t){u.default.closeLoading(),t&&t.data&&t.data.responseObject&&t.data.responseObject.responseStatus?(a.editDialogData.visible=!1,a.editDialogData.action==a.Edit_Dialog_Type.ADD?a.$allin_confirm({title:"提示",content:"新增成功",type:"notice"}):a.$allin_confirm({title:"提示",content:"更新成功",type:"notice"}),a.getTableData()):a.editDialogData.action==a.Edit_Dialog_Type.ADD?a.$allin_confirm({title:"提示",content:"新增失败",type:"notice"}):a.$allin_confirm({title:"提示",content:"更新失败",type:"notice"})})})},getGroupNameByGroupValue:function(t){for(var a="",e=this.groupValueList,i=0;i<e.length;i++)e[i].groupValue===t&&(a=e[i].groupName);return a},showTypeUnselectClickHandle:function(){this.editDialogData.rowData.showType=0}}},c=(e(913),e(58)),g=Object(c.a)(d,i,[],!1,null,null,null);g.options.__file="src/views/columnManager/activityColumn.vue";a.default=g.exports},523:function(t,a,e){var i=e(534);"string"==typeof i&&(i=[[t.i,i,""]]);var o={hmr:!0,transform:void 0,insertInto:void 0};e(156)(i,o);i.locals&&(t.exports=i.locals)},525:function(t,a,e){"use strict";a.a={fullSpanceVaild:function(t,a,e){""===a.trim()?e(new Error("值不能全为空")):e()},isPositiveInteger:function(t,a,e){/^[0-9]*[1-9][0-9]*$/.test(a)&&"0"!=a?e():e(new Error("必须为正整数"))},liveCustomerIdList:function(t,a,e){if(-1<a.indexOf("，"))return e(new Error("请使用半角逗号分隔")),!1;if(-1<a.indexOf(",")){for(var i=a.split(","),o=0;o<i.length;o++){var n=i[o];if(!/\d{13}/.test(n))return e(new Error("请输入正确的直播用户Id，多个用户Id之间使用逗号分隔")),!1}e()}else{if(!/\d{13}/.test(a))return e(new Error("请输入正确的直播用户Id，多个用户Id之间使用逗号分隔")),!1;e()}}}},527:function(t,a,e){"use strict";var i=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("section",{staticClass:"column-img-upload"},[e("div",{staticClass:"column-img-upload-container",on:{click:t.uploadImgOnClick}},[t.prevImgUrl?t._e():e("span",{staticClass:"column-img-upload-icon"}),t._v(" "),t.prevImgUrl?e("img",{attrs:{src:t.prevImgUrl}}):t._e(),t._v(" "),e("input",{ref:"column_img_upload_upload",attrs:{type:"file"},on:{change:t.fileChangeHandle}}),t._v(" "),t.uneditable?e("div",{staticClass:"uneditable"}):t._e()]),t._v(" "),t._t("default")],2)};i._withStripped=!0;var o=e(69),n=e(59),l=e(68),r={name:"columnImgUpload",props:{imgUrl:{type:String,require:!0},needClear:{type:Boolean,default:!1},imgFileSizeMaxLimit:{type:Number,require:!1},widthHeightMaxLimit:{type:Array,require:!1},widthHeightMinLimit:{type:Array,require:!1},uneditable:{type:Boolean,default:!1}},data:function(){return{fileData:{},widthHeightCheck:!0,prevImgUrl:this.imgUrl?this.imgUrl:""}},watch:{imgUrl:function(){this.prevImgUrl=this.imgUrl},needClear:function(t){t&&this.clearInput()}},methods:{uploadImgOnClick:function(){return!this.uneditable&&(!this.isLoading&&void this.$refs.column_img_upload_upload.click())},clearInput:function(){this.$refs.column_img_upload_upload.value=null,this.prevImgUrl=""},fileChangeHandle:function(t){var a=this,i=this,o=t.target.files[0];if(!o)return!1;if(!this.formatCheck(o))return this.$refs.column_img_upload_upload.value=null,!1;this.fileData.extName=o.type,this.fileData.file=o;var n=new FileReader;n.onload=function(t){if(a.fileData.fileContent=n.result,a.widthHeightMaxLimit||a.widthHeightMinLimit){var e=new Image;e.src=URL.createObjectURL(o),e.onload=function(){var t=e.width,a=e.height;i.widthHeightCheck=!0,i.widthHeightMaxLimit?t>i.widthHeightMaxLimit[0]?(i.$message.error("上传图片宽度不能超过"+i.widthHeightMaxLimit[0]+"px"),i.widthHeightCheck=!1):a>i.widthHeightMaxLimit[1]&&(i.$message.error("上传图片高度不能超过"+i.widthHeightMaxLimit[1]+"px"),i.widthHeightCheck=!1):i.widthHeightMinLimit&&(t<i.widthHeightMinLimit[0]?(i.$message.error("上传图片宽度不能小于"+i.widthHeightMinLimit[0]+"px"),i.widthHeightCheck=!1):a<i.widthHeightMinLimit[1]&&(i.$message.error("上传图片高度不能小于"+i.widthHeightMinLimit[1]+"px"),i.widthHeightCheck=!1)),i.widthHeightCheck?i.uploadImg():i.$refs.column_img_upload_upload.value=null}}else i.uploadImg()},n.readAsDataURL(o)},formatCheck:function(t){var a=5,e="image/jpeg"===t.type||"image/jpg"===t.type||"image/png"===t.type;this.imgFileSizeMaxLimit&&(a=this.imgFileSizeMaxLimit);var i=t.size/1024/1024<a;return e?!!i||(this.$message.error("上传图片大小不超过"+a+"M"),!1):(this.$message.error("上传图片仅支持JPG/JPEG/PNG格式"),!1)},uploadImg:function(){var i=this,t={fileContent:this.fileData.fileContent.split(",")[1],watermark:1,extName:this.fileData.extName.split("/")[1]};l.default.openLoading("图片上传中..."),Object(n.a)({method:o.a.uploadImg.type,url:o.a.uploadImg.url,data:t}).then(function(t){if(t&&t.data.responseObject&&!0===t.data.responseObject.responseStatus){l.default.closeLoading();var a=t.data.responseObject.responseData.data_list,e={};e.attUrl=a.attUrl,e.attFormat=a.extName,e.navigationAttType=1,e.attSize=a.attSize,e.attHeight=a.attHeight,e.attWidth=a.attWidth,e.attType=a.attType,i.prevImgUrl=URL.createObjectURL(i.fileData.file),i.$emit("uploadSuccess",e)}else l.default.closeLoading(),i.$message.error("图片上传失败！"),i.clearInput()}).catch(function(){l.default.closeLoading(),i.$message.error("图片上传失败！"),i.clearInput()})}},destroyed:function(){l.default.goBack()}},s=(e(533),e(58)),u=Object(s.a)(r,i,[],!1,null,"428cfd07",null);u.options.__file="src/views/columnManager/components/ColumnImgUpload.vue";a.a=u.exports},533:function(t,a,e){"use strict";var i=e(523);e.n(i).a},534:function(t,a,e){(t.exports=e(155)(!1)).push([t.i,'\n.column-img-upload-container[data-v-428cfd07] {\n  width: 150px;\n  height: 100px;\n  background: #EDF1FF;\n  position: relative;\n}\n.column-img-upload-container .uneditable[data-v-428cfd07] {\n    position: absolute;\n    top: 0;\n    left: 0;\n    width: 150px;\n    height: 100px;\n    background: rgba(0, 0, 0, 0.2);\n    z-index: 5;\n}\n.column-img-upload-container .column-img-upload-icon[data-v-428cfd07] {\n    width: 38px;\n    height: 31px;\n    background: url("/static/images/upload/addImg.png") no-repeat;\n    position: absolute;\n    left: 50%;\n    top: 50%;\n    transform: translateX(-50%) translateY(-50%);\n}\n.column-img-upload-container img[data-v-428cfd07] {\n    width: 100%;\n    height: 100%;\n}\n.column-img-upload-container input[data-v-428cfd07] {\n    display: none;\n}\n',""])},681:function(t,a,e){var i=e(914);"string"==typeof i&&(i=[[t.i,i,""]]);var o={hmr:!0,transform:void 0,insertInto:void 0};e(156)(i,o);i.locals&&(t.exports=i.locals)},913:function(t,a,e){"use strict";var i=e(681);e.n(i).a},914:function(t,a,e){(t.exports=e(155)(!1)).push([t.i,'\n@charset "UTF-8";\n/* 栏目后台页通用列表样式*/\n.column-manager-main-container {\n  width: 1200px;\n  margin: 0 auto;\n  background: #F6F7FA;\n  margin-top: 32px;\n}\n.column-manager-main-container h3 {\n    ont-family: PingFangSC-Semibold;\n    font-size: 20px;\n    color: #2C343A;\n    letter-spacing: 0;\n    line-height: 20px;\n    margin-bottom: 25px;\n}\n.column-manager-main-container .column-manager-search-area {\n    padding: 25px 0 0;\n    background: #ffffff;\n    box-shadow: 0 4px 10px 0 rgba(42, 53, 102, 0.04);\n    border-radius: 4px;\n    margin-bottom: 30px;\n}\n.column-manager-main-container .column-manager-search-area .el-input .el-input__inner {\n      background: #F7F9FC;\n      border: 1px solid #E6E6E8;\n      border-radius: 4px;\n}\n.column-manager-main-container .column-manager-search-area .column-search-submit button:nth-of-type(1) {\n      border: none;\n}\n.column-manager-main-container .column-manager-search-area .column-search-submit button:nth-of-type(2) {\n      color: #4B67D6;\n      border: 1px solid #4B67D6;\n      border-radius: 4px;\n}\n.column-manager-main-container .column-manager-button {\n    margin-bottom: 30px;\n}\n.column-manager-main-container .column-manager-button button {\n      color: #4B67D6;\n      border: 1px solid #4B67D6;\n      border-radius: 3px;\n}\n.column-manager-main-container .column-manager-button button span {\n        padding-right: 2px;\n}\n.column-manager-main-container .column-manager-table {\n    margin-bottom: 30px;\n}\n.column-manager-main-container .column-manager-table .el-table .cell {\n      font-family: PingFangSC-Regular;\n      font-size: 14px;\n      color: #333333;\n      letter-spacing: 0;\n      line-height: 1.5;\n}\n.column-manager-main-container .column-manager-table th.is-leaf {\n      font-weight: bold;\n}\n.column-manager-main-container .column-manager-table button {\n      width: 74px;\n      height: 28px;\n      padding: 0;\n      border: 1px solid #4B67D6;\n      border-radius: 3px;\n      font-family: PingFangSC-Regular;\n      font-size: 13px;\n      color: #4B67D6;\n      letter-spacing: 0;\n}\n.column-manager-main-container .column-manager-table button.changeState {\n        background: #EDF1FF;\n        border: 1px solid #4B67D6;\n        border-radius: 3px;\n        font-family: PingFangSC-Regular;\n        color: #4B67D6;\n        font-size: 13px;\n        letter-spacing: 0;\n        line-height: 1.2;\n}\n.column-manager-main-container .column-manager-table button.changeState.remove {\n          background: #FFEBE3;\n          border: 1px solid #FF7E4D;\n          color: #FF7E4D;\n}\n.column-manager-main-container .column-manager-table .column-table-index-btn {\n      background: #4B67D6;\n      border-radius: 3px;\n      font-family: PingFangSC-Regular;\n      font-size: 13px;\n      color: #FFFFFF;\n      letter-spacing: 0;\n      line-height: 13px;\n}\n.column-manager-main-container .column-manager-pagination {\n    float: right;\n}\n.column-manager-main-container .search-area-anthology-name {\n  margin-left: 22px;\n}\n.source-list .cell {\n  font-family: PingFangSC-Regular;\n  font-size: 14px;\n  color: #333333;\n  letter-spacing: 0;\n  line-height: 1.2;\n}\n.source-list .headerClass {\n  text-align: center;\n}\n.source-list .source-list-btn {\n  width: 74px;\n  height: 28px;\n  padding: 0;\n  border: 1px solid #4B67D6;\n  border-radius: 3px;\n  font-family: PingFangSC-Regular;\n  font-size: 13px;\n  color: #4B67D6;\n  letter-spacing: 0;\n}\n.source-list .source-list-show-type div {\n  color: #4B67D6;\n}\n.source-list .source-list-show-type-title div {\n  color: #333333;\n}\n.edit-dialog .el-dialog__header .el-dialog__title {\n  font-family: PingFangSC-Medium;\n  font-size: 20px;\n  color: #222222;\n  letter-spacing: 0;\n  line-height: 24px;\n  font-weight: bolder;\n}\n.edit-dialog .show-type-unselect {\n  margin-left: 20px;\n  color: #c0c4cc;\n  cursor: pointer;\n}\n.edit-dialog .column-course-img-tips {\n  color: #999999;\n}\n.submitBtn button:nth-of-type(1) {\n  border: none;\n}\n.submitBtn button:nth-of-type(2) {\n  color: #4B67D6;\n  border: 1px solid #4B67D6;\n  border-radius: 4px;\n}\n',""])}}]);