(window.webpackJsonp=window.webpackJsonp||[]).push([[47],{626:function(t,a,n){var e=n(846);"string"==typeof e&&(e=[[t.i,e,""]]);var o={hmr:!0,transform:void 0,insertInto:void 0};n(156)(e,o);e.locals&&(t.exports=e.locals)},845:function(t,a,n){"use strict";var e=n(626);n.n(e).a},846:function(t,a,n){(t.exports=n(155)(!1)).push([t.i,'\n@charset "UTF-8";\n/* 优惠券通用列表样式*/\n.coupon-manager-main-container {\n  width: 1200px;\n  margin: 0 auto;\n  background: #F6F7FA;\n  margin-top: 32px;\n}\n.coupon-manager-main-container h3 {\n    ont-family: PingFangSC-Semibold;\n    font-size: 20px;\n    color: #2C343A;\n    letter-spacing: 0;\n    line-height: 20px;\n    margin-bottom: 25px;\n}\n.coupon-manager-main-container .coupon-manager-search-area {\n    padding: 25px 0 0;\n    background: #ffffff;\n    box-shadow: 0 4px 10px 0 rgba(42, 53, 102, 0.04);\n    border-radius: 4px;\n    margin-bottom: 30px;\n}\n.coupon-manager-main-container .coupon-manager-search-area .el-input .el-input__inner {\n      background: #F7F9FC;\n      border: 1px solid #E6E6E8;\n      border-radius: 4px;\n}\n.coupon-manager-main-container .coupon-manager-search-area .coupon-search-submit button:nth-of-type(1) {\n      border: none;\n}\n.coupon-manager-main-container .coupon-manager-search-area .coupon-search-submit button:nth-of-type(2) {\n      color: #4B67D6;\n      border: 1px solid #4B67D6;\n      border-radius: 4px;\n}\n.coupon-manager-main-container .coupon-manager-button {\n    margin-bottom: 30px;\n}\n.coupon-manager-main-container .coupon-manager-button button {\n      color: #4B67D6;\n      border: 1px solid #4B67D6;\n      border-radius: 3px;\n}\n.coupon-manager-main-container .coupon-manager-button button span {\n        padding-right: 2px;\n}\n.coupon-manager-main-container .coupon-manager-table {\n    margin-bottom: 30px;\n}\n.coupon-manager-main-container .coupon-manager-table .el-table .cell {\n      font-family: PingFangSC-Regular;\n      font-size: 14px;\n      color: #333333;\n      letter-spacing: 0;\n      line-height: 1.5;\n}\n.coupon-manager-main-container .coupon-manager-table th.is-leaf {\n      font-weight: bold;\n}\n.coupon-manager-main-container .coupon-manager-table button {\n      width: 74px;\n      height: 28px;\n      padding: 0;\n      border: 1px solid #4B67D6;\n      border-radius: 3px;\n      font-family: PingFangSC-Regular;\n      font-size: 13px;\n      color: #4B67D6;\n      letter-spacing: 0;\n}\n.coupon-manager-main-container .coupon-manager-table button.changeState {\n        background: #EDF1FF;\n        border: 1px solid #4B67D6;\n        border-radius: 3px;\n        font-family: PingFangSC-Regular;\n        color: #4B67D6;\n        font-size: 13px;\n        letter-spacing: 0;\n        line-height: 1.2;\n}\n.coupon-manager-main-container .coupon-manager-table button.changeState.remove {\n          background: #FFEBE3;\n          border: 1px solid #FF7E4D;\n          color: #FF7E4D;\n}\n.coupon-manager-main-container .coupon-manager-table .coupon-table-index-btn {\n      background: #4B67D6;\n      border-radius: 3px;\n      font-family: PingFangSC-Regular;\n      font-size: 13px;\n      color: #FFFFFF;\n      letter-spacing: 0;\n      line-height: 13px;\n}\n.coupon-manager-main-container .coupon-manager-pagination {\n    float: right;\n}\n.coupon-batch-code-cell {\n  cursor: pointer;\n  text-decoration: underline;\n  color: #4B67D6;\n}\n.coupon-batch-code-cell .cell {\n    color: #4B67D6 !important;\n}\n',""])},985:function(t,a,n){"use strict";n.r(a);var e=function(){var n=this,t=n.$createElement,e=n._self._c||t;return e("section",{staticClass:"coupon-manager-main-container"},[e("h3",[n._v("优惠券批次列表")]),n._v(" "),e("section",{staticClass:"coupon-manager-search-area"},[e("el-form",{attrs:{"label-width":"120px"}},[e("el-row",[e("el-col",{attrs:{span:10}},[e("el-form-item",{attrs:{label:"创建时间"}},[e("el-date-picker",{attrs:{type:"daterange","range-separator":"-","start-placeholder":"不限","end-placeholder":"不限","value-format":"yyyy-MM-dd HH:mm:ss","default-time":["00:00:00","23:59:59"]},model:{value:n.searchConditionCreateTime,callback:function(t){n.searchConditionCreateTime=t},expression:"searchConditionCreateTime"}})],1)],1),n._v(" "),e("el-col",{attrs:{span:6}},[e("el-form-item",{attrs:{label:"优惠券批次信息"}},[e("el-input",{attrs:{placeholder:"优惠券名称/批次号"},model:{value:n.searchConditionData.batchInfo,callback:function(t){n.$set(n.searchConditionData,"batchInfo",t)},expression:"searchConditionData.batchInfo"}})],1)],1),n._v(" "),e("el-col",{attrs:{span:8}},[e("el-form-item",{attrs:{label:"批次状态"}},[e("el-select",{attrs:{placeholder:"全部"},model:{value:n.searchConditionData.batchState,callback:function(t){n.$set(n.searchConditionData,"batchState",t)},expression:"searchConditionData.batchState"}},[e("el-option",{attrs:{label:"全部",value:""}}),n._v(" "),e("el-option",{attrs:{label:"正常",value:"0"}}),n._v(" "),e("el-option",{attrs:{label:"已废弃",value:"1"}}),n._v(" "),e("el-option",{attrs:{label:"已过期",value:"2"}})],1)],1)],1)],1),n._v(" "),e("el-row",[e("el-col",{attrs:{span:10}},[e("el-form-item",{attrs:{label:"优惠券类型"}},[e("el-select",{attrs:{placeholder:"全部"},model:{value:n.searchConditionData.couponType,callback:function(t){n.$set(n.searchConditionData,"couponType",t)},expression:"searchConditionData.couponType"}},[e("el-option",{attrs:{label:"全部",value:""}}),n._v(" "),e("el-option",{attrs:{label:"通用优惠券",value:"0"}}),n._v(" "),e("el-option",{attrs:{label:"商品优惠券",value:"1"}})],1)],1)],1),n._v(" "),e("el-col",{attrs:{span:6}},[e("el-form-item",{attrs:{label:"申请部门"}},[e("el-select",{attrs:{placeholder:"全部"},model:{value:n.searchConditionData.applyDepartment,callback:function(t){n.$set(n.searchConditionData,"applyDepartment",t)},expression:"searchConditionData.applyDepartment"}},[e("el-option",{attrs:{label:"全部",value:""}}),n._v(" "),e("el-option",{attrs:{label:"市场运营部",value:"0"}}),n._v(" "),e("el-option",{attrs:{label:"商务部",value:"1"}}),n._v(" "),e("el-option",{attrs:{label:"协会事业部",value:"2"}}),n._v(" "),e("el-option",{attrs:{label:"测试部",value:"3"}}),n._v(" "),e("el-option",{attrs:{label:"产品部",value:"4"}})],1)],1)],1),n._v(" "),e("el-col",{attrs:{span:8}},[e("el-form-item",{attrs:{label:"申请用途"}},[e("el-select",{attrs:{placeholder:"全部"},model:{value:n.searchConditionData.applyPurpose,callback:function(t){n.$set(n.searchConditionData,"applyPurpose",t)},expression:"searchConditionData.applyPurpose"}},[e("el-option",{attrs:{label:"全部",value:""}}),n._v(" "),e("el-option",{attrs:{label:"渠道合作",value:"0"}}),n._v(" "),e("el-option",{attrs:{label:"营销推广",value:"1"}}),n._v(" "),e("el-option",{attrs:{label:"内部测试",value:"3"}})],1)],1)],1)],1),n._v(" "),e("el-row",[e("el-col",{attrs:{span:6}},[e("el-form-item",{attrs:{label:"发放状态"}},[e("el-select",{attrs:{placeholder:"全部"},model:{value:n.searchConditionData.publishState,callback:function(t){n.$set(n.searchConditionData,"publishState",t)},expression:"searchConditionData.publishState"}},[e("el-option",{attrs:{label:"全部",value:""}}),n._v(" "),e("el-option",{attrs:{label:"已发放",value:"1"}}),n._v(" "),e("el-option",{attrs:{label:"未发放",value:"0"}})],1)],1)],1)],1),n._v(" "),e("el-row",[e("el-col",[e("el-form-item",{staticClass:"coupon-search-submit",staticStyle:{float:"right","margin-right":"50px"}},[e("el-button",{on:{click:n.clearBtnOnClick}},[n._v("清空条件")]),n._v(" "),e("el-button",{on:{click:n.filterBtnOnClick}},[n._v("筛选")])],1)],1)],1)],1)],1),n._v(" "),e("section",{staticClass:"coupon-manager-button"},[e("el-row",[e("el-col",[e("el-button",{on:{click:n.createCouponBtnOnClick}},[e("span",{staticClass:"el-icon-circle-plus"}),n._v("创建优惠券")])],1)],1)],1),n._v(" "),e("section",{staticClass:"coupon-manager-table"},[e("el-table",{staticStyle:{width:"100%"},attrs:{data:n.tableData,fit:!0,"cell-class-name":n.cellClassName},on:{"cell-click":n.cellOnClick}},[e("el-table-column",{attrs:{prop:"id",width:"80",label:"序号"}}),n._v(" "),e("el-table-column",{attrs:{prop:"couponName",width:"180",label:"优惠券名称"}}),n._v(" "),e("el-table-column",{attrs:{width:"200",prop:"couponBatchCode",label:"批次号"}}),n._v(" "),e("el-table-column",{attrs:{formatter:n.foramtterCouponDenomination,prop:"couponDenomination",label:"面额"}}),n._v(" "),e("el-table-column",{attrs:{prop:"publishCount",width:"100",label:"发行量"}}),n._v(" "),e("el-table-column",{attrs:{formatter:n.formatterCouponTotal,prop:"couponTotal",width:"100",label:"总额"}}),n._v(" "),e("el-table-column",{attrs:{formatter:n.formatterValidDate,prop:"startTime",width:"200",label:"有效期"}}),n._v(" "),e("el-table-column",{attrs:{formatter:n.formatterBatchState,prop:"batchState",width:"100",label:"批次状态"}}),n._v(" "),e("el-table-column",{attrs:{formatter:n.formatterPublishState,prop:"publishState",width:"100",label:"发放状态"}}),n._v(" "),e("el-table-column",{attrs:{prop:"applyDepartmentName",width:"100",label:"申请部门"}}),n._v(" "),e("el-table-column",{attrs:{prop:"applyPurposeName",width:"100",label:"申请用途"}}),n._v(" "),e("el-table-column",{attrs:{prop:"opUser",width:"100",label:"创建人"}}),n._v(" "),e("el-table-column",{attrs:{prop:"createTime",width:"180",label:"创建时间"}}),n._v(" "),e("el-table-column",{attrs:{label:"操作",width:"300",fixed:"right"},scopedSlots:n._u([{key:"default",fn:function(a){return[e("el-button",{on:{click:function(t){n.tableEditBtnOnClick(a.row)}},nativeOn:{keydown:function(t){t.preventDefault()}}},[n._v("\n            编辑\n          ")]),n._v(" "),n.checkBatchState(a.row)?e("el-button",{on:{click:function(t){n.tableDiscardBtnOnClick(a.row)}}},[n._v("废弃\n          ")]):n._e(),n._v(" "),n.checkBatchState(a.row)&&n.checkCanAssign(a.row)?e("el-button",{staticClass:"changeState",on:{click:function(t){n.tableAssignBtnOnClick(a.row)}},nativeOn:{keydown:function(t){t.preventDefault()}}},[n._v("\n            发放\n          ")]):n._e(),n._v(" "),n.checkBatchState(a.row)&&!n.checkCanAssign(a.row)?e("el-button",{staticClass:"changeState remove",on:{click:function(t){n.tableAssignBtnOnClick(a.row)}},nativeOn:{keydown:function(t){t.preventDefault()}}},[n._v("\n            取消发放\n          ")]):n._e()]}}])})],1)],1),n._v(" "),e("el-row",[e("el-col",[e("section",{staticClass:"coupon-manager-pagination"},[e("el-pagination",{attrs:{"current-page":n.paginationData.currentPage,total:n.paginationData.total,"page-sizes":[10,20,30,40],"page-size":n.paginationData.pageSize,layout:"total, prev, pager, next, jumper ,sizes"},on:{"size-change":n.handleSizeChange,"current-change":n.handleCurrentChange}})],1)])],1)],1)};e._withStripped=!0;var o=n(68),i=n(69),l=n(59),r={name:"couponBatchList",data:function(){return{tableData:[],searchConditionData:{startTime:"",endTime:"",batchInfo:"",batchState:"0",couponType:"",applyDepartment:"",applyPurpose:"",publishState:"1"},searchConditionCreateTime:"",paginationData:{currentPage:1,firstResult:0,maxResult:0,pageSize:20,total:0}}},methods:{getDataList:function(){var n=this;this.paginationData.maxResult=this.paginationData.pageSize,this.paginationData.firstResult=(this.paginationData.currentPage-1)*this.paginationData.pageSize;var t={firstResult:this.paginationData.firstResult,maxResult:this.paginationData.maxResult};for(var a in this.searchConditionData)this.searchConditionData[a]&&(t[a]=this.searchConditionData[a]);o.default.openLoading("加载中..."),Object(l.a)({method:i.a.getCouponBatchList.type,url:i.a.getCouponBatchList.url,params:t}).then(function(t){if(o.default.closeLoading(),t&&t.data&&t.data.responseObject&&t.data.responseObject.responseData){var a=t.data.responseObject.responseData;n.tableData=a.items,n.paginationData.total=a.total}else n.tableData=[],n.paginationData.total=0}).catch(function(t){o.default.closeLoading(),n.$allin_confirm({title:"提示",content:"查询失败",type:"notice"})})},cellOnClick:function(t,a){if("couponBatchCode"===a.property){var n=this.$router.resolve({path:"/couponVoucherList",query:{couponBatchCode:t.couponBatchCode}});window.open(n.href,"_blank")}},cellClassName:function(t){if("couponBatchCode"===t.column.property)return"coupon-batch-code-cell"},clearBtnOnClick:function(){for(var t in this.searchConditionData)this.searchConditionData[t]="";this.searchConditionData.applyPurpose="0",this.searchConditionData.batchState="1",this.searchConditionData.publishState="1",this.searchConditionCreateTime=""},filterBtnOnClick:function(){Array.isArray(this.searchConditionCreateTime)&&0<this.searchConditionCreateTime.length&&(this.searchConditionData.startTime=this.searchConditionCreateTime[0],this.searchConditionData.endTime=this.searchConditionCreateTime[1]),this.paginationData.currentPage=1,this.paginationData.firstResult=0,this.getDataList()},tableEditBtnOnClick:function(t){var a=t.id;if(0===t.couponType){var n=this.$router.resolve({path:"/generalCouponDetail",query:{id:a}});window.open(n.href,"_blank")}else if(1===t.couponType){var e=this.$router.resolve({path:"/commodityCouponDetail",query:{id:a}});window.open(e.href,"_blank")}},tableDiscardBtnOnClick:function(a){var n=this;this.$allin_confirm({title:"提示",content:"废弃后该批次下未被领取优惠券将失效，且不可恢复，是否确认？",done:function(){o.default.openLoading("加载中...");var t={id:a.id,opStatus:0};Object(l.a)({method:i.a.updateBatchState.type,url:i.a.updateBatchState.url,data:t}).then(function(t){o.default.closeLoading(),t&&t.data&&t.data.responseObject&&t.data.responseObject.responseStatus?n.$message("生成优惠券成功",{duration:2e3}):n.$allin_confirm({title:"提示",content:"生成优惠券失败",type:"notice"})}).catch(function(t){o.default.closeLoading(),n.$allin_confirm({title:"提示",content:"生成优惠券失败",type:"notice"})})}})},tableAssignBtnOnClick:function(t){},createCouponBtnOnClick:function(){var t=this.$router.resolve({path:"/createCouponSelectList"});window.open(t.href,"_blank")},checkCanAssign:function(t){return 1!==t.publishState},checkBatchState:function(t){return 0===t.batchState},handleSizeChange:function(t){this.paginationData.pageSize=t,this.getDataList()},handleCurrentChange:function(t){this.paginationData.currentPage=t,this.getDataList()},foramtterCouponDenomination:function(t){return"￥"+t.couponDenomination},formatterCouponTotal:function(t){return"￥"+t.couponDenomination*t.publishCount},formatterValidDate:function(t){return t.startTime+"至"+t.endTime},formatterBatchState:function(t){var a="";switch(t.batchState){case 0:a="正常";break;case 1:a="已废弃";break;case 2:a="已过期"}return a},formatterPublishState:function(t){var a="";switch(t.publishState){case 0:a="未发放";break;case 1:a="已发放"}return a}},mounted:function(){var a=this;this.getDataList(),document.onkeydown=function(t){13===t.keyCode&&a.getDataList()}},destroyed:function(){document.onkeydown=null,o.default.goBack()}},c=(n(845),n(58)),s=Object(c.a)(r,e,[],!1,null,null,null);s.options.__file="src/views/couponManager/couponBatchList.vue";a.default=s.exports}}]);