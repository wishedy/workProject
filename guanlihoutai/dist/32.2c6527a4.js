(window.webpackJsonp=window.webpackJsonp||[]).push([[32],{695:function(e,i,t){var a=t(946);"string"==typeof a&&(a=[[e.i,a,""]]);var n={hmr:!0,transform:void 0,insertInto:void 0};t(156)(a,n);a.locals&&(e.exports=a.locals)},696:function(e,i,t){var a=t(948);"string"==typeof a&&(a=[[e.i,a,""]]);var n={hmr:!0,transform:void 0,insertInto:void 0};t(156)(a,n);a.locals&&(e.exports=a.locals)},945:function(e,i,t){"use strict";var a=t(695);t.n(a).a},946:function(e,i,t){(e.exports=t(155)(!1)).push([e.i,'\n@charset "UTF-8";\n.advertisingMaterialsImgUploadBox[data-v-56978a00] {\n  /*图片展示的尺寸比例*/\n  /*上传按钮的加号*/\n}\n.advertisingMaterialsImgUploadBox .uploadInputBox[data-v-56978a00] {\n    /*手术精讲、直播、个人主页、视频栏目、课程栏目*/\n    width: 150px;\n    height: 150px;\n    background: #EDF1FF;\n    position: relative;\n    /*精英会bannner配图*/\n    /*关闭按钮*/\n}\n.advertisingMaterialsImgUploadBox .uploadInputBox.uploadInputBox01[data-v-56978a00] {\n      /*视频、病例、文库、锦囊、专题、活动、会议*/\n      width: 168px;\n      height: 106px;\n}\n.advertisingMaterialsImgUploadBox .uploadInputBox.uploadInputBox02[data-v-56978a00] {\n      /*精英会banner*/\n      width: 335px;\n      height: 100px;\n}\n.advertisingMaterialsImgUploadBox .uploadInputBox.uploadInputBox03[data-v-56978a00] {\n      /*唯医学院banner*/\n      width: 345px;\n      height: 300px;\n}\n.advertisingMaterialsImgUploadBox .uploadInputBox.uploadInputBox04[data-v-56978a00] {\n      /*病例、文库、视频banner*/\n      width: 345px;\n      height: 72px;\n}\n.advertisingMaterialsImgUploadBox .uploadInputBox img[data-v-56978a00] {\n      width: 100%;\n      height: 100%;\n}\n.advertisingMaterialsImgUploadBox .uploadInputBox input[data-v-56978a00] {\n      position: absolute;\n      width: 100%;\n      height: 100%;\n      z-index: 1;\n      top: 0;\n      left: 0;\n      opacity: 0;\n}\n.advertisingMaterialsImgUploadBox .uploadInputBox .eliteBannerImg[data-v-56978a00] {\n      position: absolute;\n      right: -210px;\n      top: 30px;\n      /*position: relative;*/\n      /*left: 360px;*/\n      /*top: 28%;*/\n}\n.advertisingMaterialsImgUploadBox .uploadInputBox .deleteImg[data-v-56978a00] {\n      position: absolute;\n      top: -13px;\n      right: -11px;\n      display: inline-block;\n      cursor: pointer;\n}\n.advertisingMaterialsImgUploadBox .uploadInputBox .deleteImg i[data-v-56978a00] {\n        color: red;\n        font-size: 23px;\n        width: 23px;\n        height: 23px;\n}\n.advertisingMaterialsImgUploadBox .uploadInputButton[data-v-56978a00] {\n    width: 38px;\n    height: 31px;\n    background: url("/static/images/upload/addImg.png") no-repeat;\n    position: absolute;\n    left: 50%;\n    top: 50%;\n    transform: translateX(-50%) translateY(-50%);\n}\n',""])},947:function(e,i,t){"use strict";var a=t(696);t.n(a).a},948:function(e,i,t){(e.exports=t(155)(!1)).push([e.i,'\n@charset "UTF-8";\n/*父层*/\n.advertisingMaterialsBox {\n  width: 1200px;\n  margin: 0 auto;\n  /*广告物料标题*/\n  /*筛选条件部分*/\n  /*新增按钮样式*/\n  /*控制广告名称超级长的显示样式*/\n  /*input框自定义高度  elementUi组件样式覆盖区域*/\n  /*防止影响*/\n  /*第一列距离左侧的间距更改*/\n  /*表头的样式修改覆盖*/\n  /*编辑按钮样式修改*/\n}\n.advertisingMaterialsBox .advertisingTitleName {\n    font-size: 20px;\n    color: #222222;\n    font-weight: bold;\n    display: inline-block;\n    margin: 32px 0 20px 0;\n}\n.advertisingMaterialsBox .advertisingMaterialsScreening {\n    position: relative;\n    width: 1200px;\n    height: 190px;\n    background: white;\n    box-shadow: 0 4px 10px 0 rgba(42, 53, 102, 0.04);\n    border-radius: 3px;\n    margin-bottom: 25px;\n    padding: 25px 15px;\n    box-sizing: border-box;\n}\n.advertisingMaterialsBox .advertisingMaterialsScreening .centerItem {\n      display: inline-block;\n      margin-bottom: 20px;\n}\n.advertisingMaterialsBox .advertisingMaterialsScreening .centerItem .titleName {\n        font-size: 14px;\n        font-weight: 400;\n        color: #555555;\n        line-height: 14px;\n        margin-right: 10px;\n}\n.advertisingMaterialsBox .advertisingMaterialsScreening .centerItem .el-input, .advertisingMaterialsBox .advertisingMaterialsScreening .centerItem .el-select {\n        width: 220px;\n}\n.advertisingMaterialsBox .advertisingMaterialsScreening .centerItem .el-date-editor--daterange, .advertisingMaterialsBox .advertisingMaterialsScreening .centerItem .el-select {\n        margin-right: 44px;\n}\n.advertisingMaterialsBox .advertisingMaterialsScreening .centerItem .nameInput {\n        margin-right: 44px;\n}\n.advertisingMaterialsBox .advertisingMaterialsScreening .advertisingButtonBox {\n      height: 32px;\n      margin-top: 24px;\n}\n.advertisingMaterialsBox .advertisingMaterialsScreening .advertisingButtonBox p {\n        display: inline-block;\n        position: absolute;\n        vertical-align: middle;\n        cursor: pointer;\n}\n.advertisingMaterialsBox .advertisingMaterialsScreening .advertisingButtonBox .resetBtn {\n        font-size: 14px;\n        font-weight: 400;\n        color: #2c343a;\n        line-height: 14px;\n        margin-right: 20px;\n        right: 124px;\n        bottom: 32px;\n}\n.advertisingMaterialsBox .advertisingMaterialsScreening .advertisingButtonBox .screeningBtn {\n        right: 34px;\n        bottom: 25px;\n        width: 90px;\n        height: 32px;\n        border-radius: 3px;\n        border: 1px solid #4b67d6;\n        box-sizing: border-box;\n        line-height: 32px;\n        font-size: 14px;\n        font-weight: 400;\n        color: #4b67d6;\n        text-align: center;\n}\n.advertisingMaterialsBox .advertisingAddButton {\n    background: none;\n    width: 98px;\n    height: 32px;\n    border: 1px solid #4B67D6;\n    border-radius: 3px;\n    font-size: 14px;\n    color: #4B67D6;\n    margin-bottom: 12px;\n    cursor: pointer;\n}\n.advertisingMaterialsBox .el-table td:nth-child(2) .cell {\n    width: 282px;\n    overflow: hidden;\n    text-overflow: ellipsis;\n    -webkit-line-clamp: 1;\n    -webkit-box-orient: vertical;\n    white-space: nowrap;\n}\n.advertisingMaterialsBox .el-input__inner {\n    height: 32px;\n    line-height: 32px;\n}\n.advertisingMaterialsBox .el-select .el-input .el-select__caret {\n    line-height: 32px;\n}\n.advertisingMaterialsBox .el-date-editor .el-range__icon, .advertisingMaterialsBox .el-date-editor .el-range-separator {\n    height: 32px;\n}\n.advertisingMaterialsBox .el-dialog__body .el-select .el-input {\n    width: 100%;\n}\n.advertisingMaterialsBox .el-table th:first-child .cell, .advertisingMaterialsBox .el-table td:first-child .cell {\n    padding-left: 25px;\n}\n.advertisingMaterialsBox .el-table th > .cell {\n    font-size: 14px;\n    font-weight: 600;\n    color: #111111;\n}\n.advertisingMaterialsBox .el-table td:last-child .cell button {\n    box-sizing: border-box;\n    border: 1px solid #4B67D6;\n    border-radius: 3px;\n    font-size: 13px;\n    color: #4B67D6;\n    width: 74px;\n    height: 27px;\n    padding: 0;\n}\n.advertisingMaterialsBox .el-pagination {\n    margin: 20px auto;\n}\n\n/*列表查看大图的大图区域*/\n.tableBigImg {\n  font-size: 0;\n  width: 336px;\n  height: 336px;\n  box-sizing: border-box;\n  background: #ffffff;\n  box-shadow: 0 5px 16px 0 rgba(20, 38, 95, 0.27);\n  position: fixed;\n  top: 50%;\n  left: 50%;\n  transform: translate(-50%, -50%);\n  z-index: 2;\n}\n.tableBigImg img {\n    width: 100%;\n    height: 100%;\n    vertical-align: top;\n    border-radius: 3px 3px 0 0;\n}\n.tableBigImg .bigImgPathName {\n    background-color: #ffffff;\n    font-weight: 500;\n    color: #222;\n    font-size: 16px;\n    line-height: 20px;\n    min-height: 70px;\n    width: 100%;\n    position: absolute;\n    top: 336px;\n    z-index: 2;\n    text-align: left;\n    padding: 10px;\n    box-sizing: border-box;\n    box-shadow: 0 5px 16px 0 rgba(20, 38, 95, 0.27);\n    border-radius: 0 0 3px 3px;\n}\n.tableBigImg.tableBigImg212 {\n    height: 212px;\n}\n.tableBigImg.tableBigImg212 img {\n      height: 212px;\n}\n.tableBigImg.tableBigImg212 .bigImgPathName {\n      top: 212px;\n}\n.tableBigImg.tableBigImg464 {\n    height: 464px;\n}\n.tableBigImg.tableBigImg464 img {\n      height: 464px;\n}\n.tableBigImg.tableBigImg464 .bigImgPathName {\n      top: 212px;\n}\n\n/*资源id后边的确定按钮*/\n.resourceIdSureButton {\n  display: inline-block;\n  height: 32px;\n  background: #3846DC;\n  border-radius: 3px;\n  line-height: 32px;\n  margin-left: 15px;\n  color: #FFF;\n  padding: 0 20px;\n  cursor: pointer;\n}\n\n/*控制资源id输入框的样式*/\n.resourceIdInputCss .el-input {\n  display: inline-block;\n  width: auto;\n}\n\n/*控制弹层里输入框的宽度*/\n.ev-popBox .el-input__inner {\n  width: 300px;\n}\n.ev-popBox .el-button--primary {\n  background: #3846DC;\n  border-color: #3846DC;\n}\n.ev-popBox .el-dialog__title {\n  font-weight: 600;\n}\n',""])},963:function(e,i,t){"use strict";t.r(i);var a=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("section",{staticClass:"advertisingMaterialsBox"},[a("h1",{staticClass:"advertisingTitleName"},[t._v("广告物料")]),t._v(" "),a("section",{ref:"screenObject",staticClass:"advertisingMaterialsScreening",attrs:{model:t.screenObject}},[a("aside",{staticClass:"centerItem"},[a("span",{staticClass:"titleName"},[t._v("广告ID")]),t._v(" "),a("el-input",{staticClass:"nameInput",attrs:{placeholder:"输入广告ID"},model:{value:t.screenObject.advertisingId,callback:function(e){t.$set(t.screenObject,"advertisingId",e)},expression:"screenObject.advertisingId"}})],1),t._v(" "),a("aside",{staticClass:"centerItem"},[a("span",{staticClass:"titleName"},[t._v("广告名称")]),t._v(" "),a("el-input",{staticClass:"nameInput",attrs:{placeholder:"输入广告名称"},model:{value:t.screenObject.advertisingName,callback:function(e){t.$set(t.screenObject,"advertisingName",e)},expression:"screenObject.advertisingName"}})],1),t._v(" "),a("aside",{staticClass:"centerItem"},[a("span",{staticClass:"titleName"},[t._v("广告类型")]),t._v(" "),a("el-select",{attrs:{placeholder:"不限"},model:{value:t.screenObject.advertisingType,callback:function(e){t.$set(t.screenObject,"advertisingType",e)},expression:"screenObject.advertisingType"}},[a("el-option",{key:"",attrs:{label:"不限",value:""}}),t._v(" "),t._l(t.advertisingTypeList,function(e){return a("el-option",{key:e.code,attrs:{label:e.description,value:e.code}})})],2)],1),t._v(" "),a("aside",{staticClass:"centerItem"},[a("span",{staticClass:"titleName"},[t._v("添加时间")]),t._v(" "),a("el-date-picker",{attrs:{type:"daterange",align:"right","start-placeholder":"不限","end-placeholder":"不限","value-format":"yyyy-MM-dd"},model:{value:t.screenObject.addTime,callback:function(e){t.$set(t.screenObject,"addTime",e)},expression:"screenObject.addTime"}})],1),t._v(" "),a("aside",{staticClass:"centerItem"},[a("span",{staticClass:"titleName"},[t._v("更新时间")]),t._v(" "),a("el-date-picker",{attrs:{type:"daterange",align:"right","start-placeholder":"不限","end-placeholder":"不限","value-format":"yyyy-MM-dd"},model:{value:t.screenObject.updateTime,callback:function(e){t.$set(t.screenObject,"updateTime",e)},expression:"screenObject.updateTime"}})],1),t._v(" "),a("aside",{staticClass:"advertisingButtonBox"},[a("p",{staticClass:"resetBtn",on:{click:function(e){return e.stopPropagation(),t.resetForm(e)}}},[t._v("清空条件")]),t._v(" "),a("p",{staticClass:"screeningBtn",on:{click:function(e){return e.stopPropagation(),t.submitForm(e)}}},[t._v("筛选")])])]),t._v(" "),a("button",{staticClass:"advertisingAddButton el-icon-circle-plus",on:{click:t.addAdvertising}},[t._v(" 新增广告")]),t._v(" "),a("section",{staticClass:"advertisingMaterials"},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:t.listData,"default-sort":{prop:"addTime",order:"descending"}},on:{"sort-change":t.sortIdChange}},[a("el-table-column",{attrs:{prop:"advertisingId",label:"广告ID",width:"160",sortable:"custom","sort-orders":["descending","ascending"]}}),t._v(" "),a("el-table-column",{attrs:{prop:"advertisingName",label:"广告名称",width:"282"}}),t._v(" "),a("el-table-column",{attrs:{prop:"advertisingTypeName",label:"广告类型",width:"150"}}),t._v(" "),a("el-table-column",{attrs:{prop:"addTime",label:"添加时间",width:"180",sortable:"custom","sort-orders":["descending","ascending"]}}),t._v(" "),a("el-table-column",{attrs:{prop:"updateTime",label:"更新时间",width:"180",sortable:"custom","sort-orders":["descending","ascending"]}}),t._v(" "),a("el-table-column",{attrs:{prop:"resourceImageUrl",label:"预览",width:"90"},scopedSlots:t._u([{key:"default",fn:function(i){return[""!=i.row.resourceImageUrl?a("img",{staticClass:"bigImgShow",attrs:{src:"/static/images/icons/icon-picture_hover_tiny.png"},on:{mouseenter:function(e){t.smallImgMouseenter(i.row)},mouseleave:t.smallImgMouseLeave}}):t._e()]}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"operateButton",label:"操作"},scopedSlots:t._u([{key:"default",fn:function(i){return[a("el-button",{attrs:{size:"medium"},on:{click:function(e){t.addAdvertising(i.row)}}},[t._v("编辑")])]}}])})],1)],1),t._v(" "),t.bigImgDialogVisible?a("div",{staticClass:"tableBigImg",class:{tableBigImg212:"212"==t.mouseBigImgHeight,tableBigImg464:"464"==t.mouseBigImgHeight},on:{mouseenter:t.bigImgMouseenter,mouseleave:t.bigImgMouseLeave}},[a("img",{attrs:{src:t.bigImgPath}}),t._v(" "),a("p",{directives:[{name:"show",rawName:"v-show",value:t.bigImgPathName,expression:"bigImgPathName"}],staticClass:"bigImgPathName"},[t._v(t._s(t.bigImgPathName))])]):t._e(),t._v(" "),0!=t.totalNum?a("el-pagination",{attrs:{"current-page":t.currentPage,"page-sizes":[10,20,30,50,100],"page-size":t.maxResult,layout:"total, prev, pager, next, jumper, sizes",total:t.totalNum,align:"center"},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}}):t._e(),t._v(" "),a("el-dialog",{staticClass:"ev-popBox",attrs:{width:"770px",top:"18vh",visible:t.editDialogFormShow,title:t.editDialogFormTitle,center:!0,"lock-scroll":!1},on:{"update:visible":function(e){t.editDialogFormShow=e}}},[a("el-form",{ref:"editDialogForm",attrs:{"label-width":"90px",rules:t.rules,model:t.editDialogForm}},[a("el-form-item",{attrs:{label:"所属类型",prop:"advertisingPopType","label-width":"140px"}},[a("el-select",{attrs:{placeholder:"请选择"},model:{value:t.editDialogForm.advertisingPopType,callback:function(e){t.$set(t.editDialogForm,"advertisingPopType",e)},expression:"editDialogForm.advertisingPopType"}},t._l(t.advertisingTypePopList,function(e){return a("el-option",{key:e.code,attrs:{value:e.code,label:e.description}})}))],1),t._v(" "),a("el-form-item",{attrs:{label:"广告ID",prop:"advertisingPopId","label-width":"140px"}},[a("el-input",{attrs:{placeholder:"自动生成广告ID",disabled:""},model:{value:t.editDialogForm.advertisingPopId,callback:function(e){t.$set(t.editDialogForm,"advertisingPopId",e)},expression:"editDialogForm.advertisingPopId"}})],1),t._v(" "),a("el-form-item",{directives:[{name:"show",rawName:"v-show",value:!t.linkShow,expression:"!linkShow"}],staticClass:"resourceIdInputCss",attrs:{label:"资源ID",prop:"advertisingPopResourceId","label-width":"140px"}},[a("el-input",{attrs:{placeholder:"输入资源ID"},model:{value:t.editDialogForm.advertisingPopResourceId,callback:function(e){t.$set(t.editDialogForm,"advertisingPopResourceId",e)},expression:"editDialogForm.advertisingPopResourceId"}}),t._v(" "),a("p",{staticClass:"resourceIdSureButton",on:{click:t.resourceIdSure}},[t._v("确定")])],1),t._v(" "),a("el-form-item",{attrs:{label:"广告名称",prop:"advertisingPopName","label-width":"140px"}},[a("el-input",{attrs:{placeholder:"输入广告名称"},model:{value:t.editDialogForm.advertisingPopName,callback:function(e){t.$set(t.editDialogForm,"advertisingPopName",e)},expression:"editDialogForm.advertisingPopName"}})],1),t._v(" "),a("el-form-item",{staticClass:"column-course-img-label img-upload",attrs:{label:"配图",prop:"imgUrl","label-width":"140px"}},[a("div",{staticClass:"uploadCon"},[a("AdvertisingMaterialsImgUpload",{attrs:{widthHeightMinLimit:[t.widthMinLimit,t.heightMinLimit],needClear:t.needClear,imgUrl:t.editDialogForm.imgUrl,uploadFlag:t.uploadFlag},on:{deleteSuccess:t.deleteImgSuccess,uploadSuccess:t.uploadImgSuccess,returnNoUpload:t.returnNoUpload}})],1)]),t._v(" "),a("el-form-item",{staticClass:"column-course-img-label img-upload",attrs:{label:"1005:300配图",prop:"imgUrlBanner","label-width":"140px"}},[a("div",{staticClass:"uploadCon"},[a("AdvertisingMaterialsImgUpload",{attrs:{uploadDesc:"适用于菁英会banner",widthHeightMinLimit:[1005,300],imgUrl:t.editDialogForm.imgUrlBanner,needClear:t.needClear01,uploadFlag:!0,isBannerImg:!0},on:{deleteSuccess:t.deleteImgSuccess01,uploadSuccess:t.uploadImgSuccess01,returnNoUpload:t.returnNoUpload}})],1)]),t._v(" "),a("el-form-item",{staticClass:"column-course-img-label img-upload",attrs:{label:"1035:900配图",prop:"imgAllinBanner","label-width":"140px"}},[a("div",{staticClass:"uploadCon"},[a("AdvertisingMaterialsImgUpload",{attrs:{uploadDesc:"适用于唯医学院banner",widthHeightMinLimit:[1035,900],imgUrl:t.editDialogForm.imgAllinBanner,needClear:t.needClear02,uploadFlag:!0,isBannerImg:!0},on:{deleteSuccess:t.deleteImgSuccess02,uploadSuccess:t.uploadImgSuccess02,returnNoUpload:t.returnNoUpload}})],1)]),t._v(" "),a("el-form-item",{staticClass:"column-course-img-label img-upload",attrs:{label:"1035:216配图",prop:"imgTerminalBanner","label-width":"140px"}},[a("div",{staticClass:"uploadCon"},[a("AdvertisingMaterialsImgUpload",{attrs:{uploadDesc:"适用于病例、文库、视频终端页",widthHeightMinLimit:[1035,216],imgUrl:t.editDialogForm.imgTerminalBanner,needClear:t.needClear03,uploadFlag:!0,isBannerImg:!0},on:{deleteSuccess:t.deleteImgSuccess03,uploadSuccess:t.uploadImgSuccess03,returnNoUpload:t.returnNoUpload}})],1)]),t._v(" "),a("el-form-item",{directives:[{name:"show",rawName:"v-show",value:t.linkShow,expression:"linkShow"}],attrs:{label:"链接地址",prop:"advertisingPopLinkAddress","label-width":"140px"}},[a("el-input",{attrs:{placeholder:"输入链接地址"},model:{value:t.editDialogForm.advertisingPopLinkAddress,callback:function(e){t.$set(t.editDialogForm,"advertisingPopLinkAddress",e)},expression:"editDialogForm.advertisingPopLinkAddress"}})],1),t._v(" "),a("el-row",[a("el-col",{attrs:{span:24}},[a("el-form-item",{staticStyle:{float:"right"}},[a("el-button",{staticStyle:{width:"150px"},attrs:{type:"primary",size:"small"},on:{click:function(e){t.submitEditDialogForm("editDialogForm")}}},[t._v("发布\n            ")])],1)],1)],1)],1)],1)],1)};a._withStripped=!0;var s=t(59),o=t(69),l=t(68),n=function(){var e=this,i=e.$createElement,t=e._self._c||i;return t("section",{staticClass:"advertisingMaterialsImgUploadBox"},[t("aside",{staticClass:"uploadInputBox",class:{uploadInputBox01:"212"==e.heightMinLimit,uploadInputBox02:"300"==e.heightMinLimit,uploadInputBox03:"900"==e.heightMinLimit,uploadInputBox04:"216"==e.heightMinLimit}},[e.prevImgUrl?e._e():t("span",{staticClass:"uploadInputButton"}),e._v(" "),e.prevImgUrl?t("img",{staticClass:"ev-uploadImgTag",attrs:{src:e.prevImgUrl}}):e._e(),e._v(" "),t("input",{directives:[{name:"show",rawName:"v-show",value:!e.prevImgUrl,expression:"!prevImgUrl"}],ref:"upolad_Input",attrs:{type:"file"},on:{change:e.fileChangeHandle}}),e._v(" "),e.isBannerImg1?t("p",{staticClass:"eliteBannerImg"},[e._v(e._s(e.uploadDesc))]):e._e(),e._v(" "),e.prevImgUrl?t("p",{staticClass:"deleteImg",on:{click:e.deleteImgFun}},[t("i",{staticClass:"el-icon-circle-close"})]):e._e()])])};n._withStripped=!0;var r={name:"advertisingMaterialsImgUpload",props:{uploadDesc:{type:String,require:!0},imgUrl:{type:String,require:!0},widthHeightMinLimit:{type:Array,require:!1},needClear:{type:Boolean,default:!1},uploadFlag:{type:Boolean,default:!1},isBannerImg:{type:Boolean,default:!1}},data:function(){return{fileData:{},widthHeightCheck:!0,prevImgUrl:this.imgUrl?this.imgUrl:"",heightMinLimit:this.widthHeightMinLimit[1]?this.widthHeightMinLimit[1]:"",uploadFlag1:this.uploadFlag,isBannerImg1:this.isBannerImg}},watch:{imgUrl:function(){this.prevImgUrl=this.imgUrl},needClear:function(e){e&&this.deleteImgFun()},widthHeightMinLimit:function(){this.heightMinLimit=this.widthHeightMinLimit[1]?this.widthHeightMinLimit[1]:""},uploadFlag:function(){this.uploadFlag1=this.uploadFlag}},methods:{clearInput:function(){this.$refs.upolad_Input.value=null,this.prevImgUrl=""},fileChangeHandle:function(e){var a=this;if(a.uploadFlag1){var i=e.target.files[0];if(!i)return!1;if(!this.formatCheck(i))return a.deleteImgFun(),!1;this.fileData.extName=i.type,this.fileData.file=i;var n=new FileReader;n.onload=function(e){if(a.fileData.fileContent=n.result,a.widthHeightMinLimit){var t=new Image;t.src=URL.createObjectURL(i),t.onload=function(){var e=t.width,i=t.height;a.widthHeightCheck=!0,a.widthHeightMinLimit&&(e<a.widthHeightMinLimit[0]?(a.$message.error("上传图片宽度不能小于"+a.widthHeightMinLimit[0]+"px"),a.widthHeightCheck=!1):i<a.widthHeightMinLimit[1]&&(a.$message.error("上传图片高度不能小于"+a.widthHeightMinLimit[1]+"px"),a.widthHeightCheck=!1)),a.widthHeightCheck?a.uploadImg():a.deleteImgFun()}}else a.uploadImg()},n.readAsDataURL(i)}else a.$emit("returnNoUpload","")},uploadImg:function(){var a=this,e={fileContent:a.fileData.fileContent.split(",")[1],watermark:1,extName:a.fileData.extName.split("/")[1]};l.default.openLoading("图片上传中..."),Object(s.a)({method:o.a.uploadImg.type,url:o.a.uploadImg.url,data:e}).then(function(e){if(e&&e.data.responseObject&&1==e.data.responseObject.responseStatus){l.default.closeLoading();var i=e.data.responseObject.responseData.data_list,t={};t.attUrl=i.attUrl,t.attFormat=i.extName,t.navigationAttType=1,t.attSize=i.attSize,t.attHeight=i.attHeight,t.attWidth=i.attWidth,t.attType=i.attType,a.prevImgUrl=URL.createObjectURL(a.fileData.file),t.prevImgUrl=a.prevImgUrl,a.$emit("uploadSuccess",t)}else l.default.closeLoading(),a.$message.error("图片上传失败！"),a.deleteImgFun()}).catch(function(e){l.default.closeLoading(),a.$message.error("图片上传失败！"),a.deleteImgFun()})},formatCheck:function(e){var i="image/jpeg"===e.type||"image/jpg"===e.type||"image/png"===e.type||"image/gif"===e.type,t=e.size/1024/1024<1;return i?!!t||(this.$message.error("上传图片大小不超过1M"),!1):(this.$message.error("上传图片仅支持JPG/JPEG/PNG/GIF格式"),!1)},deleteImgFun:function(){this.$refs.upolad_Input.value=null,this.prevImgUrl="",this.$emit("deleteSuccess","")}}},d=(t(945),t(58)),g=Object(d.a)(r,n,[],!1,null,"56978a00",null);g.options.__file="src/views/advertisingMaterials/components/advertisingMaterialsImgUpload.vue";var m={name:"advertisingMaterials",data:function(){return{totalNum:1,currentPage:1,firstResult:0,maxResult:20,pageSize:20,screenObject:{advertisingId:"",advertisingName:"",advertisingType:"",addTime:"",updateTime:""},submitObj:{advertisingId:"",advertisingName:"",advertisingType:"",createStartTime:"",createEndTime:"",updateStartTime:"",updateEndTime:""},advertisingTypeList:[],listData:[],sortBy:1,asc:1,bigImgDialogVisible:!1,bigImgTimer:null,bigImgPath:"",bigImgPathName:"",editDialogFormShow:!1,editDialogFormTitle:"新建广告",editDialogForm:{advertisingPopType:"",advertisingPopId:"",advertisingPopResourceId:"",advertisingPopName:"",advertisingPopLinkAddress:"",imgUrl:"",imgUrlBanner:"",imgAllinBanner:"",imgTerminalBanner:""},advertisingTypePopList:[],errorText:"",rules:{advertisingPopType:[{required:!0,message:"请选择所属类型",trigger:"change"}],advertisingPopResourceId:[{required:!0,message:"请输入资源ID并确认",trigger:"blur"}],advertisingPopName:[{required:!0,message:"请输入广告名称",trigger:"blur change"}],advertisingPopLinkAddress:[{required:!1,message:"请输入链接地址",trigger:"blur"}],imgUrl:[{required:!0,message:"请上传配图",trigger:"change"}]},widthMinLimit:"336",heightMinLimit:"336",needClear:!1,needClear01:!1,needClear02:!1,needClear03:!1,resourceImageUrlSave:"",linkShow:!1,editFlag:"",uploadFlag:!1,mouseBigImgHeight:336,sureResourceId:"",bannerShow:!1}},components:{AdvertisingMaterialsImgUpload:g.exports},methods:{handleSizeChange:function(e){var i=this;i.pageSize=e,i.currentPage=1,i.firstResult=0,i.maxResult=i.currentPage*e,i.dataMainList()},handleCurrentChange:function(e){this.currentPage=e,this.firstResult=(e-1)*this.pageSize,this.dataMainList()},sortIdChange:function(e){var i=this,t=e.order;switch(i.asc="descending"==t?"1":"0",e.prop){case"advertisingId":i.sortBy=2;break;case"addTime":i.sortBy=1;break;case"updateTime":i.sortBy=3;break;default:i.sortBy=1}i.currentPage=1,(i.firstResult=0)<i.listData.length&&i.dataMainList()},resetForm:function(){this.screenObject={advertisingId:"",advertisingName:"",advertisingType:"",addTime:"",updateTime:""}},submitForm:function(){var e=this;e.firstResult=0,e.currentPage=1,e.submitObj={advertisingId:e.screenObject.advertisingId,advertisingName:e.screenObject.advertisingName,advertisingType:e.screenObject.advertisingType,createStartTime:e.screenObject.addTime[0],createEndTime:e.screenObject.addTime[1],updateStartTime:e.screenObject.updateTime[0],updateEndTime:e.screenObject.updateTime[1]},e.dataMainList()},dataMainList:function(){var i=this,r=this;l.default.openLoading("加载中...");var e={sortBy:r.sortBy,asc:r.asc,queryLike:1,firstResult:r.firstResult,maxResult:r.maxResult};r.submitObj.advertisingId&&(e.id=r.submitObj.advertisingId),r.submitObj.advertisingName&&(e.adProfileName=r.submitObj.advertisingName.trim()),r.submitObj.advertisingType&&(e.resourceType=r.submitObj.advertisingType),r.submitObj.createStartTime&&(e.createStartTime=r.submitObj.createStartTime),r.submitObj.createEndTime&&(e.createEndTime=r.submitObj.createEndTime),r.submitObj.updateStartTime&&(e.updateStartTime=r.submitObj.updateStartTime),r.submitObj.updateEndTime&&(e.updateEndTime=r.submitObj.updateEndTime),Object(s.a)({method:o.a.getAdMaterialList.type,url:o.a.getAdMaterialList.url,params:e}).then(function(e){if(l.default.closeLoading(),e&&e.data&&e.data.responseObject){var i=e.data.responseObject.items;if(r.totalNum=e.data.responseObject.totalCount,i&&i.length){r.listData=[];for(var t=0;t<i.length;t++){var a=i[t],n={advertisingId:a.id,advertisingName:a.adProfileName,advertisingType:a.resourceType,advertisingTypeName:a.resourceTypeName,addTime:a.createTime,updateTime:a.updateTime,resourceImageUrl:a.resourceImageUrl,resourceName:a.resourceName,advertisingResourceId:a.resourceId,advertisingLink:a.linkUrl,specialImageUrl:a.specialImageUrl,recommendType:a.recommendType,imageList:a.imageList};r.listData.push(n)}}else r.listData=[]}else r.listData=[]}).catch(function(e){l.default.closeLoading(),i.$allin_confirm({title:"提示",content:"获取失败，请刷新重试",type:"notice"})})},getAdvertisingType:function(){var i=this,n=this;l.default.openLoading("加载中..."),Object(s.a)({method:o.a.getAdTypeList.type,url:o.a.getAdTypeList.url,params:{}}).then(function(e){if(l.default.closeLoading(),e&&e.data&&e.data.responseObject&&e.data.responseObject.length){for(var i=e.data.responseObject,t=0;t<i.length;t++)if(1!=i[t].code&&2!=i[t].code&&7!=i[t].code){var a={code:parseInt(i[t].code),description:i[t].description};n.advertisingTypePopList.push(a)}n.advertisingTypeList=e.data.responseObject}}).catch(function(e){l.default.closeLoading(),i.$allin_confirm({title:"提示",content:"获取失败，请刷新重试",type:"notice"})})},smallImgMouseenter:function(e){var i=this;i.bigImgTimer&&clearTimeout(i.bigImgTimer);var t=e.advertisingType;"11"==t||"13"==t||"14"==t||"15"==t||"19"==t?i.mouseBigImgHeight=336:"3"==t||"12"==t||"16"==t||"17"==t||"10"==t||"1"==t||"2"==t||"7"==t||"20"==t?i.mouseBigImgHeight=212:"18"==t&&(i.mouseBigImgHeight=464);var a=e.resourceImageUrl;a?(i.bigImgPathName=e.resourceName,i.bigImgPath=a,i.bigImgDialogVisible=!0):(i.bigImgPath="",i.bigImgPathName="")},smallImgMouseLeave:function(){var e=this;e.bigImgTimer=setTimeout(function(){e.bigImgDialogVisible=!1},1e3)},bigImgMouseenter:function(){this.bigImgTimer&&clearTimeout(this.bigImgTimer)},bigImgMouseLeave:function(){this.bigImgDialogVisible=!1},addAdvertising:function(e){var i=this;if(i.editDialogFormShow=!0,e.advertisingId){i.needClear=!1,i.needClear01=!1,i.needClear02=!1,i.needClear03=!1,i.editFlag=e.advertisingType,i.editDialogFormTitle="编辑广告";var t=parseInt(e.advertisingType);i.editDialogForm={advertisingPopType:1==t||2==t||7==t?10:t,advertisingPopId:e.advertisingId,advertisingPopResourceId:e.advertisingResourceId,advertisingPopName:e.advertisingName,advertisingPopLinkAddress:e.advertisingLink,imgUrl:""!=e.resourceImageUrl?e.resourceImageUrl:"",imgUrlBanner:""!=e.specialImageUrl?e.specialImageUrl:"",imgAllinBanner:i.getImgList(1,e.imageList),imgTerminalBanner:i.getImgList(2,e.imageList)},i.sureResourceId=i.editDialogForm.advertisingPopResourceId,i.resourceImageUrlSave=i.editDialogForm.imgUrl,i.bannerImageUrlSave=i.editDialogForm.imgUrlBanner,i.AllinBannerImageUrlSave=i.editDialogForm.imgAllinBanner,i.imgTerminalBannerImageUrlSave=i.editDialogForm.imgTerminalBanner}else i.editFlag="",i.editDialogFormTitle="新增广告",i.editDialogForm={advertisingPopType:"",advertisingPopId:"",advertisingPopResourceId:"",advertisingPopName:"",advertisingPopLinkAddress:"",imgUrl:"",imgUrlBanner:"",AllinBannerImageUrlSave:"",imgTerminalBannerImageUrlSave:""}},getImgList:function(e,i){if(0===i.length)return"";for(var t in i)if(i[t].imageType===e)return i[t].imageUrl},resourceIdSure:function(){var i=this,a=this;if(""!=a.editDialogForm.advertisingPopResourceId&&""!=a.editDialogForm.advertisingPopType){if(!/^[\d]/g.test(a.editDialogForm.advertisingPopResourceId))return a.errorText="请输入数字类型",a.editDialogForm.advertisingPopResourceId="",void a.resourceIdValidate();a.errorText="请输入资源ID并确认",l.default.openLoading("加载中..."),Object(s.a)({method:o.a.getImgByResIdAndAdType.type,url:o.a.getImgByResIdAndAdType.url,params:{resourceId:a.editDialogForm.advertisingPopResourceId,resourceType:a.editDialogForm.advertisingPopType}}).then(function(e){if(l.default.closeLoading(),e&&e.data&&e.data.responseObject&&e.data.responseObject.items&&e.data.responseObject.items.length){var i=e.data.responseObject.items[0].resourceImageUrl;a.editDialogForm.imgUrl=i||"",a.resourceImageUrlSave=a.editDialogForm.imgUrl,a.bannerImageUrlSave=a.editDialogForm.imgUrlBanner,a.AllinBannerImageUrlSave=a.editDialogForm.imgAllinBanner,a.imgTerminalBannerImageUrlSave=a.editDialogForm.imgTerminalBanner,a.$refs.editDialogForm.validateField("imgUrl");var t=e.data.responseObject.items[0].adProfileName;a.editDialogForm.advertisingPopName=t||"",a.sureResourceId=a.editDialogForm.advertisingPopResourceId}else"1102"==e.data.responseObject.responseCode?a.errorText="资源ID与所属类型不符，请重新输入":"1103"==e.data.responseObject.responseCode?a.errorText="该资源无效，请重新输入":"1104"==e.data.responseObject.responseCode?a.errorText="该资源已被用户删除，请重新输入":"1105"==e.data.responseObject.responseCode?a.errorText="该视频为付费课程选集，无法添加":a.errorText="资源ID与所属类型不符，请重新输入",a.editDialogForm.advertisingPopResourceId="",a.resourceIdValidate()}).catch(function(e){l.default.closeLoading(),i.$allin_confirm({title:"提示",content:"获取失败，请刷新重试",type:"notice"})})}},uploadImgSuccess:function(e){this.resourceImageUrlSave=e.attUrl,this.editDialogForm.imgUrl=e.prevImgUrl,this.$refs.editDialogForm.validateField("imgUrl")},deleteImgSuccess:function(){this.editDialogForm.imgUrl="",this.needClear=!1,this.resourceImageUrlSave=""},returnNoUpload:function(){this.errorText="请先输入资源ID并确认",this.resourceIdValidate()},uploadImgSuccess01:function(e){this.bannerImageUrlSave=e.attUrl,this.editDialogForm.imgUrlBanner=e.prevImgUrl},deleteImgSuccess01:function(){this.editDialogForm.imgUrlBanner="",this.needClear01=!1,this.bannerImageUrlSave=""},uploadImgSuccess02:function(e){this.AllinBannerImageUrlSave=e.attUrl,this.editDialogForm.imgAllinBanner=e.prevImgUrl},deleteImgSuccess02:function(){this.editDialogForm.imgAllinBanner="",this.needClear02=!1,this.AllinBannerImageUrlSave=""},uploadImgSuccess03:function(e){this.imgTerminalBannerImageUrlSave=e.attUrl,this.editDialogForm.imgTerminalBanner=e.prevImgUrl},deleteImgSuccess03:function(){this.editDialogForm.imgTerminalBanner="",this.needClear03=!1,this.imgTerminalBannerImageUrlSave=""},resourceIdValidate:function(){this.rules.advertisingPopResourceId[0].message=this.errorText,this.$refs.editDialogForm.validateField("advertisingPopResourceId")},submitEditDialogForm:function(e){var i=this;i.$refs[e].validate(function(e){if(!e)return!1;i.saveAdvertisingInfo()})},saveAdvertisingInfo:function(){var i=this;l.default.openLoading("加载中...");var e={resourceImageUrl:i.resourceImageUrlSave,adProfileName:i.editDialogForm.advertisingPopName.trim(),resourceType:i.editDialogForm.advertisingPopType,imageList:[]};i.editDialogForm.advertisingPopId&&(e.id=i.editDialogForm.advertisingPopId),i.sureResourceId&&(e.resourceId=i.sureResourceId),i.editDialogForm.advertisingPopLinkAddress&&(e.linkUrl=i.editDialogForm.advertisingPopLinkAddress),i.bannerImageUrlSave&&(e.specialImageUrl=i.bannerImageUrlSave),i.AllinBannerImageUrlSave?e.imageList.push({imageType:1,imageUrl:i.AllinBannerImageUrlSave}):e.imageList.push(),i.imgTerminalBannerImageUrlSave?e.imageList.push({imageType:2,imageUrl:i.imgTerminalBannerImageUrlSave}):e.imageList.push(),Object(s.a)({method:o.a.saveOrUpdateMaterial.type,url:o.a.saveOrUpdateMaterial.url,data:e}).then(function(e){l.default.closeLoading(),e&&e.data&&e.data.responseObject.responseStatus?(i.dataMainList(),i.editDialogFormShow=!1):"1101"==e.data.responseObject.responseCode?(i.editDialogForm.advertisingPopName="",i.rules.advertisingPopName[0].message="该广告名称已经存在，请重新输入",i.$refs.editDialogForm.validateField("advertisingPopName")):"1102"==e.data.responseObject.responseCode?(i.errorText="资源ID与所属类型不符，请重新输入",i.editDialogForm.advertisingPopResourceId="",i.resourceIdValidate()):i.$allin_confirm({title:"提示",content:"保存失败，请重试",type:"notice"})}).catch(function(e){l.default.closeLoading(),i.$allin_confirm({title:"提示",content:"保存失败，请重试",type:"notice"})})}},mounted:function(){var i=this,t=this;t.dataMainList(),t.getAdvertisingType(),document.onkeydown=function(e){13==e.keyCode&&(i.bigImgDialogVisible||t.submitForm())}},computed:{},watch:{editDialogFormShow:function(){var e=this;e.editDialogFormShow?(e.needClear=!1,e.needClear01=!1,e.needClear02=!1,e.needClear03=!1):(e.editDialogForm={advertisingPopType:"",advertisingPopId:"",advertisingPopResourceId:"",advertisingPopName:"",advertisingPopLinkAddress:"",imgUrl:"",imgUrlBanner:"",imgAllinBanner:"",imgTerminalBanner:""},e.needClear=!0,e.needClear01=!0,e.needClear02=!0,e.needClear03=!0,e.editFlag="",e.sureResourceId="",e.widthMinLimit="336",e.heightMinLimit="336",e.$refs.editDialogForm.resetFields())},"editDialogForm.advertisingPopType":function(e,i){var t=this;t.linkShow=!1,t.bannerShow=!1,""==t.editFlag&&(t.editDialogForm.advertisingPopResourceId="",t.editDialogForm.advertisingPopName="",t.editDialogForm.advertisingPopLinkAddress="",t.editDialogForm.imgUrl="",t.editDialogForm.imgUrlBanner="",t.editDialogForm.imgAllinBanner="",t.editDialogForm.imgTerminalBanner=""),""!=t.editFlag&&(t.editFlag=""),""!=t.sureResourceId?t.uploadFlag=!0:t.uploadFlag=!1,"11"==e||"13"==e||"14"==e||"15"==e||"19"==e?(t.widthMinLimit="336",t.heightMinLimit="336","11"==e&&(t.bannerShow=!0)):"3"==e||"12"==e||"16"==e||"17"==e||"10"==e||"20"==e?(t.widthMinLimit="336",t.heightMinLimit="212"):"18"==e&&(t.widthMinLimit="336",t.heightMinLimit="464",t.uploadFlag=!0,t.linkShow=!0)},linkShow:function(){var e=this;e.linkShow?(e.rules.advertisingPopLinkAddress[0].required=!0,e.rules.advertisingPopResourceId[0].required=!1):(e.rules.advertisingPopLinkAddress[0].required=!1,e.rules.advertisingPopResourceId[0].required=!0)},sureResourceId:function(){""!=this.sureResourceId||"18"==this.editDialogForm.advertisingPopType?this.uploadFlag=!0:this.uploadFlag=!1}},destroyed:function(){document.onkeydown=null,l.default.goBack()}},p=(t(947),Object(d.a)(m,a,[],!1,null,null,null));p.options.__file="src/views/advertisingMaterials/advertisingMaterials.vue";i.default=p.exports}}]);