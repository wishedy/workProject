(window.webpackJsonp=window.webpackJsonp||[]).push([[40],{1017:function(e,t,n){"use strict";n.r(t);var s=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"nodesContainer"},[n("div",{staticClass:"nodesTop"},[n("div",{staticClass:"nodesOne"},[n("div",{staticClass:"nodesTopTitle"},[t._v("配置内容")]),t._v(" "),n("div",{directives:[{name:"show",rawName:"v-show",value:0===t.nodeState,expression:"nodeState===0"}],staticClass:"nodesTopNum"},[n("span",{directives:[{name:"show",rawName:"v-show",value:!t.isExamine,expression:"!isExamine"}],on:{click:t.toExamine}},[t._v("批量审核")]),t._v(" "),n("span",{directives:[{name:"show",rawName:"v-show",value:t.isExamine,expression:"isExamine"}],on:{click:t.createNode}},[t._v("进入审核")]),t._v(" "),n("i",{directives:[{name:"show",rawName:"v-show",value:t.isExamine||0<t.surplusNum,expression:"isExamine||surplusNum>0"}]},[t._v(t._s(t.totalNodesNum))])])]),t._v(" "),n("div",{staticClass:"nodesTwo"},[n("div",{staticClass:"nodeWait active",attrs:{"data-type":"1"},on:{click:function(e){t.TabCli(0)}}},[t._v("待审核")]),t._v(" "),n("div",{staticClass:"nodePass",attrs:{"data-type":"2"},on:{click:function(e){t.TabCli(1)}}},[t._v("已通过")]),t._v(" "),n("div",{staticClass:"nodeRefuse",attrs:{"data-type":"3"},on:{click:function(e){t.TabCli(2)}}},[t._v("已屏蔽")])])]),t._v(" "),n("div",{staticClass:"nodeSearch"},[n("div",{directives:[{name:"show",rawName:"v-show",value:t.isExamine&&0===t.nodeState,expression:"isExamine&&nodeState===0"}]},[t._v("已选择"),n("span",[t._v(t._s(t.checkNum))]),t._v("个笔记")]),t._v(" "),n("input",{attrs:{id:"searchVal",type:"text"}}),t._v(" "),n("button",{staticClass:"searchBtn",on:{click:t.searchBtn}})]),t._v(" "),n("el-table",{ref:"multipleTable",staticStyle:{width:"100%"},attrs:{data:t.listDatas,"default-sort":{prop:"createTime",order:"descending"},"row-key":t.getRowKeys},on:{"row-click":t.rowClick,"sort-change":t.tableSortChange,"selection-change":t.selectionChange}},[t.isExamine&&0===t.nodeState?n("el-table-column",{key:1,attrs:{type:"selection",width:"80","reserve-selection":!0,prop:"nodeId"}}):t._e(),t._v(" "),t.isExamine&&0===t.nodeState?t._e():n("el-table-column",{key:3,attrs:{prop:"nodeNum",label:"序号",width:"80"}}),t._v(" "),n("el-table-column",{key:4,attrs:{prop:"nodeDesc",label:"笔记内容",width:0===t.nodeState?435:390}}),t._v(" "),n("el-table-column",{key:5,attrs:{prop:"videoName",label:"资源标题",width:0===t.nodeState?240:190}}),t._v(" "),n("el-table-column",{key:6,attrs:{prop:"refCustomerId",sortable:"custom","sort-orders":["descending","ascending"],label:"用户ID",width:"150"}}),t._v(" "),n("el-table-column",{key:7,attrs:{prop:"videoId",sortable:"custom","sort-orders":["descending","ascending"],label:"资源ID",width:"150"}}),t._v(" "),0!==t.nodeState?n("el-table-column",{key:2,attrs:{prop:"opUserName",sortable:"custom","sort-orders":["descending","ascending"],label:"审核人",width:"100"}}):t._e(),t._v(" "),n("el-table-column",{key:9,attrs:{prop:"createTime",sortable:"custom","sort-orders":["descending","ascending"],label:"发布时间",width:"110"}})],1),t._v(" "),10<t.totalNum?n("el-pagination",{attrs:{"current-page":t.currentPage,"page-sizes":[10,20,30,50,100],"page-size":t.pageSize,layout:"total, prev, pager, next, jumper, sizes",total:t.totalNum},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}}):t._e()],1)};s._withStripped=!0;var a=n(59),o=n(69),i=n(68),r={name:"videoNodesExamine",data:function(){return{fdsnn:"",userId:localStorage.getItem("userId"),waitData:[],listDatas:[],currentPage:1,pageSize:10,totalNum:0,checkNum:0,surplusNum:0,totalNodesNum:0,totalNodeIds:[],nodeIds:[],surplusNodeId:[],isExamine:!1,nodeState:0,sortType:2,start:1,searchVal:"",waitNodeIds:[],localTime:""}},methods:{handleSizeChange:function(e){this.pageSize=e,this.sortType="2",this.$refs.multipleTable.clearSort(),this.$refs.multipleTable.sort("createTime","descending"),this.currentPage=1,this.start=1},handleCurrentChange:function(e){this.currentPage=e,this.start=(this.currentPage-1)*this.pageSize+1,0===this.nodeState?this.getListFn(2,this.searchVal,1):this.getListFn(this.sortType)},toExamine:function(){this.isExamine=!0,this.currentPage=1,this.start=1,this.checked()},getRowKeys:function(e){return e.nodeId},selectionChange:function(e){var t=this;if(e){t.checkNum=e.length,t.totalNodesNum=parseInt(t.checkNum),t.nodeIds=[];for(var n=0;n<e.length;n++)t.nodeIds.indexOf(e[n].nodeId)<0&&e[n].nodeId&&(t.nodeIds+=e[n].nodeId+",")}},TabCli:function(e){var t=this;t.sortType="2",t.$refs.multipleTable.clearSort(),t.$refs.multipleTable.sort("createTime","descending"),t.currentPage=1,t.start=1,t.nodeState=e,document.getElementsByClassName("nodeWait")[0].classList.remove("active"),document.getElementsByClassName("nodePass")[0].classList.remove("active"),document.getElementsByClassName("nodeRefuse")[0].classList.remove("active"),0===e?document.getElementsByClassName("nodeWait")[0].classList.add("active"):1===e?document.getElementsByClassName("nodePass")[0].classList.add("active"):document.getElementsByClassName("nodeRefuse")[0].classList.add("active")},getListFn:function(e,t,n){var a=this;if(n)a.listDatas=a.waitData.slice(a.start-1,a.start+a.pageSize-1);else{var s={keyWord:t||void 0,nodeState:a.nodeState,sortType:e,userId:a.userId};0===a.nodeState?(s.firstResult="",s.maxResult=""):(s.firstResult=(a.currentPage-1)*a.pageSize,s.maxResult=a.pageSize);this.getListAxios(o.a.getVideoNodesList.url,s,function(e){if(e&&e.data&&e.data.responseObject&&e.data.responseObject.responseData){var t=e.data.responseObject.responseData.dataList;if(a.listDatas=[],a.waitData=[],t&&0<t.length)for(var n=0;n<t.length;n++){var s=t[n],o={createTime:s.createTime?a.dateLocalJoint(a.localTime,s.createTime):"",nodeDesc:0===a.nodeState?s.nodeDesc&&27<s.nodeDesc.length?s.nodeDesc.substring(0,27)+"...":s.nodeDesc:s.nodeDesc&&25<s.nodeDesc.length?s.nodeDesc.substring(0,25)+"...":s.nodeDesc,nodeNum:s.nodeNum,videoName:s.videoName?"《"+s.videoName+"》":"",refCustomerId:s.refCustomerId,videoId:s.videoId,opUserName:s.opUserName,nodeId:s.nodeId};0===a.nodeState?(a.waitData.push(o),a.listDatas=a.waitData.slice(a.start-1,a.start+a.pageSize-1)):a.listDatas.push(o)}a.totalNum=e.data.responseObject.responseData.totalCount}},o.a.getVideoNodesList.type)}},tableSortChange:function(e,t,n){this.currentPage=1,this.start=1,"refCustomerId"===e.prop?this.sortType="ascending"===e.order?4:5:"videoId"===e.prop?this.sortType="ascending"===e.order?6:7:"createTime"===e.prop?this.sortType="ascending"===e.order?3:2:"opUserName"===e.prop&&(this.sortType="ascending"===e.order?8:9),this.getListFn(this.sortType)},rowClick:function(e,t,n,s){var o=this;0!==o.nodeState&&o.$router.push({name:"videoNodesDesc",query:{nodeId:e.nodeId,nodeState:o.nodeState,sortType:o.sortType?o.sortType:"",keyWord:o.searchVal?o.searchVal:""}})},searchBtn:function(){var e=document.getElementById("searchVal").value;this.currentPage=1,this.start=1,this.getListFn(2,e),this.searchVal=e},createNode:function(){var t=this;if(0<t.totalNodesNum)if(0<t.checkNum){t.totalNodeIds.push(t.nodeIds.substring(0,t.nodeIds.length-1)),t.totalNodeIds=t.totalNodeIds.join(",").split(",");var e={userId:t.userId,nodeIds:t.totalNodeIds.join(",")};t.getListAxios(o.a.createUserNode.url,e,function(e){e&&e.data&&e.data.responseObject&&e.data.responseObject.responseStatus&&t.$router.push({name:"videoNodesDesc",query:{nodeId:t.totalNodeIds[0],nodeState:0,sortType:t.sortType?t.sortType:"",keyWord:t.searchVal?t.searchVal:""}})},o.a.createUserNode.type,function(e){t.$message({message:"批量审核失败，请重试。",type:"warning",center:!0})})}else t.$router.push({name:"videoNodesDesc",query:{nodeId:t.totalNodeIds[0][0][0],nodeState:0}});else this.$message({message:"请选择笔记",type:"error",center:!0})},getNodeNum:function(){var t=this,e={userId:t.userId};t.getListAxios(o.a.getUserNodeNum.url,e,function(e){e&&e.data&&e.data.responseObject&&e.data.responseObject.responseData&&e.data.responseObject.responseData.nodeNum&&0<e.data.responseObject.responseData.nodeNum&&(t.surplusNum=e.data.responseObject.responseData.nodeNum,t.totalNodesNum=parseInt(t.surplusNum),t.surplusNodeId.push(e.data.responseObject.responseData.dataList))},o.a.getUserNodeNum.type)},local_time:function(){var e=new Date,t=e.getFullYear(),n=e.getMonth()+1;n<10&&(n="0"+n);var s=e.getDate();s<10&&(s="0"+s);var o=t+"-"+n+"-"+s+" "+e.toTimeString().substr(0,8);this.localTime=o},dateLocalJoint:function(e,t,n){var s=void 0,o=void 0!==n&&""!==n?n:"*",a=e.substring(0,10).replace(/-/g,o),i=a.toString().split(o),r=t.substring(0,10).replace(/-/g,o),d=r.toString().split(o),l=t;return parseInt(d[0])<parseInt(i[0])?s=l.substring(0,16):(new Date).getFullYear()===parseInt(i[0])&&(s=Date.parse(new Date(a))===Date.parse(new Date(r))?l.substring(11,16):l.substring(5,16)),s},checked:function(){for(var e=this,t=[],n=0;n<e.waitData.length;n++)if(e.surplusNodeId[0])for(var s=0;s<e.surplusNodeId[0].length;s++)parseInt(e.waitData[n].nodeId)===parseInt(e.surplusNodeId[0][s])&&t.push(n);for(var o=0;o<t.length;o++)this.$refs.multipleTable.toggleRowSelection(e.waitData[t[o]],!0)},getListAxios:function(e,t,n,s,o){i.default.openLoading("加载中..."),"post"===s?Object(a.a)({method:"post",url:e,data:t}).then(function(e){i.default.closeLoading(),n&&n(e)}).catch(function(e){i.default.closeLoading(),o&&o()}):Object(a.a)({method:"get",url:e,params:t}).then(function(e){i.default.closeLoading(),n&&n(e)}).catch(function(e){i.default.closeLoading(),o&&o()})}},filters:{timeFile:function(e){return e.substring(0,e.length-1)}},mounted:function(){var t=this;t.getNodeNum(),t.local_time(),document.getElementById("searchVal").onkeyup=function(e){"13"===e.keyCode&&t.getListFn("",document.getElementById("searchVal").value)}},destroyed:function(){i.default.goBack()}},d=(n(790),n(58)),l=Object(d.a)(r,s,[],!1,null,null,null);l.options.__file="src/views/videoNodesExamine/videoNodesExamine.vue";t.default=l.exports},545:function(e,t){e.exports=function(e){return"string"!=typeof e?e:(/^['"].*['"]$/.test(e)&&(e=e.slice(1,-1)),/["'() \t\n]/.test(e)?'"'+e.replace(/"/g,'\\"').replace(/\n/g,"\\n")+'"':e)}},602:function(e,t,n){var s=n(791);"string"==typeof s&&(s=[[e.i,s,""]]);var o={hmr:!0,transform:void 0,insertInto:void 0};n(156)(s,o);s.locals&&(e.exports=s.locals)},790:function(e,t,n){"use strict";var s=n(602);n.n(s).a},791:function(e,t,n){var s=n(545);(e.exports=n(155)(!1)).push([e.i,"\n.nodesContainer {\n  font-size: 0;\n  width: 1200px;\n  margin: 36px auto 0;\n  background: #F6F7FA;\n}\n.nodesContainer .nodesTop {\n    position: relative;\n    padding-bottom: 16px;\n    border-bottom: 2px solid;\n    border-color: rgba(185, 186, 191, 0.2);\n    margin-bottom: 16px;\n}\n.nodesContainer .nodesTop .nodesOne {\n      display: inline-block;\n}\n.nodesContainer .nodesTop .nodesTopTitle {\n      font-size: 20px;\n      color: #2C343A;\n      font-weight: 600;\n      margin-right: 24px;\n      display: inline-block;\n}\n.nodesContainer .nodesTop .nodesTopNum {\n      display: inline-block;\n      font-size: 14px;\n      text-align: center;\n      color: #FFFFFF;\n}\n.nodesContainer .nodesTop .nodesTopNum span {\n        width: 77px;\n        height: 22px;\n        background: #4B67D6;\n        border-radius: 3px;\n        line-height: 22px;\n        display: inline-block;\n        cursor: pointer;\n}\n.nodesContainer .nodesTop .nodesTopNum i {\n        display: inline-block;\n        min-width: 11px;\n        height: 16px;\n        border-radius: 16px;\n        position: relative;\n        top: -8px;\n        right: 11px;\n        background: #FF7E4D;\n        line-height: 16px;\n        text-align: center;\n        padding: 2px 4px;\n}\n.nodesContainer .nodesTop .nodesTwo {\n      display: inline-block;\n      position: absolute;\n      right: 0;\n      top: 0;\n}\n.nodesContainer .nodesTop .nodesTwo div {\n        display: inline-block;\n        width: 54px;\n        font-size: 18px;\n        margin-left: 48px;\n        color: #A7A9AC;\n        cursor: pointer;\n}\n.nodesContainer .nodesTop .nodesTwo div.active {\n          color: #2C343A;\n          font-weight: 600;\n          border-bottom: 4px solid #4B67D6;\n          padding-bottom: 18px;\n}\n.nodesContainer .nodeSearch {\n    position: relative;\n    width: 100%;\n    height: 32px;\n    margin-bottom: 18px;\n    line-height: 32px;\n}\n.nodesContainer .nodeSearch div {\n      font-size: 18px;\n      color: #A7A9AC;\n}\n.nodesContainer .nodeSearch div span {\n        color: #FF7E4D;\n}\n.nodesContainer .nodeSearch input {\n      width: 184px;\n      height: 32px;\n      border: none;\n      border-radius: 4px;\n      position: absolute;\n      right: 74px;\n      top: 0;\n      text-indent: 6px;\n}\n.nodesContainer .nodeSearch button {\n      width: 62px;\n      height: 32px;\n      border-radius: 4px;\n      margin-left: 12px;\n      position: absolute;\n      right: 0;\n      top: 0;\n      cursor: pointer;\n      background: url("+s(n(792))+") no-repeat center;\n      background-size: inherit;\n      background-color: #4B67D6;\n}\n.nodesContainer .el-table {\n    padding: 0 25px;\n}\n.nodesContainer .el-table th.is-leaf {\n    border: none;\n}\n.nodesContainer .el-table-column {\n    font-weight: 600;\n}\n.nodesContainer .el-table th.is-leaf div {\n    font-weight: 600;\n    color: #000;\n}\n.nodesContainer .el-pagination {\n    text-align: center;\n    margin: 25px auto 33px;\n}\n",""])},792:function(e,t,n){e.exports=n.p+"seach.3a0d5692.png"}}]);