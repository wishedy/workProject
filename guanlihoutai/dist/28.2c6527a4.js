(window.webpackJsonp=window.webpackJsonp||[]).push([[28],{1005:function(t,i,n){"use strict";n.r(i);var o=function(){var n=this,t=n.$createElement,o=n._self._c||t;return o("section",{staticClass:"specialityRoot"},[o("h3",[n._v("专业入口ICON")]),n._v(" "),o("div",{staticClass:"specialityRoot-list"},[o("ul",n._l(n.list,function(i){return o("li",{key:i.navigationId,on:{click:function(t){n.click(i)}}},[o("div",{staticClass:"specialityRoot-list-title"},[n._v(n._s(i.navigationName))]),n._v(" "),o("div",{staticClass:"specialityRoot-list-img"},[o("img",{attrs:{src:i.navigationAttUrl?"http://img05.allinmd.cn/"+i.navigationAttUrl:""}})]),n._v(" "),o("div",{staticClass:"specialityRoot-list-update"},[n._v("修改")])])})),n._v(" "),o("div",{staticClass:"specialityRoot-list-publish",on:{click:n.publish}},[n._v("上线\n    ")]),n._v(" "),o("div",{staticClass:"clearBoth"})]),n._v(" "),o("div",{directives:[{name:"show",rawName:"v-show",value:n.isPopupWindow,expression:"isPopupWindow"}],staticClass:"specialityRoot-cloak"}),n._v(" "),o("div",{directives:[{name:"show",rawName:"v-show",value:n.isPopupWindow,expression:"isPopupWindow"}],staticClass:"specialityRoot-popupWindow"},[o("div",{staticClass:"el-message-box"},[o("div",{staticClass:"el-message-box__header"},[o("button",{staticClass:"el-message-box__headerbtn",attrs:{type:"button","aria-label":"Close"},on:{click:n.close}},[o("i",{staticClass:"el-message-box__close el-icon-close"})])]),n._v(" "),n._m(0),n._v(" "),o("div",{staticClass:"el-message-box__content"},[o("div",{staticClass:"el-input specialityRoot-photoWrap"},[o("div",{staticClass:"specialityRoot-photoWrap-groupPhoto"},[o("div",{staticClass:"specialityRoot-photoWrap-addPhoto"},[o("img",{directives:[{name:"show",rawName:"v-show",value:n.uploadImgProps.attUrl,expression:"uploadImgProps.attUrl"}],attrs:{width:"250px;",height:"250px;",src:n.uploadImgProps.attUrl?"http://img05.allinmd.cn/"+n.uploadImgProps.attUrl:""}}),n._v(" "),o("input",{directives:[{name:"show",rawName:"v-show",value:!n.uploadImgProps.attUrl,expression:"!uploadImgProps.attUrl"}],attrs:{type:"file",name:"file",accept:"image/jpeg,image/jpg,image/png"},on:{change:n.upload}}),n._v(" "),o("img",{directives:[{name:"show",rawName:"v-show",value:!n.uploadImgProps.attUrl,expression:"!uploadImgProps.attUrl"}],staticClass:"specialityRoot-photoWrap-addFlag",attrs:{src:"static/images/icons/icon-add34_34.png",alt:""}}),n._v(" "),o("div",{directives:[{name:"show",rawName:"v-show",value:!n.uploadImgProps.attUrl,expression:"!uploadImgProps.attUrl"}],staticClass:"specialityRoot-photoWrap-addPhotoDesc"},[n._v("上传图片")])])])])]),n._v(" "),o("div",{staticClass:"el-message-box__btns"},[o("button",{class:n.publishStyle,attrs:{type:"button"},on:{click:n.updateList}},[o("span",[n._v("上传")])])])])])])};o._withStripped=!0;var e=n(105),s=n.n(e),a=n(528),l=n.n(a),p=n(70),c=n.n(p),r=n(68),d={data:function(){return{list:[],uploadImgProps:{},isPopupWindow:!1,currentId:0,uploadSize:2,pixelRatio:{width:140,height:140}}},mounted:function(){var t=this;this.$nextTick(function(){t.init()})},destroyed:function(){r.default.goBack()},computed:{publishStyle:function(){return this.uploadImgProps.attUrl?"specialityRoot-submit":"specialityRoot-submitDefault"}},methods:{init:function(){var i=this;r.default.openLoading("加载中..."),r.default.sendAxios("specialityList",{navigationType:10,sortType:1,isValid:1,firstResult:0,maxResult:20}).then(function(t){r.default.closeLoading(),t.responseStatus&&0<t.responseData.dataList.length&&(i.list=t.responseData.dataList)}).catch(function(t){r.default.closeLoading(),r.default.axios.isCancel(t)||i.$allin_confirm({title:"提示",content:"查询失败",type:"notice"})})},publish:function(){var n=this;n.$allin_confirm({title:"提示",content:"确定将当前的专业入口图片上传到外网么？",done:function(){for(var t=[],i=0;i<n.list.length;i++)n.list[i].changeState&&(delete n.list[i].changeState,void 0===n.list[i].imageId&&(n.list[i].imageId=""),t.push(n.list[i]));if(0===t.length)return n.$allin_confirm({title:"提示",type:"notice",content:"上线外网失败！原因：未修改任何专业",btnName:"知道了"}),!1;r.default.openLoading("发布中..."),r.default.sendAxios("specialityPublish",{navigationList:c()(t)}).then(function(t){r.default.closeLoading(),t.responseStatus?(n.$allin_confirm({title:"提示",type:"notice",content:"已上线到外网",btnName:"知道了"}),n.init()):n.$allin_confirm({title:"提示",type:"notice",content:"上线到外网失败",btnName:"知道了"})}).catch(function(t){r.default.closeLoading(),r.default.axios.isCancel(t)||n.$allin_confirm({title:"提示",content:"上线到外网失败",btnName:"知道了",type:"notice"})})}})},click:function(t){this.uploadImgProps={},this.currentId=t.navigationId,this.isPopupWindow=!0},close:function(){this.currentId=0,this.isPopupWindow=!1},updateList:function(){if(0===l()(this.uploadImgProps).length)return!1;for(var t=0;t<this.list.length;t++)if(this.list[t].navigationId===this.currentId){this.list[t].navigationAttFormat=this.uploadImgProps.extName,this.list[t].navigationAttType=this.uploadImgProps.attType,this.list[t].navigationAttSize=this.uploadImgProps.attSize,this.list[t].navigationAttHeight=this.uploadImgProps.attHeight,this.list[t].navigationAttWidth=this.uploadImgProps.attWidth,this.list[t].dynaHeight=this.uploadImgProps.attHeight,this.list[t].dynaWidth=this.uploadImgProps.attWidth,this.list[t].navigationAttUrl=this.uploadImgProps.attUrl,this.list[t].visitSiteId=25,this.list[t].changeState=!0,this.currentId=0;break}this.close()},upload:function(t){var n=this,o=t.target.files[0];if(!o)return!1;if(o.size/1024/1024>this.uploadSize)return this.$allin_confirm({title:"提示",content:"图片最大不超过"+this.uploadSize+"M，不可上传",type:"notice"}),!1;var e=this;if(!o.type.match(/image.*/))return this.$allin_confirm({title:"提示",content:"仅支持JPG/JPEG/PNG格式的图片",type:"notice"}),!1;var a=new FileReader;a.onload=function(){var i=new Image;i.src=a.result,setTimeout(function(){if(i.width<e.pixelRatio.width||i.height<e.pixelRatio.height)e.$allin_confirm({title:"提示",type:"notice",content:"上传失败，图片尺寸小于width: "+e.pixelRatio.width+"px; height: "+e.pixelRatio.height+"px;"});else{var t={fileContent:"",extName:"",watermark:1};s()(t,{extName:o.type.split("/")[1],fileContent:i.src.split(",")[1]}),r.default.openLoading("上传中..."),r.default.sendAxios("uploadImg",t).then(function(t){r.default.closeLoading(),t.responseStatus?n.uploadImgProps=t.responseData.data_list:n.$allin_confirm({title:"提示",content:"修改图片失败，请重新上传",type:"notice"})}).catch(function(t){r.default.closeLoading(),r.default.axios.isCancel(t)||n.$allin_confirm({title:"提示",content:"修改图片失败，请重新上传",type:"notice"})})}},100)},a.readAsDataURL(o)}}},u=(n(915),n(58)),h=Object(u.a)(d,o,[function(){var t=this,i=t.$createElement,n=t._self._c||i;return n("div",{staticClass:"specialityRoot-title"},[n("h6",[t._v("修改图片")])])}],!1,null,"063ca054",null);h.options.__file="src/views/operationalConfiguration/speciality.vue";i.default=h.exports},528:function(t,i,n){t.exports={default:n(529),__esModule:!0}},529:function(t,i,n){n(530),t.exports=n(23).Object.keys},530:function(t,i,n){var o=n(157),e=n(80);n(531)("keys",function(){return function(t){return e(o(t))}})},531:function(t,i,n){var e=n(60),a=n(23),s=n(71);t.exports=function(t,i){var n=(a.Object||{})[t]||Object[t],o={};o[t]=i(n),e(e.S+e.F*s(function(){n(1)}),"Object",o)}},682:function(t,i,n){var o=n(916);"string"==typeof o&&(o=[[t.i,o,""]]);var e={hmr:!0,transform:void 0,insertInto:void 0};n(156)(o,e);o.locals&&(t.exports=o.locals)},915:function(t,i,n){"use strict";var o=n(682);n.n(o).a},916:function(t,i,n){(t.exports=n(155)(!1)).push([t.i,"\n.clearBoth[data-v-063ca054] {\n  clear: both;\n}\n.specialityRoot .specialityRoot-list[data-v-063ca054] {\n  background: #FFFFFF;\n  box-shadow: 0 4px 10px 0 rgba(42, 53, 102, 0.04);\n  border-radius: 3px;\n  margin: 0 auto;\n  width: 880px;\n}\n.specialityRoot .specialityRoot-list ul[data-v-063ca054] {\n    padding-top: 40px;\n}\n.specialityRoot .specialityRoot-list ul li[data-v-063ca054] {\n      cursor: pointer;\n      width: 160px;\n      margin-left: 23px;\n      float: left;\n}\n.specialityRoot .specialityRoot-list ul li .specialityRoot-list-title[data-v-063ca054] {\n        font-family: PingFangSC-Regular;\n        font-size: 16px;\n        color: #555555;\n        letter-spacing: 0;\n        line-height: 16px;\n        text-align: center;\n        margin-bottom: 18px;\n}\n.specialityRoot .specialityRoot-list ul li .specialityRoot-list-img[data-v-063ca054] {\n        width: 158px;\n        height: 158px;\n        background: #F7F9FC;\n        border: 1px solid #E6E6E8;\n        border-radius: 3px;\n}\n.specialityRoot .specialityRoot-list ul li .specialityRoot-list-img img[data-v-063ca054] {\n          width: 158px;\n          height: 158px;\n}\n.specialityRoot .specialityRoot-list ul li .specialityRoot-list-update[data-v-063ca054] {\n        border: 1px solid #cad1ed;\n        border-radius: 3px;\n        text-align: center;\n        width: 158px;\n        height: 30px;\n        line-height: 30px;\n        font-size: 14px;\n        color: #4B67D6;\n        margin-top: 18px;\n}\n.specialityRoot .specialityRoot-list ul li[data-v-063ca054]:nth-child(4n+1) {\n      margin-left: 80px;\n}\n.specialityRoot .specialityRoot-list ul li[data-v-063ca054]:nth-child(n+5) {\n      margin-top: 40px;\n}\n.specialityRoot .specialityRoot-list .specialityRoot-list-publish[data-v-063ca054] {\n    cursor: pointer;\n    float: left;\n    margin: 30px 0 30px 630px;\n    width: 158px;\n    height: 32px;\n    background: #3846DC;\n    border-radius: 3px;\n    font-family: PingFangSC-Medium;\n    font-size: 14px;\n    color: #FFFFFF;\n    text-align: center;\n    line-height: 32px;\n}\n.specialityRoot h3[data-v-063ca054] {\n  margin: 36px auto 25px auto;\n  width: 880px;\n  font-family: PingFangSC-Medium;\n  font-size: 20px;\n  color: #2C343A;\n  letter-spacing: 0;\n  line-height: 20px;\n}\n.specialityRoot-cloak[data-v-063ca054] {\n  position: fixed;\n  left: 0;\n  top: 0;\n  width: 100%;\n  height: 100%;\n  z-index: 10;\n  opacity: 0.7;\n  background: #000000;\n}\n.specialityRoot-popupWindow[data-v-063ca054] {\n  z-index: 11;\n  position: fixed;\n  left: 0%;\n  top: 25%;\n  bottom: 0;\n  right: 0;\n  text-align: center;\n}\n.specialityRoot-popupWindow .el-message-box__btns[data-v-063ca054] {\n    padding: 10px 15px 0;\n    text-align: center;\n}\n.specialityRoot-popupWindow .el-message-box__btns .specialityRoot-submit[data-v-063ca054] {\n      cursor: pointer;\n      width: 160px;\n      height: 41px;\n      background: #4B67D6;\n      border-radius: 3px;\n      font-family: PingFangSC-Regular;\n      font-size: 15px;\n      color: #FFFFFF;\n      letter-spacing: 0;\n      text-align: center;\n      line-height: 15px;\n}\n.specialityRoot-popupWindow .el-message-box__btns .specialityRoot-submitDefault[data-v-063ca054] {\n      cursor: pointer;\n      width: 160px;\n      height: 41px;\n      background: #b5b8c3;\n      border-radius: 3px;\n      font-family: PingFangSC-Regular;\n      font-size: 15px;\n      color: #FFFFFF;\n      letter-spacing: 0;\n      text-align: center;\n      line-height: 15px;\n}\n.specialityRoot-popupWindow .el-message-box[data-v-063ca054] {\n    width: 380px;\n    height: 447px;\n}\n.specialityRoot-popupWindow .el-message-box .el-message-box__content[data-v-063ca054] {\n      position: relative;\n      padding: 28px 45px;\n      color: #606266;\n      font-size: 14px;\n}\n.specialityRoot-popupWindow .el-message-box .el-message-box__content .specialityRoot-photoWrap-addPhoto[data-v-063ca054] {\n        width: 250px;\n        height: 250px;\n        background: #F7F9FC;\n        border: 1px solid #E6E6E8;\n        border-radius: 4px;\n        float: left;\n        z-index: 1;\n}\n.specialityRoot-popupWindow .el-message-box .el-message-box__content .specialityRoot-photoWrap-addPhoto .specialityRoot-photoWrap-addPhotoDesc[data-v-063ca054] {\n          font-family: PingFangSC-Regular;\n          font-size: 15px;\n          color: #4B67D6;\n          letter-spacing: 0;\n          text-align: right;\n          line-height: 15px;\n          position: relative;\n          left: 95px;\n          width: 60px;\n          top: 100px;\n}\n.specialityRoot-popupWindow .el-message-box .el-message-box__content .specialityRoot-photoWrap-addFlag[data-v-063ca054] {\n        position: relative;\n        left: 108px;\n        top: 92px;\n}\n.specialityRoot-popupWindow .el-message-box .el-message-box__content input[data-v-063ca054] {\n        width: 250px;\n        height: 250px;\n        cursor: pointer;\n        position: absolute;\n        opacity: 0;\n        outline: none;\n        z-index: 2;\n}\n.specialityRoot-popupWindow .el-message-box .specialityRoot-title[data-v-063ca054] {\n      color: #222222;\n      letter-spacing: 0;\n      line-height: 24px;\n      text-align: center;\n}\n.specialityRoot-popupWindow .el-message-box .specialityRoot-photoWrap .specialityRoot-photoWrap-groupPhoto[data-v-063ca054] {\n      margin-top: 18px;\n      width: 250px;\n      height: 250px;\n      margin: 0 auto;\n}\n",""])}}]);