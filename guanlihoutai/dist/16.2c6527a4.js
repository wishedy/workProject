(window.webpackJsonp=window.webpackJsonp||[]).push([[16],{525:function(t,e,a){"use strict";e.a={fullSpanceVaild:function(t,e,a){""===e.trim()?a(new Error("值不能全为空")):a()},isPositiveInteger:function(t,e,a){/^[0-9]*[1-9][0-9]*$/.test(e)&&"0"!=e?a():a(new Error("必须为正整数"))},liveCustomerIdList:function(t,e,a){if(-1<e.indexOf("，"))return a(new Error("请使用半角逗号分隔")),!1;if(-1<e.indexOf(",")){for(var n=e.split(","),i=0;i<n.length;i++){var o=n[i];if(!/\d{13}/.test(o))return a(new Error("请输入正确的直播用户Id，多个用户Id之间使用逗号分隔")),!1}a()}else{if(!/\d{13}/.test(e))return a(new Error("请输入正确的直播用户Id，多个用户Id之间使用逗号分隔")),!1;a()}}}},528:function(t,e,a){t.exports={default:a(529),__esModule:!0}},529:function(t,e,a){a(530),t.exports=a(23).Object.keys},530:function(t,e,a){var n=a(157),i=a(80);a(531)("keys",function(){return function(t){return i(n(t))}})},531:function(t,e,a){var i=a(60),o=a(23),r=a(71);t.exports=function(t,e){var a=(o.Object||{})[t]||Object[t],n={};n[t]=e(a),i(i.S+i.F*r(function(){a(1)}),"Object",n)}},655:function(t,e,a){},656:function(t,e,a){},657:function(t,e,a){var n=a(904);"string"==typeof n&&(n=[[t.i,n,""]]);var i={hmr:!0,transform:void 0,insertInto:void 0};a(156)(n,i);n.locals&&(t.exports=n.locals)},901:function(t,e,a){"use strict";var n=a(655);a.n(n).a},902:function(t,e,a){"use strict";var n=a(656);a.n(n).a},903:function(t,e,a){"use strict";var n=a(657);a.n(n).a},904:function(t,e,a){(t.exports=a(155)(!1)).push([t.i,'\n@charset "UTF-8";\n/* 栏目后台页通用列表样式*/\n.column-manager-main-container {\n  width: 1200px;\n  margin: 0 auto;\n  background: #F6F7FA;\n  margin-top: 32px;\n}\n.column-manager-main-container h3 {\n    ont-family: PingFangSC-Semibold;\n    font-size: 20px;\n    color: #2C343A;\n    letter-spacing: 0;\n    line-height: 20px;\n    margin-bottom: 25px;\n}\n.column-manager-main-container .column-manager-search-area {\n    padding: 25px 0 0;\n    background: #ffffff;\n    box-shadow: 0 4px 10px 0 rgba(42, 53, 102, 0.04);\n    border-radius: 4px;\n    margin-bottom: 30px;\n}\n.column-manager-main-container .column-manager-search-area .el-input .el-input__inner {\n      background: #F7F9FC;\n      border: 1px solid #E6E6E8;\n      border-radius: 4px;\n}\n.column-manager-main-container .column-manager-search-area .column-search-submit button:nth-of-type(1) {\n      border: none;\n}\n.column-manager-main-container .column-manager-search-area .column-search-submit button:nth-of-type(2) {\n      color: #4B67D6;\n      border: 1px solid #4B67D6;\n      border-radius: 4px;\n}\n.column-manager-main-container .column-manager-button {\n    margin-bottom: 30px;\n}\n.column-manager-main-container .column-manager-button button {\n      color: #4B67D6;\n      border: 1px solid #4B67D6;\n      border-radius: 3px;\n}\n.column-manager-main-container .column-manager-button button span {\n        padding-right: 2px;\n}\n.column-manager-main-container .column-manager-table {\n    margin-bottom: 30px;\n}\n.column-manager-main-container .column-manager-table .el-table .cell {\n      font-family: PingFangSC-Regular;\n      font-size: 14px;\n      color: #333333;\n      letter-spacing: 0;\n      line-height: 1.5;\n}\n.column-manager-main-container .column-manager-table th.is-leaf {\n      font-weight: bold;\n}\n.column-manager-main-container .column-manager-table button {\n      width: 74px;\n      height: 28px;\n      padding: 0;\n      border: 1px solid #4B67D6;\n      border-radius: 3px;\n      font-family: PingFangSC-Regular;\n      font-size: 13px;\n      color: #4B67D6;\n      letter-spacing: 0;\n}\n.column-manager-main-container .column-manager-table button.changeState {\n        background: #EDF1FF;\n        border: 1px solid #4B67D6;\n        border-radius: 3px;\n        font-family: PingFangSC-Regular;\n        color: #4B67D6;\n        font-size: 13px;\n        letter-spacing: 0;\n        line-height: 1.2;\n}\n.column-manager-main-container .column-manager-table button.changeState.remove {\n          background: #FFEBE3;\n          border: 1px solid #FF7E4D;\n          color: #FF7E4D;\n}\n.column-manager-main-container .column-manager-table .column-table-index-btn {\n      background: #4B67D6;\n      border-radius: 3px;\n      font-family: PingFangSC-Regular;\n      font-size: 13px;\n      color: #FFFFFF;\n      letter-spacing: 0;\n      line-height: 13px;\n}\n.column-manager-main-container .column-manager-pagination {\n    float: right;\n}\n',""])},967:function(t,e,a){"use strict";a.r(e);var n=function(){var a=this,t=a.$createElement,n=a._self._c||t;return n("section",{staticClass:"column-manager-main-container course-type-video-select"},[n("h3",[a._v(a._s(a.courseName)+"--选集视频")]),a._v(" "),n("section",{staticClass:"column-manager-search-area"},[n("el-form",{attrs:{"label-width":"120px"}},[n("el-row",[n("el-col",{attrs:{span:5}},[n("el-form-item",{attrs:{label:"视频ID"}},[n("el-input",{attrs:{placeholder:"输入视频ID"},model:{value:a.searchConditionData.refId,callback:function(t){a.$set(a.searchConditionData,"refId",t)},expression:"searchConditionData.refId"}})],1)],1),a._v(" "),n("el-col",{attrs:{span:5}},[n("el-form-item",{attrs:{label:"选集名称"}},[n("el-input",{attrs:{placeholder:"输入选集名称"},model:{value:a.searchConditionData.anthologyNameLike,callback:function(t){a.$set(a.searchConditionData,"anthologyNameLike",t)},expression:"searchConditionData.anthologyNameLike"}})],1)],1),a._v(" "),n("el-col",{attrs:{span:8}},[n("el-form-item",{attrs:{label:"添加时间"}},[n("el-date-picker",{attrs:{type:"daterange","range-separator":"-","start-placeholder":"不限","end-placeholder":"不限","value-format":"yyyy-MM-dd HH:mm:ss","default-time":["00:00:00","23:59:59"]},model:{value:a.searchConditionCreateTime,callback:function(t){a.searchConditionCreateTime=t},expression:"searchConditionCreateTime"}})],1)],1),a._v(" "),n("el-col",{attrs:{span:5}},[n("el-form-item",{attrs:{label:"状态"}},[n("el-select",{attrs:{placeholder:"不限"},model:{value:a.searchConditionData.isValid,callback:function(t){a.$set(a.searchConditionData,"isValid",t)},expression:"searchConditionData.isValid"}},[n("el-option",{attrs:{label:"不限",value:""}}),a._v(" "),n("el-option",{attrs:{label:"已上架",value:"1"}}),a._v(" "),n("el-option",{attrs:{label:"已下架",value:"0"}})],1)],1)],1)],1),a._v(" "),n("el-row",[n("el-col",[n("el-form-item",{staticClass:"column-search-submit",staticStyle:{float:"right","margin-right":"50px"}},[n("el-button",{on:{click:a.clearBtnOnClick}},[a._v("清空条件")]),a._v(" "),n("el-button",{on:{click:a.filterBtnOnClick}},[a._v("筛选")])],1)],1)],1)],1)],1),a._v(" "),n("section",{staticClass:"column-manager-button"},[n("el-row",[n("el-col",[n("el-button",{on:{click:a.createBtnOnClick}},[n("span",{staticClass:"el-icon-circle-plus"}),a._v("新增选集")])],1)],1)],1),a._v(" "),n("section",{staticClass:"column-manager-table"},[n("el-table",{staticStyle:{width:"100%"},attrs:{data:a.tableData,fit:!0}},[n("el-table-column",{attrs:{formatter:a.formatterRefId,prop:"refId",width:"140",label:"视频ID"}}),a._v(" "),n("el-table-column",{attrs:{prop:"sortId",label:"选集顺序"}}),a._v(" "),n("el-table-column",{attrs:{formatter:a.formatterCustomerIdList,prop:"customerIdList",width:"135",label:"用户ID"}}),a._v(" "),n("el-table-column",{attrs:{prop:"customerNameList",formatter:a.formatterCustomerNameList,width:"120",label:"用户名字"}}),a._v(" "),n("el-table-column",{attrs:{prop:"anthologyName",width:"180",label:"选集名称"}}),a._v(" "),n("el-table-column",{attrs:{prop:"anthologyNum",label:"选集总数"}}),a._v(" "),n("el-table-column",{attrs:{prop:"columnName",width:"180",label:"栏目"}}),a._v(" "),n("el-table-column",{attrs:{prop:"refDesc",width:"180",label:"一句话简介"}}),a._v(" "),n("el-table-column",{attrs:{formatter:a.formatterDate,prop:"createTime",width:"100",label:"添加时间"}}),a._v(" "),n("el-table-column",{attrs:{formatter:a.formatterStatus,prop:"isValid",label:"状态"}}),a._v(" "),n("el-table-column",{attrs:{label:"操作",width:"200",fixed:"right"},scopedSlots:a._u([{key:"default",fn:function(e){return[n("el-button",{on:{click:function(t){a.tableEditBtnOnClick(e.row)}},nativeOn:{keydown:function(t){t.preventDefault()}}},[a._v("编辑")]),a._v(" "),e.row.isValid?n("el-button",{staticClass:"changeState remove",on:{click:function(t){a.tableRemoveOnClick(e.row)}},nativeOn:{keydown:function(t){t.preventDefault()}}},[a._v("下架\n          ")]):a._e(),a._v(" "),e.row.isValid?a._e():n("el-button",{staticClass:"changeState",on:{click:function(t){a.tableRemoveOnClick(e.row)}},nativeOn:{keydown:function(t){t.preventDefault()}}},[a._v("上架\n          ")])]}}])})],1)],1),a._v(" "),n("el-row",[n("el-col",[n("section",{staticClass:"column-manager-pagination"},[n("el-pagination",{attrs:{"current-page":a.paginationData.currentPage,layout:"total, prev, pager, next, jumper ,sizes",total:a.paginationData.total,"page-sizes":[10,20,30,40],"page-size":a.paginationData.pageSize},on:{"size-change":a.handleSizeChange,"current-change":a.handleCurrentChange}})],1)])],1),a._v(" "),n("videoSelectDialog",{attrs:{dialogShow:a.editDialogData.dialogShow,newDialog:a.editDialogData.newDialog,dialogData:a.editDialogData.dialogData},on:{closeDialog:a.closeDialogHandle}})],1)},i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-dialog",{staticClass:"video-select-dialog",attrs:{visible:e.editShow,width:"70%","before-close":e.handleClose,"close-on-click-modal":!1,"lock-scroll":!1,center:""},on:{"update:visible":function(t){e.editShow=t}}},[a("div",{staticClass:"dialog-title",attrs:{slot:"title"},slot:"title"},[e._v(e._s(e.editTitle))]),e._v(" "),a("el-form",{ref:"editForm",attrs:{"label-width":"100px",model:e.editData,rules:e.rules}},[a("el-row",[a("el-col",{attrs:{span:8}},[e.newDialog?e._e():a("el-form-item",{attrs:{label:"选集顺序",prop:"sortId"}},[a("el-input",{attrs:{placeholder:"请输入选集顺序"},model:{value:e.editData.sortId,callback:function(t){e.$set(e.editData,"sortId",t)},expression:"editData.sortId"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"选集名称",prop:"anthologyName"}},[a("el-input",{attrs:{placeholder:"请输入选集名称"},model:{value:e.editData.anthologyName,callback:function(t){e.$set(e.editData,"anthologyName",t)},expression:"editData.anthologyName"}})],1)],1)],1),e._v(" "),a("el-row",[a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"用户ID",prop:"customerIdList"}},[a("el-input",{attrs:{placeholder:"自动读取",disabled:""},model:{value:e.editData.customerIdList,callback:function(t){e.$set(e.editData,"customerIdList",t)},expression:"editData.customerIdList"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:16}},[a("el-form-item",{attrs:{label:"用户姓名",prop:"customerNameList"}},[a("el-input",{attrs:{placeholder:"自动读取",disabled:""},model:{value:e.editData.customerNameList,callback:function(t){e.$set(e.editData,"customerNameList",t)},expression:"editData.customerNameList"}})],1)],1)],1),e._v(" "),a("el-row",[a("el-col",[a("el-form-item",{attrs:{label:"一句话介绍",prop:"refDesc"}},[a("el-input",{attrs:{type:"textarea",placeholder:"请输入选集介绍内容"},model:{value:e.editData.refDesc,callback:function(t){e.$set(e.editData,"refDesc",t)},expression:"editData.refDesc"}})],1)],1)],1),e._v(" "),a("el-row",[a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"视频ID"}},[a("el-input",{attrs:{placeholder:"视频ID，可以为空"},on:{change:e.videoIdChange},model:{value:e.editData.refId,callback:function(t){e.$set(e.editData,"refId",t)},expression:"editData.refId"}})],1)],1)],1),e._v(" "),a("el-row",[a("el-col",{attrs:{span:6,offset:18}},[a("el-button",{attrs:{type:"primary"},on:{click:e.submitBtnOnClick}},[e._v("发布")])],1)],1)],1)],1)};i._withStripped=n._withStripped=!0;var o=a(528),r=a.n(o),l=a(525),s=a(69),c=a(59),d=a(68),u={name:"videoSelectDialog",props:{dialogShow:{type:Boolean,default:!1},newDialog:{type:Boolean,required:!1},dialogData:{type:Object,required:!1}},data:function(){return{editTitle:"",editShow:this.dialogShow,columnId:this.$route.query.columnId,courseId:this.$route.query.courseId,editData:{id:"",sortId:"",anthologyName:"",customerIdList:"",customerNameList:"",refDesc:"",refId:"",isValid:""},rules:{sortId:[{required:!0,message:"选集序号不能为空",trigger:"blur"},{validator:l.a.isPositiveInteger,message:"选集序号必须为正整数",trigger:"blur"}],anthologyName:[{required:!0,message:"选集名称不能为空",trigger:"blur"},{max:30,message:"最长30个字"}],refDesc:[{required:!0,message:"一句话介绍不能为空",trigger:"blur"},{max:50,message:"最长50个字"}]}}},watch:{dialogShow:function(t){if(this.editShow=t){for(var e in this.$refs.editForm&&this.$refs.editForm.clearValidate(),this.editData)this.editData[e]="";this.newDialog?this.editTitle="新增选集":(this.editTitle="编辑选集",this.dialogData&&(this.editData.id=this.dialogData.id,this.editData.refId=this.dialogData.refId,this.editData.anthologyName=this.dialogData.anthologyName,this.getDetailData()))}}},methods:{getDetailData:function(){var a=this;this.editShow=!1,d.default.openLoading("加载中..."),Object(c.a)({method:s.a.getCourseTypeVideoDetailData.type,url:s.a.getCourseTypeVideoDetailData.url,params:{columnId:this.columnId,columnSubId:this.courseId,refId:this.editData.refId,id:this.editData.id}}).then(function(t){if(d.default.closeLoading(),a.editShow=!0,t&&t.data&&t.data.responseObject&&t.data.responseObject.responseData){var e=t.data.responseObject.responseData;a.editData.customerIdList=e.customerIdList,a.editData.customerNameList=e.customerNameList,a.editData.refDesc=e.refDesc,a.editData.sortId=e.sortId}}).catch(function(t){d.default.closeLoading(),a.editShow=!0})},getVideoContentByVideoId:function(t){var n=this;Object(c.a)({method:s.a.getVideoContentByVideoIdVideoTypeColumn.type,url:s.a.getVideoContentByVideoIdVideoTypeColumn.url,params:t}).then(function(t){if(t&&t.data&&t.data.responseObject&&t.data.responseObject.responseData){var e=t.data.responseObject,a=t.data.responseObject.responseData;0<r()(a).length?a.videoId&&(n.editData.refId=a.videoId):(n.editData.refId="",e.responseMessage&&n.$message({type:"info",message:e.responseMessage}))}}).catch(function(t){n.editData.refId="",n.$message({type:"info",message:"videoId不存在或者视频已被无效"})})},submitData:function(){var e=this,t={id:this.editData.id,columnId:this.columnId,columnSubId:this.courseId,columnType:"1",anthologyName:this.editData.anthologyName,refId:this.editData.refId,refDesc:this.editData.refDesc,sortId:this.editData.sortId,visitSiteId:25},a={};for(var n in t)t[n]&&(a[n]=t[n]);t=a;var i=this.newDialog?"新增":"编辑";d.default.openLoading("加载中..."),this.editShow=!1,Object(c.a)({method:s.a.saveCourseTypeVideo.type,url:s.a.saveCourseTypeVideo.url,data:t}).then(function(t){d.default.closeLoading(),t&&t.data.responseObject&&!0===t.data.responseObject.responseStatus?e.$allin_confirm({title:"提示",content:i+"选集成功",type:"notice",done:function(){e.handleClose(!0)}}):e.$allin_confirm({title:"提示",content:i+"选集失败",type:"notice",done:function(){e.handleClose()}})}).catch(function(){d.default.closeLoading(),e.$allin_confirm({title:"提示",content:i+"选集失败",type:"notice",done:function(){e.handleClose()}})})},handleClose:function(t){this.$emit("closeDialog",t)},videoIdChange:function(t){t&&d.default.isNumber(t)?this.getVideoContentByVideoId({videoId:t}):(this.editData.refId="",this.$message({type:"info",message:"videoId不存在或者视频已被无效"}))},submitBtnOnClick:function(){var e=this;this.$refs.editForm.validate(function(t){if(!t)return!1;e.submitData()})}}},m=(a(901),a(902),a(58)),g=Object(m.a)(u,i,[],!1,null,"4ceab8f8",null);g.options.__file="src/views/columnManager/components/videoSelectDialog.vue";var h={name:"courseTypeVideoSelect",components:{videoSelectDialog:g.exports},data:function(){return{tableData:[],columnId:this.$route.query.columnId,courseId:this.$route.query.courseId,courseName:this.$route.query.courseName,searchConditionData:{refId:"",anthologyNameLike:"",createStartTime:"",createEndTime:"",isValid:""},searchConditionCreateTime:"",paginationData:{currentPage:1,firstResult:0,maxResult:0,pageSize:20,total:0},editDialogData:{dialogShow:!1,newDialog:!0,dialogData:null}}},methods:{getDataList:function(){var a=this;this.paginationData.maxResult=this.paginationData.pageSize,this.paginationData.firstResult=(this.paginationData.currentPage-1)*this.paginationData.pageSize;var t={firstResult:this.paginationData.firstResult,maxResult:this.paginationData.maxResult,sortType:1,columnId:this.columnId,columnSubId:this.courseId};for(var e in this.searchConditionData)this.searchConditionData[e]&&(t[e]=this.searchConditionData[e]);d.default.openLoading("加载中..."),Object(c.a)({method:s.a.getCourseTypeVideoTableList.type,url:s.a.getCourseTypeVideoTableList.url,params:t}).then(function(t){if(d.default.closeLoading(),t&&t.data.responseObject){var e=t.data.responseObject;a.tableData=e.items,a.paginationData.total=e.total}}).catch(function(t){d.default.closeLoading()})},updateColumnStatus:function(t){var e=this,a="";a=1==t.isValid?"视频选集下架":"视频选集上架",d.default.openLoading("加载中..."),Object(c.a)({method:s.a.saveCourseTypeVideo.type,url:s.a.saveCourseTypeVideo.url,data:{id:t.id,columnId:this.columnId,columnSubId:this.courseId,refId:t.refId,isValid:1==t.isValid?0:1}}).then(function(t){d.default.closeLoading(),t?e.$allin_confirm({title:"提示",content:a+"成功",type:"notice",done:function(){e.getDataList()}}):e.$allin_confirm({title:"提示",content:a+"失败",type:"notice"})}).catch(function(t){d.default.closeLoading(),e.$allin_confirm({title:"提示",content:a+"失败",type:"notice"})})},handleSizeChange:function(t){this.paginationData.pageSize=t,this.getDataList()},handleCurrentChange:function(t){this.paginationData.currentPage=t,this.getDataList()},clearBtnOnClick:function(){for(var t in this.searchConditionData)this.searchConditionData[t]="";this.searchConditionCreateTime=""},filterBtnOnClick:function(){Array.isArray(this.searchConditionCreateTime)&&0<this.searchConditionCreateTime.length&&(this.searchConditionData.createStartTime=this.searchConditionCreateTime[0],this.searchConditionData.createEndTime=this.searchConditionCreateTime[1]),this.paginationData.currentPage=1,this.paginationData.firstResult=0,this.getDataList()},createBtnOnClick:function(){this.editDialogData.dialogShow=!0,this.editDialogData.newDialog=!0},closeDialogHandle:function(t){this.editDialogData.dialogShow=!1,1==t&&this.getDataList()},tableEditBtnOnClick:function(t){this.editDialogData.dialogShow=!0,this.editDialogData.newDialog=!1,this.editDialogData.dialogData=t},tableRemoveOnClick:function(t){var e=this,a="";a=1==t.isValid?"确定将此视频选集下架吗？":"确定将此视频选集上架吗？",this.$allin_confirm({title:"提示",content:a,done:function(){e.updateColumnStatus(t)}})},formatterRefId:function(t){return t.refId?t.refId:"待配置"},formatterCustomerIdList:function(t){return t.customerIdList?t.customerIdList:"待配置"},formatterCustomerNameList:function(t){return t.customerNameList?t.customerNameList:"待配置"},formatterStatus:function(t,e){return 0==t.isValid?"已下架":"已上架"},formatterDate:function(){for(var t=arguments.length,e=Array(t),a=0;a<t;a++)e[a]=arguments[a];return e[2].substring(0,e[2].length-2)}},mounted:function(){var e=this;this.getDataList(),document.onkeydown=function(t){13==t.keyCode&&(e.editDialogData.dialogShow||e.getDataList())}},destroyed:function(){document.onkeydown=null,d.default.goBack()}},p=(a(903),Object(m.a)(h,n,[],!1,null,null,null));p.options.__file="src/views/columnManager/courseTypeVideoSelect.vue";e.default=p.exports}}]);