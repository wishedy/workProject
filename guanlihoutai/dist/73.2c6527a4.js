(window.webpackJsonp=window.webpackJsonp||[]).push([[73],{621:function(t,e,i){var n=i(835);"string"==typeof n&&(n=[[t.i,n,""]]);var o={hmr:!0,transform:void 0,insertInto:void 0};i(156)(n,o);n.locals&&(t.exports=n.locals)},834:function(t,e,i){"use strict";var n=i(621);i.n(n).a},835:function(t,e,i){(t.exports=i(155)(!1)).push([t.i,'\n@charset "UTF-8";\n.productPointDescCont {\n  width: 1200px;\n  margin: 0 auto;\n  background-color: #f6f7fa;\n  /*产品列表页*/\n  /*提交按钮*/\n  /*视频时长提示语句*/\n}\n.productPointDescCont .productPointDesc {\n    font-size: 0;\n    margin: 36px auto 36px;\n    padding: 36px 0 5px;\n    background: #ffffff;\n    width: 1200px;\n}\n.productPointDescCont .productLists {\n    margin-bottom: 50px;\n}\n.productPointDescCont .productLists .timeInput {\n      display: inline-block;\n      width: 55px;\n}\n.productPointDescCont .productLists .changeStateBotton {\n      color: red;\n      cursor: pointer;\n      border: 1px solid red;\n      padding: 6px 10px;\n}\n.productPointDescCont .submitBtn {\n    width: 140px;\n    height: 32px;\n    background: #3846dc;\n    border-radius: 3px;\n    line-height: 0;\n    font-size: 14px;\n    font-weight: 500;\n    color: white;\n}\n.productPointDescCont .cancleBtn {\n    width: 140px;\n    height: 32px;\n    background: #a1a8c0;\n    border-radius: 3px;\n    font-size: 14px;\n    font-weight: 500;\n    color: white;\n    line-height: 0;\n}\n.productPointDescCont .addPoint button {\n    width: 83px;\n    height: 32px;\n    background: #edf1ff;\n    border-radius: 3px;\n    cursor: pointer;\n    font-size: 12px;\n    font-weight: 400;\n    color: #4b67d6;\n    line-height: 12px;\n    padding: 0;\n}\n.productPointDescCont .videoPointTip {\n    margin-left: 12px;\n    font-size: 12px;\n    color: #3846dc;\n}\n.width300 {\n  width: 390px;\n}\n.el-dialog__body .el-form-item {\n  display: inline-block;\n}\n.el-dialog__body .searchBtn {\n  width: 100px;\n  height: 32px;\n  background: #3846dc;\n  border-radius: 3px;\n  line-height: 32px;\n  font-size: 14px;\n  font-weight: 500;\n  color: white;\n  margin-left: 30px;\n  cursor: pointer;\n  display: inline-block;\n  text-align: center;\n}\n.el-dialog__body .choosedProductTxt {\n  display: inline-block;\n  width: 656px;\n}\n.el-dialog__body .choosedProductTxt span {\n    width: 656px;\n    overflow: hidden;\n    text-overflow: ellipsis;\n    -webkit-line-clamp: 1;\n    -webkit-box-orient: vertical;\n    white-space: nowrap;\n    display: inline-block;\n    vertical-align: middle;\n}\n.el-dialog__body .bigImgShow {\n  cursor: pointer;\n}\n.el-table__body .el-input__inner {\n  height: 30px;\n}\n\n/*页面中列表样式*/\n.el-table th.is-leaf div {\n  font-weight: 600;\n  color: #000;\n}\n.el-table .cell {\n  width: 100%;\n  overflow: hidden;\n  text-overflow: ellipsis;\n  -webkit-line-clamp: 1;\n  -webkit-box-orient: vertical;\n  white-space: nowrap;\n}\n\n/*去除input框type为number时上下箭头*/\ninput::-webkit-outer-spin-button,\ninput::-webkit-inner-spin-button {\n  -webkit-appearance: none;\n}\ninput[type="number"] {\n  -moz-appearance: textfield;\n}\n.el-input.is-disabled .el-input__inner {\n  color: #606266;\n}\n.el-textarea.is-disabled .el-textarea__inner {\n  color: #606266;\n}\n\n/*查看大图*/\n.tableBigImgDialog {\n  font-size: 0;\n  box-sizing: border-box;\n  background: #ffffff;\n  box-shadow: 0 5px 16px 0 rgba(20, 38, 95, 0.27);\n  border-radius: 3px;\n  position: fixed;\n  top: 50%;\n  left: 50%;\n  transform: translate(-50%, -50%);\n  width: auto;\n  height: auto;\n  z-index: 10;\n}\n.tableBigImgDialog img {\n    width: 336px;\n    height: 336px;\n    vertical-align: top;\n    display: inline-block;\n}\n.nodeTimePoint {\n  margin-right: 4px;\n}\n',""])},992:function(t,e,i){"use strict";i.r(e);var n=function(){var n=this,t=n.$createElement,o=n._self._c||t;return o("div",{staticClass:"productPointDescCont"},[o("div",{staticClass:"productPointDesc"},[o("el-form",{ref:"descForm",attrs:{model:n.descForm,rules:n.descRules,"label-width":"100px"}},[o("el-form-item",{attrs:{label:"视频ID",prop:"videoId"}},[o("el-input",{staticClass:"width300",attrs:{placeholder:"请输入视频ID",disabled:!!n.isEdit&&"disabled"},model:{value:n.descForm.videoId,callback:function(t){n.$set(n.descForm,"videoId",t)},expression:"descForm.videoId"}}),n._v(" "),n.isEdit?n._e():o("el-button",{staticClass:"NewOrEditBtn",on:{click:function(t){return t.stopPropagation(),n.searchVideoIdFn(t)}}},[n._v("查询")])],1),n._v(" "),o("el-form-item",{attrs:{label:"视频标题",prop:""}},[o("el-input",{staticClass:"width300",attrs:{type:"textarea",rows:2,resize:"none",disabled:"disabled"},model:{value:n.descForm.videoName,callback:function(t){n.$set(n.descForm,"videoName",t)},expression:"descForm.videoName"}})],1),n._v(" "),o("el-form-item",{attrs:{label:"视频时长",prop:""}},[o("el-input",{staticClass:"width300",attrs:{disabled:"disabled"},model:{value:n.descForm.playTime,callback:function(t){n.$set(n.descForm,"playTime",t)},expression:"descForm.playTime"}})],1),n._v(" "),o("el-form-item",{attrs:{label:"作者",prop:""}},[o("el-input",{staticClass:"width300",attrs:{type:"textarea",rows:2,resize:"none",disabled:"disabled"},model:{value:n.descForm.videoAuthor,callback:function(t){n.$set(n.descForm,"videoAuthor",t)},expression:"descForm.videoAuthor"}})],1),n._v(" "),o("el-form-item",{staticClass:"addPoint",attrs:{label:"添加锚点",prop:"addPoint"}},[o("el-input",{staticStyle:{display:"none"},model:{value:n.descForm.addPoint,callback:function(t){n.$set(n.descForm,"addPoint",t)},expression:"descForm.addPoint"}}),n._v(" "),o("el-button",{staticClass:"el-icon-plus",on:{click:function(t){return t.stopPropagation(),n.clickAddPoint(t)}}},[n._v(" 新增产品")]),n._v(" "),o("span",{staticClass:"videoPointTip"},[n._v("*每个锚点时间间隔在6s以上")])],1),n._v(" "),o("el-table",{ref:"multipleTable",staticClass:"productLists",staticStyle:{width:"80%","margin-left":"100px"},attrs:{data:n.listDatas.nodeList}},[o("el-table-column",{attrs:{prop:"",label:"序号",width:"50",type:"index"}}),n._v(" "),o("el-table-column",{attrs:{prop:"nodeTime",label:"锚点时间",width:"210"},scopedSlots:n._u([{key:"default",fn:function(i){return[n._l(n.timeFilter(i),function(t,e){return[o("el-input",{key:e,staticClass:"timeInput",attrs:{value:t,type:"number"},on:{input:function(t){n.timeChangeFn(i.$index,t,e)}}}),n._v(" "),2!==e?o("span",{key:t.productId,staticClass:"nodeTimePoint"},[n._v(":")]):n._e()]})]}}])}),n._v(" "),o("el-table-column",{attrs:{prop:"productName",label:"产品名",width:"260"}}),n._v(" "),o("el-table-column",{attrs:{prop:"brandName",label:"所属品牌",width:"250"}}),n._v(" "),o("el-table-column",{attrs:{prop:"opUserName",label:"操作人",width:"100"}}),n._v(" "),o("el-table-column",{staticClass:"delateBtn",staticStyle:{"text-align":"center"},attrs:{label:"操作",width:"80",fixed:"right"},scopedSlots:n._u([{key:"default",fn:function(e){return[o("el-button",{staticClass:"changeStateBotton",on:{click:function(t){t.stopPropagation(),n.deletCurrentProduct(e.row,e.$index)}},nativeOn:{keydown:function(t){t.preventDefault()}}},[n._v("\n              删除\n            ")])]}}])})],1),n._v(" "),o("el-form-item",[o("el-button",{staticClass:"submitBtn",on:{click:function(t){t.stopPropagation(),n.saveProductBtn("descForm")}}},[n._v("保存")]),n._v(" "),o("el-button",{staticClass:"cancleBtn",on:{click:function(t){return t.stopPropagation(),n.goBackProductPoint(t)}}},[n._v("返回")])],1)],1)],1),n._v(" "),o("el-dialog",{attrs:{title:"选择产品",visible:n.dialogFormVisible,width:"1000px"},on:{"update:visible":function(t){n.dialogFormVisible=t}}},[o("el-form",{ref:"descFormPop",attrs:{model:n.descFormPop,rules:n.descRulesPop}},[o("el-form-item",{attrs:{label:"查询产品","label-width":n.formLabelWidth,prop:"product"}},[o("el-input",{attrs:{placeholder:"产品名称"},model:{value:n.descForm.product,callback:function(t){n.$set(n.descForm,"product",t)},expression:"descForm.product"}})],1),n._v(" "),o("el-form-item",{attrs:{label:"查询品牌","label-width":n.formLabelWidth,prop:"brand"}},[o("el-input",{attrs:{placeholder:"品牌名称"},model:{value:n.descForm.brand,callback:function(t){n.$set(n.descForm,"brand",t)},expression:"descForm.brand"}})],1),n._v(" "),o("el-form-item",{attrs:{label:"",prop:"brand"}},[o("span",{staticClass:"searchBtn",on:{click:function(t){return t.stopPropagation(),n.searchPointFn(t)}}},[n._v("查询")])]),n._v(" "),o("el-form-item",{staticStyle:{"margin-left":"52px"},attrs:{label:"",prop:"brand"}},[o("div",{staticClass:"choosedProductTxt"},[n.currentProduct.productName?o("span",[n._v('已选"'+n._s(n.currentProduct.productName)+'"')]):n._e()]),n._v(" "),o("div",{staticClass:"searchBtn",on:{click:function(t){return t.stopPropagation(),n.addCurrentProduct(t)}}},[n._v("添加产品")])])],1),n._v(" "),o("el-table",{ref:"multipleTable",staticStyle:{width:"90%","margin-left":"50px"},attrs:{data:n.proListDatas}},[o("el-table-column",{attrs:{prop:"nodeNum",label:"选择",width:"50"},scopedSlots:n._u([{key:"default",fn:function(e){return[o("el-radio",{attrs:{label:e.row.productId},nativeOn:{change:function(t){n.getRadioRow(e.row)}},model:{value:n.templateRadio,callback:function(t){n.templateRadio=t},expression:"templateRadio"}},[n._v(" \n          ")])]}}])}),n._v(" "),o("el-table-column",{attrs:{prop:"productName",label:"产品名称",width:"330"}}),n._v(" "),o("el-table-column",{attrs:{prop:"attUrl",label:"产品图",width:"100"},scopedSlots:n._u([{key:"default",fn:function(e){return[e.row.attUrl?o("img",{staticClass:"bigImgShow",attrs:{src:"/static/images/icons/icon-picture_hover_tiny.png",alt:""},on:{mouseenter:function(t){n.smallImgMouseenter(e.row)},mouseleave:n.smallImgMouseLeave}}):n._e()]}}])}),n._v(" "),o("el-table-column",{attrs:{prop:"brandName",label:"所属品牌",width:"260"}}),n._v(" "),o("el-table-column",{attrs:{prop:"isValid",label:"是否有效",width:"80",formatter:n.isValidFn}})],1),n._v(" "),10<n.totalNum?o("el-pagination",{staticStyle:{"text-align":"center",margin:"20px 0 20px"},attrs:{"current-page":n.currentPage,"page-sizes":[10,20,30,50,100],"page-size":n.pageSize,layout:"total, prev, pager, next, jumper, sizes",total:n.totalNum},on:{"size-change":n.handleSizeChange,"current-change":n.handleCurrentChange}}):n._e(),n._v(" "),o("div",{directives:[{name:"show",rawName:"v-show",value:n.bigImgDialogVisible,expression:"bigImgDialogVisible"}],staticClass:"tableBigImgDialog",on:{mouseenter:n.bigImgMouseenter,mouseleave:n.bigImgMouseLeave}},[o("img",{attrs:{src:n.bigImgPath,alt:"产品图"}})])],1)],1)};n._withStripped=!0;var r=i(59),a=i(69),d=i(68),o={data:function(){return{maxResult:10,firstResult:0,currentPage:1,pageSize:10,totalNum:0,listDatas:[],proListDatas:[],descForm:{videoId:"",addPoint:"",videoName:"",videoAuthor:"",videoLength:0},descRules:{videoId:[{required:!0,message:"请填写正确的视频id",trigger:"change blur"}],addPoint:[{required:!0,message:"请添加锚点",trigger:"change blur"}]},descFormPop:{},descRulesPop:{},isEdit:!1,dialogFormVisible:!1,formLabelWidth:"120px",bigImgDialogVisible:!1,bigImgPath:"",templateRadio:"",detailLists:[],searchProduct:"",searchBrand:"",axiosNum:0,videoId:d.default.getpara().videoId,operatorId:localStorage.getItem("userId"),operatorName:localStorage.getItem("userRealName"),userLoginName:localStorage.getItem("userLoginName"),currentProduct:[],alReadyProList:[],searchVideoId:"",isChoosePro:!1,timesArr:[]}},methods:{smallImgMouseenter:function(t){this.bigImgTimer&&clearTimeout(this.bigImgTimer),t.attUrl?(this.bigImgDialogVisible=!0,this.bigImgPath=t.attUrl):(this.bigImgDialogVisible=!1,this.bigImgPath="")},smallImgMouseLeave:function(){var t=this;t.bigImgTimer=setTimeout(function(){t.bigImgDialogVisible=!1},1e3)},bigImgMouseenter:function(){this.bigImgTimer&&clearTimeout(this.bigImgTimer)},bigImgMouseLeave:function(){this.bigImgDialogVisible=!1},handleSizeChange:function(t){this.maxResult=t,this.currentPage=1,this.firstResult=0,this.addPointFn()},handleCurrentChange:function(t){this.currentPage=t,this.firstResult=(t-1)*this.maxResult,this.addPointFn()},clickAddPoint:function(){this.firstResult=0,this.maxResult=10,this.currentPage=1,this.productName="",this.brandName="",this.descForm.product="",this.descForm.product="",this.addPointFn()},addPointFn:function(){var e=this;this.dialogFormVisible=!0;var t={firstResult:this.firstResult,maxResult:this.maxResult,productNameLike:this.productName?this.productName:void 0,brandNameLike:this.brandName?this.brandName:void 0,isValid:1};this.getListAxios(a.a.getProductMapList.url,t,function(t){e.proListDatas=[],e.totalNum=0,t&&t.data&&t.data.responseObject&&t.data.responseObject.responseData&&t.data.responseObject.responseStatus?t.data.responseObject.responseData.dataList&&0<t.data.responseObject.responseData.dataList.length&&(e.proListDatas=t.data.responseObject.responseData.dataList,e.totalNum=t.data.responseObject.responseData.totalCount):e.$message.error("数据获取失败，请重试！")})},searchPointFn:function(){this.currentPage=1,this.firstResult=0,this.productName=this.descForm.product,this.brandName=this.descForm.brand,this.addPointFn()},getRadioRow:function(t){this.currentProduct=t,this.isChoosePro=!0},isValidFn:function(t){return 1===t.isValid?"有效":"无效"},timeFilter:function(t){if(t.row.nodeTime||0===t.row.nodeTime){var e=t.row.nodeTime,i=parseInt(e/3600),n=parseInt((e-3600*i)/60),o=parseInt((e-3600*i-60*n)%60);return i?i<10&&(i="0"+i):i="00",n?n<10&&(n="0"+n):n="00",o?o<10&&(o="0"+o):o="00",[i,n,o]}},timeChangeFn:function(t,e,i){var n=this.timesArr[t];if(n||0===n){var o=parseInt(n/3600),a=parseInt((n-3600*o)/60),s=parseInt((n-3600*o-60*a)%60),r=0;r=0===i?0===e||""===e?n-3600*o:n-3600*(o-parseInt(e)):1===i?0===e||""===e?n-60*a:n-60*(a-parseInt(e)):0===e||""===e?n-s:n-s+parseInt(e),this.timesArr[t]=r}},addCurrentProduct:function(){""===this.currentProduct?this.$message.error("请选择一个产品"):(this.dialogFormVisible=!1,this.currentProduct.nodeNum=this.listDatas.length,this.currentProduct.opUserName=this.userLoginName,this.currentProduct.nodeTime=0,this.listDatas.nodeList||(this.listDatas.nodeList=[]),this.listDatas.nodeList.push(this.currentProduct),this.timesArr.push(0),this.descForm.addPoint=1)},deletCurrentProduct:function(t,e){var i=this;this.$allin_confirm({title:"提示",content:"确定删除此条锚点么？",done:function(){i.listDatas.nodeList.splice(e,1),i.timesArr.splice(e,1)}})},searchVideoIdFn:function(){this.descForm.videoId&&this.descForm.videoId.trim()&&(this.searchVideoId=this.descForm.videoId.trim(),this.searchBtnFn())},searchBtnFn:function(){var i=this,t={firstResult:0,maxResult:10,sortType:1,videoId:this.searchVideoId};this.getListAxios(a.a.getVideoList.url,t,function(t){if(t&&t.data&&t.data.responseObject&&t.data.responseObject.responseData&&t.data.responseObject.responseData.dataList&&0<t.data.responseObject.responseData.dataList.length)for(var e in i.listDatas=t.data.responseObject.responseData.dataList[0],i.descForm.videoName=i.listDatas.videoName,i.descForm.videoAuthor=i.listDatas.videoAuthor,i.descForm.playTime=i.listDatas.playTime,i.listDatas.nodeList)i.timesArr.push(i.listDatas.nodeList[e].nodeTime);else i.listDatas=[],i.descForm.videoId="",i.descForm.videoName="",i.descForm.videoAuthor="",i.descForm.playTime="",i.searchVideoId="";i.$refs.descForm.validateField("videoId")})},saveProductBtn:function(t){var o=this;this.searchVideoId?this.descForm.videoId=this.searchVideoId:this.descForm.videoId="",this.listDatas.nodeList&&0<this.listDatas.nodeList.length?this.descForm.addPoint=1:this.descForm.addPoint="",this.$refs[t].validate(function(t){if(!t)return!1;for(var e in o.listDatas.nodeList)for(var i in o.timesArr)if(e===i&&(o.listDatas.nodeList[e].nodeTime=o.timesArr[i],e<i))return;o.detailLists=[],o.detailLists=o.listDatas.nodeList;var n={detailList:o.detailLists,opUserName:o.userLoginName,videoId:o.searchVideoId};o.getListAxios(a.a.getVideoListSave.url,n,function(t){if(t&&t.data&&t.data.responseObject&&t.data.responseObject.responseStatus){if(window.history.length<=1)return o.$router.push({path:"productAnchorPoint"}),!1;o.$router.go(-1)}},"保存失败，请重试！",a.a.getVideoListSave.type)})},goBackProductPoint:function(){if(window.history.length<=1)return this.$router.push({path:"productAnchorPoint"}),!1;this.$router.go(-1)},getListAxios:function(t,e,i,n,o,a){var s=this;d.default.openLoading("加载中..."),this.axiosNum++,"post"===o?Object(r.a)({method:"post",url:t,data:e}).then(function(t){s.axiosNum--,i&&i(t),s.axiosNum<=0&&d.default.closeLoading()}).catch(function(t){a&&a(),s.axiosNum--,s.axiosNum<=0&&d.default.closeLoading(),s.$allin_confirm({title:"提示",content:n||"获取失败，请刷新重试",type:"notice"})}):Object(r.a)({method:"get",url:t,params:e}).then(function(t){i&&i(t),s.axiosNum--,s.axiosNum<=0&&d.default.closeLoading()}).catch(function(t){a&&a(),s.axiosNum--,s.axiosNum<=0&&d.default.closeLoading(),s.$allin_confirm({title:"提示",content:n||"获取失败，请刷新重试",type:"notice"})})}},watch:{dialogFormVisible:function(){this.dialogFormVisible&&(this.templateRadio="",this.currentProduct="")}},mounted:function(){var e=this,i=d.default.getpara().videoId;this.descForm.videoId=i,(this.searchVideoId=i)&&(this.isEdit=!0,this.searchBtnFn()),document.onkeydown=function(t){13===t.keyCode&&(e.dialogFormVisible?(e.productName=e.descForm.product,e.brandName=e.descForm.brand,e.addPointFn()):i||e.searchVideoIdFn())}},destroyed:function(){d.default.goBack()}},s=(i(834),i(58)),l=Object(s.a)(o,n,[],!1,null,null,null);l.options.__file="src/views/productAnchorPoint/productPointDesc.vue";e.default=l.exports}}]);