(window.webpackJsonp=window.webpackJsonp||[]).push([[77],{618:function(e,t,r){var s=r(829);"string"==typeof s&&(s=[[e.i,s,""]]);var a={hmr:!0,transform:void 0,insertInto:void 0};r(156)(s,a);s.locals&&(e.exports=s.locals)},828:function(e,t,r){"use strict";var s=r(618);r.n(s).a},829:function(e,t,r){(e.exports=r(155)(!1)).push([e.i,"\n@charset \"UTF-8\";\n/*\n首页-广告管理——推荐广告recommendAdvertisement/课程广告curriculumAdvertisement/直播广告liveBroadcastAdvertisement\n*/\n.currAdConent {\n  width: 1200px;\n  margin: 0 auto;\n}\n\n/*title*/\n.TopTitle {\n  font-size: 20px;\n  font-weight: 600;\n  color: #2c343a;\n  line-height: 20px;\n  margin: 32px 0 20px 0;\n}\n\n/*筛选按钮*/\n.currScreeningBox {\n  position: relative;\n  width: 1200px;\n  height: 325px;\n  background: white;\n  box-shadow: 0 4px 10px 0 rgba(42, 53, 102, 0.04);\n  border-radius: 3px;\n  padding: 25px 15px;\n  box-sizing: border-box;\n}\n.currScreeningBox .currItem {\n    display: inline-block;\n    margin-bottom: 22px;\n    margin-left: 20px;\n}\n.currScreeningBox .titleName {\n    margin-right: 10px;\n    font-size: 14px;\n}\n.currScreeningBox .txtInput {\n    width: 200px;\n}\n.currScreeningBox .btnBox {\n    margin-top: 24px;\n}\n.currScreeningBox .btnBox p {\n      display: inline-block;\n      position: absolute;\n      vertical-align: middle;\n      cursor: pointer;\n}\n.currScreeningBox .btnBox .resetBtn {\n      font-size: 14px;\n      font-weight: 400;\n      color: #2c343a;\n      line-height: 14px;\n      margin-right: 20px;\n      right: 124px;\n      bottom: 32px;\n}\n.currScreeningBox .btnBox .screeningBtn {\n      right: 34px;\n      bottom: 25px;\n      width: 90px;\n      height: 32px;\n      border-radius: 3px;\n      border: 1px solid #4b67d6;\n      box-sizing: border-box;\n      line-height: 32px;\n      font-size: 14px;\n      font-weight: 400;\n      color: #4b67d6;\n      text-align: center;\n}\n\n/*按钮*/\n.el-button {\n  /*新建按钮*/\n  /*编辑按钮*/\n  /*上架按钮*/\n  /*下架按钮*/\n}\n.el-button.NewAd {\n    margin: 30px 0 30px;\n    color: #4B67D6;\n    border: 1px solid #4B67D6;\n    border-radius: 3px;\n}\n.el-button.editBtn {\n    width: 74px;\n    height: 28px;\n    padding: 0;\n    border: 1px solid #4B67D6;\n    border-radius: 3px;\n    font-size: 13px;\n    color: #4B67D6;\n    letter-spacing: 0;\n}\n.el-button.upBtn {\n    background: #EDF1FF;\n    width: 74px;\n    height: 28px;\n    padding: 0;\n    border: 1px solid #4B67D6;\n    border-radius: 3px;\n    font-size: 13px;\n    color: #4B67D6;\n    letter-spacing: 0;\n}\n.el-button.downBtn {\n    width: 74px;\n    height: 28px;\n    padding: 0;\n    background: #FFEBE3;\n    border: 1px solid #FF7E4D;\n    color: #FF7E4D;\n    border-radius: 3px;\n    font-size: 13px;\n    letter-spacing: 0;\n}\n\n/*发布按钮样式*/\n.el-button--primary {\n  width: 150px;\n  padding: 9px 15px;\n  background-color: #4B67D6;\n  border-color: #4B67D6;\n}\n.el-button--primary:focus, .el-button--primary:hover {\n  background: #4B67D6;\n}\n.el-table td:nth-child(2) .cell {\n  width: 230px;\n  overflow: hidden;\n  text-overflow: ellipsis;\n  -webkit-line-clamp: 1;\n  -webkit-box-orient: vertical;\n  white-space: nowrap;\n}\n\n/*表头样式*/\n.el-table thead {\n  font-size: 14px;\n  color: #111111;\n  letter-spacing: 0;\n  line-height: 1.1;\n}\n.tableBigImgDialog {\n  font-size: 0;\n  box-sizing: border-box;\n  background: #ffffff;\n  box-shadow: 0 5px 16px 0 rgba(20, 38, 95, 0.27);\n  border-radius: 3px;\n  position: fixed;\n  top: 50%;\n  left: 50%;\n  transform: translate(-50%, -50%);\n  width: auto;\n  height: auto;\n  z-index: 2;\n}\n.tableBigImgDialog img {\n    width: 336px;\n    height: 100%;\n    vertical-align: top;\n    display: inline-block;\n}\n.tableBigImgDialog img.eliteImg {\n      width: 502.5px;\n      height: 150px;\n}\n.tableBigImgDialog img.allinSchoolImg {\n      width: 517.5px;\n      height: 195px;\n}\n.tableBigImgDialog img.terminalImg {\n      width: 517.5px;\n      height: 72px;\n}\n.tableBigImgDialog span {\n    width: 316px;\n    position: absolute;\n    left: 0;\n    color: #222222;\n    font-size: 16px;\n    padding: 10px 10px 20px;\n    background-color: #ffffff;\n    line-height: 20px;\n    box-shadow: 0 5px 16px 0 rgba(20, 38, 95, 0.27);\n    border-radius: 0 0 3px 3px;\n}\n.tableBigImgDialog span.eliteTxt {\n      top: 150px;\n      width: 482.5px;\n}\n.tableBigImgDialog span.allinSchoolTxt {\n      top: 195px;\n      width: 497.5px;\n}\n.tableBigImgDialog span.terminalTxt {\n      top: 72px;\n      width: 497.5px;\n}\n\n/*编辑/新建弹层中的样式*/\n.el-dialog__body {\n  /*新建/编辑广告时广告id后需要一个确认按钮，当新建时广告id是不可输入的并且点击确认的*/\n  /*input输入框宽度*/\n  /*确认按钮*/\n  /*图片*/\n  /*将广告id/广告名称/精英会广告管理7:2配图前面的必填*号进行隐藏*/\n}\n.el-dialog__body .NewOrEditAd {\n    width: 80%;\n}\n.el-dialog__body .NewOrEditBtn {\n    margin: 0 0 0 10px;\n    width: 100px;\n}\n.el-dialog__body .el-input {\n    width: 50%;\n}\n.el-dialog__body .el-select .el-input {\n    width: 137%;\n}\n.el-dialog__body .el-form-item.is-success .el-input__inner {\n    border-color: #e4e7ed;\n}\n.el-dialog__body .el-button:hover {\n    color: #4B67D6;\n    border-color: #4B67D6;\n}\n.el-dialog__body .adImg336 {\n    width: 150px;\n    height: 150px;\n}\n.el-dialog__body .adImg212 {\n    width: 150px;\n    height: 95px;\n}\n.el-dialog__body .adImg464 {\n    width: 150px;\n    height: 207px;\n}\n.el-dialog__body .adImg335 {\n    width: 335px;\n    height: 100px;\n}\n.el-dialog__body .adImg1035 {\n    width: 345px;\n    height: 130px;\n}\n.el-dialog__body .adImg1035_216 {\n    width: 345px;\n    height: 72px;\n}\n.el-dialog__body .adId .el-form-item__label:before {\n    content: '';\n}\n.el-dialog__body .adName .el-form-item__label:before {\n    content: '';\n}\n.el-dialog__body .imgUrl .el-form-item__label:before {\n    content: '';\n}\n.el-dialog__body .el-input.is-disabled .el-input__inner {\n    color: #606266;\n}\n.el-dialog__body .el-textarea.is-disabled .el-textarea__inner {\n    color: #606266;\n}\n.el-dialog__body .NewOrEditAd.el-textarea {\n    width: 50%;\n}\n.el-dialog__title {\n  font-weight: 600;\n}\n.el-table th {\n  text-align: center;\n}\n.el-table th .cell {\n    font-weight: bold;\n}\n.el-table .cell {\n  text-align: center;\n}\n.el-pagination {\n  text-align: center;\n  margin: 20px 0;\n}\n.tipTxt {\n  font-size: 12px;\n}\n",""])},997:function(e,t,r){"use strict";r.r(t);var s=function(){var r=this,e=r.$createElement,s=r._self._c||e;return s("section",{staticClass:"currAdConent"},[s("div",{staticClass:"TopTitle"},[r._v("首页 > 终端页广告管理")]),r._v(" "),s("section",{staticClass:"currScreeningBox"},[s("div",{staticClass:"currItem"},[s("span",{staticClass:"titleName"},[r._v("广告id")]),r._v(" "),s("el-input",{staticClass:"txtInput",attrs:{placeholder:"广告id"},model:{value:r.searchForm.adId,callback:function(e){r.$set(r.searchForm,"adId",e)},expression:"searchForm.adId"}})],1),r._v(" "),s("div",{staticClass:"currItem"},[s("span",{staticClass:"titleName"},[r._v("广告名称")]),r._v(" "),s("el-input",{staticClass:"txtInput",attrs:{placeholder:"广告名称"},model:{value:r.searchForm.adName,callback:function(e){r.$set(r.searchForm,"adName",e)},expression:"searchForm.adName"}})],1),r._v(" "),s("div",{staticClass:"currItem"},[s("span",{staticClass:"titleName"},[r._v("广告类型")]),r._v(" "),s("el-select",{model:{value:r.searchForm.adType,callback:function(e){r.$set(r.searchForm,"adType",e)},expression:"searchForm.adType"}},[s("el-option",{attrs:{label:"不限",value:""}}),r._v(" "),r._l(r.typeList,function(e){return s("el-option",{key:e.code,attrs:{value:e.code,label:e.description}})})],2)],1),r._v(" "),s("div",{staticClass:"currItem"},[s("span",{staticClass:"titleName"},[r._v("投放作者id")]),r._v(" "),s("el-input",{staticClass:"txtInput",attrs:{placeholder:"输入用户id"},model:{value:r.searchForm.cId,callback:function(e){r.$set(r.searchForm,"cId",e)},expression:"searchForm.cId"}})],1),r._v(" "),s("div",{staticClass:"currItem"},[s("span",{staticClass:"titleName"},[r._v("投放作者名")]),r._v(" "),s("el-input",{staticClass:"txtInput",attrs:{placeholder:"输入用户名"},model:{value:r.searchForm.cName,callback:function(e){r.$set(r.searchForm,"cName",e)},expression:"searchForm.cName"}})],1),r._v(" "),s("div",{staticClass:"currItem"},[s("span",{staticClass:"titleName"},[r._v("投放标签")]),r._v(" "),s("el-select",{model:{value:r.searchForm.proTag,callback:function(e){r.$set(r.searchForm,"proTag",e)},expression:"searchForm.proTag"}},[s("el-option",{attrs:{label:"不限",value:""}}),r._v(" "),r._l(r.proTag,function(e){return s("el-option",{key:e.propertyId,attrs:{value:e.propertyId,label:e.propertyName}})})],2)],1),r._v(" "),s("div",{staticClass:"currItem"},[s("span",{staticClass:"titleName"},[r._v("添加时间")]),r._v(" "),s("el-date-picker",{attrs:{type:"daterange","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期","default-time":["00:00:00","23:59:59"],"value-format":"yyyy-MM-dd HH:mm:ss"},model:{value:r.searchForm.addTime,callback:function(e){r.$set(r.searchForm,"addTime",e)},expression:"searchForm.addTime"}})],1),r._v(" "),s("div",{staticClass:"currItem"},[s("span",{staticClass:"titleName"},[r._v("更新时间")]),r._v(" "),s("el-date-picker",{attrs:{type:"daterange","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期","default-time":["00:00:00","23:59:59"],"value-format":"yyyy-MM-dd HH:mm:ss"},model:{value:r.searchForm.updateTime,callback:function(e){r.$set(r.searchForm,"updateTime",e)},expression:"searchForm.updateTime"}})],1),r._v(" "),s("div",{staticClass:"currItem"},[s("span",{staticClass:"titleName"},[r._v("状态")]),r._v(" "),s("el-select",{model:{value:r.searchForm.state,callback:function(e){r.$set(r.searchForm,"state",e)},expression:"searchForm.state"}},[s("el-option",{attrs:{label:"不限",value:""}}),r._v(" "),s("el-option",{attrs:{label:"上架",value:"1"}}),r._v(" "),s("el-option",{attrs:{label:"下架",value:"0"}})],1)],1),r._v(" "),s("aside",{staticClass:"btnBox"},[s("p",{staticClass:"resetBtn",on:{click:function(e){return e.stopPropagation(),r.resetForm(e)}}},[r._v("清空条件")]),r._v(" "),s("p",{staticClass:"screeningBtn",on:{click:function(e){return e.stopPropagation(),r.submitForm(e)}}},[r._v("筛选")])])]),r._v(" "),s("el-button",{staticClass:"NewAd",on:{click:function(e){e.stopPropagation(),r.popupShowFn(1)}}},[s("span",{staticClass:"el-icon-circle-plus"}),r._v(" 新增广告")]),r._v(" "),s("section",[s("el-table",{ref:"multipleTable",staticStyle:{width:"100%","margin-bottom":"20px"},attrs:{data:r.tableData,"default-sort":{prop:"createAdTime",order:"descending"}},on:{"sort-change":r.tableSortChange}},[s("el-table-column",{attrs:{prop:"id",label:"广告ID",width:"130",sortable:"custom","sort-orders":["descending","ascending"]}}),r._v(" "),s("el-table-column",{attrs:{prop:"adProfileName",label:"广告名称",width:"230"}}),r._v(" "),s("el-table-column",{attrs:{prop:"resourceTypeName",label:"广告类型",width:"150"}}),r._v(" "),s("el-table-column",{attrs:{prop:"customerId",label:"投放作者id",width:"130"}}),r._v(" "),s("el-table-column",{attrs:{prop:"customerName",label:"投放作者名",width:"130"}}),r._v(" "),s("el-table-column",{attrs:{prop:"propertyIds",label:"投放标签",width:"130",formatter:r.propertyIdsFor}}),r._v(" "),s("el-table-column",{attrs:{prop:"clickCount",width:"100",label:"点击量",sortable:"custom","sort-orders":["descending","ascending"]}}),r._v(" "),s("el-table-column",{attrs:{prop:"createAdTime",width:"160",label:"添加时间",sortable:"custom","sort-orders":["descending","ascending"],formatter:r.dateForOne}}),r._v(" "),s("el-table-column",{attrs:{prop:"updateAdTime",width:"160",label:"更新时间",sortable:"custom","sort-orders":["descending","ascending"],formatter:r.dateForTwo}}),r._v(" "),s("el-table-column",{attrs:{prop:"specialImageUrl",label:"预览"},scopedSlots:r._u([{key:"default",fn:function(t){return[t.row.specialImageUrl?s("img",{staticClass:"bigImgShow",attrs:{src:"/static/images/icons/icon-picture_hover_tiny.png",alt:""},on:{mouseenter:function(e){r.smallImgMouseenter(t.row)},mouseleave:r.smallImgMouseLeave}}):r._e()]}}])}),r._v(" "),s("el-table-column",{attrs:{prop:"isValid",label:"状态",formatter:r.isValidFor}}),r._v(" "),s("el-table-column",{staticStyle:{"text-align":"center"},attrs:{fixed:"right",width:"210",label:"操作"},scopedSlots:r._u([{key:"default",fn:function(t){return[s("el-button",{staticClass:"editBtn",on:{click:function(e){r.popupShowFn(2,t.row)}},nativeOn:{keydown:function(e){e.preventDefault()}}},[r._v("\n            编辑\n          ")]),r._v(" "),s("el-button",{staticClass:"changeStateBotton",class:0===parseInt(t.row.isValid)?"upBtn":"downBtn",on:{click:function(e){r.upOrDownFn(t.row)}},nativeOn:{keydown:function(e){e.preventDefault()}}},[r._v("\n            "+r._s(0===parseInt(t.row.isValid)?"上架":"下架")+"\n          ")])]}}])})],1),r._v(" "),s("el-pagination",{attrs:{"current-page":r.currentPage,"page-sizes":[20,30,50,100],"page-size":r.maxResult,layout:"total, prev, pager, next, jumper, sizes",total:r.totalNum},on:{"size-change":r.handleSizeChange,"current-change":r.handleCurrentChange}}),r._v(" "),r.bigImgDialogVisible?s("div",{staticClass:"tableBigImgDialog",on:{mouseenter:r.bigImgMouseenter,mouseleave:r.bigImgMouseLeave}},[s("img",{staticClass:"terminalImg",attrs:{src:r.bigImgPath}}),r._v(" "),r.bigImgTitle?s("span",{staticClass:"terminalTxt"},[r._v(r._s(r.bigImgTitle))]):r._e()]):r._e()],1),r._v(" "),s("el-dialog",{attrs:{title:"新增/编辑广告",visible:r.dialogFormVisible,width:"770px"},on:{"update:visible":function(e){r.dialogFormVisible=e}}},[s("el-form",{ref:"descForm",attrs:{model:r.descForm,rules:r.descRules}},[s("el-form-item",{staticClass:"adId",attrs:{label:"广告id","label-width":r.formLabelWidth,prop:"adId"}},[s("el-input",{staticClass:"NewOrEditAd",attrs:{disabled:!r.isNewFlag&&"disabled",placeholder:"请输入广告ID"},model:{value:r.descForm.adId,callback:function(e){r.$set(r.descForm,"adId",e)},expression:"descForm.adId"}}),r._v(" "),r.isNewFlag?s("el-button",{staticClass:"NewOrEditBtn",on:{click:function(e){e.stopPropagation(),r.makeSureFn(1)}}},[r._v("确认")]):r._e()],1),r._v(" "),s("el-form-item",{staticClass:"adName",attrs:{label:"广告名称","label-width":r.formLabelWidth,prop:"adName"}},[r.isNewFlag?s("el-input",{staticClass:"NewOrEditAd",attrs:{placeholder:"请输入广告名称"},model:{value:r.descForm.adName,callback:function(e){r.$set(r.descForm,"adName",e)},expression:"descForm.adName"}}):r._e(),r._v(" "),r.isNewFlag?r._e():s("el-input",{staticClass:"NewOrEditAd",attrs:{type:"textarea",rows:2,resize:"none",disabled:"disabled"},model:{value:r.descForm.adName,callback:function(e){r.$set(r.descForm,"adName",e)},expression:"descForm.adName"}}),r._v(" "),s("el-button",{directives:[{name:"show",rawName:"v-show",value:r.isNewFlag,expression:"isNewFlag"}],staticClass:"NewOrEditBtn",on:{click:function(e){e.stopPropagation(),r.makeSureFn(2)}}},[r._v("确认")])],1),r._v(" "),s("el-form-item",{attrs:{label:"顺序号","label-width":r.formLabelWidth,prop:"adNum"}},[s("el-input",{attrs:{placeholder:"请输入顺序号"},model:{value:r.descForm.adNum,callback:function(e){r.$set(r.descForm,"adNum",e)},expression:"descForm.adNum"}})],1),r._v(" "),s("el-form-item",{attrs:{label:"所属类型","label-width":r.formLabelWidth,prop:"region"}},[s("el-input",{attrs:{disabled:"disabled"},model:{value:r.descForm.region,callback:function(e){r.$set(r.descForm,"region",e)},expression:"descForm.region"}})],1),r._v(" "),s("el-form-item",{directives:[{name:"show",rawName:"v-show",value:18!=r.descForm.resourceType,expression:"descForm.resourceType!=18"}],attrs:{label:"资源id","label-width":r.formLabelWidth,prop:"resourceId"}},[s("el-input",{attrs:{disabled:"disabled"},model:{value:r.descForm.resourceId,callback:function(e){r.$set(r.descForm,"resourceId",e)},expression:"descForm.resourceId"}})],1),r._v(" "),s("el-form-item",{staticClass:"imgUrl",attrs:{label:"1035：216配图",prop:"imgUrl","label-width":r.formLabelWidth}},[s("img",{staticClass:"adImg1035_216",attrs:{src:r.descForm.imgUrl,alt:""}}),r._v(" "),s("span",{staticClass:"tipTxt"},[r._v("适用于病例、文库、视频终端页")])]),r._v(" "),s("el-form-item",{attrs:{label:"定向作者id","label-width":r.formLabelWidth,prop:"customerId"}},[s("el-input",{attrs:{placeholder:"输入需投放的作者id"},model:{value:r.descForm.customerId,callback:function(e){r.$set(r.descForm,"customerId",e)},expression:"descForm.customerId"}})],1),r._v(" "),s("el-form-item",{attrs:{label:"定向标签","label-width":r.formLabelWidth,prop:"proTag"}},[s("el-select",{attrs:{multiple:""},model:{value:r.descForm.proTag,callback:function(e){r.$set(r.descForm,"proTag",e)},expression:"descForm.proTag"}},[s("el-option",{attrs:{label:"不限",value:""}}),r._v(" "),r._l(r.proTag,function(e){return s("el-option",{key:e.propertyId,attrs:{value:e.propertyId,label:e.propertyName}})})],2)],1),r._v(" "),s("el-form-item",{directives:[{name:"show",rawName:"v-show",value:18==r.descForm.resourceType,expression:"descForm.resourceType==18"}],attrs:{label:"链接地址","label-width":r.formLabelWidth,prop:"linkUrl"}},[s("el-input",{attrs:{disabled:"disabled"},model:{value:r.descForm.linkUrl,callback:function(e){r.$set(r.descForm,"linkUrl",e)},expression:"descForm.linkUrl"}})],1)],1),r._v(" "),s("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[s("el-button",{attrs:{type:"primary"},on:{click:function(e){e.stopPropagation(),r.publishFn("descForm")}}},[r._v("发  布")])],1)],1)],1)};s._withStripped=!0;var d=r(59),i=r(69),l=r(68),a={data:function(){return{searchForm:{adId:"",adName:"",adType:"",adNum:"",updateTime:"",addTime:"",state:"",proTag:"",cName:"",cId:""},searchFormSub:{adId:"",adName:"",adType:"",adNum:"",updateTime:"",addTime:"",state:"",proTag:"",cName:"",cId:""},ruleForm:{},rules:{},axiosNum:0,totalNum:0,currentPage:1,firstResult:0,maxResult:20,pageSize:20,tableData:[],bigImgDialogVisible:!1,dialogFormVisible:!1,descForm:{adId:"",region:"",resourceType:"",adName:"",adNum:"",resourceId:"",linkUrl:"",adSureId:"",adSureName:"",imgUrl:"",imgType:"",advMaterialId:"",proTag:"",customerId:""},descFormSub:{adId:"",adName:"",adNum:"",proTag:"",customerId:""},descRules:{adNum:[{required:!0,message:"请填写顺序号",trigger:"change"}],adId:[{required:!0,message:"广告id输入有误，请重新输入",trigger:"change"}],adName:[{required:!0,message:"广告名称输入有误，请重新输入",trigger:"change"}],imgUrl:[{required:!0,message:"该广告无对应比例配图，无法发布",trigger:"change"}],proTag:[{required:!0,message:"定向作者id、定向标签至少有一个填写才可发布",trigger:"change"}],customerId:[{required:!0,message:"定向作者id、定向标签至少有一个填写才可发布",trigger:"change"}]},formLabelWidth:"120px",addSearchId:"",addSearchName:"",isNewFlag:!1,typeList:[],bigImgTitle:"",bigImgType:"",sortBy:"4",asc:"1",isClickIdBtn:!1,proTag:[],recommendType:6,propertyTypeId:8}},methods:{smallImgMouseenter:function(e){this.bigImgTimer&&clearTimeout(this.bigImgTimer),e.specialImageUrl?(this.bigImgDialogVisible=!0,this.bigImgPath=e.specialImageUrl,this.bigImgType=e.resourceType,this.bigImgTitle=e.resourceName,this.$forceUpdate()):(this.bigImgPath="",this.bigImgType="",this.bigImgTitle="")},smallImgMouseLeave:function(){var e=this;e.bigImgTimer=setTimeout(function(){e.bigImgDialogVisible=!1},1e3)},bigImgMouseenter:function(){this.bigImgTimer&&clearTimeout(this.bigImgTimer)},bigImgMouseLeave:function(){this.bigImgDialogVisible=!1},popupShowFn:function(e,t){this.dialogFormVisible=!0,this.isNewFlag=!0,1===e?(this.$refs.descForm&&this.$refs.descForm.resetFields(),this.descForm.resourceType="",this.descFormSub.adId="",this.descFormSub.adName="",this.descFormSub.adNum=""):(setTimeout(function(){this.$refs.descForm&&this.$refs.descForm.resetFields(),this.isNewFlag=!1,this.descForm.id=t.id,this.descForm.adId=t.id,this.descForm.region=1===t.resourceType||2===t.resourceType||7===t.resourceType?"单篇内容":t.resourceTypeName,this.descForm.advMaterialId=t.advMaterialId,this.descForm.resourceType=t.resourceType,this.descForm.adName=t.adProfileName,this.descForm.adNum=t.sortId,this.descForm.resourceId=t.resourceId,this.descForm.linkUrl=t.linkUrl,this.descForm.imgUrl=t.resourceImageUrl,this.descForm.imgType=t.resourceType,this.descForm.customerId=t.customerId,this.descForm.proTag=this.handleProTag(t.propertyIds),this.descFormSub.adId=t.id,this.descFormSub.adNum=this.descForm.adNum,this.descFormSub.adName=t.adProfileName}.bind(this),0),this.$forceUpdate())},handleProTag:function(e){var r=this,s=[];return""===e?[]:((e=e.split(",")).forEach(function(t){r.proTag.forEach(function(e){parseInt(t)===e.propertyId&&s.push(e.propertyId)})}),s)},submitForm:function(){this.searchFormSub.adId=this.searchForm.adId,this.searchFormSub.adName=this.searchForm.adName,this.searchFormSub.adType=this.searchForm.adType,this.searchFormSub.cId=this.searchForm.cId,this.searchFormSub.cName=this.searchForm.cName,this.searchFormSub.proTag=this.searchForm.proTag,this.searchFormSub.addTime=this.searchForm.addTime,this.searchFormSub.updateTime=this.searchForm.updateTime,this.searchFormSub.state=this.searchForm.state,this.firstResult=0,this.currentPage=1,this.getListFn()},resetForm:function(){this.searchForm.adId="",this.searchForm.adName="",this.searchForm.adType="",this.searchForm.cId="",this.searchForm.cName="",this.searchForm.proTag="",this.searchForm.addTime="",this.searchForm.updateTime="",this.searchForm.state=""},makeSureFn:function(e){if(1===e){if(!this.descForm.adId||!/^[\d]/g.test(this.descForm.adId))return this.$refs.descForm&&this.$refs.descForm.resetFields(),this.$refs.descForm.validateField("adId",function(){}),!1;this.descFormSub.adName="",this.descFormSub.adId=this.descForm.adId,this.descFormSub.adNum=this.descForm.adNum,this.descFormSub.customerId=this.descForm.customerId,this.descFormSub.proTag=this.descForm.proTag,this.getDescFn()}else{if(!this.descForm.adName)return this.$refs.descForm&&this.$refs.descForm.resetFields(),this.$refs.descForm.validateField("adName",function(){}),!1;this.descFormSub.adId="",this.descFormSub.adNum=this.descForm.adNum,this.descFormSub.adName=this.descForm.adName,this.descFormSub.customerId=this.descForm.customerId,this.descFormSub.proTag=this.descForm.proTag,this.getDescFn()}},publishFn:function(e){var a=this;this.descForm.adId=this.descFormSub.adId,this.descForm.adName=this.descFormSub.adName,(""!==this.descForm.customerId||0<this.descForm.proTag.length)&&(this.descFormSub.customerId=this.descForm.customerId,this.descFormSub.proTag=this.descForm.proTag,""!==this.descForm.customerId?this.descForm.proTag=" ":this.descForm.customerId=" "),this.$refs[e].validate(function(e){if(!e)return!1;var t="";for(var r in a.descFormSub.proTag)t+=a.descFormSub.proTag[r]+",";0<t.length&&(t=t.substring(0,t.length-1));var s={id:a.descForm.id,advMaterialId:a.descForm.advMaterialId,adProfileName:a.descFormSub.adName,resourceType:a.descForm.resourceType,resourceId:a.descForm.resourceId,recommendType:a.recommendType,state:1,sortId:a.descForm.adNum,customerId:a.descFormSub.customerId,propertyIds:t};a.getListAxios(i.a.cmsAdvertisementSave.url,s,function(e){e&&e.data&&e.data.responseObject&&e.data.responseObject.responseStatus?(a.dialogFormVisible=!1,a.firstResult=0,a.currentPage=1,a.descFormSub.adId="",a.descFormSub.adName="",a.getListFn()):(a.dialogFormVisible=!1,a.$message.error("发布失败请重试"))},"操作失败，请刷新重试",i.a.cmsAdvertisementSave.type)})},upOrDownFn:function(t){var r=this,e="";e=1===parseInt(t.isValid)?"确定将此条广告下架么？":"确定将此条广告上架么？",this.$allin_confirm({title:"提示",content:e,done:function(){var e={id:t.id,advMaterialId:t.advMaterialId,adProfileName:t.adProfileName,resourceType:t.resourceType,resourceId:t.resourceId,recommendType:r.recommendType,state:1,sortId:t.sortId,isValid:0===t.isValid?1:0};r.getListAxios(i.a.cmsAdvertisementSave.url,e,function(e){e&&e.data&&e.data.responseObject&&e.data.responseObject.responseStatus&&(r.dialogFormVisible=!1,r.firstResult=0,r.currentPage=1,r.getListFn())},"操作失败，请刷新重试",i.a.cmsAdvertisementSave.type)}})},tableSortChange:function(e){this.currentPage=1,this.firstResult=0,"advMaterialId"===e.prop?this.sortBy=2:"sortId"===e.prop?this.sortBy=5:"clickCount"===e.prop?this.sortBy=6:"createAdTime"===e.prop?this.sortBy=4:"updateAdTime"===e.prop&&(this.sortBy=7),this.asc="ascending"===e.order?0:1,this.getListFn()},getListFn:function(){var t=this,e={recommendType:this.recommendType,id:this.searchFormSub.adId&&0<this.searchFormSub.adId.length?this.searchFormSub.adId:void 0,adProfileName:this.searchFormSub.adName&&0<this.searchFormSub.adName.length?this.searchFormSub.adName:void 0,resourceType:this.searchFormSub.adType?this.searchFormSub.adType:void 0,customerId:this.searchFormSub.cId?this.searchFormSub.cId:void 0,customerName:this.searchFormSub.cName?this.searchFormSub.cName:void 0,propertyId:this.searchFormSub.proTag?this.searchFormSub.proTag:void 0,createStartTime:this.searchFormSub.addTime?this.searchFormSub.addTime[0].substring(0,10):void 0,createEndTime:this.searchFormSub.addTime?this.searchFormSub.addTime[1].substring(0,10):void 0,updateStartTime:this.searchFormSub.updateTime?this.searchFormSub.updateTime[0].substring(0,10):void 0,updateEndTime:this.searchFormSub.updateTime?this.searchFormSub.updateTime[1].substring(0,10):void 0,isValid:this.searchFormSub.state&&0<this.searchFormSub.state.length?this.searchFormSub.state:void 0,state:1,sortBy:this.sortBy,asc:this.asc,sortId:this.searchFormSub.adNum&&0<this.searchFormSub.adNum.length?this.searchFormSub.adNum:void 0,firstResult:this.firstResult,maxResult:this.maxResult,queryLike:1};this.getListAxios(i.a.getAdList.url,e,function(e){t.tableData=e.data.responseObject.items,t.totalNum=e.data.responseObject.totalCount})},getDescFn:function(){var r=this,e={id:this.descFormSub.adId?this.descFormSub.adId:void 0,adProfileName:this.descFormSub.adName?this.descFormSub.adName:void 0,recommendType:this.recommendType};this.getListAxios(i.a.getAdMaterialList.url,e,function(e){if(e&&e.data&&e.data.responseObject&&0<e.data.responseObject.items.length){var t=e.data.responseObject.items[0];r.descForm.adId=t.id,r.descForm.advMaterialId=t.advMaterialId,r.descForm.region=1===t.resourceType||2===t.resourceType||7===t.resourceType?"单篇内容":t.resourceTypeName,r.descForm.resourceType=t.resourceType,r.descForm.adName=t.adProfileName,r.descForm.adNum=t.sortId,r.descForm.resourceId=t.resourceId,r.descForm.linkUrl=t.linkUrl,r.descForm.imgUrl=t.resourceImageUrl,r.descFormSub.adId=t.id,r.descFormSub.adNum=r.descForm.adNum,r.descFormSub.adName=t.adProfileName,r.descForm.imgUrl&&r.$refs.descForm.validateField("imgUrl")}else r.descFormSub.adName?(r.$refs.descForm.resetFields(),r.descForm.adName="",r.$refs.descForm.validateField("adName",function(){})):(r.$refs.descForm.resetFields(),r.descForm.adId="",r.$refs.descForm.validateField("adId",function(){}))})},isValidFor:function(e){return 1===e.isValid?"已上架":"已下架"},dateForOne:function(e){if(e.createAdTime)return e.createAdTime.substring(0,19)},dateForTwo:function(e){if(e.updateAdTime)return e.updateAdTime.substring(0,19)},handleSizeChange:function(e){this.pageSize=e,this.maxResult=e,this.currentPage=1,this.firstResult=0,this.getListFn()},handleCurrentChange:function(e){this.firstResult=(e-1)*this.pageSize,this.currentPage=e,this.getListFn()},getAdTypeList:function(){var t=this;this.getListAxios(i.a.getAdTypeList.url,{},function(e){t.typeList=e.data.responseObject})},getProfessionalTags:function(){var t=this,e={propertyTypeId:this.propertyTypeId};this.getListAxios(i.a.getProfessionalTags.url,e,function(e){e&&e.data&&e.data.responseObject&&e.data.responseObject.items&&(t.proTag=e.data.responseObject.items)})},propertyIdsFor:function(e){if(e&&e.propertyIds){var t=e.propertyIds.split(","),r="";for(var s in t)for(var a in this.proTag)parseInt(this.proTag[a].propertyId)===parseInt(t[s])&&(r+=this.proTag[a].propertyName+"、");return r.substring(0,r.length-1)}return"-"},getListAxios:function(e,t,r,s,a,i){var o=this,n=this;l.default.openLoading("加载中..."),n.axiosNum++,"post"===a?Object(d.a)({method:"post",url:e,data:t}).then(function(e){n.axiosNum--,r&&r(e),n.axiosNum<=0&&l.default.closeLoading()}).catch(function(e){i&&i(),n.axiosNum--,n.axiosNum<=0&&l.default.closeLoading(),o.$allin_confirm({title:"提示",content:s||"获取失败，请刷新重试",type:"notice"})}):Object(d.a)({method:"get",url:e,params:t}).then(function(e){r&&r(e),n.axiosNum--,n.axiosNum<=0&&l.default.closeLoading()}).catch(function(e){i&&i(),n.axiosNum--,n.axiosNum<=0&&l.default.closeLoading(),o.$allin_confirm({title:"提示",content:s||"获取失败，请刷新重试",type:"notice"})})}},mounted:function(){var t=this;this.getAdTypeList(),this.getProfessionalTags(),document.onkeydown=function(e){13===e.keyCode&&(t.bigImgDialogVisible||t.submitForm())}},destroyed:function(){l.default.goBack()}},o=(r(828),r(58)),n=Object(o.a)(a,s,[],!1,null,null,null);n.options.__file="src/views/terminalAdvertisement/terminalAdvertisement.vue";t.default=n.exports}}]);