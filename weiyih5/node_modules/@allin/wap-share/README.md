# wapShare
> h5 分享模块

###代码路径

[paas路径](http://192.168.1.78/qiaoliang/paas/tree/master/allin/allin/wapShare)

[codePath](http://192.168.1.184:7002/package/@allin/wap-share)

## 使用方法

```
/**
 * @component-name:
 * @desc: 调用方法：shareAll(obj,weChat,trigger);
 *  (【obj必填，可为{}】)，weChat(必填) [true只做微信分享，false分享微信及微博，空间], trigger（选填[$('#id')或$('.class')])，
 * @example:
 *          shareAll({
                weixinConfigUrl:'',                                             //【可选】获取微信配置接口，【默认：唯医的】
                weixinMask:"<section class="ev-weixinMask"></section>",         //【可选】可配置微信浏览器中分享遮罩模板 ★★注意：在配置遮罩模板时必须带 ev-weixinMask 类【默认的类样式在唯医base.css中】
                shareTemplate:'<section class="ev-shareTemplate"></section>'，  //【可选】可以配置分享模板   ★★注意：分享模板顶级元素加类名 ev-shareTemplate 并且加“on”类代表显示，去除‘on’隐藏
                title:'11113',                                                  //【可选】分享标题
                url:"http://www.allinmd.cn",                                    //【可选】不传默认取当前地址
                pic:"",                                                         //【可选】分享图片
                trendUrl:"",                                                    //【可选】分享动态的请求连接  //不需要动态分享就不传
                noPJ:0,                                                         //【可选】0：分享动态给后台的参数需要转为paramJson ,1:不需要
                data:{},                                                        //【可选】分享动态传给后台的参数
                callback:function(){},                                          //【可选】分享动态后成功后的回调函数
                wxTitle:'wxxxx',                                                //【可选】微信分享好友标题【默认取title】
                wxDesc:'',                                                      //【可选】微信分享好友描述
                timeLineTitle:'timelIne',                                       //【可选】分享到朋友圈标题【默认取title】
                sinaTitle:'sina description',                                   //【可选】分享到新浪的话术【默认取title】
                desc:"",                                                        //
                qzoneTitle:'',                                                  //【可选】qq空间title【默认取title】
                summary:"this is summary",                                      //【可选】qq空间的描述
                noSelfInit:  true or false,                                     //【可选】是否自执行【默认false】，使用场景列表类的分享点击时再触发 Weixin_share
                noWXShare:false,                                                //【可选】是否禁止微信分享话术【默认false】
                qShareLog:function(x){                                          //【可选】分享日志：新浪，空间点击按钮即执行
                    if(x=='sina'){
                        console.log('sina');
                    }else{
                        console.log('qzone');
                    }
                },
                trendCallBack:function(){},                                     //唯医之外的其他站点需要做朋友圈，动态分享时自定义函数
                fnMessageSuc:function(){},                                      //【可选】分享好友成功回调
                fnTimelineSuc:function(){}，                                      //【可选】分享朋友圈成功回调
                triggerEventFn:function(){}                                        //点击trigger时事件函数（埋点）
            },false,$('.share'));
 * @depend: jquery, jweixin-1.0.0.js[唯医分享动态朋友圈额外需要引用comm.func.js,module.user.js,"/js/comm/comm-customer.js","/js/comm/comm-data.js","/js/comm/comm_service.js"]
 * @warn:   ★★注意1：在配置遮罩模板时必须带 ev-weixinMask 类
 *          ★★注意2：在非微信浏览器中，分享模板顶级元素加类名 ev-shareTemplate 并且加“on”类代表显示，去除‘on’隐藏
 *          ★★注意3：在非微信浏览器中，点击分享到空间，新浪和动态的每个项目有个属性 “ref” ，且类名为ev-shareTemplateItem，取消分享的按钮id #EV-cancelShare
 *          ★★注意4: 不需要再额外给trigger加click事件，且trigger为$(dom)元素
 * @udpate: 1 :jweixin-1.0.0.js 内置到些函数上方，无需再单独引用
 *          2 :非微信浏览器不再请求jsconfig参数
 *          3: 新增经纬度获取 （2017-7-19）
 * @date: modified on 2017/03/07
 * @author: sunhaibin
 */
```